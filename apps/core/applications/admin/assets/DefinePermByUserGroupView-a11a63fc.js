import{R as e,$ as t,aG as r,aH as n,aI as o,m as i,ac as a,aq as l,ar as s,aJ as c,aK as u,w as d,d as h,_ as f,g as p,aE as g,av as v,aL as m,aD as y,b,x as _,c as S,I as w,i as C,a as I,aM as T,u as x,aN as R,aO as O,B as k,aP as P,a9 as D,aQ as E,aR as M,a6 as z,a0 as A,aS as N,aT as L,aU as j,aV as F,aW as G,aX as H,aY as V,s as W,n as U,N as B,r as $,aZ as q,a_ as K,a$ as Q,b0 as Y,b1 as X,b2 as J,b3 as Z,aF as ee,b4 as te,b5 as re,b6 as ne,b7 as oe,f as ie,b8 as ae,b9 as le,ba as se,bb as ce,ab as ue,bc as de,bd as he,be as fe,a8 as pe,bf as ge,a5 as ve,bg as me,bh as ye,a1 as be,a2 as _e,bi as Se,bj as we,bk as Ce,bl as Ie,ae as Te,bm as xe,bn as Re,bo as Oe,T as ke,V as Pe,bp as De,o as Ee,j as Me,h as ze,L as Ae,Q as Ne,q as Le,bq as je,br as Fe,bs as Ge,F as He,bt as Ve,bu as We,bv as Ue,bw as Be,bx as $e,by as qe,bz as Ke,bA as Qe,bB as Ye,bC as Xe,bD as Je,M as Ze,E as et}from"./index-da778430.js";import{b as tt,M as rt,T as nt,C as ot,u as it,H as at}from"./Header-90427ac0.js";import{C as lt}from"./Checkbox-69de3138.js";import{D as st}from"./Dropdown-4600c907.js";import{I as ct}from"./Input-94df8f06.js";import{S as ut}from"./Tab-13a14f2c.js";function dt(){var n=e.useContext(t()).client;return r(n,33),n}var ht=function(e){return{active:!1,type:"ellipsisItem",value:e}},ft=function(e){return{active:!1,type:"prevItem",value:Math.max(1,e-1)}},pt=function(e,t){return{active:!1,type:"nextItem",value:Math.min(e+1,t)}},gt=function(e){return{active:!1,type:"lastItem",value:e}},vt=Math.ceil,mt=Math.max;var yt,bt=function(e,t,r){return r&&"number"!=typeof r&&n(e,t,r)&&(t=r=void 0),e=o(e),void 0===t?(t=e,e=0):t=o(t),function(e,t,r,n){for(var o=-1,i=mt(vt((t-e)/(r||1)),0),a=Array(i);i--;)a[n?i:++o]=e,e+=r;return a}(e,t,r=void 0===r?e<t?1:-1:o(r),yt)};const _t=bt;var St=function(e,t,r){var n=t-1;return(n!==e+1?ht:r)(n)},wt=function(e,t,r){var n=e+1;return(n!==t-1?ht:r)(n)},Ct=function(e,t,r){return i(_t(e,t+1),r)};const It=function(e){var t,r,n,o={activePage:+(t=e).activePage,boundaryRange:+t.boundaryRange,hideEllipsis:!!t.hideEllipsis,siblingRange:+t.siblingRange,totalPages:+t.totalPages},i=o.activePage,a=o.totalPages,l=function(e){return function(t){return{active:e===t,type:"pageItem",value:t}}}(i),s=(n=(r=o).boundaryRange,1+(r.hideEllipsis?0:2)+2*r.siblingRange+2*n>=r.totalPages?Ct(1,a,l):function(e,t){var r=e.activePage,n=e.boundaryRange,o=e.hideEllipsis,i=e.siblingRange,a=e.totalPages,l=o?0:1,s=n,c=Ct(1,s,t),u=a+1-n,d=Ct(u,a,t),h=Math.min(Math.max(r-i,s+l+1),u-l-2*i-1),f=h+2*i,p=Ct(h,f,t);return[].concat(c,[!o&&St(s,h,t)],p,[!o&&wt(f,u,t)],d).filter(Boolean)}(o,l));return[{active:!1,type:"firstItem",value:1},ft(i)].concat(s,[pt(i,a),gt(a)])};var Tt=Object.create,xt=function(){function e(){}return function(t){if(!a(t))return{};if(Tt)return Tt(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const Rt=xt;var Ot=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).handleClick=function(e){s(t.props,"onClick",e,t.props)},t.handleKeyDown=function(e){s(t.props,"onKeyDown",e,t.props),c.getCode(e)===c.Enter&&s(t.props,"onClick",e,t.props)},t.handleOverrides=function(){return{onClick:t.handleClick,onKeyDown:t.handleKeyDown}},t}return l(t,e),t.prototype.render=function(){var e=this.props,t=e.active,r=e.type,n=this.props.disabled||"ellipsisItem"===r;return u.create(this.props,{defaultProps:{active:t,"aria-current":t,"aria-disabled":n,disabled:n,onClick:this.handleClick,onKeyDown:this.handleKeyDown,tabIndex:n?-1:0},overrideProps:this.handleOverrides})},t}(d.Component);Ot.handledProps=["active","disabled","onClick","onKeyDown","type"],Ot.propTypes={},Ot.create=h(Ot,(function(e){return{content:e}}));const kt=Ot;var Pt=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).handleItemClick=function(t,r){var n=r.value;+e.state.activePage!=+n&&(e.setState({activePage:n}),s(e.props,"onPageChange",t,f({},e.props,{activePage:n})))},e.handleItemOverrides=function(t,r,n){return function(o){return{active:t,type:r,key:r+"-"+n,onClick:function(t,r){s(o,"onClick",t,r),"ellipsisItem"!==r.type&&e.handleItemClick(t,r)}}}},e}l(r,t);var n=r.prototype;return n.getInitialAutoControlledState=function(){return{activePage:1}},n.render=function(){var t=this,n=this.props,o=n["aria-label"],a=n.boundaryRange,l=n.disabled,s=n.ellipsisItem,c=n.siblingRange,u=n.totalPages,d=this.state.activePage,h=It({activePage:d,boundaryRange:a,hideEllipsis:m(s),siblingRange:c,totalPages:u}),v=p(r,this.props);return e.createElement(g,f({},v,{"aria-label":o,pagination:!0,role:"navigation"}),i(h,(function(e){var r=e.active,n=e.type,o=e.value;return kt.create(t.props[n],{defaultProps:{content:o,disabled:l,value:o},overrideProps:t.handleItemOverrides(r,n,o)})})))},r}(v);function Dt(t){var r=t.slider,n=t.toggle,o=t.type,i=p(Dt,t),a=!(r||n)||void 0;return e.createElement(lt,f({},i,{type:o,radio:a,slider:r,toggle:n}))}function Et(t){return e.createElement(st,f({},t,{selection:!0}))}Pt.handledProps=["activePage","aria-label","boundaryRange","defaultActivePage","disabled","ellipsisItem","firstItem","lastItem","nextItem","onPageChange","pageItem","prevItem","siblingRange","totalPages"],Pt.propTypes={},Pt.autoControlledProps=["activePage"],Pt.defaultProps={"aria-label":"Pagination Navigation",boundaryRange:1,ellipsisItem:"...",firstItem:{"aria-label":"First item",content:"«"},lastItem:{"aria-label":"Last item",content:"»"},nextItem:{"aria-label":"Next item",content:"⟩"},pageItem:{},prevItem:{"aria-label":"Previous item",content:"⟨"},siblingRange:1},Pt.Item=kt,Dt.handledProps=["slider","toggle","type"],Dt.propTypes={},Dt.defaultProps={type:"radio"},Et.handledProps=["options"],Et.propTypes={},Et.Divider=st.Divider,Et.Header=st.Header,Et.Item=st.Item,Et.Menu=st.Menu;var Mt=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).ref=d.createRef(),e.focus=function(){return e.ref.current.focus()},e.handleChange=function(t){var r=y(t,"target.value");s(e.props,"onChange",t,f({},e.props,{value:r}))},e.handleInput=function(t){var r=y(t,"target.value");s(e.props,"onInput",t,f({},e.props,{value:r}))},e}return l(r,t),r.prototype.render=function(){var t=this.props,n=t.rows,o=t.value,i=p(r,this.props),a=b(r,this.props);return e.createElement(_,{innerRef:this.ref},e.createElement(a,f({},i,{onChange:this.handleChange,onInput:this.handleInput,rows:n,value:o})))},r}(d.Component);Mt.handledProps=["as","onChange","onInput","rows","value"],Mt.propTypes={},Mt.defaultProps={as:"textarea",rows:3};const zt=Mt;function At(t){var r=t.children,n=t.className,o=t.content,i=t.icon,a=S("divider",n),l=p(At,t),s=b(At,t);return m(i)?m(o)?e.createElement(s,f({},l,{className:a}),C(r)?"/":r):e.createElement(s,f({},l,{className:a}),o):w.create(i,{defaultProps:f({},l,{className:a}),autoGenerateKey:!1})}At.handledProps=["as","children","className","content","icon"],At.propTypes={},At.create=h(At,(function(e){return{icon:e}}));var Nt=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).computeElementType=function(){var t=e.props,r=t.link,n=t.onClick;if(r||n)return"a"},e.handleClick=function(t){return s(e.props,"onClick",t,e.props)},e}return l(r,t),r.prototype.render=function(){var t=this.props,n=t.active,o=t.children,i=t.className,a=t.content,l=t.href,s=S(I(n,"active"),"section",i),c=p(r,this.props),u=b(r,this.props,this.computeElementType);return e.createElement(u,f({},c,{className:s,href:l,onClick:this.handleClick}),C(o)?a:o)},r}(d.Component);function Lt(t){var r=t.children,n=t.className,o=t.divider,i=t.icon,a=t.sections,l=t.size,s=S("ui",l,"breadcrumb",n),c=p(Lt,t),u=b(Lt,t);if(!C(r))return e.createElement(u,f({},c,{className:s}),r);var d=[];return T(a,(function(e,t){var r=Nt.create(e);if(d.push(r),t!==a.length-1){var n=r.key+"_divider"||JSON.stringify(e);d.push(At.create({content:o,icon:i,key:n}))}})),e.createElement(u,f({},c,{className:s}),d)}function jt(t){var r=t.children,n=t.className,o=t.content,i=t.control,a=t.disabled,l=t.error,s=t.inline,c=t.label,u=t.required,h=t.type,g=t.width,v=t.id,_=S(I(a,"disabled"),I(l,"error"),I(s,"inline"),I(u,"required"),x(g,"wide"),"field",n),w=p(jt,t),T=b(jt,t),k=y(l,"pointing","above"),P=R.create(l,{autoGenerateKey:!1,defaultProps:{prompt:!0,pointing:k,id:v?v+"-error-message":void 0,role:"alert","aria-atomic":!0}}),D=("below"===k||"right"===k)&&P,E=("above"===k||"left"===k)&&P;if(m(i))return m(c)?e.createElement(T,f({},w,{className:_,id:v}),C(r)?o:r):e.createElement(T,f({},w,{className:_,id:v}),D,O(c,{autoGenerateKey:!1}),E);var M={"aria-describedby":v&&l?v+"-error-message":null,"aria-invalid":!!l||void 0},z=f({},w,{content:o,children:r,disabled:a,required:u,type:h,id:v});return"input"!==i||"checkbox"!==h&&"radio"!==h?i===lt||i===Dt?e.createElement(T,{className:_},D,d.createElement(i,f({},M,z,{label:c})),E):e.createElement(T,{className:_},O(c,{defaultProps:{htmlFor:v},autoGenerateKey:!1}),D,d.createElement(i,f({},M,z)),E):e.createElement(T,{className:_},e.createElement("label",null,D,d.createElement(i,f({},M,z))," ",c,E))}function Ft(t){var r=t.control,n=p(Ft,t),o=b(Ft,t);return e.createElement(o,f({},n,{control:r}))}function Gt(t){var r=t.control,n=p(Gt,t),o=b(Gt,t);return e.createElement(o,f({},n,{control:r}))}function Ht(t){var r=t.control,n=p(Ht,t),o=b(Ht,t);return e.createElement(o,f({},n,{control:r}))}function Vt(t){var r=t.children,n=t.className,o=t.grouped,i=t.inline,a=t.unstackable,l=t.widths,s=S(I(o,"grouped"),I(i,"inline"),I(a,"unstackable"),x(l,null,!0),"fields",n),c=p(Vt,t),u=b(Vt,t);return e.createElement(u,f({},c,{className:s}),r)}function Wt(t){var r=t.control,n=p(Wt,t),o=b(Wt,t);return e.createElement(o,f({},n,{control:r}))}function Ut(t){var r=t.control,n=p(Ut,t),o=b(Ut,t);return e.createElement(o,f({},n,{control:r}))}function Bt(t){var r=t.control,n=t.options,o=p(Bt,t),i=b(Bt,t);return e.createElement(i,f({},o,{control:r,options:n}))}function $t(t){var r=t.control,n=p($t,t),o=b($t,t);return e.createElement(o,f({},n,{control:r}))}Nt.handledProps=["active","as","children","className","content","href","link","onClick"],Nt.propTypes={},Nt.create=h(Nt,(function(e){return{content:e,link:!0}})),Lt.handledProps=["as","children","className","divider","icon","sections","size"],Lt.propTypes={},Lt.Divider=At,Lt.Section=Nt,jt.handledProps=["as","children","className","content","control","disabled","error","id","inline","label","required","type","width"],jt.propTypes={},Ft.handledProps=["as","control"],Ft.propTypes={},Ft.defaultProps={as:jt,control:k},Gt.handledProps=["as","control"],Gt.propTypes={},Gt.defaultProps={as:jt,control:lt},Ht.handledProps=["as","control"],Ht.propTypes={},Ht.defaultProps={as:jt,control:st},Vt.handledProps=["as","children","className","grouped","inline","unstackable","widths"],Vt.propTypes={},Wt.handledProps=["as","control"],Wt.propTypes={},Wt.defaultProps={as:jt,control:ct},Ut.handledProps=["as","control"],Ut.propTypes={},Ut.defaultProps={as:jt,control:Dt},Bt.handledProps=["as","control","options"],Bt.propTypes={},Bt.defaultProps={as:jt,control:Et},$t.handledProps=["as","control"],$t.propTypes={},$t.defaultProps={as:jt,control:zt};var qt=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).handleSubmit=function(t){"string"!=typeof e.props.action&&s(t,"preventDefault");for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];s.apply(void 0,[e.props,"onSubmit",t,e.props].concat(n))},e}return l(r,t),r.prototype.render=function(){var t=this.props,n=t.action,o=t.children,i=t.className,a=t.error,l=t.inverted,s=t.loading,c=t.reply,u=t.size,d=t.success,h=t.unstackable,g=t.warning,v=t.widths,m=S("ui",u,I(a,"error"),I(l,"inverted"),I(s,"loading"),I(c,"reply"),I(d,"success"),I(h,"unstackable"),I(g,"warning"),x(v,null,!0),"form",i),y=p(r,this.props),_=b(r,this.props);return e.createElement(_,f({},y,{action:n,className:m,onSubmit:this.handleSubmit}),o)},r}(d.Component);qt.handledProps=["action","as","children","className","error","inverted","loading","onSubmit","reply","size","success","unstackable","warning","widths"],qt.propTypes={},qt.defaultProps={as:"form"},qt.Field=jt,qt.Button=Ft,qt.Checkbox=Gt,qt.Dropdown=Ht,qt.Group=Vt,qt.Input=Wt,qt.Radio=Ut,qt.Select=Bt,qt.TextArea=$t;const Kt=qt;function Qt(t){var r=t.children,n=t.className,o=t.clearing,i=t.content,a=t.fitted,l=t.hidden,s=t.horizontal,c=t.inverted,u=t.section,d=t.vertical,h=S("ui",I(o,"clearing"),I(a,"fitted"),I(l,"hidden"),I(s,"horizontal"),I(c,"inverted"),I(u,"section"),I(d,"vertical"),"divider",n),g=p(Qt,t),v=b(Qt,t);return e.createElement(v,f({},g,{className:h}),C(r)?i:r)}Qt.handledProps=["as","children","className","clearing","content","fitted","hidden","horizontal","inverted","section","vertical"],Qt.propTypes={};var Yt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)D(t,E(e)),e=M(e);return t}:P;const Xt=Yt;var Jt=Object.prototype.hasOwnProperty;function Zt(e){if(!a(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=z(e),r=[];for(var n in e)("constructor"!=n||!t&&Jt.call(e,n))&&r.push(n);return r}function er(e){return A(e)?N(e,!0):Zt(e)}function tr(e){return L(e,er,Xt)}function rr(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var nr=d.memo((function(e){var t=e.connect,r=e.src;return d.useEffect((function(){if("undefined"!=typeof Image){var e=!1,n=new Image;return n.src=r,n.onload=function(){t(n),e=!0},function(){e&&t(null)}}})),null}));nr.displayName="DragPreviewImage";var or="undefined"!=typeof window?d.useLayoutEffect:d.useEffect;function ir(e,t,r,n){var o=r?r.call(n,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),s=0;s<i.length;s++){var c=i[s];if(!l(c))return!1;var u=e[c],d=t[c];if(!1===(o=r?r.call(n,u,d,c):void 0)||void 0===o&&u!==d)return!1}return!0}function ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){o=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sr(e,t,r){var n=ar(d.useState((function(){return t(e)})),2),o=n[0],i=n[1],a=d.useCallback((function(){var n=t(e);ir(o,n)||(i(n),r&&r())}),[o,e,r]);return or(a,[]),[o,a]}function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){o=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ur(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dr(e,t,r){var n=cr(sr(e,t,r),2),o=n[0],i=n[1];return or((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(i,{handlerIds:[t]})}),[e,i]),o}function hr(e,t,r){var n=r.getRegistry(),o=n.addTarget(e,t);return[o,function(){return n.removeTarget(o)}]}function fr(e,t,r){var n=r.getRegistry(),o=n.addSource(e,t);return[o,function(){return n.removeSource(o)}]}function pr(){var e=d.useContext(j).dragDropManager;return F(null!=e,"Expected drag drop context"),e}function gr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var vr=!1,mr=!1,yr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceId=null,this.internalMonitor=t.getMonitor()}var t,r,n;return t=e,(r=[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){F(!vr,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return vr=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{vr=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;F(!mr,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return mr=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{mr=!1}}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"isDraggingSource",value:function(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function(e,t){return this.internalMonitor.isOverTarget(e,t)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&gr(t.prototype,r),n&&gr(t,n),e}();function br(e,t){"function"==typeof e?e(t):e.current=t}function _r(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!d.isValidElement(t)){var n=t;return e(n,r),n}var o=t;return function(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}(o),function(e,t){var r=e.ref;return F("string"!=typeof r,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),r?d.cloneElement(e,{ref:function(e){br(r,e),br(t,e)}}):d.cloneElement(e,{ref:t})}(o,r?function(t){return e(t,r)}:e)}}function Sr(e){var t={};return Object.keys(e).forEach((function(r){var n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{var o=_r(n);t[r]=function(){return o}}})),t}function wr(e){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cr(e){return null!==e&&"object"===wr(e)&&Object.prototype.hasOwnProperty.call(e,"current")}function Ir(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Tr=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=Sr({dragSource:function(e,t){r.clearDragSource(),r.dragSourceOptions=t||null,Cr(e)?r.dragSourceRef=e:r.dragSourceNode=e,r.reconnectDragSource()},dragPreview:function(e,t){r.clearDragPreview(),r.dragPreviewOptions=t||null,Cr(e)?r.dragPreviewRef=e:r.dragPreviewNode=e,r.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}var t,r,n;return t=e,(r=[{key:"receiveHandlerId",value:function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e)}},{key:"reconnectDragPreview",value:function(){var e=this.dragPreview,t=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();t&&this.disconnectDragPreview(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions)):this.lastConnectedDragPreview=e)}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!ir(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!ir(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}}])&&Ir(t.prototype,r),n&&Ir(t,n),e}();function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){o=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Or(e){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){o=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dr(e){var t=d.useRef(e);t.current=e,F(null!=e.item,"item must be defined"),F(null!=e.item.type,"item type must be defined");var r,n=kr((r=pr(),[d.useMemo((function(){return new yr(r)}),[r]),d.useMemo((function(){return new Tr(r.getBackend())}),[r])]),2),o=n[0],i=n[1];!function(e,t,r){var n=pr(),o=d.useMemo((function(){return{beginDrag:function(){var r=e.current,n=r.begin,o=r.item;if(n){var i=n(t);return F(null==i||"object"===Or(i),"dragSpec.begin() must either return an object, undefined, or null"),i||o||{}}return o||{}},canDrag:function(){return"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(r,n){var o=e.current.isDragging;return o?o(t):n===r.getSourceId()},endDrag:function(){var n=e.current.end;n&&n(t.getItem(),t),r.reconnect()}}}),[]);or((function(){var i=xr(fr(e.current.item.type,o,n),2),a=i[0],l=i[1];return t.receiveHandlerId(a),r.receiveHandlerId(a),l}),[])}(t,o,i);var a=dr(o,t.current.collect||function(){return{}},(function(){return i.reconnect()})),l=d.useMemo((function(){return i.hooks.dragSource()}),[i]),s=d.useMemo((function(){return i.hooks.dragPreview()}),[i]);return or((function(){i.dragSourceOptions=t.current.options||null,i.reconnect()}),[i]),or((function(){i.dragPreviewOptions=t.current.previewOptions||null,i.reconnect()}),[i]),[a,l,s]}function Er(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Mr=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=Sr({dropTarget:function(e,t){r.clearDropTarget(),r.dropTargetOptions=t,Cr(e)?r.dropTargetRef=e:r.dropTargetNode=e,r.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}var t,r,n;return t=e,(r=[{key:"reconnect",value:function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}},{key:"receiveHandlerId",value:function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!ir(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}},{key:"connectTarget",get:function(){return this.dropTarget}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}}])&&Er(t.prototype,r),n&&Er(t,n),e}();function zr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ar=!1,Nr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.targetId=null,this.internalMonitor=t.getMonitor()}var t,r,n;return t=e,(r=[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;F(!Ar,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Ar=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Ar=!1}}},{key:"isOver",value:function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&zr(t.prototype,r),n&&zr(t,n),e}();function Lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){o=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){o=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hr(e){var t=d.useRef(e);t.current=e,F(null!=e.accept,"accept must be defined");var r,n=Fr((r=pr(),[d.useMemo((function(){return new Nr(r)}),[r]),d.useMemo((function(){return new Mr(r.getBackend())}),[r])]),2),o=n[0],i=n[1];!function(e,t,r){var n=pr(),o=d.useMemo((function(){return{canDrop:function(){var r=e.current.canDrop;return!r||r(t.getItem(),t)},hover:function(){var r=e.current.hover;r&&r(t.getItem(),t)},drop:function(){var r=e.current.drop;if(r)return r(t.getItem(),t)}}}),[t]);or((function(){var i=Lr(hr(e.current.accept,o,n),2),a=i[0],l=i[1];return t.receiveHandlerId(a),r.receiveHandlerId(a),l}),[t,r])}(t,o,i);var a=dr(o,t.current.collect||function(){return{}},(function(){return i.reconnect()})),l=d.useMemo((function(){return i.hooks.dropTarget()}),[i]);return or((function(){i.dropTargetOptions=e.options||null,i.reconnect()}),[e.options]),[a,l]}function Vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){o=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ur(e){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Br(e){return"function"==typeof e}function $r(){}function qr(e){if(!function(e){return"object"===Ur(e)&&null!==e}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Kr(e){var t=e.current;return null==t?null:t.decoratedRef?t.decoratedRef.current:t}function Qr(e){return(t=e)&&t.prototype&&"function"==typeof t.prototype.render||function(e){var t,r=e;return"Symbol(react.forward_ref)"===(null==r||null===(t=r.$$typeof)||void 0===t?void 0:t.toString())}(e);var t}function Yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jr(e,t,r){return t&&Xr(e.prototype,t),r&&Xr(e,r),e}var Zr,en=(Zr=function(){function e(t){Yr(this,e),this.isDisposed=!1,this.action=Br(t)?t:$r}return Jr(e,[{key:"dispose",value:function(){this.isDisposed||(this.action(),this.isDisposed=!0)}}],[{key:"isDisposable",value:function(e){return Boolean(e&&Br(e.dispose))}},{key:"_fixup",value:function(t){return e.isDisposable(t)?t:e.empty}},{key:"create",value:function(t){return new e(t)}}]),e}(),Zr.empty={dispose:$r},Zr),tn=function(){function e(){Yr(this,e),this.isDisposed=!1;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this.disposables=r}return Jr(e,[{key:"add",value:function(e){this.isDisposed?e.dispose():this.disposables.push(e)}},{key:"remove",value:function(e){var t=!1;if(!this.isDisposed){var r=this.disposables.indexOf(e);-1!==r&&(t=!0,this.disposables.splice(r,1),e.dispose())}return t}},{key:"clear",value:function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),r=0;r<e;r++)t[r]=this.disposables[r];this.disposables=[];for(var n=0;n<e;n++)t[n].dispose()}}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=new Array(e),r=0;r<e;r++)t[r]=this.disposables[r];this.disposables=[];for(var n=0;n<e;n++)t[n].dispose()}}}]),e}(),rn=function(){function e(){Yr(this,e),this.isDisposed=!1}return Jr(e,[{key:"getDisposable",value:function(){return this.current}},{key:"setDisposable",value:function(e){var t=this.isDisposed;if(!t){var r=this.current;this.current=e,r&&r.dispose()}t&&e&&e.dispose()}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=void 0,e&&e.dispose()}}}]),e}();function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){o=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return an(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return an(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ln(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=un(e);if(t){var o=un(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===nn(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dn(e){var t,r=e.DecoratedComponent,n=e.createHandler,o=e.createMonitor,i=e.createConnector,a=e.registerHandler,l=e.containerDisplayName,s=e.getType,c=e.collect,u=e.options.arePropsEqual,h=void 0===u?ir:u,f=r,p=r.displayName||r.name||"Component",g=((t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(g,d.Component);var t,r,l,u=cn(g);function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(t=u.call(this,e)).decoratedRef=d.createRef(),t.handleChange=function(){var e=t.getCurrentState();ir(e,t.state)||t.setState(e)},t.disposable=new rn,t.receiveProps(e),t.dispose(),t}return t=g,(r=[{key:"getHandlerId",value:function(){return this.handlerId}},{key:"getDecoratedComponentInstance",value:function(){return F(this.decoratedRef.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.decoratedRef.current}},{key:"shouldComponentUpdate",value:function(e,t){return!h(e,this.props)||!ir(t,this.state)}},{key:"componentDidMount",value:function(){this.disposable=new rn,this.currentType=void 0,this.receiveProps(this.props),this.handleChange()}},{key:"componentDidUpdate",value:function(e){h(this.props,e)||(this.receiveProps(this.props),this.handleChange())}},{key:"componentWillUnmount",value:function(){this.dispose()}},{key:"receiveProps",value:function(e){this.handler&&(this.handler.receiveProps(e),this.receiveType(s(e)))}},{key:"receiveType",value:function(e){if(this.handlerMonitor&&this.manager&&this.handlerConnector&&e!==this.currentType){this.currentType=e;var t=on(a(e,this.handler,this.manager),2),r=t[0],n=t[1];this.handlerId=r,this.handlerMonitor.receiveHandlerId(r),this.handlerConnector.receiveHandlerId(r);var o=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[r]});this.disposable.setDisposable(new tn(new en(o),new en(n)))}}},{key:"dispose",value:function(){this.disposable.dispose(),this.handlerConnector&&this.handlerConnector.receiveHandlerId(null)}},{key:"getCurrentState",value:function(){return this.handlerConnector?c(this.handlerConnector.hooks,this.handlerMonitor,this.props):{}}},{key:"render",value:function(){var e=this;return d.createElement(j.Consumer,null,(function(t){var r=t.dragDropManager;return e.receiveDragDropManager(r),"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame((function(){var t;return null===(t=e.handlerConnector)||void 0===t?void 0:t.reconnect()})),d.createElement(f,Object.assign({},e.props,e.getCurrentState(),{ref:Qr(f)?e.decoratedRef:null}))}))}},{key:"receiveDragDropManager",value:function(e){void 0===this.manager&&(F(void 0!==e,"Could not find the drag and drop manager in the context of %s. Make sure to render a DndProvider component in your top-level component. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",p,p),void 0!==e&&(this.manager=e,this.handlerMonitor=o(e),this.handlerConnector=i(e.getBackend()),this.handler=n(this.handlerMonitor,this.decoratedRef)))}}])&&ln(t.prototype,r),l&&ln(t,l),g}()).DecoratedComponent=r,t.displayName="".concat(l,"(").concat(p,")"),t);return G(g,r)}function hn(e){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){return"string"==typeof e||"symbol"===hn(e)||!!t&&Array.isArray(e)&&e.every((function(e){return fn(e,!1)}))}function pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var gn=["canDrag","beginDrag","isDragging","endDrag"],vn=["beginDrag"],mn=function(){function e(t,r,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=null,this.beginDrag=function(){if(o.props)return o.spec.beginDrag(o.props,o.monitor,o.ref.current)},this.spec=t,this.monitor=r,this.ref=n}var t,r,n;return t=e,(r=[{key:"receiveProps",value:function(e){this.props=e}},{key:"canDrag",value:function(){return!!this.props&&(!this.spec.canDrag||this.spec.canDrag(this.props,this.monitor))}},{key:"isDragging",value:function(e,t){return!!this.props&&(this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):t===e.getSourceId())}},{key:"endDrag",value:function(){this.props&&this.spec.endDrag&&this.spec.endDrag(this.props,this.monitor,Kr(this.ref))}}])&&pn(t.prototype,r),n&&pn(t,n),e}();function yn(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e;"function"!=typeof e&&(F(fn(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',e),o=function(){return e}),F(qr(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',t);var i=function(e){return Object.keys(e).forEach((function(t){F(gn.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',gn.join(", "),t),F("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),vn.forEach((function(t){F("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),function(t,r){return new mn(e,t,r)}}(t);return F("function"==typeof r,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',r),F(qr(n),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',r),function(e){return dn({containerDisplayName:"DragSource",createHandler:i,registerHandler:fr,createConnector:function(e){return new Tr(e)},createMonitor:function(e){return new yr(e)},DecoratedComponent:e,getType:o,collect:r,options:n})}}function bn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var _n=["canDrop","hover","drop"],Sn=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=null,this.spec=t,this.monitor=r,this.ref=n}var t,r,n;return t=e,(r=[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveMonitor",value:function(e){this.monitor=e}},{key:"canDrop",value:function(){return!this.spec.canDrop||this.spec.canDrop(this.props,this.monitor)}},{key:"hover",value:function(){this.spec.hover&&this.props&&this.spec.hover(this.props,this.monitor,Kr(this.ref))}},{key:"drop",value:function(){if(this.spec.drop)return this.spec.drop(this.props,this.monitor,this.ref.current)}}])&&bn(t.prototype,r),n&&bn(t,n),e}();function wn(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e;"function"!=typeof e&&(F(fn(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',e),o=function(){return e}),F(qr(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',t);var i=function(e){return Object.keys(e).forEach((function(t){F(_n.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',_n.join(", "),t),F("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target",t,t,e[t])})),function(t,r){return new Sn(e,t,r)}}(t);return F("function"==typeof r,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',r),F(qr(n),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',r),function(e){return dn({containerDisplayName:"DropTarget",createHandler:i,registerHandler:hr,createMonitor:function(e){return new Nr(e)},createConnector:function(e){return new Mr(e)},DecoratedComponent:e,getType:o,collect:r,options:n})}}function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function In(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Rn(e);if(t){var o=Rn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Cn(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function On(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return F("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer",e),F(qr(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer',t),function(r){var n,o=r,i=t.arePropsEqual,a=void 0===i?ir:i,l=o.displayName||o.name||"Component",s=(n=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(c,d.Component);var r,n,i,s=xn(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.apply(this,arguments)).isCurrentlyMounted=!1,e.ref=d.createRef(),e.handleChange=function(){if(e.isCurrentlyMounted){var t=e.getCurrentState();ir(t,e.state)||e.setState(t)}},e}return r=c,(n=[{key:"getDecoratedComponentInstance",value:function(){return F(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current}},{key:"shouldComponentUpdate",value:function(e,t){return!a(e,this.props)||!ir(t,this.state)}},{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,this.handleChange()}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange&&(this.unsubscribeFromOffsetChange(),this.unsubscribeFromOffsetChange=void 0),this.unsubscribeFromStateChange&&(this.unsubscribeFromStateChange(),this.unsubscribeFromStateChange=void 0)}},{key:"render",value:function(){var e=this;return d.createElement(j.Consumer,null,(function(t){var r=t.dragDropManager;return void 0===r?null:(e.receiveDragDropManager(r),e.isCurrentlyMounted?d.createElement(o,Object.assign({},e.props,e.state,{ref:Qr(o)?e.ref:null})):null)}))}},{key:"receiveDragDropManager",value:function(e){if(void 0===this.manager){this.manager=e,F("object"===Cn(e),"Could not find the drag and drop manager in the context of %s. Make sure to render a DndProvider component in your top-level component. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",l,l);var t=this.manager.getMonitor();this.unsubscribeFromOffsetChange=t.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=t.subscribeToStateChange(this.handleChange)}}},{key:"getCurrentState",value:function(){if(!this.manager)return{};var t=this.manager.getMonitor();return e(t,this.props)}}])&&In(r.prototype,n),i&&In(r,i),c}(),n.displayName="DragLayer(".concat(l,")"),n.DecoratedComponent=r,n);return G(s,r)}}const kn=Object.freeze(Object.defineProperty({__proto__:null,DndContext:j,DndProvider:H,DragLayer:On,DragPreviewImage:nr,DragSource:yn,DropTarget:wn,createDndContext:V,useDrag:Dr,useDragDropManager:pr,useDragLayer:function(e){var t=pr().getMonitor(),r=Vr(sr(t,e),2),n=r[0],o=r[1];return d.useEffect((function(){return t.subscribeToOffsetChange(o)})),d.useEffect((function(){return t.subscribeToStateChange(o)})),n},useDrop:Hr},Symbol.toStringTag,{value:"Module"})),Pn="root",Dn=W.div`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    height: 100%;
`,En=W.div`
    position: relative;
    padding: 1em;
    flex-direction: column;
    display: flex;
    text-align: center;
    border-right: 1px solid #999999;
    width: ${e=>100/e.columnsNumber+"%"};

    &:first-child {
        padding-left: 0;
    }

    &:last-child {
        border-right: none;
        padding-right: 0;
    }
`;function Mn({columnsContent:e,columnsNumber:t}){return U(Dn,{children:e.map(((e,r)=>U(En,{columnsNumber:t,children:e},r)))})}const zn=B`
    query GET_TREE_BY_ID($id: [ID!]) {
        trees(filters: {id: $id}) {
            totalCount
            list {
                id
                label
                system
                behavior
                permissions_conf {
                    libraryId
                    permissionsConf {
                        permissionTreeAttributes {
                            id
                            label
                            ... on TreeAttribute {
                                linked_tree {
                                    id
                                }
                            }
                        }
                        relation
                    }
                }
                libraries {
                    library {
                        id
                        label
                        attributes {
                            id
                            label
                            type
                        }
                    }
                    settings {
                        allowMultiplePositions
                        allowedAtRoot
                        allowedChildren
                    }
                }
            }
        }
    }
`,An=B`
    ${$}
    query TREE_NODE_CHILDREN($treeId: ID!, $node: ID, $pagination: Pagination) {
        treeNodeChildren(treeId: $treeId, node: $node, pagination: $pagination) {
            list {
                id
                order
                childrenCount
                record {
                    ...RecordIdentity
                }
                ancestors {
                    id
                    record {
                        id
                        library {
                            id
                            label
                        }
                        ...RecordIdentity
                    }
                }
            }
        }
    }
`;var Nn={},Ln="Expected a function",jn=NaN,Fn="[object Symbol]",Gn=/^\s+|\s+$/g,Hn=/^[-+]0x[0-9a-f]+$/i,Vn=/^0b[01]+$/i,Wn=/^0o[0-7]+$/i,Un=parseInt,Bn="object"==typeof q&&q&&q.Object===Object&&q,$n="object"==typeof self&&self&&self.Object===Object&&self,qn=Bn||$n||Function("return this")(),Kn=Object.prototype.toString,Qn=Math.max,Yn=Math.min,Xn=function(){return qn.Date.now()};function Jn(e,t,r){var n,o,i,a,l,s,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(Ln);function f(t){var r=n,i=o;return n=o=void 0,c=t,a=e.apply(i,r)}function p(e){var r=e-s;return void 0===s||r>=t||r<0||d&&e-c>=i}function g(){var e=Xn();if(p(e))return v(e);l=setTimeout(g,function(e){var r=t-(e-s);return d?Yn(r,i-(e-c)):r}(e))}function v(e){return l=void 0,h&&n?f(e):(n=o=void 0,a)}function m(){var e=Xn(),r=p(e);if(n=arguments,o=this,s=e,r){if(void 0===l)return function(e){return c=e,l=setTimeout(g,t),u?f(e):a}(s);if(d)return l=setTimeout(g,t),f(s)}return void 0===l&&(l=setTimeout(g,t)),a}return t=eo(t)||0,Zn(r)&&(u=!!r.leading,i=(d="maxWait"in r)?Qn(eo(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h),m.cancel=function(){void 0!==l&&clearTimeout(l),c=0,n=s=o=l=void 0},m.flush=function(){return void 0===l?a:v(Xn())},m}function Zn(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function eo(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&Kn.call(e)==Fn}(e))return jn;if(Zn(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Zn(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Gn,"");var r=Vn.test(e);return r||Wn.test(e)?Un(e.slice(2),r?2:8):Hn.test(e)?jn:+e}var to=function(e,t,r){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError(Ln);return Zn(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),Jn(e,t,{leading:n,maxWait:t,trailing:o})},ro={},no={get exports(){return ro},set exports(e){ro=e}},oo={},io={get exports(){return oo},set exports(e){oo=e}};(function(){var e,t,r,n,o,i;"undefined"!=typeof performance&&null!==performance&&performance.now?io.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(io.exports=function(){return(e()-o)/1e6},t=process.hrtime,n=(e=function(){var e;return 1e9*(e=t())[0]+e[1]})(),i=1e9*process.uptime(),o=n-i):Date.now?(io.exports=function(){return Date.now()-r},r=Date.now()):(io.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(q);for(var ao=oo,lo="undefined"==typeof window?q:window,so=["moz","webkit"],co="AnimationFrame",uo=lo["request"+co],ho=lo["cancel"+co]||lo["cancelRequest"+co],fo=0;!uo&&fo<so.length;fo++)uo=lo[so[fo]+"Request"+co],ho=lo[so[fo]+"Cancel"+co]||lo[so[fo]+"CancelRequest"+co];if(!uo||!ho){var po=0,go=0,vo=[];uo=function(e){if(0===vo.length){var t=ao(),r=Math.max(0,16.666666666666668-(t-po));po=r+t,setTimeout((function(){var e=vo.slice(0);vo.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(po)}catch(r){setTimeout((function(){throw r}),0)}}),Math.round(r))}return vo.push({handle:++go,callback:e,cancelled:!1}),go},ho=function(e){for(var t=0;t<vo.length;t++)vo[t].handle===e&&(vo[t].cancelled=!0)}}no.exports=function(e){return uo.call(lo,e)},ro.cancel=function(){ho.apply(lo,arguments)},ro.polyfill=function(e){e||(e=lo),e.requestAnimationFrame=uo,e.cancelAnimationFrame=ho};var mo={};Object.defineProperty(mo,"__esModule",{value:!0}),mo.default=function(e){return e.displayName||e.name||("string"==typeof e&&e.length>0?e:"Unknown")};const yo=K(kn);var bo={};Object.defineProperty(bo,"__esModule",{value:!0}),bo.noop=function(){},bo.intBetween=function(e,t,r){return Math.floor(Math.min(t,Math.max(e,r)))},bo.getCoords=function(e){if("touchmove"===e.type)return{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};return{x:e.clientX,y:e.clientY}},Object.defineProperty(Nn,"__esModule",{value:!0});var _o=Nn.createHorizontalStrength=Vo,So=Nn.createVerticalStrength=Wo,wo=Nn.createScrollingComponent=$o,Co=Nn.default=function(e){var t=$o(e);return function(e){return Io.default.createElement(Po.DragDropContextConsumer,null,(function(r){var n=r.dragDropManager;return void 0===n?null:Io.default.createElement(t,Ao({},e,{dragDropManager:n}))}))}};Nn.defaultVerticalStrength=Nn.defaultHorizontalStrength=void 0;var Io=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(d),To=Mo(Q),xo=Y,Ro=Mo(to),Oo=Mo(ro),ko=Mo(mo),Po=yo,Do=Mo(G),Eo=bo;function Mo(e){return e&&e.__esModule?e:{default:e}}function zo(e){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ao(){return Ao=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ao.apply(this,arguments)}function No(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Lo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jo(e){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fo(e,t){return(Fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Go(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ho(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vo(e){return function(t,r){var n=t.x,o=t.w,i=t.y,a=t.h,l=Math.min(o/2,e);if(r.x>=n&&r.x<=n+o&&r.y>=i&&r.y<=i+a){if(r.x<n+l)return(r.x-n-l)/l;if(r.x>n+o-l)return-(n+o-r.x-l)/l}return 0}}function Wo(e){return function(t,r){var n=t.y,o=t.h,i=t.x,a=t.w,l=Math.min(o/2,e);if(r.y>=n&&r.y<=n+o&&r.x>=i&&r.x<=i+a){if(r.y<n+l)return(r.y-n-l)/l;if(r.y>n+o-l)return-(n+o-r.y-l)/l}return 0}}var Uo=Vo(150);Nn.defaultHorizontalStrength=Uo;var Bo=Wo(150);function $o(e){var t=function(t){function r(e,t){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o=this,i=jo(r).call(this,e,t),n=!i||"object"!==zo(i)&&"function"!=typeof i?Go(o):i,Ho(Go(Go(n)),"updateScrolling",(0,Ro.default)((function(e){var t=n.container.getBoundingClientRect(),r={x:t.left,y:t.top,w:t.width,h:t.height},o=(0,Eo.getCoords)(e),i=n.props,a=i.horizontalStrength,l=i.verticalStrength;n.scaleX=a(r,o),n.scaleY=l(r,o),n.frame||!n.scaleX&&!n.scaleY||n.startScrolling()}),100,{trailing:!1})),Ho(Go(Go(n)),"handleEvent",(function(e){n.dragging&&!n.attached&&(n.attach(),n.updateScrolling(e))})),n.wrappedInstance=Io.default.createRef(),n.scaleX=0,n.scaleY=0,n.frame=null,n.attached=!1,n.dragging=!1,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fo(e,t)}(r,Io.Component),n=r,o=[{key:"componentDidMount",value:function(){var e=this;this.container=(0,xo.findDOMNode)(this.wrappedInstance.current),this.container&&"function"==typeof this.container.addEventListener&&this.container.addEventListener("dragover",this.handleEvent),window.document.body.addEventListener("touchmove",this.handleEvent);var t=this.props.dragDropManager;this.clearMonitorSubscription=t.getMonitor().subscribeToStateChange((function(){return e.handleMonitorChange()}))}},{key:"componentWillUnmount",value:function(){this.container&&"function"==typeof this.container.removeEventListener&&this.container.removeEventListener("dragover",this.handleEvent),window.document.body.removeEventListener("touchmove",this.handleEvent),this.clearMonitorSubscription(),this.stopScrolling()}},{key:"handleMonitorChange",value:function(){var e=this.props.dragDropManager.getMonitor().isDragging();!this.dragging&&e?this.dragging=!0:this.dragging&&!e&&(this.dragging=!1,this.stopScrolling())}},{key:"attach",value:function(){this.attached=!0,window.document.body.addEventListener("dragover",this.updateScrolling),window.document.body.addEventListener("touchmove",this.updateScrolling)}},{key:"detach",value:function(){this.attached=!1,window.document.body.removeEventListener("dragover",this.updateScrolling),window.document.body.removeEventListener("touchmove",this.updateScrolling)}},{key:"startScrolling",value:function(){var e=this,t=0;!function r(){var n=e.scaleX,o=e.scaleY,i=e.container,a=e.props,l=a.strengthMultiplier,s=a.onScrollChange;if(0!==l&&n+o!==0){if((t+=1)%2){var c=i.scrollLeft,u=i.scrollTop,d=i.scrollWidth,h=i.scrollHeight,f=i.clientWidth,p=i.clientHeight;s(n?i.scrollLeft=(0,Eo.intBetween)(0,d-f,c+n*l):c,o?i.scrollTop=(0,Eo.intBetween)(0,h-p,u+o*l):u)}e.frame=(0,Oo.default)(r)}else e.stopScrolling()}()}},{key:"stopScrolling",value:function(){this.detach(),this.scaleX=0,this.scaleY=0,this.frame&&(Oo.default.cancel(this.frame),this.frame=null)}},{key:"render",value:function(){var t=this.props;t.strengthMultiplier,t.verticalStrength,t.horizontalStrength,t.onScrollChange;var r=No(t,["strengthMultiplier","verticalStrength","horizontalStrength","onScrollChange"]);return Io.default.createElement(e,Ao({ref:this.wrappedInstance},r))}}],o&&Lo(n.prototype,o),i&&Lo(n,i),r}();return Ho(t,"displayName","Scrolling(".concat((0,ko.default)(e),")")),Ho(t,"propTypes",{dragDropManager:To.default.object.isRequired,onScrollChange:To.default.func,verticalStrength:To.default.func,horizontalStrength:To.default.func,strengthMultiplier:To.default.number}),Ho(t,"defaultProps",{onScrollChange:Eo.noop,verticalStrength:Bo,horizontalStrength:Uo,strengthMultiplier:30}),(0,Do.default)(t,e)}Nn.defaultVerticalStrength=Bo;var qo={};!function(e,t){var r="__lodash_hash_undefined__",n=1,o=2,i=9007199254740991,a="[object Arguments]",l="[object Array]",s="[object AsyncFunction]",c="[object Boolean]",u="[object Date]",d="[object Error]",h="[object Function]",f="[object GeneratorFunction]",p="[object Map]",g="[object Number]",v="[object Null]",m="[object Object]",y="[object Promise]",b="[object Proxy]",_="[object RegExp]",S="[object Set]",w="[object String]",C="[object Symbol]",I="[object Undefined]",T="[object WeakMap]",x="[object ArrayBuffer]",R="[object DataView]",O=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,P={};P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P[a]=P[l]=P[x]=P[c]=P[R]=P[u]=P[d]=P[h]=P[p]=P[g]=P[m]=P[_]=P[S]=P[w]=P[T]=!1;var D="object"==typeof q&&q&&q.Object===Object&&q,E="object"==typeof self&&self&&self.Object===Object&&self,M=D||E||Function("return this")(),z=t&&!t.nodeType&&t,A=z&&e&&!e.nodeType&&e,N=A&&A.exports===z,L=N&&D.process,j=function(){try{return L&&L.binding&&L.binding("util")}catch(e){}}(),F=j&&j.isTypedArray;function G(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function H(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function V(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var W,U,B,$=Array.prototype,K=Function.prototype,Q=Object.prototype,Y=M["__core-js_shared__"],X=K.toString,J=Q.hasOwnProperty,Z=(W=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",ee=Q.toString,te=RegExp("^"+X.call(J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=N?M.Buffer:void 0,ne=M.Symbol,oe=M.Uint8Array,ie=Q.propertyIsEnumerable,ae=$.splice,le=ne?ne.toStringTag:void 0,se=Object.getOwnPropertySymbols,ce=re?re.isBuffer:void 0,ue=(U=Object.keys,B=Object,function(e){return U(B(e))}),de=Fe(M,"DataView"),he=Fe(M,"Map"),fe=Fe(M,"Promise"),pe=Fe(M,"Set"),ge=Fe(M,"WeakMap"),ve=Fe(Object,"create"),me=We(de),ye=We(he),be=We(fe),_e=We(pe),Se=We(ge),we=ne?ne.prototype:void 0,Ce=we?we.valueOf:void 0;function Ie(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Te(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function xe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Re(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new xe;++t<r;)this.add(e[t])}function Oe(e){var t=this.__data__=new Te(e);this.size=t.size}function ke(e,t){var r=$e(e),n=!r&&Be(e),o=!r&&!n&&qe(e),i=!r&&!n&&!o&&Je(e),a=r||n||o||i,l=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],s=l.length;for(var c in e)!t&&!J.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ve(c,s))||l.push(c);return l}function Pe(e,t){for(var r=e.length;r--;)if(Ue(e[r][0],t))return r;return-1}function De(e){return null==e?void 0===e?I:v:le&&le in Object(e)?function(e){var t=J.call(e,le),r=e[le];try{e[le]=void 0;var n=!0}catch(i){}var o=ee.call(e);n&&(t?e[le]=r:delete e[le]);return o}(e):function(e){return ee.call(e)}(e)}function Ee(e){return Xe(e)&&De(e)==a}function Me(e,t,r,i,s){return e===t||(null==e||null==t||!Xe(e)&&!Xe(t)?e!=e&&t!=t:function(e,t,r,i,s,h){var f=$e(e),v=$e(t),y=f?l:He(e),b=v?l:He(t),I=(y=y==a?m:y)==m,T=(b=b==a?m:b)==m,O=y==b;if(O&&qe(e)){if(!qe(t))return!1;f=!0,I=!1}if(O&&!I)return h||(h=new Oe),f||Je(e)?Ne(e,t,r,i,s,h):function(e,t,r,i,a,l,s){switch(r){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x:return!(e.byteLength!=t.byteLength||!l(new oe(e),new oe(t)));case c:case u:case g:return Ue(+e,+t);case d:return e.name==t.name&&e.message==t.message;case _:case w:return e==t+"";case p:var h=H;case S:var f=i&n;if(h||(h=V),e.size!=t.size&&!f)return!1;var v=s.get(e);if(v)return v==t;i|=o,s.set(e,t);var m=Ne(h(e),h(t),i,a,l,s);return s.delete(e),m;case C:if(Ce)return Ce.call(e)==Ce.call(t)}return!1}(e,t,y,r,i,s,h);if(!(r&n)){var k=I&&J.call(e,"__wrapped__"),P=T&&J.call(t,"__wrapped__");if(k||P){var D=k?e.value():e,E=P?t.value():t;return h||(h=new Oe),s(D,E,r,i,h)}}if(!O)return!1;return h||(h=new Oe),function(e,t,r,o,i,a){var l=r&n,s=Le(e),c=s.length,u=Le(t),d=u.length;if(c!=d&&!l)return!1;var h=c;for(;h--;){var f=s[h];if(!(l?f in t:J.call(t,f)))return!1}var p=a.get(e);if(p&&a.get(t))return p==t;var g=!0;a.set(e,t),a.set(t,e);var v=l;for(;++h<c;){var m=e[f=s[h]],y=t[f];if(o)var b=l?o(y,m,f,t,e,a):o(m,y,f,e,t,a);if(!(void 0===b?m===y||i(m,y,r,o,a):b)){g=!1;break}v||(v="constructor"==f)}if(g&&!v){var _=e.constructor,S=t.constructor;_==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof S&&S instanceof S||(g=!1)}return a.delete(e),a.delete(t),g}(e,t,r,i,s,h)}(e,t,r,i,Me,s))}function ze(e){return!(!Ye(e)||function(e){return!!Z&&Z in e}(e))&&(Ke(e)?te:O).test(We(e))}function Ae(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||Q,t!==n)return ue(e);var t,r,n,o=[];for(var i in Object(e))J.call(e,i)&&"constructor"!=i&&o.push(i);return o}function Ne(e,t,r,i,a,l){var s=r&n,c=e.length,u=t.length;if(c!=u&&!(s&&u>c))return!1;var d=l.get(e);if(d&&l.get(t))return d==t;var h=-1,f=!0,p=r&o?new Re:void 0;for(l.set(e,t),l.set(t,e);++h<c;){var g=e[h],v=t[h];if(i)var m=s?i(v,g,h,t,e,l):i(g,v,h,e,t,l);if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!G(t,(function(e,t){if(n=t,!p.has(n)&&(g===e||a(g,e,r,i,l)))return p.push(t);var n}))){f=!1;break}}else if(g!==v&&!a(g,v,r,i,l)){f=!1;break}}return l.delete(e),l.delete(t),f}function Le(e){return function(e,t,r){var n=t(e);return $e(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,Ze,Ge)}function je(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function Fe(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return ze(r)?r:void 0}Ie.prototype.clear=function(){this.__data__=ve?ve(null):{},this.size=0},Ie.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ie.prototype.get=function(e){var t=this.__data__;if(ve){var n=t[e];return n===r?void 0:n}return J.call(t,e)?t[e]:void 0},Ie.prototype.has=function(e){var t=this.__data__;return ve?void 0!==t[e]:J.call(t,e)},Ie.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ve&&void 0===t?r:t,this},Te.prototype.clear=function(){this.__data__=[],this.size=0},Te.prototype.delete=function(e){var t=this.__data__,r=Pe(t,e);return!(r<0)&&(r==t.length-1?t.pop():ae.call(t,r,1),--this.size,!0)},Te.prototype.get=function(e){var t=this.__data__,r=Pe(t,e);return r<0?void 0:t[r][1]},Te.prototype.has=function(e){return Pe(this.__data__,e)>-1},Te.prototype.set=function(e,t){var r=this.__data__,n=Pe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},xe.prototype.clear=function(){this.size=0,this.__data__={hash:new Ie,map:new(he||Te),string:new Ie}},xe.prototype.delete=function(e){var t=je(this,e).delete(e);return this.size-=t?1:0,t},xe.prototype.get=function(e){return je(this,e).get(e)},xe.prototype.has=function(e){return je(this,e).has(e)},xe.prototype.set=function(e,t){var r=je(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Re.prototype.add=Re.prototype.push=function(e){return this.__data__.set(e,r),this},Re.prototype.has=function(e){return this.__data__.has(e)},Oe.prototype.clear=function(){this.__data__=new Te,this.size=0},Oe.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Oe.prototype.get=function(e){return this.__data__.get(e)},Oe.prototype.has=function(e){return this.__data__.has(e)},Oe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Te){var n=r.__data__;if(!he||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new xe(n)}return r.set(e,t),this.size=r.size,this};var Ge=se?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}(se(e),(function(t){return ie.call(e,t)})))}:function(){return[]},He=De;function Ve(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||k.test(e))&&e>-1&&e%1==0&&e<t}function We(e){if(null!=e){try{return X.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ue(e,t){return e===t||e!=e&&t!=t}(de&&He(new de(new ArrayBuffer(1)))!=R||he&&He(new he)!=p||fe&&He(fe.resolve())!=y||pe&&He(new pe)!=S||ge&&He(new ge)!=T)&&(He=function(e){var t=De(e),r=t==m?e.constructor:void 0,n=r?We(r):"";if(n)switch(n){case me:return R;case ye:return p;case be:return y;case _e:return S;case Se:return T}return t});var Be=Ee(function(){return arguments}())?Ee:function(e){return Xe(e)&&J.call(e,"callee")&&!ie.call(e,"callee")},$e=Array.isArray;var qe=ce||function(){return!1};function Ke(e){if(!Ye(e))return!1;var t=De(e);return t==h||t==f||t==s||t==b}function Qe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Ye(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Xe(e){return null!=e&&"object"==typeof e}var Je=F?function(e){return function(t){return e(t)}}(F):function(e){return Xe(e)&&Qe(e.length)&&!!P[De(e)]};function Ze(e){return null!=(t=e)&&Qe(t.length)&&!Ke(t)?ke(e):Ae(e);var t}e.exports=function(e,t){return Me(e,t)}}({get exports(){return qo},set exports(e){qo=e}},qo);const Ko=qo;function Qo(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}function Yo(e){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}function Jo(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function Zo(e){this.setState(function(t){var r=this.constructor.getDerivedStateFromProps(e,t);return null!=r?r:null}.bind(this))}function ei(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}function ti(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var r=null,n=null,o=null;if("function"==typeof t.componentWillMount?r="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(r="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?n="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(n="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?o="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==r||null!==n||null!==o){var i=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==r?"\n  "+r:"")+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=Jo,t.componentWillReceiveProps=Zo),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=ei;var l=t.componentDidUpdate;t.componentDidUpdate=function(e,t,r){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:r;l.call(this,e,t,n)}}return e}function ri(e){var t=e.cellCount,r=e.cellSize,n=e.computeMetadataCallback,o=e.computeMetadataCallbackProps,i=e.nextCellsCount,a=e.nextCellSize,l=e.nextScrollToIndex,s=e.scrollToIndex,c=e.updateScrollOffsetForScrollToIndex;t===i&&("number"!=typeof r&&"number"!=typeof a||r===a)||(n(o),s>=0&&s===l&&c())}function ni(e,t){if(null==e)return{};var r,n,o=ee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}Jo.__suppressDeprecationWarning=!0,Zo.__suppressDeprecationWarning=!0,ei.__suppressDeprecationWarning=!0;var oi=function(){function e(t){var r=t.cellCount,n=t.cellSizeGetter,o=t.estimatedCellSize;re(this,e),ne(this,"_cellSizeAndPositionData",{}),ne(this,"_lastMeasuredIndex",-1),ne(this,"_lastBatchedIndex",-1),ne(this,"_cellCount",void 0),ne(this,"_cellSizeGetter",void 0),ne(this,"_estimatedCellSize",void 0),this._cellSizeGetter=n,this._cellCount=r,this._estimatedCellSize=o}return te(e,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,r=e.estimatedCellSize,n=e.cellSizeGetter;this._cellCount=t,this._estimatedCellSize=r,this._cellSizeGetter=n}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index ".concat(e," is outside of range 0..").concat(this._cellCount));if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),r=t.offset+t.size,n=this._lastMeasuredIndex+1;n<=e;n++){var o=this._cellSizeGetter({index:n});if(void 0===o||isNaN(o))throw Error("Invalid size returned for cell ".concat(n," of value ").concat(o));null===o?(this._cellSizeAndPositionData[n]={offset:r,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[n]={offset:r,size:o},r+=o,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,r=void 0===t?"auto":t,n=e.containerSize,o=e.currentOffset,i=e.targetIndex;if(n<=0)return 0;var a,l=this.getSizeAndPositionOfCell(i),s=l.offset,c=s-n+l.size;switch(r){case"start":a=s;break;case"end":a=c;break;case"center":a=s-(n-l.size)/2;break;default:a=Math.max(c,Math.min(s,o))}var u=this.getTotalSize();return Math.max(0,Math.min(u-n,a))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,r=e.offset;if(0===this.getTotalSize())return{};var n=r+t,o=this._findNearestCell(r),i=this.getSizeAndPositionOfCell(o);r=i.offset+i.size;for(var a=o;r<n&&a<this._cellCount-1;)a++,r+=this.getSizeAndPositionOfCell(a).size;return{start:o,stop:a}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e,t,r){for(;t<=e;){var n=t+Math.floor((e-t)/2),o=this.getSizeAndPositionOfCell(n).offset;if(o===r)return n;o<r?t=n+1:o>r&&(e=n-1)}return t>0?t-1:0}},{key:"_exponentialSearch",value:function(e,t){for(var r=1;e<this._cellCount&&this.getSizeAndPositionOfCell(e).offset<t;)e+=r,r*=2;return this._binarySearch(Math.min(e,this._cellCount-1),Math.floor(e/2),t)}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset ".concat(e," specified"));e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),r=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch(r,0,e):this._exponentialSearch(r,e)}}]),e}(),ii=function(){return"undefined"!=typeof window&&window.chrome?16777100:15e5},ai=function(){function e(t){var r=t.maxScrollSize,n=void 0===r?ii():r,o=ni(t,["maxScrollSize"]);re(this,e),ne(this,"_cellSizeAndPositionManager",void 0),ne(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new oi(o),this._maxScrollSize=n}return te(e,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,r=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),o=this.getTotalSize(),i=this._getOffsetPercentage({containerSize:t,offset:r,totalSize:o});return Math.round(i*(o-n))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,r=void 0===t?"auto":t,n=e.containerSize,o=e.currentOffset,i=e.targetIndex;o=this._safeOffsetToOffset({containerSize:n,offset:o});var a=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:n,currentOffset:o,targetIndex:i});return this._offsetToSafeOffset({containerSize:n,offset:a})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,r=e.offset;return r=this._safeOffsetToOffset({containerSize:t,offset:r}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:r})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,r=e.offset,n=e.totalSize;return n<=t?0:r/(n-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,r=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),o=this.getTotalSize();if(n===o)return r;var i=this._getOffsetPercentage({containerSize:t,offset:r,totalSize:n});return Math.round(i*(o-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,r=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),o=this.getTotalSize();if(n===o)return r;var i=this._getOffsetPercentage({containerSize:t,offset:r,totalSize:o});return Math.round(i*(n-t))}}]),e}();function li(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};return function(r){var n=r.callback,o=r.indices,i=Object.keys(o),a=!e||i.every((function(e){var t=o[e];return Array.isArray(t)?t.length>0:t>=0})),l=i.length!==Object.keys(t).length||i.some((function(e){var r=t[e],n=o[e];return Array.isArray(n)?r.join(",")!==n.join(","):r!==n}));t=o,a&&l&&n(o)}}function si(e){var t=e.cellSize,r=e.cellSizeAndPositionManager,n=e.previousCellsCount,o=e.previousCellSize,i=e.previousScrollToAlignment,a=e.previousScrollToIndex,l=e.previousSize,s=e.scrollOffset,c=e.scrollToAlignment,u=e.scrollToIndex,d=e.size,h=e.sizeJustIncreasedFromZero,f=e.updateScrollIndexCallback,p=r.getCellCount(),g=u>=0&&u<p;g&&(d!==l||h||!o||"number"==typeof t&&t!==o||c!==i||u!==a)?f(u):!g&&p>0&&(d<l||p<n)&&s>r.getTotalSize()-d&&f(p-1)}const ci=!("undefined"==typeof window||!window.document||!window.document.createElement);var ui,di;function hi(e){if((!ui&&0!==ui||e)&&ci){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),ui=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return ui}var fi,pi,gi=(di="undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).requestAnimationFrame||di.webkitRequestAnimationFrame||di.mozRequestAnimationFrame||di.oRequestAnimationFrame||di.msRequestAnimationFrame||function(e){return di.setTimeout(e,1e3/60)},vi=di.cancelAnimationFrame||di.webkitCancelAnimationFrame||di.mozCancelAnimationFrame||di.oCancelAnimationFrame||di.msCancelAnimationFrame||function(e){di.clearTimeout(e)},mi=gi,yi=vi,bi=function(e){return yi(e.id)},_i=function(e,t){var r;Promise.resolve().then((function(){r=Date.now()}));var n={id:mi((function o(){Date.now()-r>=t?e.call():n.id=mi(o)}))};return n};function Si(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Si(r,!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Si(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ci="observed",Ii="requested",Ti=(pi=fi=function(e){function t(e){var r;re(this,t),r=Qo(this,Yo(t).call(this,e)),ne(J(r),"_onGridRenderedMemoizer",li()),ne(J(r),"_onScrollMemoizer",li(!1)),ne(J(r),"_deferredInvalidateColumnIndex",null),ne(J(r),"_deferredInvalidateRowIndex",null),ne(J(r),"_recomputeScrollLeftFlag",!1),ne(J(r),"_recomputeScrollTopFlag",!1),ne(J(r),"_horizontalScrollBarSize",0),ne(J(r),"_verticalScrollBarSize",0),ne(J(r),"_scrollbarPresenceChanged",!1),ne(J(r),"_scrollingContainer",void 0),ne(J(r),"_childrenToDisplay",void 0),ne(J(r),"_columnStartIndex",void 0),ne(J(r),"_columnStopIndex",void 0),ne(J(r),"_rowStartIndex",void 0),ne(J(r),"_rowStopIndex",void 0),ne(J(r),"_renderedColumnStartIndex",0),ne(J(r),"_renderedColumnStopIndex",0),ne(J(r),"_renderedRowStartIndex",0),ne(J(r),"_renderedRowStopIndex",0),ne(J(r),"_initialScrollTop",void 0),ne(J(r),"_initialScrollLeft",void 0),ne(J(r),"_disablePointerEventsTimeoutId",void 0),ne(J(r),"_styleCache",{}),ne(J(r),"_cellCache",{}),ne(J(r),"_debounceScrollEndedCallback",(function(){r._disablePointerEventsTimeoutId=null,r.setState({isScrolling:!1,needToResetStyleCache:!1})})),ne(J(r),"_invokeOnGridRenderedHelper",(function(){var e=r.props.onSectionRendered;r._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:r._columnStartIndex,columnOverscanStopIndex:r._columnStopIndex,columnStartIndex:r._renderedColumnStartIndex,columnStopIndex:r._renderedColumnStopIndex,rowOverscanStartIndex:r._rowStartIndex,rowOverscanStopIndex:r._rowStopIndex,rowStartIndex:r._renderedRowStartIndex,rowStopIndex:r._renderedRowStopIndex}})})),ne(J(r),"_setScrollingContainerRef",(function(e){r._scrollingContainer=e})),ne(J(r),"_onScroll",(function(e){e.target===r._scrollingContainer&&r.handleScrollEvent(e.target)}));var n=new ai({cellCount:e.columnCount,cellSizeGetter:function(r){return t._wrapSizeGetter(e.columnWidth)(r)},estimatedCellSize:t._getEstimatedColumnSize(e)}),o=new ai({cellCount:e.rowCount,cellSizeGetter:function(r){return t._wrapSizeGetter(e.rowHeight)(r)},estimatedCellSize:t._getEstimatedRowSize(e)});return r.state={instanceProps:{columnSizeAndPositionManager:n,rowSizeAndPositionManager:o,prevColumnWidth:e.columnWidth,prevRowHeight:e.rowHeight,prevColumnCount:e.columnCount,prevRowCount:e.rowCount,prevIsScrolling:!0===e.isScrolling,prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},e.scrollToRow>0&&(r._initialScrollTop=r._getCalculatedScrollTop(e,r.state)),e.scrollToColumn>0&&(r._initialScrollLeft=r._getCalculatedScrollLeft(e,r.state)),r}return Xo(t,d.PureComponent),te(t,[{key:"getOffsetForCell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,r=void 0===t?this.props.scrollToAlignment:t,n=e.columnIndex,o=void 0===n?this.props.scrollToColumn:n,i=e.rowIndex,a=void 0===i?this.props.scrollToRow:i,l=wi({},this.props,{scrollToAlignment:r,scrollToColumn:o,scrollToRow:a});return{scrollLeft:this._getCalculatedScrollLeft(l),scrollTop:this._getCalculatedScrollTop(l)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(e){var t=e.scrollLeft,r=void 0===t?0:t,n=e.scrollTop,o=void 0===n?0:n;if(!(o<0)){this._debounceScrollEnded();var i=this.props,a=i.autoHeight,l=i.autoWidth,s=i.height,c=i.width,u=this.state.instanceProps,d=u.scrollbarSize,h=u.rowSizeAndPositionManager.getTotalSize(),f=u.columnSizeAndPositionManager.getTotalSize(),p=Math.min(Math.max(0,f-c+d),r),g=Math.min(Math.max(0,h-s+d),o);if(this.state.scrollLeft!==p||this.state.scrollTop!==g){var v={isScrolling:!0,scrollDirectionHorizontal:p!==this.state.scrollLeft?p>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:g!==this.state.scrollTop?g>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:Ci};a||(v.scrollTop=g),l||(v.scrollLeft=p),v.needToResetStyleCache=!1,this.setState(v)}this._invokeOnScrollMemoizer({scrollLeft:p,scrollTop:g,totalColumnsWidth:f,totalRowsHeight:h})}}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,r=e.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,r):r}},{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,r=e.rowCount,n=this.state.instanceProps;n.columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),n.rowSizeAndPositionManager.getSizeAndPositionOfCell(r-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,r=void 0===t?0:t,n=e.rowIndex,o=void 0===n?0:n,i=this.props,a=i.scrollToColumn,l=i.scrollToRow,s=this.state.instanceProps;s.columnSizeAndPositionManager.resetCell(r),s.rowSizeAndPositionManager.resetCell(o),this._recomputeScrollLeftFlag=a>=0&&(1===this.state.scrollDirectionHorizontal?r<=a:r>=a),this._recomputeScrollTopFlag=l>=0&&(1===this.state.scrollDirectionVertical?o<=l:o>=l),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,r=e.rowIndex,n=this.props.columnCount,o=this.props;n>1&&void 0!==t&&this._updateScrollLeftForScrollToColumn(wi({},o,{scrollToColumn:t})),void 0!==r&&this._updateScrollTopForScrollToRow(wi({},o,{scrollToRow:r}))}},{key:"componentDidMount",value:function(){var e=this.props,r=e.getScrollbarSize,n=e.height,o=e.scrollLeft,i=e.scrollToColumn,a=e.scrollTop,l=e.scrollToRow,s=e.width,c=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),c.scrollbarSizeMeasured||this.setState((function(e){var t=wi({},e,{needToResetStyleCache:!1});return t.instanceProps.scrollbarSize=r(),t.instanceProps.scrollbarSizeMeasured=!0,t})),"number"==typeof o&&o>=0||"number"==typeof a&&a>=0){var u=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:o,scrollTop:a});u&&(u.needToResetStyleCache=!1,this.setState(u))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var d=n>0&&s>0;i>=0&&d&&this._updateScrollLeftForScrollToColumn(),l>=0&&d&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:o||0,scrollTop:a||0,totalColumnsWidth:c.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:c.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(e,t){var r=this,n=this.props,o=n.autoHeight,i=n.autoWidth,a=n.columnCount,l=n.height,s=n.rowCount,c=n.scrollToAlignment,u=n.scrollToColumn,d=n.scrollToRow,h=n.width,f=this.state,p=f.scrollLeft,g=f.scrollPositionChangeReason,v=f.scrollTop,m=f.instanceProps;this._handleInvalidatedGridSize();var y=a>0&&0===e.columnCount||s>0&&0===e.rowCount;g===Ii&&(!i&&p>=0&&(p!==this._scrollingContainer.scrollLeft||y)&&(this._scrollingContainer.scrollLeft=p),!o&&v>=0&&(v!==this._scrollingContainer.scrollTop||y)&&(this._scrollingContainer.scrollTop=v));var b=(0===e.width||0===e.height)&&l>0&&h>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):si({cellSizeAndPositionManager:m.columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:p,scrollToAlignment:c,scrollToIndex:u,size:h,sizeJustIncreasedFromZero:b,updateScrollIndexCallback:function(){return r._updateScrollLeftForScrollToColumn(r.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):si({cellSizeAndPositionManager:m.rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:v,scrollToAlignment:c,scrollToIndex:d,size:l,sizeJustIncreasedFromZero:b,updateScrollIndexCallback:function(){return r._updateScrollTopForScrollToRow(r.props)}}),this._invokeOnGridRenderedHelper(),p!==t.scrollLeft||v!==t.scrollTop){var _=m.rowSizeAndPositionManager.getTotalSize(),S=m.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:p,scrollTop:v,totalColumnsWidth:S,totalRowsHeight:_})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&bi(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoContainerWidth,r=e.autoHeight,n=e.autoWidth,o=e.className,i=e.containerProps,a=e.containerRole,l=e.containerStyle,s=e.height,c=e.id,u=e.noContentRenderer,h=e.role,p=e.style,g=e.tabIndex,v=e.width,m=this.state,y=m.instanceProps,b=m.needToResetStyleCache,_=this._isScrolling(),w={boxSizing:"border-box",direction:"ltr",height:r?"auto":s,position:"relative",width:n?"auto":v,WebkitOverflowScrolling:"touch",willChange:"transform"};b&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var C=y.columnSizeAndPositionManager.getTotalSize(),I=y.rowSizeAndPositionManager.getTotalSize(),T=I>s?y.scrollbarSize:0,x=C>v?y.scrollbarSize:0;x===this._horizontalScrollBarSize&&T===this._verticalScrollBarSize||(this._horizontalScrollBarSize=x,this._verticalScrollBarSize=T,this._scrollbarPresenceChanged=!0),w.overflowX=C+T<=v?"hidden":"auto",w.overflowY=I+x<=s?"hidden":"auto";var R=this._childrenToDisplay,O=0===R.length&&s>0&&v>0;return d.createElement("div",f({ref:this._setScrollingContainerRef},i,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:S("ReactVirtualized__Grid",o),id:c,onScroll:this._onScroll,role:h,style:wi({},w,{},p),tabIndex:g}),R.length>0&&d.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:a,style:wi({width:t?"auto":C,height:I,maxWidth:C,maxHeight:I,overflow:"hidden",pointerEvents:_?"none":"",position:"relative"},l)},R),O&&u())}},{key:"_calculateChildrenToRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,r=e.cellRenderer,n=e.cellRangeRenderer,o=e.columnCount,i=e.deferredMeasurementCache,a=e.height,l=e.overscanColumnCount,s=e.overscanIndicesGetter,c=e.overscanRowCount,u=e.rowCount,d=e.width,h=e.isScrollingOptOut,f=t.scrollDirectionHorizontal,p=t.scrollDirectionVertical,g=t.instanceProps,v=this._initialScrollTop>0?this._initialScrollTop:t.scrollTop,m=this._initialScrollLeft>0?this._initialScrollLeft:t.scrollLeft,y=this._isScrolling(e,t);if(this._childrenToDisplay=[],a>0&&d>0){var b=g.columnSizeAndPositionManager.getVisibleCellRange({containerSize:d,offset:m}),_=g.rowSizeAndPositionManager.getVisibleCellRange({containerSize:a,offset:v}),S=g.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:d,offset:m}),w=g.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:a,offset:v});this._renderedColumnStartIndex=b.start,this._renderedColumnStopIndex=b.stop,this._renderedRowStartIndex=_.start,this._renderedRowStopIndex=_.stop;var C=s({direction:"horizontal",cellCount:o,overscanCellsCount:l,scrollDirection:f,startIndex:"number"==typeof b.start?b.start:0,stopIndex:"number"==typeof b.stop?b.stop:-1}),I=s({direction:"vertical",cellCount:u,overscanCellsCount:c,scrollDirection:p,startIndex:"number"==typeof _.start?_.start:0,stopIndex:"number"==typeof _.stop?_.stop:-1}),T=C.overscanStartIndex,x=C.overscanStopIndex,R=I.overscanStartIndex,O=I.overscanStopIndex;if(i){if(!i.hasFixedHeight())for(var k=R;k<=O;k++)if(!i.has(k,0)){T=0,x=o-1;break}if(!i.hasFixedWidth())for(var P=T;P<=x;P++)if(!i.has(0,P)){R=0,O=u-1;break}}this._childrenToDisplay=n({cellCache:this._cellCache,cellRenderer:r,columnSizeAndPositionManager:g.columnSizeAndPositionManager,columnStartIndex:T,columnStopIndex:x,deferredMeasurementCache:i,horizontalOffsetAdjustment:S,isScrolling:y,isScrollingOptOut:h,parent:this,rowSizeAndPositionManager:g.rowSizeAndPositionManager,rowStartIndex:R,rowStopIndex:O,scrollLeft:m,scrollTop:v,styleCache:this._styleCache,verticalOffsetAdjustment:w,visibleColumnIndices:b,visibleRowIndices:_}),this._columnStartIndex=T,this._columnStopIndex=x,this._rowStartIndex=R,this._rowStopIndex=O}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&bi(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=_i(this._debounceScrollEndedCallback,e)}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,r=e.scrollLeft,n=e.scrollTop,o=e.totalColumnsWidth,i=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var r=e.scrollLeft,n=e.scrollTop,a=t.props,l=a.height;(0,a.onScroll)({clientHeight:l,clientWidth:a.width,scrollHeight:i,scrollLeft:r,scrollTop:n,scrollWidth:o})},indices:{scrollLeft:r,scrollTop:n}})}},{key:"_isScrolling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(e,"isScrolling")?Boolean(e.isScrolling):Boolean(t.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(e){var r=e.scrollLeft,n=e.scrollTop,o=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:r,scrollTop:n});o&&(o.needToResetStyleCache=!1,this.setState(o))}},{key:"_getCalculatedScrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollLeft(e,r)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=t._getScrollLeftForScrollToColumnStateUpdate(e,r);n&&(n.needToResetStyleCache=!1,this.setState(n))}},{key:"_getCalculatedScrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollTop(e,r)}},{key:"_resetStyleCache",value:function(){var e=this._styleCache,t=this._cellCache,r=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var n=this._rowStartIndex;n<=this._rowStopIndex;n++)for(var o=this._columnStartIndex;o<=this._columnStopIndex;o++){var i="".concat(n,"-").concat(o);this._styleCache[i]=e[i],r&&(this._cellCache[i]=t[i])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=t._getScrollTopForScrollToRowStateUpdate(e,r);n&&(n.needToResetStyleCache=!1,this.setState(n))}}],[{key:"getDerivedStateFromProps",value:function(e,r){var n={};0===e.columnCount&&0!==r.scrollLeft||0===e.rowCount&&0!==r.scrollTop?(n.scrollLeft=0,n.scrollTop=0):(e.scrollLeft!==r.scrollLeft&&e.scrollToColumn<0||e.scrollTop!==r.scrollTop&&e.scrollToRow<0)&&Object.assign(n,t._getScrollToPositionStateUpdate({prevState:r,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}));var o,i,a=r.instanceProps;return n.needToResetStyleCache=!1,e.columnWidth===a.prevColumnWidth&&e.rowHeight===a.prevRowHeight||(n.needToResetStyleCache=!0),a.columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:t._getEstimatedColumnSize(e),cellSizeGetter:t._wrapSizeGetter(e.columnWidth)}),a.rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:t._getEstimatedRowSize(e),cellSizeGetter:t._wrapSizeGetter(e.rowHeight)}),0!==a.prevColumnCount&&0!==a.prevRowCount||(a.prevColumnCount=0,a.prevRowCount=0),e.autoHeight&&!1===e.isScrolling&&!0===a.prevIsScrolling&&Object.assign(n,{isScrolling:!1}),ri({cellCount:a.prevColumnCount,cellSize:"number"==typeof a.prevColumnWidth?a.prevColumnWidth:null,computeMetadataCallback:function(){return a.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:"number"==typeof e.columnWidth?e.columnWidth:null,nextScrollToIndex:e.scrollToColumn,scrollToIndex:a.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){o=t._getScrollLeftForScrollToColumnStateUpdate(e,r)}}),ri({cellCount:a.prevRowCount,cellSize:"number"==typeof a.prevRowHeight?a.prevRowHeight:null,computeMetadataCallback:function(){return a.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:"number"==typeof e.rowHeight?e.rowHeight:null,nextScrollToIndex:e.scrollToRow,scrollToIndex:a.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){i=t._getScrollTopForScrollToRowStateUpdate(e,r)}}),a.prevColumnCount=e.columnCount,a.prevColumnWidth=e.columnWidth,a.prevIsScrolling=!0===e.isScrolling,a.prevRowCount=e.rowCount,a.prevRowHeight=e.rowHeight,a.prevScrollToColumn=e.scrollToColumn,a.prevScrollToRow=e.scrollToRow,a.scrollbarSize=e.getScrollbarSize(),void 0===a.scrollbarSize?(a.scrollbarSizeMeasured=!1,a.scrollbarSize=0):a.scrollbarSizeMeasured=!0,n.instanceProps=a,wi({},n,{},o,{},i)}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(e){var t=e.prevState,r=e.scrollLeft,n=e.scrollTop,o={scrollPositionChangeReason:Ii};return"number"==typeof r&&r>=0&&(o.scrollDirectionHorizontal=r>t.scrollLeft?1:-1,o.scrollLeft=r),"number"==typeof n&&n>=0&&(o.scrollDirectionVertical=n>t.scrollTop?1:-1,o.scrollTop=n),"number"==typeof r&&r>=0&&r!==t.scrollLeft||"number"==typeof n&&n>=0&&n!==t.scrollTop?o:{}}},{key:"_wrapSizeGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_getCalculatedScrollLeft",value:function(e,t){var r=e.columnCount,n=e.height,o=e.scrollToAlignment,i=e.scrollToColumn,a=e.width,l=t.scrollLeft,s=t.instanceProps;if(r>0){var c=r-1,u=i<0?c:Math.min(c,i),d=s.rowSizeAndPositionManager.getTotalSize(),h=s.scrollbarSizeMeasured&&d>n?s.scrollbarSize:0;return s.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:a-h,currentOffset:l,targetIndex:u})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(e,r){var n=r.scrollLeft,o=t._getCalculatedScrollLeft(e,r);return"number"==typeof o&&o>=0&&n!==o?t._getScrollToPositionStateUpdate({prevState:r,scrollLeft:o,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(e,t){var r=e.height,n=e.rowCount,o=e.scrollToAlignment,i=e.scrollToRow,a=e.width,l=t.scrollTop,s=t.instanceProps;if(n>0){var c=n-1,u=i<0?c:Math.min(c,i),d=s.columnSizeAndPositionManager.getTotalSize(),h=s.scrollbarSizeMeasured&&d>a?s.scrollbarSize:0;return s.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:o,containerSize:r-h,currentOffset:l,targetIndex:u})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(e,r){var n=r.scrollTop,o=t._getCalculatedScrollTop(e,r);return"number"==typeof o&&o>=0&&n!==o?t._getScrollToPositionStateUpdate({prevState:r,scrollLeft:-1,scrollTop:o}):{}}}]),t}(),ne(fi,"propTypes",null),pi);ne(Ti,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:function(e){for(var t=e.cellCache,r=e.cellRenderer,n=e.columnSizeAndPositionManager,o=e.columnStartIndex,i=e.columnStopIndex,a=e.deferredMeasurementCache,l=e.horizontalOffsetAdjustment,s=e.isScrolling,c=e.isScrollingOptOut,u=e.parent,d=e.rowSizeAndPositionManager,h=e.rowStartIndex,f=e.rowStopIndex,p=e.styleCache,g=e.verticalOffsetAdjustment,v=e.visibleColumnIndices,m=e.visibleRowIndices,y=[],b=n.areOffsetsAdjusted()||d.areOffsetsAdjusted(),_=!s&&!b,S=h;S<=f;S++)for(var w=d.getSizeAndPositionOfCell(S),C=o;C<=i;C++){var I=n.getSizeAndPositionOfCell(C),T=C>=v.start&&C<=v.stop&&S>=m.start&&S<=m.stop,x="".concat(S,"-").concat(C),R=void 0;_&&p[x]?R=p[x]:a&&!a.has(S,C)?R={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(R={height:w.size,left:I.offset+l,position:"absolute",top:w.offset+g,width:I.size},p[x]=R);var O={columnIndex:C,isScrolling:s,isVisible:T,key:x,parent:u,rowIndex:S,style:R},k=void 0;!c&&!s||l||g?k=r(O):(t[x]||(t[x]=r(O)),k=t[x]),null!=k&&!1!==k&&y.push(k)}return y},containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:hi,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:function(e){var t=e.cellCount,r=e.overscanCellsCount,n=e.scrollDirection,o=e.startIndex,i=e.stopIndex;return 1===n?{overscanStartIndex:Math.max(0,o),overscanStopIndex:Math.min(t-1,i+r)}:{overscanStartIndex:Math.max(0,o-r),overscanStopIndex:Math.min(t-1,i)}},overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),ti(Ti);var xi,Ri;function Oi(e){var t=e.cellCount,r=e.overscanCellsCount,n=e.scrollDirection,o=e.startIndex,i=e.stopIndex;return r=Math.max(1,r),1===n?{overscanStartIndex:Math.max(0,o-1),overscanStopIndex:Math.min(t-1,i+r)}:{overscanStartIndex:Math.max(0,o-r),overscanStopIndex:Math.min(t-1,i+1)}}function ki(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Pi,Di,Ei=(Ri=xi=function(e){function t(){var e,r;re(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=Qo(this,(e=Yo(t)).call.apply(e,[this].concat(o))),ne(J(r),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),ne(J(r),"_columnStartIndex",0),ne(J(r),"_columnStopIndex",0),ne(J(r),"_rowStartIndex",0),ne(J(r),"_rowStopIndex",0),ne(J(r),"_onKeyDown",(function(e){var t=r.props,n=t.columnCount,o=t.disabled,i=t.mode,a=t.rowCount;if(!o){var l=r._getScrollState(),s=l.scrollToColumn,c=l.scrollToRow,u=r._getScrollState(),d=u.scrollToColumn,h=u.scrollToRow;switch(e.key){case"ArrowDown":h="cells"===i?Math.min(h+1,a-1):Math.min(r._rowStopIndex+1,a-1);break;case"ArrowLeft":d="cells"===i?Math.max(d-1,0):Math.max(r._columnStartIndex-1,0);break;case"ArrowRight":d="cells"===i?Math.min(d+1,n-1):Math.min(r._columnStopIndex+1,n-1);break;case"ArrowUp":h="cells"===i?Math.max(h-1,0):Math.max(r._rowStartIndex-1,0)}d===s&&h===c||(e.preventDefault(),r._updateScrollState({scrollToColumn:d,scrollToRow:h}))}})),ne(J(r),"_onSectionRendered",(function(e){var t=e.columnStartIndex,n=e.columnStopIndex,o=e.rowStartIndex,i=e.rowStopIndex;r._columnStartIndex=t,r._columnStopIndex=n,r._rowStartIndex=o,r._rowStopIndex=i})),r}return Xo(t,d.PureComponent),te(t,[{key:"setScrollIndexes",value:function(e){var t=e.scrollToColumn,r=e.scrollToRow;this.setState({scrollToRow:r,scrollToColumn:t})}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.children,n=this._getScrollState(),o=n.scrollToColumn,i=n.scrollToRow;return d.createElement("div",{className:t,onKeyDown:this._onKeyDown},r({onSectionRendered:this._onSectionRendered,scrollToColumn:o,scrollToRow:i}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(e){var t=e.scrollToColumn,r=e.scrollToRow,n=this.props,o=n.isControlled,i=n.onScrollToChange;"function"==typeof i&&i({scrollToColumn:t,scrollToRow:r}),o||this.setState({scrollToColumn:t,scrollToRow:r})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isControlled?{}:e.scrollToColumn!==t.instanceProps.prevScrollToColumn||e.scrollToRow!==t.instanceProps.prevScrollToRow?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ki(r,!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ki(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{scrollToColumn:e.scrollToColumn,scrollToRow:e.scrollToRow,instanceProps:{prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow}}):{}}}]),t}(),ne(xi,"propTypes",null),Ri);function Mi(e,t){var r,n,o,i=void 0!==(r=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:global).document&&r.document.attachEvent;if(!i){var a=(o=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||function(e){return r.setTimeout(e,20)},function(e){return o(e)}),l=(n=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.clearTimeout,function(e){return n(e)}),s=function(e){var t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,o=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,o.style.width=r.offsetWidth+1+"px",o.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},c=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;s(this),this.__resizeRAF__&&l(this.__resizeRAF__),this.__resizeRAF__=a((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(r){r.call(t,e)})))}))}},u=!1,d="",h="animationstart",f="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),g=r.document.createElement("fakeelement");if(void 0!==g.style.animationName&&(u=!0),!1===u)for(var v=0;v<f.length;v++)if(void 0!==g.style[f[v]+"AnimationName"]){d="-"+f[v].toLowerCase()+"-",h=p[v],u=!0;break}var m="resizeanim",y="@"+d+"keyframes "+m+" { from { opacity: 0; } to { opacity: 0; } } ",b=d+"animation: 1ms "+m+"; "}return{addResizeListener:function(t,n){if(i)t.attachEvent("onresize",n);else{if(!t.__resizeTriggers__){var o=t.ownerDocument,a=r.getComputedStyle(t);a&&"static"==a.position&&(t.style.position="relative"),function(t){if(!t.getElementById("detectElementResize")){var r=(y||"")+".resize-triggers { "+(b||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',n=t.head||t.getElementsByTagName("head")[0],o=t.createElement("style");o.id="detectElementResize",o.type="text/css",null!=e&&o.setAttribute("nonce",e),o.styleSheet?o.styleSheet.cssText=r:o.appendChild(t.createTextNode(r)),n.appendChild(o)}}(o),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=o.createElement("div")).className="resize-triggers";var l='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>';if(window.trustedTypes){var u=trustedTypes.createPolicy("react-virtualized-auto-sizer",{createHTML:function(){return l}});t.__resizeTriggers__.innerHTML=u.createHTML("")}else t.__resizeTriggers__.innerHTML=l;t.appendChild(t.__resizeTriggers__),s(t),t.addEventListener("scroll",c,!0),h&&(t.__resizeTriggers__.__animationListener__=function(e){e.animationName==m&&s(t)},t.__resizeTriggers__.addEventListener(h,t.__resizeTriggers__.__animationListener__))}t.__resizeListeners__.push(n)}},removeResizeListener:function(e,t){if(i)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",c,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(h,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(r){}}}}}function zi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ai(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zi(r,!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zi(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}ne(Ei,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),ti(Ei);var Ni,Li,ji=(Di=Pi=function(e){function t(){var e,r;re(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=Qo(this,(e=Yo(t)).call.apply(e,[this].concat(o))),ne(J(r),"state",{height:r.props.defaultHeight||0,width:r.props.defaultWidth||0}),ne(J(r),"_parentNode",void 0),ne(J(r),"_autoSizer",void 0),ne(J(r),"_window",void 0),ne(J(r),"_detectElementResize",void 0),ne(J(r),"_onResize",(function(){var e=r.props,t=e.disableHeight,n=e.disableWidth,o=e.onResize;if(r._parentNode){var i=r._parentNode.offsetHeight||0,a=r._parentNode.offsetWidth||0,l=(r._window||window).getComputedStyle(r._parentNode)||{},s=parseInt(l.paddingLeft,10)||0,c=parseInt(l.paddingRight,10)||0,u=parseInt(l.paddingTop,10)||0,d=parseInt(l.paddingBottom,10)||0,h=i-u-d,f=a-s-c;(!t&&r.state.height!==h||!n&&r.state.width!==f)&&(r.setState({height:i-u-d,width:a-s-c}),o({height:i,width:a}))}})),ne(J(r),"_setRef",(function(e){r._autoSizer=e})),r}return Xo(t,d.Component),te(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=Mi(e,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.className,n=e.disableHeight,o=e.disableWidth,i=e.style,a=this.state,l=a.height,s=a.width,c={overflow:"visible"},u={};return n||(c.height=0,u.height=l),o||(c.width=0,u.width=s),d.createElement("div",{className:r,ref:this._setRef,style:Ai({},c,{},i)},t(u))}}]),t}(),ne(Pi,"propTypes",null),Di);ne(ji,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var Fi=(Li=Ni=function(e){function t(){var e,r;re(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=Qo(this,(e=Yo(t)).call.apply(e,[this].concat(o))),ne(J(r),"_child",void 0),ne(J(r),"_measure",(function(){var e=r.props,t=e.cache,n=e.columnIndex,o=void 0===n?0:n,i=e.parent,a=e.rowIndex,l=void 0===a?r.props.index||0:a,s=r._getCellMeasurements(),c=s.height,u=s.width;c===t.getHeight(l,o)&&u===t.getWidth(l,o)||(t.set(l,o,u,c),i&&"function"==typeof i.recomputeGridSize&&i.recomputeGridSize({columnIndex:o,rowIndex:l}))})),ne(J(r),"_registerChild",(function(e){!e||e instanceof Element||console.warn("CellMeasurer registerChild expects to be passed Element or null"),r._child=e,e&&r._maybeMeasureCell()})),r}return Xo(t,d.PureComponent),te(t,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var e=this.props.children;return"function"==typeof e?e({measure:this._measure,registerChild:this._registerChild}):e}},{key:"_getCellMeasurements",value:function(){var e=this.props.cache,t=this._child||Y.findDOMNode(this);if(t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){var r=t.style.width,n=t.style.height;e.hasFixedWidth()||(t.style.width="auto"),e.hasFixedHeight()||(t.style.height="auto");var o=Math.ceil(t.offsetHeight),i=Math.ceil(t.offsetWidth);return r&&(t.style.width=r),n&&(t.style.height=n),{height:o,width:i}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var e=this.props,t=e.cache,r=e.columnIndex,n=void 0===r?0:r,o=e.parent,i=e.rowIndex,a=void 0===i?this.props.index||0:i;if(!t.has(a,n)){var l=this._getCellMeasurements(),s=l.height,c=l.width;t.set(a,n,c,s),o&&"function"==typeof o.invalidateCellSizeAfterRender&&o.invalidateCellSizeAfterRender({columnIndex:n,rowIndex:a})}}}]),t}(),ne(Ni,"propTypes",null),Li);function Gi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gi(r,!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gi(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}ne(Fi,"__internalCellMeasurerFlag",!1);var Vi="observed",Wi="requested",Ui=function(e){function t(){var e,r;re(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=Qo(this,(e=Yo(t)).call.apply(e,[this].concat(o))),ne(J(r),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),ne(J(r),"_calculateSizeAndPositionDataOnNextUpdate",!1),ne(J(r),"_onSectionRenderedMemoizer",li()),ne(J(r),"_onScrollMemoizer",li(!1)),ne(J(r),"_invokeOnSectionRenderedHelper",(function(){var e=r.props,t=e.cellLayoutManager,n=e.onSectionRendered;r._onSectionRenderedMemoizer({callback:n,indices:{indices:t.getLastRenderedIndices()}})})),ne(J(r),"_setScrollingContainerRef",(function(e){r._scrollingContainer=e})),ne(J(r),"_updateScrollPositionForScrollToCell",(function(){var e=r.props,t=e.cellLayoutManager,n=e.height,o=e.scrollToAlignment,i=e.scrollToCell,a=e.width,l=r.state,s=l.scrollLeft,c=l.scrollTop;if(i>=0){var u=t.getScrollPositionForCell({align:o,cellIndex:i,height:n,scrollLeft:s,scrollTop:c,width:a});u.scrollLeft===s&&u.scrollTop===c||r._setScrollPosition(u)}})),ne(J(r),"_onScroll",(function(e){if(e.target===r._scrollingContainer){r._enablePointerEventsAfterDelay();var t=r.props,n=t.cellLayoutManager,o=t.height,i=t.isScrollingChange,a=t.width,l=r._scrollbarSize,s=n.getTotalSize(),c=s.height,u=s.width,d=Math.max(0,Math.min(u-a+l,e.target.scrollLeft)),h=Math.max(0,Math.min(c-o+l,e.target.scrollTop));if(r.state.scrollLeft!==d||r.state.scrollTop!==h){var f=e.cancelable?Vi:Wi;r.state.isScrolling||i(!0),r.setState({isScrolling:!0,scrollLeft:d,scrollPositionChangeReason:f,scrollTop:h})}r._invokeOnScrollMemoizer({scrollLeft:d,scrollTop:h,totalWidth:u,totalHeight:c})}})),r._scrollbarSize=hi(),void 0===r._scrollbarSize?(r._scrollbarSizeMeasured=!1,r._scrollbarSize=0):r._scrollbarSizeMeasured=!0,r}return Xo(t,d.PureComponent),te(t,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.cellLayoutManager,r=e.scrollLeft,n=e.scrollToCell,o=e.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=hi(),this._scrollbarSizeMeasured=!0,this.setState({})),n>=0?this._updateScrollPositionForScrollToCell():(r>=0||o>=0)&&this._setScrollPosition({scrollLeft:r,scrollTop:o}),this._invokeOnSectionRenderedHelper();var i=t.getTotalSize(),a=i.height,l=i.width;this._invokeOnScrollMemoizer({scrollLeft:r||0,scrollTop:o||0,totalHeight:a,totalWidth:l})}},{key:"componentDidUpdate",value:function(e,t){var r=this.props,n=r.height,o=r.scrollToAlignment,i=r.scrollToCell,a=r.width,l=this.state,s=l.scrollLeft,c=l.scrollPositionChangeReason,u=l.scrollTop;c===Wi&&(s>=0&&s!==t.scrollLeft&&s!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=s),u>=0&&u!==t.scrollTop&&u!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=u)),n===e.height&&o===e.scrollToAlignment&&i===e.scrollToCell&&a===e.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoHeight,r=e.cellCount,n=e.cellLayoutManager,o=e.className,i=e.height,a=e.horizontalOverscanSize,l=e.id,s=e.noContentRenderer,c=e.style,u=e.verticalOverscanSize,h=e.width,f=this.state,p=f.isScrolling,g=f.scrollLeft,v=f.scrollTop;(this._lastRenderedCellCount!==r||this._lastRenderedCellLayoutManager!==n||this._calculateSizeAndPositionDataOnNextUpdate)&&(this._lastRenderedCellCount=r,this._lastRenderedCellLayoutManager=n,this._calculateSizeAndPositionDataOnNextUpdate=!1,n.calculateSizeAndPositionData());var m=n.getTotalSize(),y=m.height,b=m.width,_=Math.max(0,g-a),w=Math.max(0,v-u),C=Math.min(b,g+h+a),I=Math.min(y,v+i+u),T=i>0&&h>0?n.cellRenderers({height:I-w,isScrolling:p,width:C-_,x:_,y:w}):[],x={boxSizing:"border-box",direction:"ltr",height:t?"auto":i,position:"relative",WebkitOverflowScrolling:"touch",width:h,willChange:"transform"},R=y>i?this._scrollbarSize:0,O=b>h?this._scrollbarSize:0;return x.overflowX=b+R<=h?"hidden":"auto",x.overflowY=y+O<=i?"hidden":"auto",d.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:S("ReactVirtualized__Collection",o),id:l,onScroll:this._onScroll,role:"grid",style:Hi({},x,{},c),tabIndex:0},r>0&&d.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:y,maxHeight:y,maxWidth:b,overflow:"hidden",pointerEvents:p?"none":"",width:b}},T),0===r&&s())}},{key:"_enablePointerEventsAfterDelay",value:function(){var e=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout((function(){(0,e.props.isScrollingChange)(!1),e._disablePointerEventsTimeoutId=null,e.setState({isScrolling:!1})}),150)}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,r=e.scrollLeft,n=e.scrollTop,o=e.totalHeight,i=e.totalWidth;this._onScrollMemoizer({callback:function(e){var r=e.scrollLeft,n=e.scrollTop,a=t.props,l=a.height;(0,a.onScroll)({clientHeight:l,clientWidth:a.width,scrollHeight:o,scrollLeft:r,scrollTop:n,scrollWidth:i})},indices:{scrollLeft:r,scrollTop:n}})}},{key:"_setScrollPosition",value:function(e){var t=e.scrollLeft,r=e.scrollTop,n={scrollPositionChangeReason:Wi};t>=0&&(n.scrollLeft=t),r>=0&&(n.scrollTop=r),(t>=0&&t!==this.state.scrollLeft||r>=0&&r!==this.state.scrollTop)&&this.setState(n)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 0!==e.cellCount||0===t.scrollLeft&&0===t.scrollTop?e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop?e.scrollTop:t.scrollTop,scrollPositionChangeReason:Wi}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:Wi}}}]),t}();ne(Ui,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),Ui.propTypes={},ti(Ui);var Bi=function(){function e(t){var r=t.height,n=t.width,o=t.x,i=t.y;re(this,e),this.height=r,this.width=n,this.x=o,this.y=i,this._indexMap={},this._indices=[]}return te(e,[{key:"addCellIndex",value:function(e){var t=e.index;this._indexMap[t]||(this._indexMap[t]=!0,this._indices.push(t))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),e}(),$i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;re(this,e),this._sectionSize=t,this._cellMetadata=[],this._sections={}}return te(e,[{key:"getCellIndices",value:function(e){var t=e.height,r=e.width,n=e.x,o=e.y,i={};return this.getSections({height:t,width:r,x:n,y:o}).forEach((function(e){return e.getCellIndices().forEach((function(e){i[e]=e}))})),Object.keys(i).map((function(e){return i[e]}))}},{key:"getCellMetadata",value:function(e){var t=e.index;return this._cellMetadata[t]}},{key:"getSections",value:function(e){for(var t=e.height,r=e.width,n=e.x,o=e.y,i=Math.floor(n/this._sectionSize),a=Math.floor((n+r-1)/this._sectionSize),l=Math.floor(o/this._sectionSize),s=Math.floor((o+t-1)/this._sectionSize),c=[],u=i;u<=a;u++)for(var d=l;d<=s;d++){var h="".concat(u,".").concat(d);this._sections[h]||(this._sections[h]=new Bi({height:this._sectionSize,width:this._sectionSize,x:u*this._sectionSize,y:d*this._sectionSize})),c.push(this._sections[h])}return c}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var e=this;return Object.keys(this._sections).map((function(t){return e._sections[t].toString()}))}},{key:"registerCell",value:function(e){var t=e.cellMetadatum,r=e.index;this._cellMetadata[r]=t,this.getSections(t).forEach((function(e){return e.addCellIndex({index:r})}))}}]),e}();function qi(e){var t=e.align,r=void 0===t?"auto":t,n=e.cellOffset,o=e.cellSize,i=e.containerSize,a=e.currentOffset,l=n,s=l-i+o;switch(r){case"start":return l;case"end":return s;case"center":return l-(i-o)/2;default:return Math.max(s,Math.min(l,a))}}var Ki=function(e){function t(e,r){var n;return re(this,t),(n=Qo(this,Yo(t).call(this,e,r)))._cellMetadata=[],n._lastRenderedCellIndices=[],n._cellCache=[],n._isScrollingChange=n._isScrollingChange.bind(J(n)),n._setCollectionViewRef=n._setCollectionViewRef.bind(J(n)),n}return Xo(t,d.PureComponent),te(t,[{key:"forceUpdate",value:function(){void 0!==this._collectionView&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var e=f({},this.props);return d.createElement(Ui,f({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},e))}},{key:"calculateSizeAndPositionData",value:function(){var e=this.props,t=function(e){for(var t=e.cellCount,r=e.cellSizeAndPositionGetter,n=e.sectionSize,o=[],i=new $i(n),a=0,l=0,s=0;s<t;s++){var c=r({index:s});if(null==c.height||isNaN(c.height)||null==c.width||isNaN(c.width)||null==c.x||isNaN(c.x)||null==c.y||isNaN(c.y))throw Error("Invalid metadata returned for cell ".concat(s,":\n        x:").concat(c.x,", y:").concat(c.y,", width:").concat(c.width,", height:").concat(c.height));a=Math.max(a,c.y+c.height),l=Math.max(l,c.x+c.width),o[s]=c,i.registerCell({cellMetadatum:c,index:s})}return{cellMetadata:o,height:a,sectionManager:i,width:l}}({cellCount:e.cellCount,cellSizeAndPositionGetter:e.cellSizeAndPositionGetter,sectionSize:e.sectionSize});this._cellMetadata=t.cellMetadata,this._sectionManager=t.sectionManager,this._height=t.height,this._width=t.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(e){var t=e.align,r=e.cellIndex,n=e.height,o=e.scrollLeft,i=e.scrollTop,a=e.width,l=this.props.cellCount;if(r>=0&&r<l){var s=this._cellMetadata[r];o=qi({align:t,cellOffset:s.x,cellSize:s.width,containerSize:a,currentOffset:o,targetIndex:r}),i=qi({align:t,cellOffset:s.y,cellSize:s.height,containerSize:n,currentOffset:i,targetIndex:r})}return{scrollLeft:o,scrollTop:i}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(e){var t=this,r=e.height,n=e.isScrolling,o=e.width,i=e.x,a=e.y,l=this.props,s=l.cellGroupRenderer,c=l.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:r,width:o,x:i,y:a}),s({cellCache:this._cellCache,cellRenderer:c,cellSizeAndPositionGetter:function(e){var r=e.index;return t._sectionManager.getCellMetadata({index:r})},indices:this._lastRenderedCellIndices,isScrolling:n})}},{key:"_isScrollingChange",value:function(e){e||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(e){this._collectionView=e}}]),t}();function Qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yi(e,t){if(e){if("string"==typeof e)return Qi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qi(e,t):void 0}}function Xi(e){return function(e){if(Array.isArray(e))return Qi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Yi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}ne(Ki,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(e){var t=e.cellCache,r=e.cellRenderer,n=e.cellSizeAndPositionGetter,o=e.indices,i=e.isScrolling;return o.map((function(e){var o=n({index:e}),a={index:e,isScrolling:i,key:e,style:{height:o.height,left:o.x,position:"absolute",top:o.y,width:o.width}};return i?(e in t||(t[e]=r(a)),t[e]):r(a)})).filter((function(e){return!!e}))}}),Ki.propTypes={};var Ji,Zi,ea=function(e){function t(e,r){var n;return re(this,t),(n=Qo(this,Yo(t).call(this,e,r)))._loadMoreRowsMemoizer=li(),n._onRowsRendered=n._onRowsRendered.bind(J(n)),n._registerChild=n._registerChild.bind(J(n)),n}return Xo(t,d.PureComponent),te(t,[{key:"resetLoadMoreRowsCache",value:function(e){this._loadMoreRowsMemoizer=li(),e&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(e){var t=this,r=this.props.loadMoreRows;e.forEach((function(e){var n=r(e);n&&n.then((function(){var r,n,o,i,a;r={lastRenderedStartIndex:t._lastRenderedStartIndex,lastRenderedStopIndex:t._lastRenderedStopIndex,startIndex:e.startIndex,stopIndex:e.stopIndex},n=r.lastRenderedStartIndex,o=r.lastRenderedStopIndex,i=r.startIndex,a=r.stopIndex,i>o||a<n||t._registeredChild&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r="function"==typeof e.recomputeGridSize?e.recomputeGridSize:e.recomputeRowHeights;r?r.call(e,t):e.forceUpdate()}(t._registeredChild,t._lastRenderedStartIndex)}))}))}},{key:"_onRowsRendered",value:function(e){var t=e.startIndex,r=e.stopIndex;this._lastRenderedStartIndex=t,this._lastRenderedStopIndex=r,this._doStuff(t,r)}},{key:"_doStuff",value:function(e,t){var r,n=this,o=this.props,i=o.isRowLoaded,a=o.minimumBatchSize,l=o.rowCount,s=o.threshold,c=function(e){for(var t=e.isRowLoaded,r=e.minimumBatchSize,n=e.rowCount,o=e.startIndex,i=e.stopIndex,a=[],l=null,s=null,c=o;c<=i;c++){t({index:c})?null!==s&&(a.push({startIndex:l,stopIndex:s}),l=s=null):(s=c,null===l&&(l=c))}if(null!==s){for(var u=Math.min(Math.max(s,l+r-1),n-1),d=s+1;d<=u&&!t({index:d});d++)s=d;a.push({startIndex:l,stopIndex:s})}if(a.length)for(var h=a[0];h.stopIndex-h.startIndex+1<r&&h.startIndex>0;){var f=h.startIndex-1;if(t({index:f}))break;h.startIndex=f}return a}({isRowLoaded:i,minimumBatchSize:a,rowCount:l,startIndex:Math.max(0,e-s),stopIndex:Math.min(l-1,t+s)}),u=(r=[]).concat.apply(r,Xi(c.map((function(e){return[e.startIndex,e.stopIndex]}))));this._loadMoreRowsMemoizer({callback:function(){n._loadUnloadedRanges(c)},indices:{squashedUnloadedRanges:u}})}},{key:"_registerChild",value:function(e){this._registeredChild=e}}]),t}();ne(ea,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15}),ea.propTypes={};var ta=(Zi=Ji=function(e){function t(){var e,r;re(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=Qo(this,(e=Yo(t)).call.apply(e,[this].concat(o))),ne(J(r),"Grid",void 0),ne(J(r),"_cellRenderer",(function(e){var t=e.parent,n=e.rowIndex,o=e.style,i=e.isScrolling,a=e.isVisible,l=e.key,s=r.props.rowRenderer,c=Object.getOwnPropertyDescriptor(o,"width");return c&&c.writable&&(o.width="100%"),s({index:n,style:o,isScrolling:i,isVisible:a,key:l,parent:t})})),ne(J(r),"_setRef",(function(e){r.Grid=e})),ne(J(r),"_onScroll",(function(e){var t=e.clientHeight,n=e.scrollHeight,o=e.scrollTop;(0,r.props.onScroll)({clientHeight:t,scrollHeight:n,scrollTop:o})})),ne(J(r),"_onSectionRendered",(function(e){var t=e.rowOverscanStartIndex,n=e.rowOverscanStopIndex,o=e.rowStartIndex,i=e.rowStopIndex;(0,r.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:n,startIndex:o,stopIndex:i})})),r}return Xo(t,d.PureComponent),te(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,r=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:r,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,r=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:r,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,r=void 0===t?0:t,n=e.rowIndex,o=void 0===n?0:n;this.Grid&&this.Grid.recomputeGridSize({rowIndex:o,columnIndex:r})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e,columnIndex:0})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.noRowsRenderer,n=e.scrollToIndex,o=e.width,i=S("ReactVirtualized__List",t);return d.createElement(Ti,f({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:i,columnWidth:o,columnCount:1,noContentRenderer:r,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:n}))}}]),t}(),ne(Ji,"propTypes",null),Zi);function ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||Yi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}ne(ta,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:Oi,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});const na={ge:function(e,t,r,n,o){return"function"==typeof r?function(e,t,r,n,o){for(var i=r+1;t<=r;){var a=t+r>>>1;o(e[a],n)>=0?(i=a,r=a-1):t=a+1}return i}(e,void 0===n?0:0|n,void 0===o?e.length-1:0|o,t,r):function(e,t,r,n){for(var o=r+1;t<=r;){var i=t+r>>>1;e[i]>=n?(o=i,r=i-1):t=i+1}return o}(e,void 0===r?0:0|r,void 0===n?e.length-1:0|n,t)},gt:function(e,t,r,n,o){return"function"==typeof r?function(e,t,r,n,o){for(var i=r+1;t<=r;){var a=t+r>>>1;o(e[a],n)>0?(i=a,r=a-1):t=a+1}return i}(e,void 0===n?0:0|n,void 0===o?e.length-1:0|o,t,r):function(e,t,r,n){for(var o=r+1;t<=r;){var i=t+r>>>1;e[i]>n?(o=i,r=i-1):t=i+1}return o}(e,void 0===r?0:0|r,void 0===n?e.length-1:0|n,t)},lt:function(e,t,r,n,o){return"function"==typeof r?function(e,t,r,n,o){for(var i=t-1;t<=r;){var a=t+r>>>1;o(e[a],n)<0?(i=a,t=a+1):r=a-1}return i}(e,void 0===n?0:0|n,void 0===o?e.length-1:0|o,t,r):function(e,t,r,n){for(var o=t-1;t<=r;){var i=t+r>>>1;e[i]<n?(o=i,t=i+1):r=i-1}return o}(e,void 0===r?0:0|r,void 0===n?e.length-1:0|n,t)},le:function(e,t,r,n,o){return"function"==typeof r?function(e,t,r,n,o){for(var i=t-1;t<=r;){var a=t+r>>>1;o(e[a],n)<=0?(i=a,t=a+1):r=a-1}return i}(e,void 0===n?0:0|n,void 0===o?e.length-1:0|o,t,r):function(e,t,r,n){for(var o=t-1;t<=r;){var i=t+r>>>1;e[i]<=n?(o=i,t=i+1):r=i-1}return o}(e,void 0===r?0:0|r,void 0===n?e.length-1:0|n,t)},eq:function(e,t,r,n,o){return"function"==typeof r?function(e,t,r,n,o){for(;t<=r;){var i=t+r>>>1,a=o(e[i],n);if(0===a)return i;a<=0?t=i+1:r=i-1}return-1}(e,void 0===n?0:0|n,void 0===o?e.length-1:0|o,t,r):function(e,t,r,n){for(;t<=r;){var o=t+r>>>1,i=e[o];if(i===n)return o;i<=n?t=o+1:r=o-1}return-1}(e,void 0===r?0:0|r,void 0===n?e.length-1:0|n,t)}};function oa(e,t,r,n,o){this.mid=e,this.left=t,this.right=r,this.leftPoints=n,this.rightPoints=o,this.count=(t?t.count:0)+(r?r.count:0)+n.length}var ia=oa.prototype;function aa(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function la(e,t){var r=va(t);e.mid=r.mid,e.left=r.left,e.right=r.right,e.leftPoints=r.leftPoints,e.rightPoints=r.rightPoints,e.count=r.count}function sa(e,t){var r=e.intervals([]);r.push(t),la(e,r)}function ca(e,t){var r=e.intervals([]),n=r.indexOf(t);return n<0?0:(r.splice(n,1),la(e,r),1)}function ua(e,t,r){for(var n=0;n<e.length&&e[n][0]<=t;++n){var o=r(e[n]);if(o)return o}}function da(e,t,r){for(var n=e.length-1;n>=0&&e[n][1]>=t;--n){var o=r(e[n]);if(o)return o}}function ha(e,t){for(var r=0;r<e.length;++r){var n=t(e[r]);if(n)return n}}function fa(e,t){return e-t}function pa(e,t){var r=e[0]-t[0];return r||e[1]-t[1]}function ga(e,t){var r=e[1]-t[1];return r||e[0]-t[0]}function va(e){if(0===e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e[r][0],e[r][1]);t.sort(fa);var n=t[t.length>>1],o=[],i=[],a=[];for(r=0;r<e.length;++r){var l=e[r];l[1]<n?o.push(l):n<l[0]?i.push(l):a.push(l)}var s=a,c=a.slice();return s.sort(pa),c.sort(ga),new oa(n,va(o),va(i),s,c)}function ma(e){this.root=e}ia.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},ia.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?sa(this,e):this.left.insert(e):this.left=va([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?sa(this,e):this.right.insert(e):this.right=va([e]);else{var r=na.ge(this.leftPoints,e,pa),n=na.ge(this.rightPoints,e,ga);this.leftPoints.splice(r,0,e),this.rightPoints.splice(n,0,e)}},ia.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(t-1)?ca(this,e):2===(i=this.left.remove(e))?(this.left=null,this.count-=1,1):(1===i&&(this.count-=1),i):0;if(e[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(t-1)?ca(this,e):2===(i=this.right.remove(e))?(this.right=null,this.count-=1,1):(1===i&&(this.count-=1),i):0;if(1===this.count)return this.leftPoints[0]===e?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var r=this,n=this.left;n.right;)r=n,n=n.right;if(r===this)n.right=this.right;else{var o=this.left,i=this.right;r.count-=n.count,r.right=n.left,n.left=o,n.right=i}aa(this,n),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?aa(this,this.left):aa(this,this.right);return 1}for(o=na.ge(this.leftPoints,e,pa);o<this.leftPoints.length&&this.leftPoints[o][0]===e[0];++o)if(this.leftPoints[o]===e){this.count-=1,this.leftPoints.splice(o,1);for(i=na.ge(this.rightPoints,e,ga);i<this.rightPoints.length&&this.rightPoints[i][1]===e[1];++i)if(this.rightPoints[i]===e)return this.rightPoints.splice(i,1),1}return 0},ia.queryPoint=function(e,t){if(e<this.mid){if(this.left)if(r=this.left.queryPoint(e,t))return r;return ua(this.leftPoints,e,t)}if(e>this.mid){var r;if(this.right)if(r=this.right.queryPoint(e,t))return r;return da(this.rightPoints,e,t)}return ha(this.leftPoints,t)},ia.queryInterval=function(e,t,r){var n;if(e<this.mid&&this.left&&(n=this.left.queryInterval(e,t,r)))return n;if(t>this.mid&&this.right&&(n=this.right.queryInterval(e,t,r)))return n;return t<this.mid?ua(this.leftPoints,t,r):e>this.mid?da(this.rightPoints,e,r):ha(this.leftPoints,r)};var ya=ma.prototype;ya.insert=function(e){this.root?this.root.insert(e):this.root=new oa(e[0],null,null,[e],[e])},ya.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),0!==t}return!1},ya.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},ya.queryInterval=function(e,t,r){if(e<=t&&this.root)return this.root.queryInterval(e,t,r)},Object.defineProperty(ya,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(ya,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var ba,_a,Sa=function(){function e(){var t;re(this,e),ne(this,"_columnSizeMap",{}),ne(this,"_intervalTree",t&&0!==t.length?new ma(va(t)):new ma(null)),ne(this,"_leftMap",{})}return te(e,[{key:"estimateTotalHeight",value:function(e,t,r){var n=e-this.count;return this.tallestColumnSize+Math.ceil(n/t)*r}},{key:"range",value:function(e,t,r){var n=this;this._intervalTree.queryInterval(e,e+t,(function(e){var t=ra(e,3),o=t[0];t[1];var i=t[2];return r(i,n._leftMap[i],o)}))}},{key:"setPosition",value:function(e,t,r,n){this._intervalTree.insert([r,r+n,e]),this._leftMap[e]=t;var o=this._columnSizeMap,i=o[t];o[t]=void 0===i?r+n:Math.max(i,r+n)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var r in e){var n=e[r];t=0===t?n:Math.min(t,n)}return t}},{key:"tallestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var r in e){var n=e[r];t=Math.max(t,n)}return t}}]),e}();function wa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ca(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wa(r,!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wa(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ia=(_a=ba=function(e){function t(){var e,r;re(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=Qo(this,(e=Yo(t)).call.apply(e,[this].concat(o))),ne(J(r),"state",{isScrolling:!1,scrollTop:0}),ne(J(r),"_debounceResetIsScrollingId",void 0),ne(J(r),"_invalidateOnUpdateStartIndex",null),ne(J(r),"_invalidateOnUpdateStopIndex",null),ne(J(r),"_positionCache",new Sa),ne(J(r),"_startIndex",null),ne(J(r),"_startIndexMemoized",null),ne(J(r),"_stopIndex",null),ne(J(r),"_stopIndexMemoized",null),ne(J(r),"_debounceResetIsScrollingCallback",(function(){r.setState({isScrolling:!1})})),ne(J(r),"_setScrollingContainerRef",(function(e){r._scrollingContainer=e})),ne(J(r),"_onScroll",(function(e){var t=r.props.height,n=e.currentTarget.scrollTop,o=Math.min(Math.max(0,r._getEstimatedTotalHeight()-t),n);n===o&&(r._debounceResetIsScrolling(),r.state.scrollTop!==o&&r.setState({isScrolling:!0,scrollTop:o}))})),r}return Xo(t,d.PureComponent),te(t,[{key:"clearCellPositions",value:function(){this._positionCache=new Sa,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.rowIndex;null===this._invalidateOnUpdateStartIndex?(this._invalidateOnUpdateStartIndex=t,this._invalidateOnUpdateStopIndex=t):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,t),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,t))}},{key:"recomputeCellPositions",value:function(){var e=this._positionCache.count-1;this._positionCache=new Sa,this._populatePositionCache(0,e),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(e,t){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==e.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&bi(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.autoHeight,o=r.cellCount,i=r.cellMeasurerCache,a=r.cellRenderer,l=r.className,s=r.height,c=r.id,u=r.keyMapper,h=r.overscanByPixels,f=r.role,p=r.style,g=r.tabIndex,v=r.width,m=r.rowDirection,y=this.state,b=y.isScrolling,_=y.scrollTop,w=[],C=this._getEstimatedTotalHeight(),I=this._positionCache.shortestColumnSize,T=this._positionCache.count,x=0;if(this._positionCache.range(Math.max(0,_-h),s+2*h,(function(r,n,o){var l;void 0===e?(x=r,e=r):(x=Math.min(x,r),e=Math.max(e,r)),w.push(a({index:r,isScrolling:b,key:u(r),parent:t,style:(l={height:i.getHeight(r)},ne(l,"ltr"===m?"left":"right",n),ne(l,"position","absolute"),ne(l,"top",o),ne(l,"width",i.getWidth(r)),l)}))})),I<_+s+h&&T<o)for(var R=Math.min(o-T,Math.ceil((_+s+h-I)/i.defaultHeight*v/i.defaultWidth)),O=T;O<T+R;O++)e=O,w.push(a({index:O,isScrolling:b,key:u(O),parent:this,style:{width:i.getWidth(O)}}));return this._startIndex=x,this._stopIndex=e,d.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:S("ReactVirtualized__Masonry",l),id:c,onScroll:this._onScroll,role:f,style:Ca({boxSizing:"border-box",direction:"ltr",height:n?"auto":s,overflowX:"hidden",overflowY:C<s?"hidden":"auto",position:"relative",width:v,WebkitOverflowScrolling:"touch",willChange:"transform"},p),tabIndex:g},d.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:C,maxWidth:"100%",maxHeight:C,overflow:"hidden",pointerEvents:b?"none":"",position:"relative"}},w))}},{key:"_checkInvalidateOnUpdate",value:function(){if("number"==typeof this._invalidateOnUpdateStartIndex){var e=this._invalidateOnUpdateStartIndex,t=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(e,t),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var e=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&bi(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=_i(this._debounceResetIsScrollingCallback,e)}},{key:"_getEstimatedTotalHeight",value:function(){var e=this.props,t=e.cellCount,r=e.cellMeasurerCache,n=e.width,o=Math.max(1,Math.floor(n/r.defaultWidth));return this._positionCache.estimateTotalHeight(t,o,r.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var e=this.props,t=e.height,r=e.onScroll,n=this.state.scrollTop;this._onScrollMemoized!==n&&(r({clientHeight:t,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:n}),this._onScrollMemoized=n)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(e,t){for(var r=this.props,n=r.cellMeasurerCache,o=r.cellPositioner,i=e;i<=t;i++){var a=o(i),l=a.left,s=a.top;this._positionCache.setPosition(i,l,s,n.getHeight(i))}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return void 0!==e.scrollTop&&t.scrollTop!==e.scrollTop?{isScrolling:!0,scrollTop:e.scrollTop}:null}}]),t}(),ne(ba,"propTypes",null),_a);function Ta(){}ne(Ia,"defaultProps",{autoHeight:!1,keyMapper:function(e){return e},onCellsRendered:Ta,onScroll:Ta,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"}),ti(Ia);var xa=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};re(this,e),ne(this,"_cellMeasurerCache",void 0),ne(this,"_columnIndexOffset",void 0),ne(this,"_rowIndexOffset",void 0),ne(this,"columnWidth",(function(e){var r=e.index;t._cellMeasurerCache.columnWidth({index:r+t._columnIndexOffset})})),ne(this,"rowHeight",(function(e){var r=e.index;t._cellMeasurerCache.rowHeight({index:r+t._rowIndexOffset})}));var n=r.cellMeasurerCache,o=r.columnIndexOffset,i=void 0===o?0:o,a=r.rowIndexOffset,l=void 0===a?0:a;this._cellMeasurerCache=n,this._columnIndexOffset=i,this._rowIndexOffset=l}return te(e,[{key:"clear",value:function(e,t){this._cellMeasurerCache.clear(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getHeight(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"getWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getWidth(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.has(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"set",value:function(e,t,r,n){this._cellMeasurerCache.set(e+this._rowIndexOffset,t+this._columnIndexOffset,r,n)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),e}();function Ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ra(r,!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ra(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ka=function(e){function t(e,r){var n;re(this,t),n=Qo(this,Yo(t).call(this,e,r)),ne(J(n),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),ne(J(n),"_deferredInvalidateColumnIndex",null),ne(J(n),"_deferredInvalidateRowIndex",null),ne(J(n),"_bottomLeftGridRef",(function(e){n._bottomLeftGrid=e})),ne(J(n),"_bottomRightGridRef",(function(e){n._bottomRightGrid=e})),ne(J(n),"_cellRendererBottomLeftGrid",(function(e){var t=e.rowIndex,r=ni(e,["rowIndex"]),o=n.props,i=o.cellRenderer,a=o.fixedRowCount;return t===o.rowCount-a?d.createElement("div",{key:r.key,style:Oa({},r.style,{height:20})}):i(Oa({},r,{parent:J(n),rowIndex:t+a}))})),ne(J(n),"_cellRendererBottomRightGrid",(function(e){var t=e.columnIndex,r=e.rowIndex,o=ni(e,["columnIndex","rowIndex"]),i=n.props,a=i.cellRenderer,l=i.fixedColumnCount,s=i.fixedRowCount;return a(Oa({},o,{columnIndex:t+l,parent:J(n),rowIndex:r+s}))})),ne(J(n),"_cellRendererTopRightGrid",(function(e){var t=e.columnIndex,r=ni(e,["columnIndex"]),o=n.props,i=o.cellRenderer,a=o.columnCount,l=o.fixedColumnCount;return t===a-l?d.createElement("div",{key:r.key,style:Oa({},r.style,{width:20})}):i(Oa({},r,{columnIndex:t+l,parent:J(n)}))})),ne(J(n),"_columnWidthRightGrid",(function(e){var t=e.index,r=n.props,o=r.columnCount,i=r.fixedColumnCount,a=r.columnWidth,l=n.state,s=l.scrollbarSize;return l.showHorizontalScrollbar&&t===o-i?s:"function"==typeof a?a({index:t+i}):a})),ne(J(n),"_onScroll",(function(e){var t=e.scrollLeft,r=e.scrollTop;n.setState({scrollLeft:t,scrollTop:r});var o=n.props.onScroll;o&&o(e)})),ne(J(n),"_onScrollbarPresenceChange",(function(e){var t=e.horizontal,r=e.size,o=e.vertical,i=n.state,a=i.showHorizontalScrollbar,l=i.showVerticalScrollbar;if(t!==a||o!==l){n.setState({scrollbarSize:r,showHorizontalScrollbar:t,showVerticalScrollbar:o});var s=n.props.onScrollbarPresenceChange;"function"==typeof s&&s({horizontal:t,size:r,vertical:o})}})),ne(J(n),"_onScrollLeft",(function(e){var t=e.scrollLeft;n._onScroll({scrollLeft:t,scrollTop:n.state.scrollTop})})),ne(J(n),"_onScrollTop",(function(e){var t=e.scrollTop;n._onScroll({scrollTop:t,scrollLeft:n.state.scrollLeft})})),ne(J(n),"_rowHeightBottomGrid",(function(e){var t=e.index,r=n.props,o=r.fixedRowCount,i=r.rowCount,a=r.rowHeight,l=n.state,s=l.scrollbarSize;return l.showVerticalScrollbar&&t===i-o?s:"function"==typeof a?a({index:t+o}):a})),ne(J(n),"_topLeftGridRef",(function(e){n._topLeftGrid=e})),ne(J(n),"_topRightGridRef",(function(e){n._topRightGrid=e}));var o=e.deferredMeasurementCache,i=e.fixedColumnCount,a=e.fixedRowCount;return n._maybeCalculateCachedStyles(!0),o&&(n._deferredMeasurementCacheBottomLeftGrid=a>0?new xa({cellMeasurerCache:o,columnIndexOffset:0,rowIndexOffset:a}):o,n._deferredMeasurementCacheBottomRightGrid=i>0||a>0?new xa({cellMeasurerCache:o,columnIndexOffset:i,rowIndexOffset:a}):o,n._deferredMeasurementCacheTopRightGrid=i>0?new xa({cellMeasurerCache:o,columnIndexOffset:i,rowIndexOffset:0}):o),n}return Xo(t,d.PureComponent),te(t,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,r=void 0===t?0:t,n=e.rowIndex,o=void 0===n?0:n;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,r):r,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,o):o}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,r=void 0===t?0:t,n=e.rowIndex,o=void 0===n?0:n,i=this.props,a=i.fixedColumnCount,l=i.fixedRowCount,s=Math.max(0,r-a),c=Math.max(0,o-l);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:r,rowIndex:c}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:s,rowIndex:c}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:r,rowIndex:o}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:s,rowIndex:o}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.scrollLeft,r=e.scrollTop;if(t>0||r>0){var n={};t>0&&(n.scrollLeft=t),r>0&&(n.scrollTop=r),this.setState(n)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var e=this.props,t=e.onScroll,r=e.onSectionRendered;e.onScrollbarPresenceChange,e.scrollLeft;var n=e.scrollToColumn;e.scrollTop;var o=e.scrollToRow,i=ni(e,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),0===this.props.width||0===this.props.height)return null;var a=this.state,l=a.scrollLeft,s=a.scrollTop;return d.createElement("div",{style:this._containerOuterStyle},d.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(i),this._renderTopRightGrid(Oa({},i,{onScroll:t,scrollLeft:l}))),d.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(Oa({},i,{onScroll:t,scrollTop:s})),this._renderBottomRightGrid(Oa({},i,{onScroll:t,onSectionRendered:r,scrollLeft:l,scrollToColumn:n,scrollToRow:o,scrollTop:s}))))}},{key:"_getBottomGridHeight",value:function(e){return e.height-this._getTopGridHeight(e)}},{key:"_getLeftGridWidth",value:function(e){var t=e.fixedColumnCount,r=e.columnWidth;if(null==this._leftGridWidth)if("function"==typeof r){for(var n=0,o=0;o<t;o++)n+=r({index:o});this._leftGridWidth=n}else this._leftGridWidth=r*t;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(e){return e.width-this._getLeftGridWidth(e)}},{key:"_getTopGridHeight",value:function(e){var t=e.fixedRowCount,r=e.rowHeight;if(null==this._topGridHeight)if("function"==typeof r){for(var n=0,o=0;o<t;o++)n+=r({index:o});this._topGridHeight=n}else this._topGridHeight=r*t;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(e){var t=this.props,r=t.columnWidth,n=t.enableFixedColumnScroll,o=t.enableFixedRowScroll,i=t.height,a=t.fixedColumnCount,l=t.fixedRowCount,s=t.rowHeight,c=t.style,u=t.styleBottomLeftGrid,d=t.styleBottomRightGrid,h=t.styleTopLeftGrid,f=t.styleTopRightGrid,p=t.width,g=e||i!==this._lastRenderedHeight||p!==this._lastRenderedWidth,v=e||r!==this._lastRenderedColumnWidth||a!==this._lastRenderedFixedColumnCount,m=e||l!==this._lastRenderedFixedRowCount||s!==this._lastRenderedRowHeight;(e||g||c!==this._lastRenderedStyle)&&(this._containerOuterStyle=Oa({height:i,overflow:"visible",width:p},c)),(e||g||m)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:p},this._containerBottomStyle={height:i-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:p}),(e||u!==this._lastRenderedStyleBottomLeftGrid)&&(this._bottomLeftGridStyle=Oa({left:0,overflowX:"hidden",overflowY:n?"auto":"hidden",position:"absolute"},u)),(e||v||d!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=Oa({left:this._getLeftGridWidth(this.props),position:"absolute"},d)),(e||h!==this._lastRenderedStyleTopLeftGrid)&&(this._topLeftGridStyle=Oa({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},h)),(e||v||f!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=Oa({left:this._getLeftGridWidth(this.props),overflowX:o?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},f)),this._lastRenderedColumnWidth=r,this._lastRenderedFixedColumnCount=a,this._lastRenderedFixedRowCount=l,this._lastRenderedHeight=i,this._lastRenderedRowHeight=s,this._lastRenderedStyle=c,this._lastRenderedStyleBottomLeftGrid=u,this._lastRenderedStyleBottomRightGrid=d,this._lastRenderedStyleTopLeftGrid=h,this._lastRenderedStyleTopRightGrid=f,this._lastRenderedWidth=p}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(e){var t=e.enableFixedColumnScroll,r=e.fixedColumnCount,n=e.fixedRowCount,o=e.rowCount,i=e.hideBottomLeftGridScrollbar,a=this.state.showVerticalScrollbar;if(!r)return null;var l=a?1:0,s=this._getBottomGridHeight(e),c=this._getLeftGridWidth(e),u=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,h=i?c+u:c,p=d.createElement(Ti,f({},e,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:r,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:s,onScroll:t?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,o-n)+l,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:h}));return i?d.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:Oa({},this._bottomLeftGridStyle,{height:s,width:c,overflowY:"hidden"})},p):p}},{key:"_renderBottomRightGrid",value:function(e){var t=e.columnCount,r=e.fixedColumnCount,n=e.fixedRowCount,o=e.rowCount,i=e.scrollToColumn,a=e.scrollToRow;return d.createElement(Ti,f({},e,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,t-r),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(e),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,o-n),rowHeight:this._rowHeightBottomGrid,scrollToColumn:i-r,scrollToRow:a-n,style:this._bottomRightGridStyle,width:this._getRightGridWidth(e)}))}},{key:"_renderTopLeftGrid",value:function(e){var t=e.fixedColumnCount,r=e.fixedRowCount;return t&&r?d.createElement(Ti,f({},e,{className:this.props.classNameTopLeftGrid,columnCount:t,height:this._getTopGridHeight(e),ref:this._topLeftGridRef,rowCount:r,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(e)})):null}},{key:"_renderTopRightGrid",value:function(e){var t=e.columnCount,r=e.enableFixedRowScroll,n=e.fixedColumnCount,o=e.fixedRowCount,i=e.scrollLeft,a=e.hideTopRightGridScrollbar,l=this.state,s=l.showHorizontalScrollbar,c=l.scrollbarSize;if(!o)return null;var u=s?1:0,h=this._getTopGridHeight(e),p=this._getRightGridWidth(e),g=s?c:0,v=h,m=this._topRightGridStyle;a&&(v=h+g,m=Oa({},this._topRightGridStyle,{left:0}));var y=d.createElement(Ti,f({},e,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,t-n)+u,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:v,onScroll:r?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:o,scrollLeft:i,style:m,tabIndex:null,width:p}));return a?d.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:Oa({},this._topRightGridStyle,{height:h,width:p,overflowX:"hidden"})},y):y}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft&&e.scrollLeft>=0?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop&&e.scrollTop>=0?e.scrollTop:t.scrollTop}:null}}]),t}();function Pa(e){var t=e.className,r=e.columns,n=e.style;return d.createElement("div",{className:t,role:"row",style:n},r)}ne(ka,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),ka.propTypes={},ti(ka),Pa.propTypes=null;var Da={ASC:"ASC",DESC:"DESC"};function Ea(e){var t=e.sortDirection,r=S("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":t===Da.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":t===Da.DESC});return d.createElement("svg",{className:r,width:18,height:18,viewBox:"0 0 24 24"},t===Da.ASC?d.createElement("path",{d:"M7 14l5-5 5 5z"}):d.createElement("path",{d:"M7 10l5 5 5-5z"}),d.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}function Ma(e){var t=e.dataKey,r=e.label,n=e.sortBy,o=e.sortDirection,i=n===t,a=[d.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:"string"==typeof r?r:null},r)];return i&&a.push(d.createElement(Ea,{key:"SortIndicator",sortDirection:o})),a}function za(e){var t=e.className,r=e.columns,n=e.index,o=e.key,i=e.onRowClick,a=e.onRowDoubleClick,l=e.onRowMouseOut,s=e.onRowMouseOver,c=e.onRowRightClick,u=e.rowData,h=e.style,p={"aria-rowindex":n+1};return(i||a||l||s||c)&&(p["aria-label"]="row",p.tabIndex=0,i&&(p.onClick=function(e){return i({event:e,index:n,rowData:u})}),a&&(p.onDoubleClick=function(e){return a({event:e,index:n,rowData:u})}),l&&(p.onMouseOut=function(e){return l({event:e,index:n,rowData:u})}),s&&(p.onMouseOver=function(e){return s({event:e,index:n,rowData:u})}),c&&(p.onContextMenu=function(e){return c({event:e,index:n,rowData:u})})),d.createElement("div",f({},p,{className:t,key:o,role:"row",style:h}),r)}Ea.propTypes={},Ma.propTypes=null,za.propTypes=null;var Aa=function(e){function t(){return re(this,t),Qo(this,Yo(t).apply(this,arguments))}return Xo(t,d.Component),t}();function Na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function La(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Na(r,!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Na(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}ne(Aa,"defaultProps",{cellDataGetter:function(e){var t=e.dataKey,r=e.rowData;return"function"==typeof r.get?r.get(t):r[t]},cellRenderer:function(e){var t=e.cellData;return null==t?"":String(t)},defaultSortDirection:Da.ASC,flexGrow:0,flexShrink:1,headerRenderer:Ma,style:{}}),Aa.propTypes={};var ja=function(e){function t(e){var r;return re(this,t),(r=Qo(this,Yo(t).call(this,e))).state={scrollbarWidth:0},r._createColumn=r._createColumn.bind(J(r)),r._createRow=r._createRow.bind(J(r)),r._onScroll=r._onScroll.bind(J(r)),r._onSectionRendered=r._onSectionRendered.bind(J(r)),r._setRef=r._setRef.bind(J(r)),r}return Xo(t,d.PureComponent),te(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,r=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:r}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,r=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:r,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,r=void 0===t?0:t,n=e.rowIndex,o=void 0===n?0:n;this.Grid&&this.Grid.recomputeGridSize({rowIndex:o,columnIndex:r})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var e=Y.findDOMNode(this.Grid),t=e.clientWidth||0;return(e.offsetWidth||0)-t}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var e=this,t=this.props,r=t.children,n=t.className,o=t.disableHeader,i=t.gridClassName,a=t.gridStyle,l=t.headerHeight,s=t.headerRowRenderer,c=t.height,u=t.id,h=t.noRowsRenderer,p=t.rowClassName,g=t.rowStyle,v=t.scrollToIndex,m=t.style,y=t.width,b=this.state.scrollbarWidth,_=o?c:c-l,w="function"==typeof p?p({index:-1}):p,C="function"==typeof g?g({index:-1}):g;return this._cachedColumnStyles=[],d.Children.toArray(r).forEach((function(t,r){var n=e._getFlexStyleForColumn(t,t.props.style);e._cachedColumnStyles[r]=La({overflow:"hidden"},n)})),d.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":d.Children.toArray(r).length,"aria-rowcount":this.props.rowCount,className:S("ReactVirtualized__Table",n),id:u,role:"grid",style:m},!o&&s({className:S("ReactVirtualized__Table__headerRow",w),columns:this._getHeaderColumns(),style:La({height:l,overflow:"hidden",paddingRight:b,width:y},C)}),d.createElement(Ti,f({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:S("ReactVirtualized__Table__Grid",i),cellRenderer:this._createRow,columnWidth:y,columnCount:1,height:_,id:void 0,noContentRenderer:h,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:b,scrollToRow:v,style:La({},a,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(e){var t=e.column,r=e.columnIndex,n=e.isScrolling,o=e.parent,i=e.rowData,a=e.rowIndex,l=this.props.onColumnClick,s=t.props,c=s.cellDataGetter,u=s.cellRenderer,h=s.className,f=s.columnData,p=s.dataKey,g=s.id,v=u({cellData:c({columnData:f,dataKey:p,rowData:i}),columnData:f,columnIndex:r,dataKey:p,isScrolling:n,parent:o,rowData:i,rowIndex:a}),m=this._cachedColumnStyles[r],y="string"==typeof v?v:null;return d.createElement("div",{"aria-colindex":r+1,"aria-describedby":g,className:S("ReactVirtualized__Table__rowColumn",h),key:"Row"+a+"-Col"+r,onClick:function(e){l&&l({columnData:f,dataKey:p,event:e})},role:"gridcell",style:m,title:y},v)}},{key:"_createHeader",value:function(e){var t,r,n,o,i,a=e.column,l=e.index,s=this.props,c=s.headerClassName,u=s.headerStyle,h=s.onHeaderClick,f=s.sort,p=s.sortBy,g=s.sortDirection,v=a.props,m=v.columnData,y=v.dataKey,b=v.defaultSortDirection,_=v.disableSort,w=v.headerRenderer,C=v.id,I=v.label,T=!_&&f,x=S("ReactVirtualized__Table__headerColumn",c,a.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:T}),R=this._getFlexStyleForColumn(a,La({},u,{},a.props.headerStyle)),O=w({columnData:m,dataKey:y,disableSort:_,label:I,sortBy:p,sortDirection:g});if(T||h){var k=p!==y?b:g===Da.DESC?Da.ASC:Da.DESC,P=function(e){T&&f({defaultSortDirection:b,event:e,sortBy:y,sortDirection:k}),h&&h({columnData:m,dataKey:y,event:e})};i=a.props["aria-label"]||I||y,o="none",n=0,t=P,r=function(e){"Enter"!==e.key&&" "!==e.key||P(e)}}return p===y&&(o=g===Da.ASC?"ascending":"descending"),d.createElement("div",{"aria-label":i,"aria-sort":o,className:x,id:C,key:"Header-Col"+l,onClick:t,onKeyDown:r,role:"columnheader",style:R,tabIndex:n},O)}},{key:"_createRow",value:function(e){var t=this,r=e.rowIndex,n=e.isScrolling,o=e.key,i=e.parent,a=e.style,l=this.props,s=l.children,c=l.onRowClick,u=l.onRowDoubleClick,h=l.onRowRightClick,f=l.onRowMouseOver,p=l.onRowMouseOut,g=l.rowClassName,v=l.rowGetter,m=l.rowRenderer,y=l.rowStyle,b=this.state.scrollbarWidth,_="function"==typeof g?g({index:r}):g,w="function"==typeof y?y({index:r}):y,C=v({index:r}),I=d.Children.toArray(s).map((function(e,o){return t._createColumn({column:e,columnIndex:o,isScrolling:n,parent:i,rowData:C,rowIndex:r,scrollbarWidth:b})})),T=S("ReactVirtualized__Table__row",_),x=La({},a,{height:this._getRowHeight(r),overflow:"hidden",paddingRight:b},w);return m({className:T,columns:I,index:r,isScrolling:n,key:o,onRowClick:c,onRowDoubleClick:u,onRowRightClick:h,onRowMouseOver:f,onRowMouseOut:p,rowData:C,style:x})}},{key:"_getFlexStyleForColumn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(e.props.flexGrow," ").concat(e.props.flexShrink," ").concat(e.props.width,"px"),n=La({},t,{flex:r,msFlex:r,WebkitFlex:r});return e.props.maxWidth&&(n.maxWidth=e.props.maxWidth),e.props.minWidth&&(n.minWidth=e.props.minWidth),n}},{key:"_getHeaderColumns",value:function(){var e=this,t=this.props,r=t.children;return(t.disableHeader?[]:d.Children.toArray(r)).map((function(t,r){return e._createHeader({column:t,index:r})}))}},{key:"_getRowHeight",value:function(e){var t=this.props.rowHeight;return"function"==typeof t?t({index:e}):t}},{key:"_onScroll",value:function(e){var t=e.clientHeight,r=e.scrollHeight,n=e.scrollTop;(0,this.props.onScroll)({clientHeight:t,scrollHeight:r,scrollTop:n})}},{key:"_onSectionRendered",value:function(e){var t=e.rowOverscanStartIndex,r=e.rowOverscanStopIndex,n=e.rowStartIndex,o=e.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:r,startIndex:n,stopIndex:o})}},{key:"_setRef",value:function(e){this.Grid=e}},{key:"_setScrollbarWidth",value:function(){var e=this.getScrollbarWidth();this.setState({scrollbarWidth:e})}}]),t}();ne(ja,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:Oi,overscanRowCount:10,rowRenderer:za,headerRowRenderer:Pa,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}}),ja.propTypes={};var Fa=[],Ga=null,Ha=null;function Va(){Ha&&(Ha=null,document.body&&null!=Ga&&(document.body.style.pointerEvents=Ga),Ga=null)}function Wa(){Va(),Fa.forEach((function(e){return e.__resetIsScrolling()}))}function Ua(e){e.currentTarget===window&&null==Ga&&document.body&&(Ga=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),function(){Ha&&bi(Ha);var e=0;Fa.forEach((function(t){e=Math.max(e,t.props.scrollingResetTimeInterval)})),Ha=_i(Wa,e)}(),Fa.forEach((function(t){t.props.scrollElement===e.currentTarget&&t.__handleWindowScrollEvent()}))}function Ba(e,t){Fa.some((function(e){return e.props.scrollElement===t}))||t.addEventListener("scroll",Ua),Fa.push(e)}function $a(e,t){(Fa=Fa.filter((function(t){return t!==e}))).length||(t.removeEventListener("scroll",Ua),Ha&&(bi(Ha),Va()))}var qa,Ka,Qa=function(e){return e===window},Ya=function(e){return e.getBoundingClientRect()};function Xa(e,t){if(e){if(Qa(e)){var r=window,n=r.innerHeight,o=r.innerWidth;return{height:"number"==typeof n?n:0,width:"number"==typeof o?o:0}}return Ya(e)}return{height:t.serverHeight,width:t.serverWidth}}function Ja(e){return Qa(e)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:e.scrollTop,left:e.scrollLeft}}function Za(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var el=function(){return"undefined"!=typeof window?window:void 0},tl=(Ka=qa=function(e){function t(){var e,r;re(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=Qo(this,(e=Yo(t)).call.apply(e,[this].concat(o))),ne(J(r),"_window",el()),ne(J(r),"_isMounted",!1),ne(J(r),"_positionFromTop",0),ne(J(r),"_positionFromLeft",0),ne(J(r),"_detectElementResize",void 0),ne(J(r),"_child",void 0),ne(J(r),"state",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Za(r,!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Za(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Xa(r.props.scrollElement,r.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),ne(J(r),"_registerChild",(function(e){!e||e instanceof Element||console.warn("WindowScroller registerChild expects to be passed Element or null"),r._child=e,r.updatePosition()})),ne(J(r),"_onChildScroll",(function(e){var t=e.scrollTop;if(r.state.scrollTop!==t){var n=r.props.scrollElement;n&&("function"==typeof n.scrollTo?n.scrollTo(0,t+r._positionFromTop):n.scrollTop=t+r._positionFromTop)}})),ne(J(r),"_registerResizeListener",(function(e){e===window?window.addEventListener("resize",r._onResize,!1):r._detectElementResize.addResizeListener(e,r._onResize)})),ne(J(r),"_unregisterResizeListener",(function(e){e===window?window.removeEventListener("resize",r._onResize,!1):e&&r._detectElementResize.removeResizeListener(e,r._onResize)})),ne(J(r),"_onResize",(function(){r.updatePosition()})),ne(J(r),"__handleWindowScrollEvent",(function(){if(r._isMounted){var e=r.props.onScroll,t=r.props.scrollElement;if(t){var n=Ja(t),o=Math.max(0,n.left-r._positionFromLeft),i=Math.max(0,n.top-r._positionFromTop);r.setState({isScrolling:!0,scrollLeft:o,scrollTop:i}),e({scrollLeft:o,scrollTop:i})}}})),ne(J(r),"__resetIsScrolling",(function(){r.setState({isScrolling:!1})})),r}return Xo(t,d.PureComponent),te(t,[{key:"updatePosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.scrollElement,t=this.props.onResize,r=this.state,n=r.height,o=r.width,i=this._child||Y.findDOMNode(this);if(i instanceof Element&&e){var a=function(e,t){if(Qa(t)&&document.documentElement){var r=document.documentElement,n=Ya(e),o=Ya(r);return{top:n.top-o.top,left:n.left-o.left}}var i=Ja(t),a=Ya(e),l=Ya(t);return{top:a.top+i.top-l.top,left:a.left+i.left-l.left}}(i,e);this._positionFromTop=a.top,this._positionFromLeft=a.left}var l=Xa(e,this.props);n===l.height&&o===l.width||(this.setState({height:l.height,width:l.width}),t({height:l.height,width:l.width}))}},{key:"componentDidMount",value:function(){var e=this.props.scrollElement;this._detectElementResize=Mi(),this.updatePosition(e),e&&(Ba(this,e),this._registerResizeListener(e)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.scrollElement,n=e.scrollElement;n!==r&&null!=n&&null!=r&&(this.updatePosition(r),$a(this,n),Ba(this,r),this._unregisterResizeListener(n),this._registerResizeListener(r))}},{key:"componentWillUnmount",value:function(){var e=this.props.scrollElement;e&&($a(this,e),this._unregisterResizeListener(e)),this._isMounted=!1}},{key:"render",value:function(){var e=this.props.children,t=this.state,r=t.isScrolling,n=t.scrollTop,o=t.scrollLeft,i=t.height,a=t.width;return e({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:i,isScrolling:r,scrollLeft:o,scrollTop:n,width:a})}}]),t}(),ne(qa,"propTypes",null),Ka);function rl(e){return(rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ol(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function il(e,t,r){return t&&ol(e.prototype,t),r&&ol(e,r),e}function al(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ll(){return ll=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ll.apply(this,arguments)}function sl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(r),!0).forEach((function(t){al(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ul(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hl(e,t)}function dl(e){return(dl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hl(e,t){return(hl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fl(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function pl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gl(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?pl(e):t}function vl(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ml(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function yl(e){this.setState(function(t){var r=this.constructor.getDerivedStateFromProps(e,t);return null!=r?r:null}.bind(this))}function bl(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}function _l(e){var t=e.targetIndex,r=e.node,n=e.currentIndex,o=e.getNodeKey,i=e.path,a=void 0===i?[]:i,l=e.lowerSiblingCounts,s=void 0===l?[]:l,c=e.ignoreCollapsed,u=void 0===c||c,d=e.isPseudoRoot,h=void 0!==d&&d?[]:[].concat(vl(a),[o({node:r,treeIndex:n})]);if(n===t)return{node:r,lowerSiblingCounts:s,path:h};if(!r.children||u&&!0!==r.expanded)return{nextIndex:n+1};for(var f=n+1,p=r.children.length,g=0;g<p;g+=1){var v=_l({ignoreCollapsed:u,getNodeKey:o,targetIndex:t,node:r.children[g],currentIndex:f,lowerSiblingCounts:[].concat(vl(s),[p-g-1]),path:h});if(v.node)return v;f=v.nextIndex}return{nextIndex:f}}function Sl(e){var t=e.node,r=e.ignoreCollapsed;return _l({getNodeKey:function(){},ignoreCollapsed:void 0===r||r,node:t,currentIndex:0,targetIndex:-1}).nextIndex-1}function wl(e){var t=e.callback,r=e.getNodeKey,n=e.ignoreCollapsed,o=e.isPseudoRoot,i=void 0!==o&&o,a=e.node,l=e.parentNode,s=void 0===l?null:l,c=e.currentIndex,u=e.path,d=void 0===u?[]:u,h=e.lowerSiblingCounts,f=void 0===h?[]:h,p=i?[]:[].concat(vl(d),[r({node:a,treeIndex:c})]);if(!i&&!1===t(i?null:{node:a,parentNode:s,path:p,lowerSiblingCounts:f,treeIndex:c}))return!1;if(!a.children||!0!==a.expanded&&n&&!i)return c;var g=c,v=a.children.length;if("function"!=typeof a.children)for(var m=0;m<v;m+=1)if(!1===(g=wl({callback:t,getNodeKey:r,ignoreCollapsed:n,node:a.children[m],parentNode:i?null:a,currentIndex:g+1,lowerSiblingCounts:[].concat(vl(f),[v-m-1]),path:p})))return!1;return g}function Cl(e){var t=e.callback,r=e.getNodeKey,n=e.ignoreCollapsed,o=e.isPseudoRoot,i=void 0!==o&&o,a=e.node,l=e.parentNode,s=void 0===l?null:l,c=e.currentIndex,u=e.path,d=void 0===u?[]:u,h=e.lowerSiblingCounts,f=void 0===h?[]:h,p=cl({},a),g=i?[]:[].concat(vl(d),[r({node:p,treeIndex:c})]),v={node:p,parentNode:s,path:g,lowerSiblingCounts:f,treeIndex:c};if(!p.children||!0!==p.expanded&&n&&!i)return{treeIndex:c,node:t(v)};var m=c,y=p.children.length;return"function"!=typeof p.children&&(p.children=p.children.map((function(e,o){var a=Cl({callback:t,getNodeKey:r,ignoreCollapsed:n,node:e,parentNode:i?null:p,currentIndex:m+1,lowerSiblingCounts:[].concat(vl(f),[y-o-1]),path:g});return m=a.treeIndex,a.node}))),{node:t(v),treeIndex:m}}function Il(e){var t=e.treeData,r=e.getNodeKey,n=e.callback,o=e.ignoreCollapsed,i=void 0===o||o;!t||t.length<1||wl({callback:n,getNodeKey:r,ignoreCollapsed:i,isPseudoRoot:!0,node:{children:t},currentIndex:-1,path:[],lowerSiblingCounts:[]})}function Tl(e){var t=e.treeData,r=e.getNodeKey,n=e.callback,o=e.ignoreCollapsed,i=void 0===o||o;return!t||t.length<1?[]:Cl({callback:n,getNodeKey:r,ignoreCollapsed:i,isPseudoRoot:!0,node:{children:t},currentIndex:-1,path:[],lowerSiblingCounts:[]}).node.children}function xl(e){var t=e.treeData,r=e.path,n=e.newNode,o=e.getNodeKey,i=e.ignoreCollapsed,a=void 0===i||i,l="RESULT_MISS",s=function e(t){var i=t.isPseudoRoot,s=void 0!==i&&i,c=t.node,u=t.currentTreeIndex,d=t.pathIndex;if(!s&&o({node:c,treeIndex:u})!==r[d])return l;if(d>=r.length-1)return"function"==typeof n?n({node:c,treeIndex:u}):n;if(!c.children)throw new Error("Path referenced children of node with no children.");for(var h=u+1,f=0;f<c.children.length;f+=1){var p=e({node:c.children[f],currentTreeIndex:h,pathIndex:d+1});if(p!==l)return cl(cl({},c),{},p?{children:[].concat(vl(c.children.slice(0,f)),[p],vl(c.children.slice(f+1)))}:{children:[].concat(vl(c.children.slice(0,f)),vl(c.children.slice(f+1)))});h+=1+Sl({node:c.children[f],ignoreCollapsed:a})}return l}({node:{children:t},currentTreeIndex:-1,pathIndex:-1,isPseudoRoot:!0});if(s===l)throw new Error("No node found at the given path.");return s.children}function Rl(e){var t=e.treeData,r=e.path,n=e.getNodeKey,o=e.ignoreCollapsed;return xl({treeData:t,path:r,getNodeKey:n,ignoreCollapsed:void 0===o||o,newNode:null})}function Ol(e){var t=e.treeData,r=e.path,n=e.getNodeKey,o=e.ignoreCollapsed,i=void 0===o||o,a=null;try{xl({treeData:t,path:r,getNodeKey:n,ignoreCollapsed:i,newNode:function(e){var t=e.node,r=e.treeIndex;return a={node:t,treeIndex:r},t}})}catch(l){}return a}function kl(e){var t=e.treeData,r=e.newNode,n=e.parentKey,o=void 0===n?null:n,i=e.getNodeKey,a=e.ignoreCollapsed,l=void 0===a||a,s=e.expandParent,c=void 0!==s&&s,u=e.addAsFirstChild,d=void 0!==u&&u;if(null===o)return d?{treeData:[r].concat(vl(t||[])),treeIndex:0}:{treeData:[].concat(vl(t||[]),[r]),treeIndex:(t||[]).length};var h=null,f=!1,p=Tl({treeData:t,getNodeKey:i,ignoreCollapsed:l,callback:function(e){var t=e.node,n=e.treeIndex,i=e.path,a=i?i[i.length-1]:null;if(f||a!==o)return t;f=!0;var s=cl({},t);if(c&&(s.expanded=!0),!s.children)return h=n+1,cl(cl({},s),{},{children:[r]});if("function"==typeof s.children)throw new Error("Cannot add to children defined by a function");for(var u=n+1,p=0;p<s.children.length;p+=1)u+=1+Sl({node:s.children[p],ignoreCollapsed:l});h=u;var g=d?[r].concat(vl(s.children)):[].concat(vl(s.children),[r]);return cl(cl({},s),{},{children:g})}});if(!f)throw new Error("No node found with the given key.");return{treeData:p,treeIndex:h}}function Pl(e){var t=e.targetDepth,r=e.minimumTreeIndex,n=e.newNode,o=e.ignoreCollapsed,i=e.expandParent,a=e.isPseudoRoot,l=void 0!==a&&a,s=e.isLastChild,c=e.node,u=e.currentIndex,d=e.currentDepth,h=e.getNodeKey,f=e.path,p=void 0===f?[]:f,g=function(e){return l?[]:[].concat(vl(p),[h({node:e,treeIndex:u})])};if(u>=r-1||s&&(!c.children||!c.children.length)){if("function"==typeof c.children)throw new Error("Cannot add to children defined by a function");var v=i?{expanded:!0}:{},m=cl(cl(cl({},c),v),{},{children:c.children?[n].concat(vl(c.children)):[n]});return{node:m,nextIndex:u+2,insertedTreeIndex:u+1,parentPath:g(m),parentNode:l?null:m}}if(d>=t-1){if(!c.children||"function"==typeof c.children||!0!==c.expanded&&o&&!l)return{node:c,nextIndex:u+1};for(var y=u+1,b=null,_=null,S=0;S<c.children.length;S+=1){if(y>=r){b=y,_=S;break}y+=1+Sl({node:c.children[S],ignoreCollapsed:o})}if(null===_){if(y<r&&!s)return{node:c,nextIndex:y};b=y,_=c.children.length}var w=cl(cl({},c),{},{children:[].concat(vl(c.children.slice(0,_)),[n],vl(c.children.slice(_)))});return{node:w,nextIndex:y,insertedTreeIndex:b,parentPath:g(w),parentNode:l?null:w}}if(!c.children||"function"==typeof c.children||!0!==c.expanded&&o&&!l)return{node:c,nextIndex:u+1};var C=null,I=null,T=null,x=u+1,R=c.children;"function"!=typeof R&&(R=R.map((function(e,a){if(null!==C)return e;var l=Pl({targetDepth:t,minimumTreeIndex:r,newNode:n,ignoreCollapsed:o,expandParent:i,isLastChild:s&&a===R.length-1,node:e,currentIndex:x,currentDepth:d+1,getNodeKey:h,path:[]});return"insertedTreeIndex"in l&&(C=l.insertedTreeIndex,T=l.parentNode,I=l.parentPath),x=l.nextIndex,l.node})));var O=cl(cl({},c),{},{children:R}),k={node:O,nextIndex:x};return null!==C&&(k.insertedTreeIndex=C,k.parentPath=[].concat(vl(g(O)),vl(I)),k.parentNode=T),k}function Dl(e){var t=e.treeData,r=e.depth,n=e.minimumTreeIndex,o=e.newNode,i=e.getNodeKey,a=void 0===i?function(){}:i,l=e.ignoreCollapsed,s=void 0===l||l,c=e.expandParent,u=void 0!==c&&c;if(!t&&0===r)return{treeData:[o],treeIndex:0,path:[a({node:o,treeIndex:0})],parentNode:null};var d=Pl({targetDepth:r,minimumTreeIndex:n,newNode:o,ignoreCollapsed:s,expandParent:u,getNodeKey:a,isPseudoRoot:!0,isLastChild:!0,node:{children:t},currentIndex:-1,currentDepth:-1});if(!("insertedTreeIndex"in d))throw new Error("No suitable position found to insert.");var h=d.insertedTreeIndex;return{treeData:d.node.children,treeIndex:h,path:[].concat(vl(d.parentPath),[a({node:o,treeIndex:h})]),parentNode:d.parentNode}}function El(e,t){return!!e.children&&"function"!=typeof e.children&&e.children.some((function(e){return e===t||El(e,t)}))}function Ml(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.children?"function"==typeof e.children?t+1:e.children.reduce((function(e,r){return Math.max(e,Ml(r,t+1))}),t):t}function zl(e){var t=e.getNodeKey,r=e.treeData,n=e.searchQuery,o=e.searchMethod,i=e.searchFocusOffset,a=e.expandAllMatchPaths,l=void 0!==a&&a,s=e.expandFocusMatchPaths,c=void 0===s||s,u=0,d=function e(r){var a=r.isPseudoRoot,s=void 0!==a&&a,d=r.node,h=r.currentIndex,f=r.path,p=[],g=!1,v=!1,m=s?[]:[].concat(vl(void 0===f?[]:f),[t({node:d,treeIndex:h})]),y=s?null:{path:m,treeIndex:h},b=d.children&&"function"!=typeof d.children&&d.children.length>0;!s&&o(cl(cl({},y),{},{node:d,searchQuery:n}))&&(u===i&&(v=!0),u+=1,g=!0);var _=h,S=cl({},d);return b&&(S.children=S.children.map((function(t){var r=e({node:t,currentIndex:_+1,path:m});return r.node.expanded?_=r.treeIndex:_+=1,(r.matches.length>0||r.hasFocusMatch)&&(p=[].concat(vl(p),vl(r.matches)),r.hasFocusMatch&&(v=!0),(l&&r.matches.length>0||(l||c)&&r.hasFocusMatch)&&(S.expanded=!0)),r.node}))),s||S.expanded||(p=p.map((function(e){return cl(cl({},e),{},{treeIndex:null})}))),g&&(p=[cl(cl({},y),{},{node:S})].concat(vl(p))),{node:p.length>0?S:d,matches:p,hasFocusMatch:v,treeIndex:_}}({node:{children:r},isPseudoRoot:!0,currentIndex:-1});return{matches:d.matches,treeData:d.node.children}}function Al(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function Nl(e){return function(){var t,r=dl(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()){var n=dl(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return gl(this,t)}}ne(tl,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:el(),serverHeight:0,serverWidth:0}),ml.__suppressDeprecationWarning=!0,yl.__suppressDeprecationWarning=!0,bl.__suppressDeprecationWarning=!0;var Ll=function(t){ul(n,d.Component);var r=Nl(n);function n(){return nl(this,n),r.apply(this,arguments)}return il(n,[{key:"render",value:function(){var t=this.props,r=t.scaffoldBlockPxWidth,n=t.toggleChildrenVisibility,o=t.connectDragPreview,i=t.connectDragSource,a=t.isDragging,l=t.canDrop,s=t.canDrag,c=t.node,u=t.title,d=t.subtitle,h=t.draggedNode,f=t.path,p=t.treeIndex,g=t.isSearchMatch,v=t.isSearchFocus,m=t.buttons,y=t.className,b=t.style,_=t.didDrop;t.treeId,t.isOver,t.parentNode;var S,w=t.rowDirection,C=fl(t,["scaffoldBlockPxWidth","toggleChildrenVisibility","connectDragPreview","connectDragSource","isDragging","canDrop","canDrag","node","title","subtitle","draggedNode","path","treeIndex","isSearchMatch","isSearchFocus","buttons","className","style","didDrop","treeId","isOver","parentNode","rowDirection"]),I=u||c.title,T=d||c.subtitle,x="rtl"===w?"rst__rtl":null;s&&(S="function"==typeof c.children&&c.expanded?e.createElement("div",{className:"rst__loadingHandle"},e.createElement("div",{className:"rst__loadingCircle"},vl(new Array(12)).map((function(t,r){return e.createElement("div",{key:r,className:Al("rst__loadingCirclePoint",x)})})))):i(e.createElement("div",{className:"rst__moveHandle"}),{dropEffect:"copy"}));var R=h&&El(h,c),O=!_&&a,k={left:-.5*r};return"rtl"===w&&(k={right:-.5*r}),e.createElement("div",ll({style:{height:"100%"}},C),n&&c.children&&(c.children.length>0||"function"==typeof c.children)&&e.createElement("div",null,e.createElement("button",{type:"button","aria-label":c.expanded?"Collapse":"Expand",className:Al(c.expanded?"rst__collapseButton":"rst__expandButton",x),style:k,onClick:function(){return n({node:c,path:f,treeIndex:p})}}),c.expanded&&!a&&e.createElement("div",{style:{width:r},className:Al("rst__lineChildren",x)})),e.createElement("div",{className:Al("rst__rowWrapper",x)},o(e.createElement("div",{className:Al("rst__row",O&&"rst__rowLandingPad",O&&!l&&"rst__rowCancelPad",g&&"rst__rowSearchMatch",v&&"rst__rowSearchFocus",x,y),style:cl({opacity:R?.5:1},b)},S,e.createElement("div",{className:Al("rst__rowContents",!s&&"rst__rowContentsDragDisabled",x)},e.createElement("div",{className:Al("rst__rowLabel",x)},e.createElement("span",{className:Al("rst__rowTitle",c.subtitle&&"rst__rowTitleWithSubtitle")},"function"==typeof I?I({node:c,path:f,treeIndex:p}):I),T&&e.createElement("span",{className:"rst__rowSubtitle"},"function"==typeof T?T({node:c,path:f,treeIndex:p}):T)),e.createElement("div",{className:"rst__rowToolbar"},m.map((function(t,r){return e.createElement("div",{key:r,className:"rst__toolbarButton"},t)}))))))))}}]),n}();Ll.defaultProps={isSearchMatch:!1,isSearchFocus:!1,canDrag:!1,toggleChildrenVisibility:null,buttons:[],className:"",style:{},parentNode:null,draggedNode:null,canDrop:!1,title:null,subtitle:null,rowDirection:"ltr"},Ll.propTypes={node:Q.shape({}).isRequired,title:Q.oneOfType([Q.func,Q.node]),subtitle:Q.oneOfType([Q.func,Q.node]),path:Q.arrayOf(Q.oneOfType([Q.string,Q.number])).isRequired,treeIndex:Q.number.isRequired,treeId:Q.string.isRequired,isSearchMatch:Q.bool,isSearchFocus:Q.bool,canDrag:Q.bool,scaffoldBlockPxWidth:Q.number.isRequired,toggleChildrenVisibility:Q.func,buttons:Q.arrayOf(Q.node),className:Q.string,style:Q.shape({}),connectDragPreview:Q.func.isRequired,connectDragSource:Q.func.isRequired,parentNode:Q.shape({}),isDragging:Q.bool.isRequired,didDrop:Q.bool.isRequired,draggedNode:Q.shape({}),isOver:Q.bool.isRequired,canDrop:Q.bool,rowDirection:Q.string};var jl=function(t){var r=t.isOver,n=t.canDrop;return e.createElement("div",{className:Al("rst__placeholder",n&&"rst__placeholderLandingPad",n&&!r&&"rst__placeholderCancelPad")})};function Fl(e){return function(){var t,r=dl(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()){var n=dl(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return gl(this,t)}}jl.defaultProps={isOver:!1,canDrop:!1},jl.propTypes={isOver:Q.bool,canDrop:Q.bool};var Gl=function(t){ul(n,d.Component);var r=Fl(n);function n(){return nl(this,n),r.apply(this,arguments)}return il(n,[{key:"render",value:function(){var t=this.props,r=t.children,n=t.listIndex,o=t.swapFrom,i=t.swapLength,a=t.swapDepth,l=t.scaffoldBlockPxWidth,s=t.lowerSiblingCounts,c=t.connectDropTarget,u=t.isOver,h=t.draggedNode,f=t.canDrop,p=t.treeIndex;t.treeId,t.getPrevRow,t.node,t.path;var g,v=t.rowDirection,m=fl(t,["children","listIndex","swapFrom","swapLength","swapDepth","scaffoldBlockPxWidth","lowerSiblingCounts","connectDropTarget","isOver","draggedNode","canDrop","treeIndex","treeId","getPrevRow","node","path","rowDirection"]),y="rtl"===v?"rst__rtl":null,b=s.length,_=[];return s.forEach((function(t,r){var s="";if(t>0?s=0===n?"rst__lineHalfHorizontalRight rst__lineHalfVerticalBottom":r===b-1?"rst__lineHalfHorizontalRight rst__lineFullVertical":"rst__lineFullVertical":0===n?s="rst__lineHalfHorizontalRight":r===b-1&&(s="rst__lineHalfVerticalTop rst__lineHalfHorizontalRight"),_.push(e.createElement("div",{key:"pre_".concat(1+r),style:{width:l},className:Al("rst__lineBlock",s,y)})),p!==n&&r===a){var c,u="";u=n===o+i-1?"rst__highlightBottomLeftCorner":p===o?"rst__highlightTopLeftCorner":"rst__highlightLineVertical",c="rtl"===v?{width:l,right:l*r}:{width:l,left:l*r},_.push(e.createElement("div",{key:r,style:c,className:Al("rst__absoluteLineBlock",u,y)}))}})),g="rtl"===v?{right:l*b}:{left:l*b},c(e.createElement("div",ll({},m,{className:Al("rst__node",y)}),_,e.createElement("div",{className:"rst__nodeContent",style:g},d.Children.map(r,(function(e){return d.cloneElement(e,{isOver:u,canDrop:f,draggedNode:h})})))))}}]),n}();function Hl(e){return function(){var t,r=dl(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()){var n=dl(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return gl(this,t)}}Gl.defaultProps={swapFrom:null,swapDepth:null,swapLength:null,canDrop:!1,draggedNode:null,rowDirection:"ltr"},Gl.propTypes={treeIndex:Q.number.isRequired,treeId:Q.string.isRequired,swapFrom:Q.number,swapDepth:Q.number,swapLength:Q.number,scaffoldBlockPxWidth:Q.number.isRequired,lowerSiblingCounts:Q.arrayOf(Q.number).isRequired,listIndex:Q.number.isRequired,children:Q.node.isRequired,connectDropTarget:Q.func.isRequired,isOver:Q.bool.isRequired,canDrop:Q.bool,draggedNode:Q.shape({}),getPrevRow:Q.func.isRequired,node:Q.shape({}).isRequired,path:Q.arrayOf(Q.oneOfType([Q.string,Q.number])).isRequired,rowDirection:Q.string};var Vl=function(t){ul(n,d.Component);var r=Hl(n);function n(){return nl(this,n),r.apply(this,arguments)}return il(n,[{key:"render",value:function(){var t=this.props,r=t.children,n=t.connectDropTarget;t.treeId,t.drop;var o=fl(t,["children","connectDropTarget","treeId","drop"]);return n(e.createElement("div",null,d.Children.map(r,(function(e){return d.cloneElement(e,cl({},o))}))))}}]),n}();function Wl(e){return"string"==typeof e?e:null===e||"object"!==rl(e)||!e.props||!e.props.children||"string"!=typeof e.props.children&&"object"!==rl(e.props.children)?"":"string"==typeof e.props.children?e.props.children:e.props.children.map((function(e){return Wl(e)})).join("")}function Ul(e,t,r,n,o){return"function"==typeof r[e]?String(r[e]({node:r,path:n,treeIndex:o})).indexOf(t)>-1:"object"===rl(r[e])?Wl(r[e]).indexOf(t)>-1:r[e]&&String(r[e]).indexOf(t)>-1}function Bl(e){var t=e.node,r=e.path,n=e.treeIndex,o=e.searchQuery;return Ul("title",o,t,r,n)||Ul("subtitle",o,t,r,n)}Vl.defaultProps={canDrop:!1,draggedNode:null},Vl.propTypes={children:Q.node.isRequired,connectDropTarget:Q.func.isRequired,isOver:Q.bool.isRequired,canDrop:Q.bool,draggedNode:Q.shape({}),treeId:Q.string.isRequired,drop:Q.func.isRequired};var $l=function(e){var t=[],r=[],n=null;return function(o){var i=Object.keys(o).sort(),a=i.map((function(e){return o[e]}));return(a.length!==t.length||a.some((function(e,r){return e!==t[r]}))||i.some((function(e,t){return e!==r[t]})))&&(t=a,r=i,n=e(o)),n}},ql=$l(Dl),Kl=$l((function(e){var t=e.treeData,r=e.getNodeKey,n=e.ignoreCollapsed,o=void 0===n||n;if(!t||t.length<1)return[];var i=[];return Il({treeData:t,getNodeKey:r,ignoreCollapsed:o,callback:function(e){i.push(e)}}),i})),Ql=$l(Sl),Yl=function(){function e(t){nl(this,e),this.treeRef=t}return il(e,[{key:"getTargetDepth",value:function(e,t,r){var n,o=0,i=e.getPrevRow();if(i){var a=i.path;!this.treeRef.canNodeHaveChildren(i.node)&&(a=a.slice(0,a.length-1)),o=Math.min(a.length,e.path.length)}var l=(t.getItem().path||[]).length;if(t.getItem().treeId!==this.treeId)if(l=0,r){var s=Y.findDOMNode(r).getBoundingClientRect(),c=t.getSourceClientOffset().x-s.left;n=Math.round(c/e.scaffoldBlockPxWidth)}else n=e.path.length;else{var u="rtl"===e.rowDirection?-1:1;n=Math.round(u*t.getDifferenceFromInitialOffset().x/e.scaffoldBlockPxWidth)}var d=Math.min(o,Math.max(0,l+n-1));if(void 0!==this.maxDepth&&null!==this.maxDepth){var h=Ml(t.getItem().node);d=Math.max(0,Math.min(d,this.maxDepth-h-1))}return d}},{key:"canDrop",value:function(e,t){if(!t.isOver())return!1;var r=e.getPrevRow(),n=r?r.path:[],o=r?r.node:{},i=this.getTargetDepth(e,t,null);if(i>=n.length&&"function"==typeof o.children)return!1;if("function"==typeof this.customCanDrop){var a=t.getItem().node,l=ql({treeData:this.treeData,newNode:a,depth:i,getNodeKey:this.getNodeKey,minimumTreeIndex:e.listIndex,expandParent:!0});return this.customCanDrop({node:a,prevPath:t.getItem().path,prevParent:t.getItem().parentNode,prevTreeIndex:t.getItem().treeIndex,nextPath:l.path,nextParent:l.parentNode,nextTreeIndex:l.treeIndex})}return!0}},{key:"wrapSource",value:function(e){var t=this,r={beginDrag:function(e){return t.startDrag(e),{node:e.node,parentNode:e.parentNode,path:e.path,treeIndex:e.treeIndex,treeId:e.treeId}},endDrag:function(e,r){t.endDrag(r.getDropResult())},isDragging:function(e,t){var r=t.getItem().node;return e.node===r}};return yn(this.dndType,r,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging(),didDrop:t.didDrop()}}))(e)}},{key:"wrapTarget",value:function(e){var t=this,r={drop:function(e,r,n){var o={node:r.getItem().node,path:r.getItem().path,treeIndex:r.getItem().treeIndex,treeId:t.treeId,minimumTreeIndex:e.treeIndex,depth:t.getTargetDepth(e,r,n)};return t.drop(o),o},hover:function(e,r,n){var o=t.getTargetDepth(e,r,n),i=r.getItem().node;(e.node!==i||o!==e.path.length-1)&&(cancelAnimationFrame(t.rafId),t.rafId=requestAnimationFrame((function(){t.dragHover({node:i,path:r.getItem().path,minimumTreeIndex:e.listIndex,depth:o})})))},canDrop:this.canDrop.bind(this)};return wn(this.dndType,r,(function(e,t){var r=t.getItem();return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop(),draggedNode:r?r.node:null}}))(e)}},{key:"wrapPlaceholder",value:function(e){var t=this,r={drop:function(e,r){var n=r.getItem(),o={node:n.node,path:n.path,treeIndex:n.treeIndex,treeId:t.treeId,minimumTreeIndex:0,depth:0};return t.drop(o),o}};return wn(this.dndType,r,(function(e,t){var r=t.getItem();return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop(),draggedNode:r?r.node:null}}))(e)}},{key:"startDrag",get:function(){return this.treeRef.startDrag}},{key:"dragHover",get:function(){return this.treeRef.dragHover}},{key:"endDrag",get:function(){return this.treeRef.endDrag}},{key:"drop",get:function(){return this.treeRef.drop}},{key:"treeId",get:function(){return this.treeRef.treeId}},{key:"dndType",get:function(){return this.treeRef.dndType}},{key:"treeData",get:function(){return this.treeRef.state.draggingTreeData||this.treeRef.props.treeData}},{key:"getNodeKey",get:function(){return this.treeRef.props.getNodeKey}},{key:"customCanDrop",get:function(){return this.treeRef.props.canDrop}},{key:"maxDepth",get:function(){return this.treeRef.props.maxDepth}}]),e}();function Xl(e){return function(){var t,r=dl(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()){var n=dl(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return gl(this,t)}}var Jl=1,Zl=function(e){var t=cl(cl({},e),{},{style:cl(cl({},e.theme.style),e.style),innerStyle:cl(cl({},e.theme.innerStyle),e.innerStyle),reactVirtualizedListProps:cl(cl({},e.theme.reactVirtualizedListProps),e.reactVirtualizedListProps)}),r={nodeContentRenderer:Ll,placeholderRenderer:jl,rowHeight:62,scaffoldBlockPxWidth:44,slideRegionSize:100,treeNodeRenderer:Gl};return Object.keys(r).forEach((function(n){null===e[n]&&(t[n]=void 0!==e.theme[n]?e.theme[n]:r[n])})),t},es=function(t){ul(n,d.Component);var r=Xl(n);function n(e){var t;nl(this,n),t=r.call(this,e);var o=Zl(e),i=o.dndType,a=o.nodeContentRenderer,l=o.treeNodeRenderer,s=o.isVirtualized,c=o.slideRegionSize;return t.dndManager=new Yl(pl(t)),t.treeId="rst__".concat(Jl),Jl+=1,t.dndType=i||t.treeId,t.nodeContentRenderer=t.dndManager.wrapSource(a),t.treePlaceholderRenderer=t.dndManager.wrapPlaceholder(Vl),t.treeNodeRenderer=t.dndManager.wrapTarget(l),s&&(t.scrollZoneVirtualList=(wo||Co)(ta),t.vStrength=So(c),t.hStrength=_o(c)),t.state={draggingTreeData:null,draggedNode:null,draggedMinimumTreeIndex:null,draggedDepth:null,searchMatches:[],searchFocusTreeIndex:null,dragging:!1,instanceProps:{treeData:[],ignoreOneTreeUpdate:!1,searchQuery:null,searchFocusOffset:null}},t.toggleChildrenVisibility=t.toggleChildrenVisibility.bind(pl(t)),t.moveNode=t.moveNode.bind(pl(t)),t.startDrag=t.startDrag.bind(pl(t)),t.dragHover=t.dragHover.bind(pl(t)),t.endDrag=t.endDrag.bind(pl(t)),t.drop=t.drop.bind(pl(t)),t.handleDndMonitorChange=t.handleDndMonitorChange.bind(pl(t)),t}return il(n,[{key:"componentDidMount",value:function(){n.loadLazyChildren(this.props,this.state);var e=n.search(this.props,this.state,!0,!0,!1);this.setState(e),this.clearMonitorSubscription=this.props.dragDropManager.getMonitor().subscribeToStateChange(this.handleDndMonitorChange)}},{key:"componentDidUpdate",value:function(e,t){this.state.dragging!==t.dragging&&this.props.onDragStateChanged&&this.props.onDragStateChanged({isDragging:this.state.dragging,draggedNode:this.state.draggedNode})}},{key:"componentWillUnmount",value:function(){this.clearMonitorSubscription()}},{key:"getRows",value:function(e){return Kl({ignoreCollapsed:!0,getNodeKey:this.props.getNodeKey,treeData:e})}},{key:"handleDndMonitorChange",value:function(){!this.props.dragDropManager.getMonitor().isDragging()&&this.state.draggingTreeData&&this.endDrag()}},{key:"toggleChildrenVisibility",value:function(e){var t=e.node,r=e.path,n=xl({treeData:this.state.instanceProps.treeData,path:r,newNode:function(e){var t=e.node;return cl(cl({},t),{},{expanded:!t.expanded})},getNodeKey:this.props.getNodeKey});this.props.onChange(n),this.props.onVisibilityToggle({treeData:n,node:t,expanded:!t.expanded,path:r})}},{key:"moveNode",value:function(e){var t=e.node,r=e.path,n=e.treeIndex,o=e.depth,i=e.minimumTreeIndex,a=Dl({treeData:this.state.draggingTreeData,newNode:t,depth:o,minimumTreeIndex:i,expandParent:!0,getNodeKey:this.props.getNodeKey}),l=a.treeData,s=a.treeIndex,c=a.path,u=a.parentNode;this.props.onChange(l),this.props.onMoveNode({treeData:l,node:t,treeIndex:s,path:c,nextPath:c,nextTreeIndex:s,prevPath:r,prevTreeIndex:n,nextParentNode:u})}},{key:"startDrag",value:function(e){var t=this,r=e.path;this.setState((function(e){var n=function(e){var t=e.treeData,r=e.path,n=e.getNodeKey,o=e.ignoreCollapsed,i=null,a=null;return{treeData:xl({treeData:t,path:r,getNodeKey:n,ignoreCollapsed:void 0===o||o,newNode:function(e){var t=e.node,r=e.treeIndex;return i=t,a=r,null}}),node:i,treeIndex:a}}({treeData:e.instanceProps.treeData,path:r,getNodeKey:t.props.getNodeKey}),o=n.treeData,i=n.node,a=n.treeIndex;return{draggingTreeData:o,draggedNode:i,draggedDepth:r.length-1,draggedMinimumTreeIndex:a,dragging:!0}}))}},{key:"dragHover",value:function(e){var t=this,r=e.node,n=e.depth,o=e.minimumTreeIndex;this.state.draggedDepth===n&&this.state.draggedMinimumTreeIndex===o||this.setState((function(e){var i=e.draggingTreeData,a=e.instanceProps,l=i||a.treeData,s=ql({treeData:l,newNode:r,depth:n,minimumTreeIndex:o,expandParent:!0,getNodeKey:t.props.getNodeKey}),c=t.getRows(s.treeData)[s.treeIndex].path;return{draggedNode:r,draggedDepth:n,draggedMinimumTreeIndex:o,draggingTreeData:xl({treeData:l,path:c.slice(0,-1),newNode:function(e){return cl(cl({},e.node),{},{expanded:!0})},getNodeKey:t.props.getNodeKey}),searchFocusTreeIndex:null,dragging:!0}}))}},{key:"endDrag",value:function(e){var t=this,r=this.state.instanceProps;if(e){if(e.treeId!==this.treeId){var n=e.node,o=e.path,i=e.treeIndex,a=this.props.shouldCopyOnOutsideDrop;"function"==typeof a&&(a=a({node:n,prevTreeIndex:i,prevPath:o}));var l=this.state.draggingTreeData||r.treeData;a&&(l=xl({treeData:r.treeData,path:o,newNode:function(e){return cl({},e.node)},getNodeKey:this.props.getNodeKey})),this.props.onChange(l),this.props.onMoveNode({treeData:l,node:n,treeIndex:null,path:null,nextPath:null,nextTreeIndex:null,prevPath:o,prevTreeIndex:i})}}else t.setState({draggingTreeData:null,draggedNode:null,draggedMinimumTreeIndex:null,draggedDepth:null,dragging:!1})}},{key:"drop",value:function(e){this.moveNode(e)}},{key:"canNodeHaveChildren",value:function(e){var t=this.props.canNodeHaveChildren;return!t||t(e)}},{key:"renderRow",value:function(t,r){var n=r.listIndex,o=r.style,i=r.getPrevRow,a=r.matchKeys,l=r.swapFrom,s=r.swapDepth,c=r.swapLength,u=t.node,d=t.parentNode,h=t.path,f=t.lowerSiblingCounts,p=t.treeIndex,g=Zl(this.props),v=g.canDrag,m=g.generateNodeProps,y=g.scaffoldBlockPxWidth,b=g.searchFocusOffset,_=g.rowDirection,S=this.treeNodeRenderer,w=this.nodeContentRenderer,C=h[h.length-1],I=C in a,T=I&&a[C]===b,x={node:u,parentNode:d,path:h,lowerSiblingCounts:f,treeIndex:p,isSearchMatch:I,isSearchFocus:T},R=m?m(x):{},O="function"!=typeof v?v:v(x),k={treeIndex:p,scaffoldBlockPxWidth:y,node:u,path:h,treeId:this.treeId,rowDirection:_};return e.createElement(S,ll({style:o,key:C,listIndex:n,getPrevRow:i,lowerSiblingCounts:f,swapFrom:l,swapLength:c,swapDepth:s},k),e.createElement(w,ll({parentNode:d,isSearchMatch:I,isSearchFocus:T,canDrag:O,toggleChildrenVisibility:this.toggleChildrenVisibility},k,R)))}},{key:"render",value:function(){var t,r=this,n=Zl(this.props),o=n.dragDropManager,i=n.style,a=n.className,l=n.innerStyle,s=n.rowHeight,c=n.isVirtualized,u=n.placeholderRenderer,d=n.reactVirtualizedListProps,h=n.getNodeKey,f=n.rowDirection,p=this.state,g=p.searchMatches,v=p.searchFocusTreeIndex,m=p.draggedNode,y=p.draggedDepth,b=p.draggedMinimumTreeIndex,_=p.instanceProps,S=this.state.draggingTreeData||_.treeData,w="rtl"===f?"rst__rtl":null,C=null,I=null;if(m&&null!==b){var T=ql({treeData:S,newNode:m,depth:y,minimumTreeIndex:b,expandParent:!0,getNodeKey:h}),x=b;C=T.treeIndex,I=1+Ql({node:m}),t=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=[].concat(vl(e.slice(0,t)),vl(e.slice(t+n)));return[].concat(vl(o.slice(0,r)),vl(e.slice(t,t+n)),vl(o.slice(r)))}(this.getRows(T.treeData),C,x,I)}else t=this.getRows(S);var R={};g.forEach((function(e,t){var r=e.path;R[r[r.length-1]]=t}));var O,k=null!==v?{scrollToIndex:v}:{},P=i;if(t.length<1){var D=this.treePlaceholderRenderer,E=u;O=e.createElement(D,{treeId:this.treeId,drop:this.drop},e.createElement(E,null))}else if(c){P=cl({height:"100%"},P);var M=this.scrollZoneVirtualList;O=e.createElement(ji,null,(function(n){var i=n.height,a=n.width;return e.createElement(M,ll({},k,{dragDropManager:o,verticalStrength:r.vStrength,horizontalStrength:r.hStrength,speed:30,scrollToAlignment:"start",className:"rst__virtualScrollOverride",width:a,onScroll:function(e){var t=e.scrollTop;r.scrollTop=t},height:i,style:l,rowCount:t.length,estimatedRowSize:"function"!=typeof s?s:void 0,rowHeight:"function"!=typeof s?s:function(e){var r=e.index;return s({index:r,treeIndex:r,node:t[r].node,path:t[r].path})},rowRenderer:function(e){var n=e.index,o=e.style;return r.renderRow(t[n],{listIndex:n,style:o,getPrevRow:function(){return t[n-1]||null},matchKeys:R,swapFrom:C,swapDepth:y,swapLength:I})}},d))}))}else O=t.map((function(e,n){return r.renderRow(e,{listIndex:n,style:{height:"function"!=typeof s?s:s({index:n,treeIndex:n,node:e.node,path:e.path})},getPrevRow:function(){return t[n-1]||null},matchKeys:R,swapFrom:C,swapDepth:y,swapLength:I})}));return e.createElement("div",{className:Al("rst__tree",a,w),style:P},O)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.instanceProps,o={},i=Ko(r.treeData,e.treeData);return r.treeData=e.treeData,i?Ko(r.searchQuery,e.searchQuery)?r.searchFocusOffset!==e.searchFocusOffset&&Object.assign(o,n.search(e,t,!0,!0,!0)):Object.assign(o,n.search(e,t,!0,!0,!1)):(r.ignoreOneTreeUpdate?r.ignoreOneTreeUpdate=!1:(o.searchFocusTreeIndex=null,n.loadLazyChildren(e,t),Object.assign(o,n.search(e,t,!1,!1,!1))),o.draggingTreeData=null,o.draggedNode=null,o.draggedMinimumTreeIndex=null,o.draggedDepth=null,o.dragging=!1),r.searchQuery=e.searchQuery,r.searchFocusOffset=e.searchFocusOffset,o.instanceProps=cl(cl({},r),o.instanceProps),o}},{key:"search",value:function(e,t,r,n,o){var i=e.onChange,a=e.getNodeKey,l=e.searchFinishCallback,s=e.searchQuery,c=e.searchMethod,u=e.searchFocusOffset,d=e.onlyExpandSearchedNodes,h=t.instanceProps;if(!s&&!c)return l&&l([]),{searchMatches:[]};var f,p,g,v,m={instanceProps:{}},y=zl({getNodeKey:a,treeData:d?(f={treeData:h.treeData,expanded:!1},p=f.treeData,g=f.expanded,v=void 0===g||g,Tl({treeData:p,callback:function(e){return cl(cl({},e.node),{},{expanded:v})},getNodeKey:function(e){return e.treeIndex},ignoreCollapsed:!1})):h.treeData,searchQuery:s,searchMethod:c||Bl,searchFocusOffset:u,expandAllMatchPaths:n&&!o,expandFocusMatchPaths:!!n}),b=y.treeData,_=y.matches;n&&(m.instanceProps.ignoreOneTreeUpdate=!0,i(b)),l&&l(_);var S=null;return r&&null!==u&&u<_.length&&(S=_[u].treeIndex),m.searchMatches=_,m.searchFocusTreeIndex=S,m}},{key:"loadLazyChildren",value:function(e,t){var r=t.instanceProps;Il({treeData:r.treeData,getNodeKey:e.getNodeKey,callback:function(t){var n=t.node,o=t.path,i=t.lowerSiblingCounts,a=t.treeIndex;n.children&&"function"==typeof n.children&&(n.expanded||e.loadCollapsedLazyChildren)&&n.children({node:n,path:o,lowerSiblingCounts:i,treeIndex:a,done:function(t){return e.onChange(xl({treeData:r.treeData,path:o,newNode:function(e){var r=e.node;return r===n?cl(cl({},r),{},{children:t}):r},getNodeKey:e.getNodeKey}))}})}})}}]),n}();es.propTypes={dragDropManager:Q.shape({getMonitor:Q.func}).isRequired,treeData:Q.arrayOf(Q.object).isRequired,style:Q.shape({}),className:Q.string,innerStyle:Q.shape({}),rowHeight:Q.oneOfType([Q.number,Q.func]),slideRegionSize:Q.number,reactVirtualizedListProps:Q.shape({}),scaffoldBlockPxWidth:Q.number,maxDepth:Q.number,searchMethod:Q.func,searchQuery:Q.any,searchFocusOffset:Q.number,searchFinishCallback:Q.func,generateNodeProps:Q.func,isVirtualized:Q.bool,treeNodeRenderer:Q.func,nodeContentRenderer:Q.func,placeholderRenderer:Q.func,theme:Q.shape({style:Q.shape({}),innerStyle:Q.shape({}),reactVirtualizedListProps:Q.shape({}),scaffoldBlockPxWidth:Q.number,slideRegionSize:Q.number,rowHeight:Q.oneOfType([Q.number,Q.func]),treeNodeRenderer:Q.func,nodeContentRenderer:Q.func,placeholderRenderer:Q.func}),getNodeKey:Q.func,onChange:Q.func.isRequired,onMoveNode:Q.func,canDrag:Q.oneOfType([Q.func,Q.bool]),canDrop:Q.func,canNodeHaveChildren:Q.func,shouldCopyOnOutsideDrop:Q.oneOfType([Q.func,Q.bool]),onVisibilityToggle:Q.func,dndType:Q.string,onDragStateChanged:Q.func,onlyExpandSearchedNodes:Q.bool,rowDirection:Q.string},es.defaultProps={canDrag:!0,canDrop:null,canNodeHaveChildren:function(){return!0},className:"",dndType:null,generateNodeProps:null,getNodeKey:function(e){return e.treeIndex},innerStyle:{},isVirtualized:!0,maxDepth:null,treeNodeRenderer:null,nodeContentRenderer:null,onMoveNode:function(){},onVisibilityToggle:function(){},placeholderRenderer:null,reactVirtualizedListProps:{},rowHeight:null,scaffoldBlockPxWidth:null,searchFinishCallback:null,searchFocusOffset:null,searchMethod:null,searchQuery:null,shouldCopyOnOutsideDrop:!1,slideRegionSize:null,style:{},theme:{},onDragStateChanged:function(){},onlyExpandSearchedNodes:!1,rowDirection:"ltr"},function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var r=null,n=null,o=null;if("function"==typeof t.componentWillMount?r="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(r="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?n="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(n="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?o="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==r||null!==n||null!==o){var i=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==r?"\n  "+r:"")+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=ml,t.componentWillReceiveProps=yl),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=bl;var l=t.componentDidUpdate;t.componentDidUpdate=function(e,t,r){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:r;l.call(this,e,t,n)}}}(es);var ts=function(t){return e.createElement(j.Consumer,null,(function(r){var n=r.dragDropManager;return void 0===n?null:e.createElement(es,ll({},t,{dragDropManager:n}))}))},rs=function(t){return e.createElement(H,{backend:oe},e.createElement(ts,t))};const ns=B`
    mutation ADD_TREE_ELEMENT($treeId: ID!, $element: TreeElementInput!, $parent: ID) {
        treeAddElement(treeId: $treeId, element: $element, parent: $parent, order: 0) {
            id
        }
    }
`,os=B`
    mutation DELETE_TREE_ELEMENT($treeId: ID!, $nodeId: ID!, $deleteChildren: Boolean) {
        treeDeleteElement(treeId: $treeId, nodeId: $nodeId, deleteChildren: $deleteChildren)
    }
`,is=B`
    mutation MOVE_TREE_ELEMENT($treeId: ID!, $nodeId: ID!, $parentTo: ID, $order: Int) {
        treeMoveElement(treeId: $treeId, nodeId: $nodeId, parentTo: $parentTo, order: $order) {
            id
        }
    }
`,as=B`
    fragment AttributeDetails on Attribute {
        id
        type
        format
        system
        readonly
        label
        description
        multiple_values
        metadata_fields {
            id
            label
            type
            format
        }
        permissions_conf {
            permissionTreeAttributes {
                id
                label
                ... on TreeAttribute {
                    linked_tree {
                        id
                    }
                }
            }
            relation
        }
        versions_conf {
            versionable
            mode
            profile {
                id
                label
                trees {
                    id
                    label
                }
            }
        }
        libraries {
            id
            label
        }

        ... on StandardAttribute {
            unique
        }

        ... on LinkAttribute {
            linked_library {
                id
            }
            reverse_link
        }
        ... on TreeAttribute {
            linked_tree {
                id
            }
        }
    }
`,ls=B`
    ${$}
    fragment AttributeValuesListDetails on Attribute {
        ... on StandardAttribute {
            unique
            values_list {
                ... on StandardStringValuesListConf {
                    enable
                    allowFreeEntry
                    values
                }

                ... on StandardDateRangeValuesListConf {
                    enable
                    allowFreeEntry
                    dateRangeValues: values {
                        from
                        to
                    }
                }
            }
        }
        ... on LinkAttribute {
            values_list {
                enable
                allowFreeEntry
                linkValues: values {
                    ...RecordIdentity
                }
            }
        }
        ... on TreeAttribute {
            values_list {
                enable
                allowFreeEntry
                treeValues: values {
                    id
                    record {
                        ...RecordIdentity
                    }
                    ancestors {
                        record {
                            ...RecordIdentity
                        }
                    }
                }
            }
        }
    }
`,ss=ie`
    ${as}
    ${$}
    fragment LibraryDetails on Library {
        id
        system
        label
        behavior
        attributes {
            ...AttributeDetails
        }
        fullTextAttributes {
            id
            label
        }
        permissions_conf {
            permissionTreeAttributes {
                id
                ... on TreeAttribute {
                    linked_tree {
                        id
                    }
                }
                label(lang: $lang)
            }
            relation
        }
        recordIdentityConf {
            label
            color
            preview
            treeColorPreview
        }
        defaultView {
            id
        }
        gqlNames {
            query
            type
            list
            filter
            searchableFields
        }
        permissions {
            admin_library
            access_library
            access_record
            create_record
            edit_record
            delete_record
        }
        icon {
            ...RecordIdentity
        }
    }
`,cs=B`
    ${ss}
    query GET_LIB_BY_ID($id: [ID!], $lang: [AvailableLanguage!]) {
        libraries(filters: {id: $id}) {
            list {
                ...LibraryDetails
            }
        }
    }
`
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */;var us=function(e,t){return(us=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function ds(e,t){function r(){this.constructor=e}us(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var hs=function(){return hs=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hs.apply(this,arguments)},fs=function(e,t){return(fs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ps,gs="Invariant Violation",vs=Object.setPrototypeOf,ms=void 0===vs?function(e,t){return e.__proto__=t,e}:vs,ys=function(e){function t(r){void 0===r&&(r=gs);var n=e.call(this,"number"==typeof r?gs+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return n.framesToPop=1,n.name=gs,ms(n,t.prototype),n}return function(e,t){function r(){this.constructor=e}fs(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t}(Error);function bs(e,t){if(!e)throw new ys(t)}function _s(e){return function(){return console[e].apply(console,arguments)}}(ps=bs||(bs={})).warn=_s("warn"),ps.error=_s("error");var Ss={env:{}};if("object"==typeof process)Ss=process;else try{Function("stub","process = stub")(Ss)}catch(ah){}var ws=Object.prototype,Cs=ws.toString,Is=ws.hasOwnProperty,Ts=new Map;function xs(e,t){try{return Rs(e,t)}finally{Ts.clear()}}function Rs(e,t){if(e===t)return!0;var r=Cs.call(e);if(r!==Cs.call(t))return!1;switch(r){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":if(Os(e,t))return!0;var n=Object.keys(e),o=Object.keys(t),i=n.length;if(i!==o.length)return!1;for(var a=0;a<i;++a)if(!Is.call(t,n[a]))return!1;for(a=0;a<i;++a){var l=n[a];if(!Rs(e[l],t[l]))return!1}return!0;case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!=e)return t!=t;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object RegExp]":case"[object String]":return e==""+t;case"[object Map]":case"[object Set]":if(e.size!==t.size)return!1;if(Os(e,t))return!0;for(var s=e.entries(),c="[object Map]"===r;;){var u=s.next();if(u.done)break;var d=u.value,h=d[0],f=d[1];if(!t.has(h))return!1;if(c&&!Rs(f,t.get(h)))return!1}return!0}return!1}function Os(e,t){var r=Ts.get(e);if(r){if(r.has(t))return!0}else Ts.set(e,r=new Set);return r.add(t),!1}function ks(e){return function(e){bs(e&&"Document"===e.kind,2),bs(e.definitions.filter((function(e){return"FragmentDefinition"!==e.kind})).map((function(e){if("OperationDefinition"!==e.kind)throw new ys(3);return e})).length<=1,4)}(e),e.definitions.filter((function(e){return"OperationDefinition"===e.kind}))[0]}var Ps=Object.prototype.toString;function Ds(e){return Es(e,new Map)}function Es(e,t){switch(Ps.call(e)){case"[object Array]":if(t.has(e))return t.get(e);var r=e.slice(0);return t.set(e,r),r.forEach((function(e,n){r[n]=Es(e,t)})),r;case"[object Object]":if(t.has(e))return t.get(e);var n=Object.create(Object.getPrototypeOf(e));return t.set(e,n),Object.keys(e).forEach((function(r){n[r]=Es(e[r],t)})),n;default:return e}}const Ms=ae;var zs;zs="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")();var As,Ns,Ls,js,Fs=("function"==typeof(Ns=zs.Symbol)?Ns.observable?As=Ns.observable:(As=Ns("observable"),Ns.observable=As):As="@@observable",As);function Gs(e){return e<7}(js=Ls||(Ls={}))[js.loading=1]="loading",js[js.setVariables=2]="setVariables",js[js.fetchMore=3]="fetchMore",js[js.refetch=4]="refetch",js[js.poll=6]="poll",js[js.ready=7]="ready",js[js.error=8]="error";var Hs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ds(t,e),t.prototype[Fs]=function(){return this},t.prototype["@@observable"]=function(){return this},t}(Ms);function Vs(e){return Array.isArray(e)&&e.length>0}var Ws,Us,Bs=function(e){function t(r){var n,o,i=r.graphQLErrors,a=r.networkError,l=r.errorMessage,s=r.extraInfo,c=e.call(this,l)||this;return c.graphQLErrors=i||[],c.networkError=a||null,c.message=l||(o="",Vs((n=c).graphQLErrors)&&n.graphQLErrors.forEach((function(e){var t=e?e.message:"Error message not found.";o+="GraphQL error: "+t+"\n"})),n.networkError&&(o+="Network error: "+n.networkError.message+"\n"),o=o.replace(/\n$/,"")),c.extraInfo=s,c.__proto__=t.prototype,c}return ds(t,e),t}(Error);(Us=Ws||(Ws={}))[Us.normal=1]="normal",Us[Us.refetch=2]="refetch",Us[Us.poll=3]="poll";function $s(e){}function qs(e,t,r){var n=[];e.forEach((function(e){return e[t]&&n.push(e)})),n.forEach((function(e){return e[t](r)}))}function Ks(e){var t=e.options.fetchPolicy;bs("cache-first"!==t&&"cache-only"!==t,3)}!function(e){function t(t){var r=t.queryManager,n=t.options,o=t.shouldSubscribe,i=void 0===o||o,a=e.call(this,(function(e){return a.onSubscribe(e)}))||this;a.observers=new Set,a.subscriptions=new Set,a.isTornDown=!1,a.options=n,a.variables=n.variables||{},a.queryId=r.generateQueryId(),a.shouldSubscribe=i;var l=ks(n.query);return a.queryName=l&&l.name&&l.name.value,a.queryManager=r,a}ds(t,e),t.prototype.result=function(){var e=this;return new Promise((function(t,r){var n={next:function(r){t(r),e.observers.delete(n),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout((function(){o.unsubscribe()}),0)},error:r},o=e.subscribe(n)}))},t.prototype.currentResult=function(){var e=this.getCurrentResult();return void 0===e.data&&(e.data={}),e},t.prototype.getCurrentResult=function(){if(this.isTornDown){var e=this.lastResult;return{data:!this.lastError&&e&&e.data||void 0,error:this.lastError,loading:!1,networkStatus:Ls.error}}var t,r,n,o=this.queryManager.getCurrentQueryResult(this),i=o.data,a=o.partial,l=this.queryManager.queryStore.get(this.queryId),s=this.options.fetchPolicy,c="network-only"===s||"no-cache"===s;if(l){var u=l.networkStatus;if(r=l,void 0===(n=this.options.errorPolicy)&&(n="none"),r&&(r.networkError||"none"===n&&Vs(r.graphQLErrors)))return{data:void 0,loading:!1,networkStatus:u,error:new Bs({graphQLErrors:l.graphQLErrors,networkError:l.networkError})};l.variables&&(this.options.variables=hs(hs({},this.options.variables),l.variables),this.variables=this.options.variables),t={data:i,loading:Gs(u),networkStatus:u},l.graphQLErrors&&"all"===this.options.errorPolicy&&(t.errors=l.graphQLErrors)}else{var d=c||a&&"cache-only"!==s;t={data:i,loading:d,networkStatus:d?Ls.loading:Ls.ready}}return a||this.updateLastResult(hs(hs({},t),{stale:!1})),hs(hs({},t),{partial:a})},t.prototype.isDifferentFromLastResult=function(e){var t=this.lastResultSnapshot;return!(t&&e&&t.networkStatus===e.networkStatus&&t.stale===e.stale&&xs(t.data,e.data))},t.prototype.getLastResult=function(){return this.lastResult},t.prototype.getLastError=function(){return this.lastError},t.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){var e=this.queryManager.queryStore.get(this.queryId);e&&(e.networkError=null,e.graphQLErrors=[])},t.prototype.refetch=function(e){var t=this.options.fetchPolicy;return"cache-only"===t?Promise.reject(new ys(1)):("no-cache"!==t&&"cache-and-network"!==t&&(t="network-only"),xs(this.variables,e)||(this.variables=hs(hs({},this.variables),e)),xs(this.options.variables,this.variables)||(this.options.variables=hs(hs({},this.options.variables),this.variables)),this.queryManager.fetchQuery(this.queryId,hs(hs({},this.options),{fetchPolicy:t}),Ws.refetch))},t.prototype.fetchMore=function(e){var t=this;bs(e.updateQuery,2);var r=hs(hs({},e.query?e:hs(hs(hs({},this.options),e),{variables:hs(hs({},this.variables),e.variables)})),{fetchPolicy:"network-only"}),n=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(n,r,Ws.normal,this.queryId).then((function(o){return t.updateQuery((function(t){return e.updateQuery(t,{fetchMoreResult:o.data,variables:r.variables})})),t.queryManager.stopQuery(n),o}),(function(e){throw t.queryManager.stopQuery(n),e}))},t.prototype.subscribeToMore=function(e){var t=this,r=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables}).subscribe({next:function(r){var n=e.updateQuery;n&&t.updateQuery((function(e,t){var o=t.variables;return n(e,{subscriptionData:r,variables:o})}))},error:function(t){e.onError&&e.onError(t)}});return this.subscriptions.add(r),function(){t.subscriptions.delete(r)&&r.unsubscribe()}},t.prototype.setOptions=function(e){var t=this.options.fetchPolicy;this.options=hs(hs({},this.options),e),e.pollInterval?this.startPolling(e.pollInterval):0===e.pollInterval&&this.stopPolling();var r=e.fetchPolicy;return this.setVariables(this.options.variables,t!==r&&("cache-only"===t||"standby"===t||"network-only"===r),e.fetchResults)},t.prototype.setVariables=function(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!0),this.isTornDown=!1,e=e||this.variables,!t&&xs(e,this.variables)?this.observers.size&&r?this.result():Promise.resolve():(this.variables=this.options.variables=e,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},t.prototype.updateQuery=function(e){var t=this.queryManager,r=t.getQueryWithPreviousResult(this.queryId),n=r.previousResult,o=r.variables,i=r.document,a=function(e){try{return e()}catch(t){console.error&&console.error(t)}}((function(){return e(n,{variables:o})}));a&&(t.dataStore.markUpdateQueryResult(i,o,a),t.broadcastQueries())},t.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},t.prototype.startPolling=function(e){Ks(this),this.options.pollInterval=e,this.queryManager.startPollingQuery(this.options,this.queryId)},t.prototype.updateLastResult=function(e){var t=this.lastResult;return this.lastResult=e,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?e:Ds(e),t},t.prototype.onSubscribe=function(e){var t=this;try{var r=e._subscription._observer;r&&!r.error&&(r.error=$s)}catch(o){}var n=!this.observers.size;return this.observers.add(e),e.next&&this.lastResult&&e.next(this.lastResult),e.error&&this.lastError&&e.error(this.lastError),n&&this.setUpQuery(),function(){t.observers.delete(e)&&!t.observers.size&&t.tearDownQuery()}},t.prototype.setUpQuery=function(){var e=this,t=this.queryManager,r=this.queryId;this.shouldSubscribe&&t.addObservableQuery(r,this),this.options.pollInterval&&(Ks(this),t.startPollingQuery(this.options,r));var n=function(t){e.updateLastResult(hs(hs({},e.lastResult),{errors:t.graphQLErrors,networkStatus:Ls.error,loading:!1})),qs(e.observers,"error",e.lastError=t)};t.observeQuery(r,this.options,{next:function(r){if(e.lastError||e.isDifferentFromLastResult(r)){var n=e.updateLastResult(r),o=e.options,i=o.query,a=o.variables,l=o.fetchPolicy;t.transform(i).hasClientExports?t.getLocalState().addExportedVariables(i,a).then((function(o){var a=e.variables;e.variables=e.options.variables=o,!r.loading&&n&&"cache-only"!==l&&t.transform(i).serverQuery&&!xs(a,o)?e.refetch():qs(e.observers,"next",r)})):qs(e.observers,"next",r)}},error:n}).catch(n)},t.prototype.tearDownQuery=function(){var e=this.queryManager;this.isTornDown=!0,e.stopPollingQuery(this.queryId),this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions.clear(),e.removeObservableQuery(this.queryId),e.stopQuery(this.queryId),this.observers.clear()}}(Hs);const Qs=B`
    ${$}
    mutation CREATE_RECORD($library: ID!) {
        createRecord(library: $library) {
            record {
                id
                ...RecordIdentity
            }
        }
    }
`,Ys=B`
    fragment ValueDetails on GenericValue {
        id_value
        created_at
        modified_at
        version {
            treeId
            treeNode {
                id
                record {
                    id
                    whoAmI {
                        id
                        label
                        library {
                            id
                        }
                    }
                }
            }
        }
        metadata {
            name
            value {
                value
                raw_value
            }
        }

        ... on Value {
            value
            raw_value
        }

        ... on LinkValue {
            linkValue: value {
                ...RecordIdentity
            }
        }

        ... on TreeValue {
            treeValue: value {
                record {
                    ...RecordIdentity
                }
                ancestors {
                    record {
                        ...RecordIdentity
                    }
                }
            }
        }
    }
`,Xs=B`
    fragment ValueDetailsExtended on GenericValue {
        id_value
        created_at
        modified_at
        version {
            treeId
            treeNode {
                id
                record {
                    id
                    whoAmI {
                        id
                        label
                        library {
                            id
                        }
                    }
                }
            }
        }
        metadata {
            name
            value {
                value
                raw_value
            }
        }

        ... on Value {
            id_value
        }

        ... on LinkValue {
            linkValue: value {
                ...RecordIdentity
            }
        }

        ... on TreeValue {
            treeValue: value {
                record {
                    ...RecordIdentity
                }
                ancestors {
                    record {
                        ...RecordIdentity
                    }
                }
            }
        }
    }
`,Js=e=>{const t=e.id;let r;switch(e.format){case le.extended:r=`${t}: property(attribute: "${t}") { ...ValueDetailsExtended }`;break;case le.text:default:r=`${t}: property(attribute: "${t}") { ...ValueDetails }`}return r};function Zs(e,t){const r=t.find((e=>e.format===le.extended))?Xs:"";return se`
        ${$}
        ${Ys}
        ${r}

        query ${`RECORD_DATA_${e.id}`}($id: String!, $version: [ValueVersionInput]) {
            record: ${e.gqlNames.query}(filters: {field: "id", condition: EQUAL, value: $id}, version: $version) {
                list {
                    ...RecordIdentity
                    ${t.map(Js)}
                }
            }
        }
    `}const ec=B`
    ${$}
    mutation SAVE_VALUE_BATCH(
        $library: ID!
        $recordId: ID!
        $version: [ValueVersionInput!]
        $values: [ValueBatchInput!]!
    ) {
        saveValueBatch(library: $library, recordId: $recordId, version: $version, values: $values) {
            values {
                id_value
                modified_at
                created_at
                version {
                    treeId
                    treeNode {
                        id
                        record {
                            id
                            whoAmI {
                                id
                                label
                                library {
                                    id
                                }
                            }
                        }
                    }
                }
                attribute {
                    id
                }

                ... on Value {
                    value
                    raw_value
                }

                ... on LinkValue {
                    linkValue: value {
                        ...RecordIdentity
                    }
                }

                ... on TreeValue {
                    treeValue: value {
                        record {
                            ...RecordIdentity
                        }

                        ancestors {
                            record {
                                ...RecordIdentity
                            }
                        }
                    }
                }
            }
            errors {
                type
                attribute
                input
                message
            }
        }
    }
`;var tc=Array.isArray,rc=Object.keys,nc=Object.prototype.hasOwnProperty,oc="undefined"!=typeof Element;function ic(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,o,i=tc(e),a=tc(t);if(i&&a){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!ic(e[r],t[r]))return!1;return!0}if(i!=a)return!1;var l=e instanceof Date,s=t instanceof Date;if(l!=s)return!1;if(l&&s)return e.getTime()==t.getTime();var c=e instanceof RegExp,u=t instanceof RegExp;if(c!=u)return!1;if(c&&u)return e.toString()==t.toString();var d=rc(e);if((n=d.length)!==rc(t).length)return!1;for(r=n;0!=r--;)if(!nc.call(t,d[r]))return!1;if(oc&&e instanceof Element&&t instanceof Element)return e===t;for(r=n;0!=r--;)if(!("_owner"===(o=d[r])&&e.$$typeof||ic(e[o],t[o])))return!1;return!0}return e!=e&&t!=t}var ac=function(e,t){try{return ic(e,t)}catch(r){if(r.message&&r.message.match(/stack|recursion/i)||-2146828260===r.number)return console.warn("Warning: react-fast-compare does not handle circular references.",r.name,r.message),!1;throw r}},lc=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===sc}(e)}(e)};var sc="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function cc(e,t){return!1!==t.clone&&t.isMergeableObject(e)?dc((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function uc(e,t,r){return e.concat(t).map((function(e){return cc(e,r)}))}function dc(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||uc,r.isMergeableObject=r.isMergeableObject||lc;var n=Array.isArray(t);return n===Array.isArray(e)?n?r.arrayMerge(e,t,r):function(e,t,r){var n={};return r.isMergeableObject(e)&&Object.keys(e).forEach((function(t){n[t]=cc(e[t],r)})),Object.keys(t).forEach((function(o){r.isMergeableObject(t[o])&&e[o]?n[o]=dc(e[o],t[o],r):n[o]=cc(t[o],r)})),n}(e,t,r):cc(t,r)}dc.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return dc(e,r,t)}),{})};var hc=dc,fc={},pc={get exports(){return fc},set exports(e){fc=e}},gc={},vc={get exports(){return gc},set exports(e){gc=e}},mc="__global_unique_id__",yc=function(){return q[mc]=(q[mc]||0)+1};function bc(e){return function(){return e}}var _c=function(){};_c.thatReturns=bc,_c.thatReturnsFalse=bc(!1),_c.thatReturnsTrue=bc(!0),_c.thatReturnsNull=bc(null),_c.thatReturnsThis=function(){return this},_c.thatReturnsArgument=function(e){return e};var Sc=_c;!function(e,t){t.__esModule=!0;var r=d;i(r);var n=i(Q),o=i(yc);function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}i(Sc);var c=1073741823;t.default=function(e,t){var i,u,d="__create-react-context-"+(0,o.default)()+"__",h=function(e){function r(){var t,n,o,i;a(this,r);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return t=n=l(this,e.call.apply(e,[this].concat(c))),n.emitter=(o=n.props.value,i=[],{on:function(e){i.push(e)},off:function(e){i=i.filter((function(t){return t!==e}))},get:function(){return o},set:function(e,t){o=e,i.forEach((function(e){return e(o,t)}))}}),l(n,t)}return s(r,e),r.prototype.getChildContext=function(){var e;return(e={})[d]=this.emitter,e},r.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var r=this.props.value,n=e.value,o=void 0;((i=r)===(a=n)?0!==i||1/i==1/a:i!=i&&a!=a)?o=0:(o="function"==typeof t?t(r,n):c,0!==(o|=0)&&this.emitter.set(e.value,o))}var i,a},r.prototype.render=function(){return this.props.children},r}(r.Component);h.childContextTypes=((i={})[d]=n.default.object.isRequired,i);var f=function(t){function r(){var e,n;a(this,r);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return e=n=l(this,t.call.apply(t,[this].concat(i))),n.state={value:n.getValue()},n.onUpdate=function(e,t){0!=((0|n.observedBits)&t)&&n.setState({value:n.getValue()})},l(n,e)}return s(r,t),r.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?c:t},r.prototype.componentDidMount=function(){this.context[d]&&this.context[d].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?c:e},r.prototype.componentWillUnmount=function(){this.context[d]&&this.context[d].off(this.onUpdate)},r.prototype.getValue=function(){return this.context[d]?this.context[d].get():e},r.prototype.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},r}(r.Component);return f.contextTypes=((u={})[d]=n.default.object,u),{Provider:h,Consumer:f}},e.exports=t.default}(vc,gc),function(e,t){t.__esModule=!0;var r=o(d),n=o(gc);function o(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.createContext||n.default,e.exports=t.default}(pc,fc);const wc=ce(fc);function Cc(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var l=t[i],s=n?n(r[l],e[l],l,r,e):void 0;void 0===s&&(s=e[l]),o?ue(r,l,s):tt(r,l,s)}return r}var Ic="object"==typeof exports&&exports&&!exports.nodeType&&exports,Tc=Ic&&"object"==typeof module&&module&&!module.nodeType&&module,xc=Tc&&Tc.exports===Ic?he.Buffer:void 0,Rc=xc?xc.allocUnsafe:void 0;var Oc=Object.prototype.hasOwnProperty;function kc(e){var t=new e.constructor(e.byteLength);return new fe(t).set(new fe(e)),t}var Pc=/\w*$/;var Dc=pe?pe.prototype:void 0,Ec=Dc?Dc.valueOf:void 0;var Mc="[object Boolean]",zc="[object Date]",Ac="[object Map]",Nc="[object Number]",Lc="[object RegExp]",jc="[object Set]",Fc="[object String]",Gc="[object Symbol]",Hc="[object ArrayBuffer]",Vc="[object DataView]",Wc="[object Float32Array]",Uc="[object Float64Array]",Bc="[object Int8Array]",$c="[object Int16Array]",qc="[object Int32Array]",Kc="[object Uint8Array]",Qc="[object Uint8ClampedArray]",Yc="[object Uint16Array]",Xc="[object Uint32Array]";function Jc(e,t,r){var n,o=e.constructor;switch(t){case Hc:return kc(e);case Mc:case zc:return new o(+e);case Vc:return function(e,t){var r=t?kc(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case Wc:case Uc:case Bc:case $c:case qc:case Kc:case Qc:case Yc:case Xc:return function(e,t){var r=t?kc(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case Ac:return new o;case Nc:case Fc:return new o(e);case Lc:return function(e){var t=new e.constructor(e.source,Pc.exec(e));return t.lastIndex=e.lastIndex,t}(e);case jc:return new o;case Gc:return n=e,Ec?Object(Ec.call(n)):{}}}var Zc=me&&me.isMap;const eu=Zc?ye(Zc):function(e){return ge(e)&&"[object Map]"==ve(e)};var tu=me&&me.isSet;const ru=tu?ye(tu):function(e){return ge(e)&&"[object Set]"==ve(e)};var nu=1,ou=2,iu=4,au="[object Arguments]",lu="[object Function]",su="[object GeneratorFunction]",cu="[object Object]",uu={};function du(e,t,r,n,o,i){var l,s=t&nu,c=t&ou,u=t&iu;if(r&&(l=o?r(e,n,o,i):r(e)),void 0!==l)return l;if(!a(e))return e;var d=be(e);if(d){if(l=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Oc.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!s)return rr(e,l)}else{var h=ve(e),f=h==lu||h==su;if(_e(e))return function(e,t){if(t)return e.slice();var r=e.length,n=Rc?Rc(r):new e.constructor(r);return e.copy(n),n}(e,s);if(h==cu||h==au||f&&!o){if(l=c||f?{}:function(e){return"function"!=typeof e.constructor||z(e)?{}:Rt(M(e))}(e),!s)return c?function(e,t){return Cc(e,Xt(e),t)}(e,function(e,t){return e&&Cc(t,er(t),e)}(l,e)):function(e,t){return Cc(e,E(e),t)}(e,function(e,t){return e&&Cc(t,de(t),e)}(l,e))}else{if(!uu[h])return o?e:{};l=Jc(e,h,s)}}i||(i=new Se);var p=i.get(e);if(p)return p;i.set(e,l),ru(e)?e.forEach((function(n){l.add(du(n,t,r,n,e,i))})):eu(e)&&e.forEach((function(n,o){l.set(o,du(n,t,r,o,e,i))}));var g=d?void 0:(u?c?tr:Ce:c?er:de)(e);return we(g||e,(function(n,o){g&&(n=e[o=n]),tt(l,o,du(n,t,r,o,e,i))})),l}uu[au]=uu["[object Array]"]=uu["[object ArrayBuffer]"]=uu["[object DataView]"]=uu["[object Boolean]"]=uu["[object Date]"]=uu["[object Float32Array]"]=uu["[object Float64Array]"]=uu["[object Int8Array]"]=uu["[object Int16Array]"]=uu["[object Int32Array]"]=uu["[object Map]"]=uu["[object Number]"]=uu[cu]=uu["[object RegExp]"]=uu["[object Set]"]=uu["[object String]"]=uu["[object Symbol]"]=uu["[object Uint8Array]"]=uu["[object Uint8ClampedArray]"]=uu["[object Uint16Array]"]=uu["[object Uint32Array]"]=!0,uu["[object Error]"]=uu[lu]=uu["[object WeakMap]"]=!1;var hu,fu=4;function pu(e){return du(e,fu)}function gu(e){return be(e)?Ie(e,Te):xe(e)?[e]:rr(Re(Oe(e)))}var vu=(hu=wc({})).Provider,mu=hu.Consumer;function yu(e){var t=function(t){return d.createElement(mu,null,(function(r){return d.createElement(e,Pe({},t,{formik:r}))}))},r=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";return t.WrappedComponent=e,t.displayName="FormikConnect("+r+")",G(t,e)}var bu=function(e){return"function"==typeof e},_u=function(e){return null!==e&&"object"==typeof e},Su=function(e){return String(Math.floor(Number(e)))===e},wu=function(e){return"[object String]"===Object.prototype.toString.call(e)},Cu=function(e){return _u(e)&&bu(e.then)},Iu=function(e){return e&&_u(e)&&_u(e.target)};function Tu(e,t,r,n){void 0===n&&(n=0);for(var o=gu(t);e&&n<o.length;)e=e[o[n++]];return void 0===e?r:e}function xu(e,t,r){for(var n=pu(e),o=n,i=0,a=gu(t);i<a.length-1;i++){var l=a[i],s=Tu(e,a.slice(0,i+1));if(s)o=o[l]=pu(s);else{var c=a[i+1];o=o[l]=Su(c)&&Number(c)>=0?[]:{}}}return(0===i?e:o)[a[i]]===r?e:(void 0===r?delete o[a[i]]:o[a[i]]=r,0===i&&void 0===r&&delete n[a[i]],n)}function Ru(e,t,r,n){void 0===r&&(r=new WeakMap),void 0===n&&(n={});for(var o=0,i=Object.keys(e);o<i.length;o++){var a=i[o],l=e[a];_u(l)?r.get(l)||(r.set(l,!0),n[a]=Array.isArray(l)?[]:{},Ru(l,t,r,n[a])):n[a]=t}return n}var Ou=function(e){function t(t){var r=e.call(this,t)||this;return r.hcCache={},r.hbCache={},r.registerField=function(e,t){r.fields[e]=t},r.unregisterField=function(e){delete r.fields[e]},r.setErrors=function(e){r.setState({errors:e})},r.setTouched=function(e){r.setState({touched:e},(function(){r.props.validateOnBlur&&r.runValidations(r.state.values)}))},r.setValues=function(e){r.setState({values:e},(function(){r.props.validateOnChange&&r.runValidations(e)}))},r.setStatus=function(e){r.setState({status:e})},r.setError=function(e){r.setState({error:e})},r.setSubmitting=function(e){r.didMount&&r.setState({isSubmitting:e})},r.validateField=function(e){return r.setState({isValidating:!0}),r.runSingleFieldLevelValidation(e,Tu(r.state.values,e)).then((function(t){return r.didMount&&r.setState({errors:xu(r.state.errors,e,t),isValidating:!1}),t}))},r.runSingleFieldLevelValidation=function(e,t){return new Promise((function(n){return n(r.fields[e].props.validate(t))})).then((function(e){return e}),(function(e){return e}))},r.runValidationSchema=function(e){return new Promise((function(t){var n=r.props.validationSchema,o=bu(n)?n():n;(function(e,t,r,n){void 0===r&&(r=!1);void 0===n&&(n={});var o={};for(var i in e)if(e.hasOwnProperty(i)){var a=String(i);o[a]=""!==e[a]?e[a]:void 0}return t[r?"validateSync":"validate"](o,{abortEarly:!1,context:n})})(e,o).then((function(){t({})}),(function(e){t(function(e){var t={};if(0===e.inner.length)return xu(t,e.path,e.message);for(var r=0,n=e.inner;r<n.length;r++){var o=n[r];t[o.path]||(t=xu(t,o.path,o.message))}return t}(e))}))}))},r.runValidations=function(e){void 0===e&&(e=r.state.values),r.validator&&r.validator();var t=function(e){var t=!1;return[new Promise((function(r,n){e.then((function(e){return t?n({isCanceled:!0}):r(e)}),(function(e){return n(t?{isCanceled:!0}:e)}))})),function(){t=!0}]}(Promise.all([r.runFieldLevelValidations(e),r.props.validationSchema?r.runValidationSchema(e):{},r.props.validate?r.runValidateHandler(e):{}]).then((function(e){var t=e[0],r=e[1],n=e[2];return hc.all([t,r,n],{arrayMerge:ku})}))),n=t[0],o=t[1];return r.validator=o,n.then((function(e){return r.didMount&&r.setState((function(t){return ac(t.errors,e)?null:{errors:e}})),e})).catch((function(e){return e}))},r.handleChange=function(e){var t=function(e,t){var n,o,i=t;if(Iu(e)){var a=e;a.persist&&a.persist();var l=a.target,s=l.type,c=l.name,u=l.id,d=l.checked;l.outerHTML;if(i=t||(c||u),n=a.target.value,/number|range/.test(s)){var h=parseFloat(a.target.value);n=(o=h)!=o?"":h}/checkbox/.test(s)&&(n=d)}else n=e;i&&r.setState((function(e){return Pe({},e,{values:xu(e.values,i,n)})}),(function(){r.props.validateOnChange&&r.runValidations(xu(r.state.values,i,n))}))};if(wu(e)){var n=e;return bu(r.hcCache[n])||(r.hcCache[n]=function(e){return t(e,n)}),r.hcCache[n]}t(e)},r.setFieldValue=function(e,t,n){void 0===n&&(n=!0),r.didMount&&r.setState((function(r){return Pe({},r,{values:xu(r.values,e,t)})}),(function(){r.props.validateOnChange&&n&&r.runValidations(r.state.values)}))},r.handleSubmit=function(e){e&&e.preventDefault&&e.preventDefault(),r.submitForm()},r.submitForm=function(){return r.setState((function(e){return{touched:Ru(e.values,!0),isSubmitting:!0,isValidating:!0,submitCount:e.submitCount+1}})),r.runValidations(r.state.values).then((function(e){r.didMount&&r.setState({isValidating:!1}),0===Object.keys(e).length?r.executeSubmit():r.didMount&&r.setState({isSubmitting:!1})}))},r.executeSubmit=function(){r.props.onSubmit(r.state.values,r.getFormikActions())},r.handleBlur=function(e){var t=function(e,t){var n=t;if(Iu(e)){var o=e;o.persist&&o.persist();var i=o.target,a=i.name,l=i.id;i.outerHTML;n=a||l}r.setState((function(e){return{touched:xu(e.touched,n,!0)}})),r.props.validateOnBlur&&r.runValidations(r.state.values)};if(wu(e)){var n=e;return bu(r.hbCache[n])||(r.hbCache[n]=function(e){return t(e,n)}),r.hbCache[n]}t(e)},r.setFieldTouched=function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0),r.setState((function(r){return Pe({},r,{touched:xu(r.touched,e,t)})}),(function(){r.props.validateOnBlur&&n&&r.runValidations(r.state.values)}))},r.setFieldError=function(e,t){r.setState((function(r){return Pe({},r,{errors:xu(r.errors,e,t)})}))},r.resetForm=function(e){var t=e||r.props.initialValues;r.initialValues=t,r.setState({isSubmitting:!1,isValidating:!1,errors:{},touched:{},error:void 0,status:r.props.initialStatus,values:t,submitCount:0})},r.handleReset=function(){if(r.props.onReset){var e=r.props.onReset(r.state.values,r.getFormikActions());Cu(e)?e.then(r.resetForm):r.resetForm()}else r.resetForm()},r.setFormikState=function(e,t){return r.setState(e,t)},r.validateForm=function(e){return r.setState({isValidating:!0}),r.runValidations(e).then((function(e){return r.didMount&&r.setState({isValidating:!1}),e}))},r.getFormikActions=function(){return{resetForm:r.resetForm,submitForm:r.submitForm,validateForm:r.validateForm,validateField:r.validateField,setError:r.setError,setErrors:r.setErrors,setFieldError:r.setFieldError,setFieldTouched:r.setFieldTouched,setFieldValue:r.setFieldValue,setStatus:r.setStatus,setSubmitting:r.setSubmitting,setTouched:r.setTouched,setValues:r.setValues,setFormikState:r.setFormikState}},r.getFormikComputedProps=function(){var e=r.props.isInitialValid,t=!ac(r.initialValues,r.state.values);return{dirty:t,isValid:t?r.state.errors&&0===Object.keys(r.state.errors).length:!1!==e&&bu(e)?e(r.props):e,initialValues:r.initialValues}},r.getFormikBag=function(){return Pe({},r.state,r.getFormikActions(),r.getFormikComputedProps(),{registerField:r.registerField,unregisterField:r.unregisterField,handleBlur:r.handleBlur,handleChange:r.handleChange,handleReset:r.handleReset,handleSubmit:r.handleSubmit,validateOnChange:r.props.validateOnChange,validateOnBlur:r.props.validateOnBlur})},r.getFormikContext=function(){return Pe({},r.getFormikBag(),{validationSchema:r.props.validationSchema,validate:r.props.validate,initialValues:r.initialValues})},r.state={values:t.initialValues||{},errors:{},touched:{},isSubmitting:!1,isValidating:!1,submitCount:0,status:t.initialStatus},r.didMount=!1,r.fields={},r.initialValues=t.initialValues||{},r}return ke(t,e),t.prototype.componentDidMount=function(){this.didMount=!0},t.prototype.componentWillUnmount=function(){this.didMount=!1,this.validator&&this.validator()},t.prototype.componentDidUpdate=function(e){this.props.enableReinitialize&&!ac(e.initialValues,this.props.initialValues)&&(this.initialValues=this.props.initialValues,this.resetForm(this.props.initialValues))},t.prototype.runFieldLevelValidations=function(e){var t=this,r=Object.keys(this.fields).filter((function(e){return t.fields&&t.fields[e]&&t.fields[e].props.validate&&bu(t.fields[e].props.validate)})),n=r.length>0?r.map((function(r){return t.runSingleFieldLevelValidation(r,Tu(e,r))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,t,n){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===t||t&&(e=xu(e,r[n],t)),e}),{})}))},t.prototype.runValidateHandler=function(e){var t=this;return new Promise((function(r){var n=t.props.validate(e);void 0===n?r({}):Cu(n)?n.then((function(){r({})}),(function(e){r(e)})):r(n)}))},t.prototype.render=function(){var e=this.props,t=e.component,r=e.render,n=e.children,o=this.getFormikBag(),i=this.getFormikContext();return d.createElement(vu,{value:i},t?d.createElement(t,o):r?r(o):n?bu(n)?n(o):function(e){return 0===d.Children.count(e)}(n)?null:d.Children.only(n):null)},t.defaultProps={validateOnChange:!0,validateOnBlur:!0,isInitialValid:!1,enableReinitialize:!1},t}(d.Component);function ku(e,t,r){var n=e.slice();return t.forEach((function(t,o){if(void 0===n[o]){var i=!1!==r.clone&&r.isMergeableObject(t);n[o]=i?hc(Array.isArray(t)?[]:{},t,r):t}else r.isMergeableObject(t)?n[o]=hc(e[o],t,r):-1===e.indexOf(t)&&n.push(t)})),n}function Pu({error:t,children:r}){const n=r?Array.isArray(r)?r:[r]:[];return Ee(Kt.Field,{children:[n.map(((r,n)=>e.cloneElement(r,{error:!!t,key:n}))),!!t&&U(R,{pointing:"above",children:"string"!=typeof t?JSON.stringify(t):t})]})}yu((function(e){var t=e.formik,r=t.handleReset,n=t.handleSubmit,o=De(e,["formik"]);return d.createElement("form",Pe({onReset:r,onSubmit:n},o))})).displayName="Form";const Du=({open:e,tree:t,onSelect:r,onClose:n})=>{const{t:o}=Me(),[i,a]=d.useState(null),{loading:l,error:s,data:c}=ze(zn,{variables:{id:[t]}});if(l)return U(Ae,{});if(s)return Ee("p",{children:["ERROR ",s]});if(!c||!c.trees||!c.trees.list.length)return U("p",{children:"Unknown tree"});const u=c.trees.list[0];return Ee(rt,{open:e,onClose:n,closeIcon:!0,children:[U(rt.Header,{children:o("trees.select_tree_node")}),U(rt.Content,{style:{height:"80vh"},children:U(Vd,{tree:u,onClickNode:e=>a([e]),readOnly:!0,selection:i})}),Ee(rt.Actions,{children:[U(k,{"data-test-id":"select_tree_node_close_btn",negative:!0,content:o("admin.cancel"),icon:"cancel",onClick:n}),i&&i.length&&U(k,{"data-test-id":"select_tree_node_submit_btn",positive:!0,content:o("admin.submit"),icon:"check",onClick:()=>{const e=i[0];return r(e)}})]})]})},Eu=B`
    query ROOT_SELECTOR_QUERY($lang: [AvailableLanguage!]) {
        libraries {
            list {
                id
                label(lang: $lang)
            }
        }
    }
`;function Mu({restrictToRoots:e,onSelect:t,lang:r}){const{loading:n,error:o,data:i}=ze(Eu,{variables:{lang:r}}),{t:a}=Me();if(n)return U(Ae,{});if(o)return U("p",{"data-testid":"error",children:o.message});const l=(e.length>0?i.libraries.list.filter((t=>e.includes(t.id))):i.libraries.list).map((e=>({id:e.id,label:e.label[r[0]]})));return Ee("div",{className:"ui placeholder segment",children:[Ee("div",{className:"ui two column relaxed stackable grid",children:[U("div",{className:"middle aligned column",children:U(Ne,{selection:!0,children:l.map((e=>U(zu,{onSelect:t,elem:e},e.id)))})}),U("div",{className:"middle aligned column",children:U("div",{className:"ui visible info large message",children:a("navigator.select_root")})})]}),U("div",{className:"ui vertical divider",children:U("i",{className:"angle double left icon"})})]})}function zu({onSelect:e,elem:t}){return Ee(Ne.Item,{onClick:()=>{e(t.id)},children:[U(Ne.Icon,{name:"book",size:"big"}),Ee(Ne.Content,{children:[U(Ne.Header,{children:t.label}),t.id]})]})}const Au={filter:"_filter_1hdiv_1",filterAttribute:"_filterAttribute_1hdiv_4",filterFunction:"_filterFunction_1hdiv_8",filterValue:"_filterValue_1hdiv_11",filterRemove:"_filterRemove_1hdiv_14"};var Nu=(e=>(e.INIT_STATE="INIT_STATE",e.SET_RESTRICT_ROOTS="SET_RESTRICT_TO_ROOTS",e.SET_SELECTED_ROOT="SET_SELECTED_ROOT",e.SET_ROOTS="SET_ROOTS",e.SET_ROOT_INFOS="SET_ROOT_INFOS",e.SET_FILTERS="SET_FILTERS",e.TOGGLE_FILTERS="TOGGLE_FILTERS",e.SET_LIST="SET_LIST",e.FILTER_REMOVE="FILTER_REMOVE",e.SELECTION_ADD="SELECTION_ADD",e.SELECTION_REMOVE="SELECTION_REMOVE",e.SET_OFFSET="SET_OFFSET",e.SET_LIMIT="SET_LIMIT",e))(Nu||{});const Lu={restrictToRoots:[],selectable:!1,onSelectionChanged:null,onEditRecordClick:null,multipleSelection:!1,selection:[],selectedRoot:null,selectedRootLabel:null,selectedRootQuery:null,selectedRootFilter:null,selectedRootAttributes:[],rootsList:[],lang:["fr"],filters:[],showFilters:!1,list:[],execSearch:!0,availableOffsets:[5,10,15,20,50,100],selectedOffset:10},ju=(e,t)=>{switch(t.type){case"INIT_STATE":return{...e,restrictToRoots:t.data.restrictToRoots,selectedRoot:1===t.data.restrictToRoots.length?t.data.restrictToRoots[0]:null,onSelectionChanged:t.data.onSelectionChanged,multipleSelection:t.data.multipleSelection,selectable:t.data.selectable};case"SET_RESTRICT_TO_ROOTS":return{...e,restrictToRoots:t.data,selectedRoot:1===t.data.length?t.data[0]:null};case"SET_SELECTED_ROOT":return{...e,selectedRoot:t.data,selectedRootQuery:null,selectedRootAttributes:[],list:[],filters:[],execSearch:!0};case"SET_ROOTS":return{...e,rootsList:t.data};case"SET_ROOT_INFOS":return{...e,selectedRootLabel:t.data.label,selectedRootQuery:t.data.query,selectedRootFilter:t.data.filter,selectedRootAttributes:t.data.attributes};case"SET_FILTERS":return{...e,filters:t.data,list:[],showFilters:!1,execSearch:!0};case"FILTER_REMOVE":return{...e,filters:e.filters.filter(((e,r)=>r!==t.data)),execSearch:!0};case"TOGGLE_FILTERS":return{...e,showFilters:!e.showFilters};case"SET_LIST":return{...e,list:t.data.list,totalCount:t.data.totalCount,offset:t.data.offset,execSearch:!1,availableOffsets:e.availableOffsets.length<7?[...e.availableOffsets,t.data.all]:e.availableOffsets};case"SET_OFFSET":return{...e,offset:t.data.offset,currentPage:t.data.page,execSearch:!0};case"SET_LIMIT":return"string"==typeof t.data.limit?{...e,selectedOffset:null,offset:0,currentPage:1,execSearch:!0}:{...e,selectedOffset:t.data.limit,offset:0,currentPage:1,execSearch:!0};case"SELECTION_ADD":const r=e.multipleSelection?Array.from(new Set(e.selection).add(t.data)):[t.data],n=e.onSelectionChanged;return null!==n&&setImmediate((()=>n(r))),{...e,selection:r};case"SELECTION_REMOVE":const o=e.selection.filter((e=>e.id!==t.data.id)),i=e.onSelectionChanged;return null!==i&&setImmediate((()=>i(o))),{...e,selection:o};default:return e}},Fu={attribute:"",value:"",operator:"="},Gu=(e,t)=>{switch(t.type){case"ADD_FILTER":return[...e,{...Fu}];case"REMOVE_FILTER":const r=[...e];return r.splice(t.data,1),r;case"CHANGE_VALUE":return e[t.data.index]={...e[t.data.index],value:t.data.value},[...e];case"CHANGE_ATTRIBUTE":return e[t.data.index]={...e[t.data.index],attribute:t.data.value},[...e];case"RESET":return 0===t.data.length?[{...Fu}]:t.data;default:return e}};function Hu({state:e,dispatch:t}){const[r,n]=d.useReducer(Gu,e.filters);d.useEffect((()=>{e.showFilters&&n({type:"RESET",data:e.filters})}),[e.filters,e.showFilters]);const o=d.useMemo((()=>e.selectedRootAttributes.map((e=>{var t;return{key:e.id,text:null==(t=e.label)?void 0:t.fr,value:e.id}}))),[e.selectedRootAttributes]),i=d.useMemo((()=>({removeFilter:e=>{n({type:"REMOVE_FILTER",data:e})},changeValue:(e,t)=>{n({type:"CHANGE_VALUE",data:{index:e,value:t}})},changeAttribute:(e,t)=>{n({type:"CHANGE_ATTRIBUTE",data:{index:e,value:t}})}})),[n]),a=d.useMemo((()=>(e,t)=>Ee(ct,{fluid:!0,labelPosition:"left",type:"text",placeholder:"Value...",className:Au.filter,children:[U(st,{style:{width:"40%"},placeholder:"Attribute",search:!0,selection:!0,options:o,className:Au.filterAttribute,onChange:(e,r)=>{i.changeAttribute(t,r.value)},value:e.attribute}),U(R,{className:Au.filterFunction,children:"="}),U("input",{"data-id":t,onChange:e=>{i.changeValue(t,e.target.value)},value:e.value,className:Au.filterValue}),U(k,{as:"a",negative:!0,onClick:()=>{i.removeFilter(t)},className:Au.filterRemove,children:U(w,{name:"delete"})})]},t)),[o,i]);return Ee(ut,{className:"inverted",style:{position:"absolute",top:0,right:0,width:"75%",bottom:0,textAlign:"left",boxSizing:"border-box"},children:[U("h4",{className:"ui right floated header",children:U("i",{className:"ui window close icon",onClick:()=>{n({type:"RESET",data:e.filters}),t({type:Nu.TOGGLE_FILTERS,data:null})}})}),Ee("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e=r.filter((e=>""!==e.attribute&&""!==e.operator&&""!==e.value));t({type:Nu.SET_FILTERS,data:e})})()},children:[Ee("h4",{className:"ui left floated header",children:[Ee(k,{type:"button",onClick:()=>{n({type:"ADD_FILTER",data:null})},children:[U(w,{name:"add"})," Add filter"]}),Ee(k,{type:"submit",primary:!0,children:[U(w,{name:"filter"})," Apply filters"]})]}),U("div",{className:"ui divider clearing"}),r.map(a)]})]})}var Vu=(e=>(e.BEGIN_WITH="BEGIN_WITH",e.BETWEEN="BETWEEN",e.CLASSIFIED_IN="CLASSIFIED_IN",e.CONTAINS="CONTAINS",e.END_AFTER="END_AFTER",e.END_BEFORE="END_BEFORE",e.END_ON="END_ON",e.END_WITH="END_WITH",e.EQUAL="EQUAL",e.GREATER_THAN="GREATER_THAN",e.IS_EMPTY="IS_EMPTY",e.IS_NOT_EMPTY="IS_NOT_EMPTY",e.LAST_MONTH="LAST_MONTH",e.LESS_THAN="LESS_THAN",e.NEXT_MONTH="NEXT_MONTH",e.NOT_CLASSIFIED_IN="NOT_CLASSIFIED_IN",e.NOT_CONTAINS="NOT_CONTAINS",e.NOT_EQUAL="NOT_EQUAL",e.START_AFTER="START_AFTER",e.START_BEFORE="START_BEFORE",e.START_ON="START_ON",e.TODAY="TODAY",e.TOMORROW="TOMORROW",e.VALUES_COUNT_EQUAL="VALUES_COUNT_EQUAL",e.VALUES_COUNT_GREATER_THAN="VALUES_COUNT_GREATER_THAN",e.VALUES_COUNT_LOWER_THAN="VALUES_COUNT_LOWER_THAN",e.YESTERDAY="YESTERDAY",e))(Vu||{});const Wu=e=>se`
    query($filters:[RecordFilterInput], $pagination: RecordsPagination) {
        ${e} (filters:$filters, pagination: $pagination){
            totalCount
            list {
                whoAmI{
                    id,
                    label,
                    color,
                    preview,
                    library {
                        id,
                        label
                    }
                }
            }
        }
    }
`,Uu={TopPanelContainer:"_TopPanelContainer_ydp8l_1",ListPanelContainer:"_ListPanelContainer_ydp8l_4",TopPanelHeader:"_TopPanelHeader_ydp8l_13",ListPanelTable:"_ListPanelTable_ydp8l_18",ListPanelTableTh:"_ListPanelTableTh_ydp8l_21",ListPanelTableThFooter:"_ListPanelTableThFooter_ydp8l_26",ListPanelPaginationContainer:"_ListPanelPaginationContainer_ydp8l_32",ListPanelPaginationCount:"_ListPanelPaginationCount_ydp8l_37",blurred:"_blurred_ydp8l_41",clickable:"_clickable_ydp8l_45"};function Bu({state:e,dispatch:t}){return e.execSearch?U(qu,{selectedRootQuery:e.selectedRootQuery,filters:e.filters,dispatch:t,offset:"number"==typeof e.offset?e.offset:null,limit:e.selectedOffset}):U($u,{state:e,dispatch:t})}function $u({state:e,dispatch:t}){const{t:r}=Me(),n=e.selectable,o=d.useMemo((()=>e=>(r,n)=>{const o=n.checked?Nu.SELECTION_ADD:Nu.SELECTION_REMOVE;t({type:o,data:e.whoAmI})}),[t]),i=d.useMemo((()=>t=>void 0!==e.selection.find((e=>e.id===t))),[e.selection]),a=d.useMemo((()=>{const t=e.onEditRecordClick?e.onEditRecordClick:()=>{};return e=>(r,n)=>{t(e.whoAmI)}}),[e.onEditRecordClick]),l=e.totalCount&&e.selectedOffset?Math.floor(e.totalCount/e.selectedOffset)+(e.totalCount%e.selectedOffset?1:0):1,s=e.availableOffsets.map((e=>({text:e.toString(),value:e})));return Ee(nt,{className:Uu.ListPanelTable,selectable:!0,celled:!0,children:[U(nt.Header,{children:Ee(nt.Row,{children:[n&&U(nt.HeaderCell,{className:Uu.ListPanelTableTh}),U(nt.HeaderCell,{className:Uu.ListPanelTableTh,children:"ID"}),U(nt.HeaderCell,{className:Uu.ListPanelTableTh})]})}),U(nt.Body,{children:e.list.map((e=>Ee(nt.Row,{children:[n&&U(nt.Cell,{width:"1",children:U(lt,{toggle:!0,onChange:o(e),checked:i(e.whoAmI.id)})}),U(nt.Cell,{className:Uu.clickable,width:"3",onClick:a(e),children:U(Le,{record:e.whoAmI})}),U(nt.Cell,{width:"12"})]},e.whoAmI.id)))}),U(nt.Footer,{children:U(nt.Row,{children:Ee(nt.HeaderCell,{className:Uu.ListPanelTableThFooter,colSpan:"3",children:[Ee("div",{className:Uu.ListPanelPaginationContainer,children:[U(Pt,{onPageChange:(r,n)=>{const o=n.activePage;let i=0;e.selectedOffset&&(i=(o-1)*e.selectedOffset);const a={offset:i,page:o};t({type:Nu.SET_OFFSET,data:a})},activePage:e.currentPage?e.currentPage:1,value:e.selectedOffset?e.selectedOffset:"",totalPages:l}),Ee("p",{className:Uu.ListPanelPaginationCount,children:[e.totalCount," ",e.selectedRootLabel]})]}),U("br",{}),Ee("div",{style:{position:"absolute",bottom:"3px",right:"2px"},children:[U("span",{style:{marginRight:"5px"},children:r("navigator.select_range")}),U(Et,{placeholder:r("navigator.select_range"),value:e.selectedOffset?e.selectedOffset:e.availableOffsets[e.availableOffsets.length-1],options:s,onChange:(e,r)=>{t({type:Nu.SET_LIMIT,data:{limit:r.value}})}})]})]})})})]})}function qu({selectedRootQuery:e,filters:t,dispatch:r,offset:n,limit:o}){const{t:i}=Me(),a=Wu(e),l=t.reduce(((e,r,n)=>{t.length>1&&n>0&&e.push({operator:"AND"});const o={field:r.attribute,condition:"EQUAL",value:r.value};return e.push(o),e}),[]),s=null===o?null:{offset:null!==n?n:0,limit:o},{loading:c,error:u,data:h}=ze(a,{fetchPolicy:"network-only",variables:{filters:l,pagination:s}});if(d.useEffect((()=>{h&&r({type:Nu.SET_LIST,data:{...h[e],offset:n,all:f}})}),[h]),c)return U(Ae,{withDimmer:!0});if(u)return U("p",{"data-testid":"error",children:u.message});if(!h)return U("p",{"data-testid":"error",children:"No data"});const f=i("navigator.display_all");return null}function Ku({state:e,dispatch:t}){const{t:r}=Me(),[n,o]=d.useState(!1),{clearRoot:i,toggleFilters:a,makeOnFilterRemove:l,selectedRootAttributesById:s}=d.useMemo((()=>({clearRoot:()=>{t({type:Nu.SET_SELECTED_ROOT,data:null})},toggleFilters:()=>{t({type:Nu.TOGGLE_FILTERS,data:null})},makeOnFilterRemove:e=>r=>(r.stopPropagation(),t({type:Nu.FILTER_REMOVE,data:e}),!1),selectedRootAttributesById:e.selectedRootAttributes.reduce(((e,t)=>(e[t.id]=t,e)),{})})),[t,e.selectedRootAttributes]);return Ee("div",{className:`ui block segment secondary height100 ${Uu.TopPanelHeader}`,children:[Ee("h3",{children:[1!==e.restrictToRoots.length&&U(k,{size:"tiny",compact:!0,circular:!0,"data-testid":"clear_root",onClick:i,icon:"random"}),U("i",{className:"book icon"}),e.selectedRootLabel]}),Ee(k,{size:"small","data-testid":"toggle_filters",onClick:a,children:[U(w,{name:"edit"}),r("navigator.edit_filters")]}),Ee(k,{icon:!0,labelPosition:"left",size:"large",style:{position:"absolute",right:"10px",top:"16px"},onClick:()=>{o(!0)},children:[U(w,{name:"plus"}),r("records.create_record")]}),U(Qt,{}),U(R.Group,{onClick:a,color:"blue",children:e.filters.map(((t,r)=>Ee(R,{as:"span",image:!0,children:[`${s[t.attribute].label[e.lang[0]]} ${t.operator} ${t.value}`,U(R.Detail,{children:U(w,{name:"delete",onClick:l(r)})})]},r)))}),n&&U(Ad,{open:!0,onClose:()=>{o(!1),t({type:Nu.SET_FILTERS,data:e.filters})},library:e.selectedRoot?e.selectedRoot:""})]})}function Qu({state:e,dispatch:t}){return e.selectedRootQuery&&e.selectedRootAttributes?Ee(je.Dimmable,{as:"div",dimmed:e.showFilters,className:"height100",children:[U("div",{className:`${Uu.TopPanelContainer} ${e.showFilters?Uu.blurred:""}`,children:U(Ku,{state:e,dispatch:t})}),U("div",{className:`ui segment ${Uu.ListPanelContainer} ${e.showFilters?Uu.blurred:""}`,children:U(Bu,{state:e,dispatch:t})}),U(Fe,{visible:e.showFilters,animation:"fade left",duration:350,children:U(je.Inner,{active:e.showFilters,className:"height100",style:{backgroundColor:"rgba(0,0,0,0.6)"},children:U(Hu,{state:e,dispatch:t})})})]}):U(Xu,{state:e,dispatch:t})}const Yu=B`
    query QUERY_LIBRARY_CONFIG($id: [ID!], $lang: [AvailableLanguage!]) {
        libraries(filters: {id: $id}) {
            list {
                id
                label(lang: $lang)
                gqlNames {
                    query
                    filter
                }
                attributes {
                    id
                    type
                    format
                    label(lang: $lang)
                }
            }
        }
    }
`;function Xu({state:e,dispatch:t}){const{loading:r,error:n,data:o}=ze(Yu,{variables:{id:e.selectedRoot,lang:e.lang}});return d.useEffect((()=>{o&&t({type:Nu.SET_ROOT_INFOS,data:{label:o.libraries.list[0].label[`${e.lang[0]}`],query:o.libraries.list[0].gqlNames.query,filter:o.libraries.list[0].gqlNames.filter,attributes:o.libraries.list[0].attributes}})}),[null==o?void 0:o.libraries]),r?U(Ae,{}):n?U("p",{"data-testid":"error",children:n.message}):null}function Ju(e){const{lang:t}=Ge(),[r,n]=d.useReducer(ju,{...Lu,...e,lang:t,selectedRoot:e.restrictToRoots&&1===e.restrictToRoots.length?e.restrictToRoots[0]:null});d.useEffect((()=>{e.getSelectionRef&&(e.getSelectionRef.current=()=>r.selection)}),[e.getSelectionRef,r.selection]);return r.selectedRoot?U(Qu,{state:r,dispatch:n}):U(Mu,{restrictToRoots:r.restrictToRoots,lang:r.lang,onSelect:e=>n({type:Nu.SET_SELECTED_ROOT,data:e})})}const Zu=W(rt)`
    max-height: 90vh;
    overflow: auto;
`,ed=({library:e,open:t,onClose:r,onSelect:n})=>{const{t:o}=Me();return Ee(Zu,{open:t,onClose:r,children:[U(rt.Header,{children:o("records.select_record")}),U(Ju,{onEditRecordClick:n,restrictToRoots:Array.isArray(e)?e:[e]}),U(rt.Actions,{children:U(k,{"data-test-id":"select-record-modal-close-btn",onClick:r,children:o("admin.cancel")})})]})},td=W(nt.Row)`
    position: relative;
    padding: 0;
`,rd=W(g)`
    &&& {
        position: absolute;
        background: none;
        box-shadow: 0 0 40px 20px #444 inset;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        margin: 0;
        border-radius: 0;
    }
`,nd=({value:e,onDeleteLink:t,readonly:r=!1})=>{const{t:n}=Me(),[o,i]=d.useState(!1),[a,l]=d.useState(!1),[s,c]=d.useState(!1);return U(He,{children:e.linkValue&&Ee(He,{children:[U(td,{"data-test-id":"link_element_wrapper",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),style:{position:"relative"},className:"my_row",children:Ee(nt.Cell,{style:{position:"relative"},children:[U(Le,{record:e.linkValue.whoAmI}),o&&Ee(rd,{"data-test-id":"link_element_hover_menu",size:"small",inverted:!0,children:[Ee(g.Item,{"data-test-id":"edit_record_btn",size:"big",onClick:()=>c(!0),children:[U(w,{name:"edit outline",size:"large"}),n("records.edit")]}),!r&&Ee(g.Item,{"data-test-id":"delete_link_btn",size:"big",onClick:()=>l(!0),children:[U(w,{name:"trash alternate",size:"large"}),n("records.delete_link")]})]})]})},`${e.id_value}_${e.linkValue.whoAmI.id}`),U(Ad,{open:s,onClose:()=>c(!1),recordId:e.linkValue.whoAmI.id,library:e.linkValue.whoAmI.library.id}),!r&&U(ot,{"data-test-id":"delete_confirm_modal",open:a,onCancel:()=>l(!1),onConfirm:()=>t(e),content:n("records.delete_confirm")})]})})},od=W.div`
    position: relative;
    padding-right: 30px;
    height: 30px;
`;function id({altPaths:e=[],onClose:t}){return U(rt,{size:"fullscreen",open:!0,onClose:()=>t(!1),children:U(rt.Content,{children:U(nt,{children:U(nt.Body,{children:e.map((e=>U(nt.Row,{children:U(nt.Cell,{collapsing:!0,children:U(Lt,{sections:e.map((e=>({key:e.id,content:U(od,{"data-test-id":"path_part_wrapper",children:U(Le,{record:e})}),link:!1,active:!1}))),icon:"right angle"})})},e.map((e=>e.id)).join(""))))})})})})}const ad=W.div`
    position: relative;
    padding-right: 30px;
    height: 30px;
`,ld=W(st)`
    && {
        position: absolute;
        top: 7px;
        right: 0;
    }
`;function sd({record:e,altPaths:t=[],actions:r=[]}){const[n,o]=d.useState(!1),[i,a]=d.useState(!1),{t:l}=Me(),s=r.filter((t=>!t.displayFilter||t.displayFilter(e))).map(((t,r)=>U(st.Item,{text:t.text,icon:t.icon,onClick:()=>t.action(e)},r)));t.length&&s.push(U(st.Item,{text:l("trees.alternative_paths"),icon:"list",onClick:()=>a(!0)},"altPaths"));const c=!!s.length,u=U(w,{name:"ellipsis vertical"});return Ee(ad,{"data-test-id":"path_part_wrapper",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[U(Le,{record:e}),c&&n&&U(ld,{trigger:u,icon:!1,children:U(st.Menu,{children:s})}),i&&U(id,{altPaths:t,onClose:a})]})}function cd({element:e,actions:t}){var r,n,o,i;const a=[],l=[];if(null==(r=e.ancestors)?void 0:r.length){const r=e.ancestors.slice(0,-1);for(const e of r)a.push({key:null==(o=null==(n=e.record)?void 0:n.whoAmI)?void 0:o.id,content:U(sd,{record:null==(i=e.record)?void 0:i.whoAmI,actions:t}),link:!1,active:!1})}const s=e.record;return s&&s.whoAmI&&a.push({key:s.whoAmI.id,content:U(sd,{record:s.whoAmI,actions:t,altPaths:l}),link:!1,active:!0}),U(Lt,{sections:a,icon:"right angle"})}function ud({value:e,readOnly:t,onDeleteLink:r}){const{t:n}=Me(),o=()=>r(e),[i,a]=d.useState(!1),[l,s]=d.useState(null);if(!e.treeValue)return U(nt.Row,{children:U(nt.Cell,{children:"Invalid value"})});const c=[{text:n("records.edit"),icon:"edit outline",action:e=>{s(e),a(!0)}}];return t||c.push({text:n("records.delete_link"),icon:"trash alternate outline",action:o,displayFilter:t=>{var r;return t.id===(null==(r=e.treeValue)?void 0:r.record.whoAmI.id)}}),Ee(He,{children:[U(nt.Row,{children:U(nt.Cell,{children:U(cd,{element:e.treeValue,actions:c})})}),i&&!!l&&U(Ad,{library:l.library.id,recordId:l.id,open:i,onClose:()=>a(!1)})]})}const dd=W.div`
    float: right;
`,hd=W.div`
    margin-bottom: 1em;
`,fd=W(k)`
    &&& {
        margin-left: 1em;
    }
`;function pd({values:e,attribute:t,onChange:r,readonly:n}){const{t:o}=Me(),i=Ge().lang,[a,l]=d.useState(!1),[s,c]=d.useState(!1),[u,h]=d.useState(!1),f=e.filter((e=>null!==e)),p=()=>l(!1),g=()=>h(!1),v=e=>t=>{r({linkValue:null,id_value:t.id_value,modified_at:null,created_at:null,version:null},e)},m=U(fd,{type:"button",content:o("records.add_value"),icon:"plus",compact:!0,basic:!0,labelPosition:"left",onClick:e=>{t.type===Ue.tree&&h(!0)}}),y=!n&&(t.multiple_values||!f.length);return Ee(hd,{id:"inputField",children:[Ee(nt,{"data-test-id":"link_values",compact:"very",children:[U(nt.Header,{children:U(nt.Row,{children:Ee(nt.HeaderCell,{children:[U("label",{children:Ve(t.label,i)}),y&&We(t)&&t.linked_library&&U(st,{trigger:m,icon:!1,children:Ee(st.Menu,{children:[U(st.Item,{"data-test-id":"add_value_btn",onClick:()=>l(!0),icon:"search",text:o("records.select_record")}),U(st.Item,{"data-test-id":"add_value_create_btn",onClick:()=>c(!0),icon:"plus circle",text:o("records.create_record")})]})}),y&&t.type===Ue.tree&&m,U(dd,{"data-test-id":"elements_count",children:o("records.links_elements_count",{count:e?f.length:0})})]})})}),U(nt.Body,{children:f.map(((e,r)=>{if(!(!e||Be(e)&&!e.linkValue||$e(e)&&!e.treeValue))return We(t)?U(nd,{value:e,onDeleteLink:v(r),readonly:n},`${e.id_value}_${e.linkValue.whoAmI.id}`):U(ud,{value:e,onDeleteLink:v(r)},`${e.id_value}_${e.treeValue.record.whoAmI.id}`)}))})]}),!n&&We(t)&&t.linked_library&&Ee(He,{children:[U(ed,{open:a,library:t.linked_library.id,onSelect:t=>{r({linkValue:{id:t.id,whoAmI:t},id_value:null,modified_at:null,created_at:null,version:null},e.length),p()},onClose:p}),t.linked_library&&U(Ad,{library:t.linked_library.id,open:s,onClose:t=>{t&&r({linkValue:{id:t.id,whoAmI:t},id_value:null,modified_at:null,created_at:null,version:null},e.length),c(!1)}})]}),!n&&qe(t)&&t.linked_tree&&U(Du,{open:u,onClose:g,tree:t.linked_tree.id,onSelect:({node:t})=>{const n={treeValue:{id:t.id,record:{whoAmI:t.record.whoAmI},ancestors:t.parents.map((e=>({record:{whoAmI:e.record.whoAmI}})))},id_value:null,modified_at:null,created_at:null,version:null};r(n,e.length),g()}})]})}const gd=e=>{const t={id_value:null,modified_at:null,created_at:null,version:null};switch(e.type){case Ue.simple_link:case Ue.advanced_link:return{...t,linkValue:null};case Ue.tree:return{...t,treeValue:null};default:return{...t,value:null,raw_value:null}}},vd=({onSave:e,attributes:t,setSubmitFuncRef:r,errors:n={},inModal:o=!1})=>{const{t:i}=Me(),a=Ge().lang,l=d.useRef(null);d.useEffect((()=>{r&&r(l)}),[r]);const s=Object.keys(t).reduce(((e,r)=>(e[r]=[{...gd(t[r])}],e)),{});return U(Ou,{render:({values:e,handleSubmit:r,setFieldValue:s})=>{const c=(t,r)=>{const n="checkbox"===r.type?r.checked:r.value,o=r.name,i=e[o].map(((e,t)=>{const o=t===r["data-index"]?n:e.value;return{...e,value:o}}));s(o,i)},u=t=>()=>{const r=e[t].map((e=>({...e})));r.push({value:"",id_value:null}),s(t,r)},d=(t,r,n)=>{if(We(t,!1))return U(pd,{values:r,attribute:t,onChange:(o=t.id,(t,r)=>{let n;Ke(t)?(n=[...e[o]],n=[...n.slice(0,r),...n.slice(r+1)]):n=[...e[o],t],s(o,n)}),readonly:n});var o;r.length||r.push({...gd(t)});const l=Ve(t.label,a),d=!n&&(t.multiple_values||!r.length);return Ee(He,{children:[U("label",{style:{display:"inline"},children:l}),d&&Ee(k,{type:"button",size:"mini",compact:!0,basic:!0,icon:!0,labelPosition:"right",style:{margin:"5px"},onClick:u(t.id),"data-test-id":"add_value_btn",children:[U(w,{name:"plus"}),i("records.add_value")]}),r.map(((e,r)=>U(Kt.Input,{name:t.id,value:(null==e?void 0:e.value)||"","data-index":r,onChange:c,disabled:n},t.id+"_"+r)))]})};return l.current=r,Ee(Kt,{onSubmit:r,children:[Object.keys(t).map((r=>{var o,i;return U(Pu,{error:(null==(o=n[r])?void 0:o.message)??"",children:d(t[r],e[r],(i=t[r],i.system))},r)})),!o&&U(Kt.Group,{children:Ee(Kt.Button,{type:"submit",positive:!0,children:[U(w,{name:"checkmark"})," ",i("admin.submit")]})})]})},initialValues:s,onSubmit:e,enableReinitialize:!0})},md=(e,t)=>{let r;switch(t.type){case Ue.advanced_link:case Ue.simple_link:r=null!==e.linkValue?e.linkValue.whoAmI.id:null;break;case Ue.tree:r=null!==e.treeValue?[e.treeValue.record.whoAmI.library.id,e.treeValue.record.whoAmI.id].join("/"):null;break;default:r=null!==e?e.value:null}return r};function yd({attributes:e,library:t,recordId:r,valueVersion:n,onIdentityUpdate:o,setSubmitFunc:i,onPostSave:a,inModal:l=!1}){const s=d.useMemo((()=>e.reduce(((e,t)=>(e[t.id]=t,e)),{})),[e]),c=Ge().lang,[u,h]=d.useState(r||""),[f,p]=d.useState(!1),g=Zs(t,e),{loading:v,error:m,data:y,refetch:b,networkStatus:_}=ze(g,{variables:{id:u,version:Qe(n||null),lang:c},skip:!u||f,fetchPolicy:"no-cache"}),[S,{data:w}]=it(ec),[C]=it(Qs),I=d.useCallback((e=>e&&e.record.list[0].whoAmI?e.record.list[0].whoAmI:{id:"",library:{id:"",label:null},label:null,color:null,preview:null}),[]);d.useEffect((()=>{o&&y&&y.record&&y.record.list.length&&o(I(y))}),[o,I,y,t,u]);if(m)return U("p",{className:"error",children:"ERROR"});if(v||u&&_!==Ls.ready)return U(Ae,{withDimmer:!0});if(u&&(!y||!y.record||!y.record.list.length))return U("p",{children:"Unknown record"});const T=w&&w.saveValueBatch&&w.saveValueBatch.errors?w.saveValueBatch.errors.reduce(((e,t)=>(e[t.attribute]=t,e)),{}):{};return U(vd,{onSave:async e=>{p(!0);const r=Object.keys(e).filter((e=>!!s[e]&&!s[e].system)).reduce(((t,r)=>{for(const n of e[r])if(n&&!Ke(n)){const e=md(n,s[r]);""!==e&&t.push({attribute:r,id_value:n?n.id_value:null,value:e})}return t}),[]);let o;const i=await C({variables:{library:t.id}});var l;i&&i.data&&(h(i.data.createRecord.record.id),o=await(l=i.data.createRecord.record.id,S({variables:{library:t.id,recordId:l,version:n?Qe(n):null,values:r}}))),p(!1);const c=await b();a&&(null==o?void 0:o.data)&&!o.data.errors&&!o.data.saveValueBatch.errors&&o.data.saveValueBatch.values&&a(I(c.data))},attributes:s,errors:T,setSubmitFuncRef:i,inModal:l})}const bd=B`
    mutation DELETE_VALUE($library: ID!, $recordId: ID!, $attribute: ID!, $valueId: ID) {
        deleteValue(library: $library, recordId: $recordId, attribute: $attribute, valueId: $valueId) {
            attribute {
                id
            }
            id_value
        }
    }
`,_d=B`
    ${$}
    mutation SAVE_VALUE($library: ID!, $recordId: ID!, $attribute: ID!, $value: ValueInput!) {
        saveValue(library: $library, recordId: $recordId, attribute: $attribute, value: $value) {
            id_value

            attribute {
                id
            }

            ... on Value {
                value
                raw_value
            }

            ... on LinkValue {
                linkValue: value {
                    ...RecordIdentity
                }
            }

            ... on TreeValue {
                treeValue: value {
                    record {
                        ...RecordIdentity
                    }
                }
            }
        }
    }
`,Sd=W(k.Group)`
    &&& {
        position: absolute;
        top: 0;
        right: 0;
        float: right;
        border-radius: 0;
        bottom: 0;
        border-right: none;
        border-top: none;
        border-bottom: none;
    }
`,wd=W(Kt.Field)`
    position: relative;
`,Cd=W(ct)`
    & input:focus {
        padding-right: 120px;
    }
`;function Id({value:e,attribute:t,readonly:r,onChange:n,onSubmit:o,onDelete:i,onCancel:a}){const{t:l}=Me(),[s,c]=d.useState(!1);let u;d.useEffect((()=>()=>{u&&(c(!1),clearTimeout(u))}));const h=()=>{o(),c(!1)};return Ee(wd,{"data-test-id":"input-wrapper",style:{marginBottom:"15px"},id:t.id,children:[U(Cd,{fluid:!0,type:"text",name:`${t.id}_${(null==e?void 0:e.id_value)||"newVal"}`,value:(null==e?void 0:e.value)||"",disabled:r,onFocus:()=>c(!0),onChange:e=>{n(e.target.value),c(!0)},onKeyPress:e=>{"Enter"===e.key&&(h(),e.target.blur()),c(!1)},onBlur:e=>{u=setTimeout((()=>c(!1)),150)}},`${t.id}_${(null==e?void 0:e.id_value)||"newVal"}`),s&&Ee(Sd,{basic:!0,size:"small",children:[U(k,{onClick:()=>{a(),c(!1)},className:"record-input-btn","data-test-id":"cancel-btn",title:l("admin.cancel"),icon:"undo"}),U(k,{onClick:()=>{i(),c(!1)},className:"record-input-btn","data-test-id":"delete-btn",title:l("attributes.remove_value"),icon:"trash"}),U(k,{onClick:h,className:"record-input-btn","data-test-id":"submit-btn",title:l("admin.submit"),icon:"check"})]})]})}Cd.displayName="Input";var Td=(e=>(e.REINIT="REINIT",e.ADD="ADD",e.CHANGE="CHANGE",e.SUBMIT="SUBMIT",e.DELETE="DELETE",e.CANCEL="CANCEL",e))(Td||{});const xd={id_value:null,value:"",raw_value:"",modified_at:null,created_at:null,version:null},Rd=(e,t)=>{var r,n,o,i;const a=(null==(r=null==t?void 0:t.data)?void 0:r.valueIndex)||0;switch(t.type){case"REINIT":return{values:(null==(n=null==t?void 0:t.data)?void 0:n.values)||[],initialValues:(null==(o=null==t?void 0:t.data)?void 0:o.values)||[]};case"ADD":return{...e,values:[...e.values,{...xd}]};case"CHANGE":{const r={...e,values:[...e.values]},n={...r.values[a],value:(null==(i=null==t?void 0:t.data)?void 0:i.newValue)||""};return r.values[a]=n,r}case"SUBMIT":{const t={...e,initialValues:[...e.initialValues]};return t.initialValues[a]=e.values[a],t}case"DELETE":{const t={...e};return t.values=[...t.values.slice(0,a),...t.values.slice(a+1)],t.values.length||t.values.push({...xd}),t}case"CANCEL":{const t={...e,values:[...e.values]};return t.values[a]=e.initialValues[a],t}default:return e}},Od=e=>{const t=(Array.isArray(e)?e:[e]).filter((e=>null!==e));return t.length||t.push({id_value:null,value:"",raw_value:"",modified_at:null,created_at:null,version:null}),t},kd=W.label`
    font-weight: bold;
    margin-bottom: 0.5em;
`,Pd=W.div`
    position: relative;
`;function Dd({attribute:e,values:t,readonly:r,onSubmit:n,onDelete:o}){const{t:i}=Me(),a=Ge().lang,l=Ve(e.label,a),s=Od(t),[c,u]=d.useReducer(Rd,{values:s,initialValues:s}),{values:h}=c;d.useEffect((()=>{u({type:Td.REINIT,data:{values:Od(t)}})}),[t]);const f=e=>{const t=c.values[e];return{id_value:t.id_value,value:String(t.value)}},p=e=>()=>{u({type:Td.SUBMIT,data:{valueIndex:e}}),n(f(e))},g=t=>()=>{u({type:Td.DELETE,data:{valueIndex:t}}),(h[t].id_value||e.type===Ue.simple)&&o(f(t))},v=e=>()=>{u({type:Td.CANCEL,data:{valueIndex:e}})},m=!r&&(e.multiple_values||!h.length);return Ee(Pd,{"data-test-id":"input-wrapper",style:{marginBottom:"15px"},id:e.id,children:[U(kd,{children:l}),m&&Ee(k,{type:"button",size:"mini",compact:!0,basic:!0,icon:!0,labelPosition:"right",style:{margin:"5px"},onClick:()=>{u({type:Td.ADD})},"data-test-id":"add_value_btn",id:e.id,children:[U(w,{name:"plus",id:e.id}),i("records.add_value")]}),h.map(((t,n)=>{return U(Id,{attribute:e,value:t,readonly:r,onChange:(o=n,e=>{u({type:Td.CHANGE,data:{valueIndex:o,newValue:e}})}),onSubmit:p(n),onDelete:g(n),onCancel:v(n)},e.id+"_"+n);var o}))]},e.id)}const Ed=({attributes:e,onIdentityUpdate:t,errors:r={},inModal:n=!1,library:o,valueVersion:i,initialRecordId:a,setRecordIdentity:l})=>{const s=Ge().lang,c=void 0===a?"":a,u=Zs(o,e),h={id:c,version:Qe(i||null),lang:s},{loading:f,error:p,data:g,networkStatus:v}=ze(u,{variables:h,skip:!c}),[m]=it(bd,{refetchQueries:[{query:u,variables:h}]}),[y]=it(_d,{refetchQueries:[{query:u,variables:h}]}),b=d.useCallback((e=>e&&e.record.list[0].whoAmI?e.record.list[0].whoAmI:{id:"",library:{id:"",label:null},label:null,color:null,preview:null}),[]);if(d.useEffect((()=>{t&&g&&g.record&&g.record.list.length&&t(b(g))}),[t,b,g,o,c]),p)return Ee("p",{className:"error",children:["ERROR $",p.message]});if(f||c&&v!==Ls.ready)return U(Ae,{withDimmer:!0});if(c&&(!g||!g.record||!g.record.list.length))return U("p",{children:"Unknown record"});const _=c?Object.keys(g.record.list[0]).reduce(((e,t)=>("__typename"!==t&&(e[t]=g.record.list[0][t]),e)),{}):{};l&&l(_.whoAmI);const S=e=>t=>y({variables:{library:o.id,recordId:c,attribute:e.id,value:t}}),w=e=>t=>{m({variables:{library:o.id,recordId:c,attribute:e.id,valueId:t.id_value}})};return U(He,{children:e&&e.map((e=>(e=>{const t=_[e.id];if(We(e,!1)){const r=t=>{var r,n;if(Be(t)&&null===t.linkValue||$e(t)&&null===t.treeValue)return w(e)({id_value:t.id_value,value:null});const o={id_value:t.id_value,value:$e(t)?null==(r=t.treeValue)?void 0:r.id:null==(n=t.linkValue)?void 0:n.id};return S(e)(o)};return U(pd,{values:t,attribute:e,readonly:e.system,onChange:r},e.id)}return U(Dd,{values:t,attribute:e,readonly:e.readonly,onSubmit:S(e),onDelete:w(e)},e.id)})(e)))})};function Md({initialRecordId:e,library:t,setRecordIdentity:r,onIdentityUpdate:n}){const o=t&&t.attributes?t.attributes:[];return U(Ed,{attributes:o,errors:{},inModal:!0,library:t,onIdentityUpdate:n,initialRecordId:e,setRecordIdentity:r})}function zd({library:e,recordId:t,version:r,onIdentityUpdate:n,setSubmitFunc:o,onPostSave:i,inModal:a=!1}){const{data:l,loading:s,error:c}=ze(cs,{variables:{id:[e]}});if(s)return U(Ae,{withDimmer:!0});if(c)return U("p",{className:"error",children:"ERROR"});if(!l||!l.libraries||!l.libraries.list)return U("p",{children:"Unknown library"});const u=l.libraries.list[0],d=u.attributes||[];return U(He,{children:t?U(Md,{initialRecordId:t,library:u,onIdentityUpdate:n}):U(yd,{onPostSave:i,attributes:d,setSubmitFunc:o,library:u,inModal:a})})}const Ad=({open:e,recordId:t,library:r,version:n,onClose:o})=>{const{t:i}=Me(),[a,l]=d.useState(),[s,c]=d.useState(null),u=()=>o();return Ee(rt,{open:e,onClose:u,size:"large",centered:!0,closeOnDimmerClick:!0,closeOnEscape:!0,closeIcon:!0,dimmer:!0,children:[t&&a&&U(rt.Header,{style:{fontSize:"1.3em"},children:U(Le,{record:a})}),U(rt.Content,{scrolling:!0,style:{minHeight:"calc(30vh)"},children:U(zd,{recordId:t,library:r,version:n,onIdentityUpdate:l,setSubmitFunc:c,inModal:!0,onPostSave:o})}),!t&&Ee(rt.Actions,{children:[Ee(k,{className:"close-button",onClick:u,negative:!0,children:[U(w,{name:"cancel"})," ",i("admin.cancel")]}),Ee(k,{className:"submit-button",onClick:()=>{s&&s.current&&s.current()},positive:!0,children:[U(w,{name:"checkmark"})," ",i("admin.submit")]})]})]})},Nd=W.div`
    /** Overrides some SortableTree CSS rules **/
    .rst__rowContents {
        padding: 0;
        background: transparent;
        height: 100%;
        ${e=>e.compact?"\n        min-width: 130px;\n        border: none;\n        box-shadow: none;\n        ":""}
    }

    .rst__rowLabel {
        height: 100%;
    }

    .rst__rowTitle {
        height: 100%;
    }

    .rst__row.tree-node {
        cursor: pointer;
        height: 100%;
    }

    .rst__row.tree-node.selected {
        background: ${Ye};
    }
    .rst__rowWrapper {
        padding: 3px 0;
    }
    .rst__moveHandle,
    .rst__loadingHandle {
        width: 30px;
    }

    ${e=>e.compact?"\n    .rst__collapseButton,\n    .rst__expandButton {\n        background-size: 16px;\n        width: 12px;\n        height: 12px;\n    }\n    .rst__collapseButton:hover:not(:active),\n    .rst__expandButton:hover:not(:active) {\n        background-size: 20px;\n        width: 16px;\n        height: 16px;\n    }\n    ":""}
`,Ld=W(R)`
    background-color: ${e=>e.bgcolor};
`,jd={library:"",path:[],parent:null},Fd=({treeSettings:e,treeData:t,onTreeChange:r,onVisibilityToggle:n,onMoveNode:o,onDeleteNode:i,onClickNode:a,selection:l,readOnly:s,onAddElement:c,compact:u=!1})=>{const{t:h}=Me(),f=Ge().lang,[p,g]=d.useState(!1),[v,m]=d.useState(!1),[y,b]=d.useState(!1),[_,S]=d.useState(!1),[C,I]=d.useState(),[T,x]=d.useState(jd),R=()=>m(!1),O=()=>b(!1),P=()=>S(!1),D=e=>()=>{b(!1),g(!0),e&&x(e)},E=h("admin.or"),M={scaffoldBlockPxWidth:u?25:35,rowHeight:u?35:50,slideRegionSize:u?30:50};return Ee(Nd,{className:"grow height100",compact:u,children:[(null==t?void 0:t.length)?U(ts,{"data-test-id":"sortable-tree",canDrag:!s,canDrop:e=>null!==e.nextParent,treeData:t,onChange:r,onVisibilityToggle:n,getNodeKey:Xe,generateNodeProps:t=>{var r,n;const o=a&&(e=>{"rst__expandButton"!==e.target.className&&"rst__collapseButton"!==e.target.className&&a({...t})}),i=["tree-node"];l&&l.find((e=>Xe(e)===Xe(t)))&&i.push("selected");const c=t.node.isFakeRoot;return{canDrag:!s&&!c,buttons:[!s&&U(st,{pointing:!1,basic:!0,compact:!0,icon:"ellipsis vertical",children:Ee(st.Menu,{children:[!c&&Ee(He,{children:[U(st.Item,{text:h("records.edit"),icon:"edit outline",onClick:D({parent:(null==(r=t.parentNode)?void 0:r.id)??Pn,library:null==(n=t.node.record.library)?void 0:n.id,recordId:t.node.record.id,path:t.path})},"edit_record_btn_item"),U(st.Item,{text:h("trees.delete"),icon:"alternate trash outline",onClick:()=>(I(t),void m(!0))},"delete_record_btn_item"),U(st.Divider,{})]}),U(st.Header,{icon:"plus square outline",content:h("trees.add_element")}),e.libraries.map((e=>{return U(st.Item,{text:Ve(e.library.label,f),onClick:(r=t.node.id,n=t.path,o=e.library.id,()=>{b(!0),x({parent:r,library:o,path:n})}),label:U(Ld,{circular:!0,bgcolor:Je(e.library.id),content:e.library.id[0].toUpperCase()})},`add_record_btn_item_${e.library.id}`);var r,n,o}))]})})],className:i.join(" "),onClick:o}},onMoveNode:o,theme:M}):U(Ae,{withDimmer:!0}),U(Ad,{open:p,onClose:e=>{if(g(!1),e&&!T.recordId&&T.parent&&c)return c(e,T.parent,T.path)},recordId:T.recordId,library:T.library}),!s&&Ee(He,{children:[U(ot,{"data-test-id":"delete_confirm_modal",open:v,onCancel:R,onConfirm:()=>(R(),C&&i(C)),content:h("records.delete_confirm")}),Ee(rt,{open:y,onClose:O,closeIcon:!0,children:[Ee(rt.Header,{children:[U(w,{name:"plus square outline"}),h("trees.add_element")]}),U(rt.Content,{style:{textAlign:"center"},children:Ee(k.Group,{size:"large",children:[Ee(k,{type:"button",onClick:D(),children:[U(w,{name:"plus circle"}),h("records.create_record")]}),U(k.Or,{text:E}),Ee(k,{type:"button",onClick:()=>{O(),S(!0)},children:[U(w,{name:"search"}),h("records.select_record")]})]})})]}),U(ed,{open:_,library:T.library,onClose:P,onSelect:e=>{T.parent&&c&&(c(e,T.parent,T.path),P())}})]})]})},Gd=(e,t)=>e.map((e=>{const r=e.id===Pn||t?U(Hd,{children:e.record.whoAmI.label??e.record.whoAmI.id}):U(Le,{record:e.record.whoAmI,style:{height:"100%"}});return{...e,title:r,expanded:!1,children:e.childrenCount?()=>null:null,path:[]}})),Hd=W.div`
    height: 100%;
    padding-left: 0.5rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
`,Vd=({tree:e,readOnly:t,onClickNode:r,selection:n,withFakeRoot:o,fakeRootLabel:i,startAt:a,compact:l=!1})=>{const s=dt(),c=o?Gd([{id:Pn,record:{id:Pn,library:{id:Pn,label:null},whoAmI:{id:Pn,label:i||"",color:"transparent",library:{id:Pn,label:null},preview:null},isFakeRoot:!0},childrenCount:0,order:0}],l):[],[u,h]=d.useState(c),[f,p]=d.useState(!1),[g,v]=d.useState(),m=async(t,r,n=!0)=>{const o=!!r,i=await s.query({query:An,variables:{treeId:e.id,node:t||null}}),a=i.data.treeNodeChildren?Gd(i.data.treeNodeChildren.list,l).map((e=>({...e,path:r}))):[],c=Ol({treeData:u,path:r,getNodeKey:Xe});let d;o?null!==c&&(d=y({...c.node,loading:!1,loaded:!0,children:a,expanded:n},r)):d=a,p(!0),h(d),v("")},y=(e,t)=>xl({treeData:u,path:t,newNode:e,getNodeKey:Xe});if(!f){m(a||null,o?[Pn]:void 0)}return Ee(He,{children:[g&&U(Ze,{negative:!0,children:Ee(Ze.Header,{children:[U(w,{name:"ban"})," ",g]})}),U(Fd,{treeSettings:e,treeData:u,readOnly:t||!1,onTreeChange:h,onVisibilityToggle:({expanded:e,node:t,path:r})=>{if(!t.expanded&&!t.loaded)return m(t.id,r,e)},onMoveNode:async t=>{var r,n,o,i;const a=t.nextParentNode,l=null!==a&&a.id!==Pn?a.id:null;let c=t.treeIndex;if(null!==a){const e=Ol({treeData:u,path:t.nextPath.slice(0,-1),getNodeKey:Xe});c=e?t.treeIndex-e.treeIndex-1:t.treeIndex}try{await s.mutate({mutation:is,variables:{treeId:e.id,nodeId:t.node.id,parentTo:l,order:c}});const r=null!==a?a.children:u;(null==r?void 0:r.length)&&await Promise.all(r.map(((r,n)=>Xe({node:r})!==Xe(t)?s.mutate({mutation:is,variables:{treeId:e.id,nodeId:r.id,parentTo:l,order:n}}):Promise.resolve()))),v("")}catch(d){const e=(null==(i=null==(o=null==(n=null==(r=d.graphQLErrors)?void 0:r[0])?void 0:n.extensions)?void 0:o.fields)?void 0:i.element)??d.message;v(e)}},onDeleteNode:async t=>{const r={treeId:e.id,nodeId:t.node.id};await s.mutate({mutation:os,variables:r});const n=Rl({treeData:u,path:t.path,getNodeKey:Xe});h(n),v("")},onClickNode:e=>{const t=e.path.map((e=>{const t=zl({treeData:u,getNodeKey:Xe,searchQuery:e,searchMethod:t=>t.node.id===e});return t.matches.length?t.matches[0].node:null}));return r?r({...e,node:{...e.node,parents:t}}):void 0},selection:n,onAddElement:async(t,r,n)=>{var o,i,a,c;try{const o={id:(await s.mutate({mutation:ns,variables:{treeId:e.id,element:{id:t.id,library:t.library.id},parent:r!==Pn?r:null}})).data.treeAddElement.id,record:{id:t.id,library:t.library,whoAmI:t},childrenCount:0,order:0},i=Xe({node:{id:r,path:n}}),a=kl({treeData:u,newNode:Gd([o],l)[0],parentKey:i,getNodeKey:Xe,expandParent:!0});h(a.treeData),v("")}catch(d){const e=(null==(c=null==(a=null==(i=null==(o=d.graphQLErrors)?void 0:o[0])?void 0:i.extensions)?void 0:a.fields)?void 0:c.element)??d.message;v(e)}},compact:l})]})},Wd=({treeId:e,onClick:t,selectedNode:r})=>{const{t:n}=Me(),o=Ge().lang,{loading:i,error:a,data:l}=ze(zn,{variables:{id:[e]}});if(i)return U(Ae,{});if(a||!(null==l?void 0:l.trees))return U(et,{message:a.message});const s=l.trees.list[0],c=Ve(s.label,o);return Ee(He,{children:[U(at,{as:"h4",children:c}),U(Vd,{compact:!0,tree:s,onClickNode:t,selection:r?[r]:null,readOnly:!0,withFakeRoot:!0,fakeRootLabel:n("permissions.any_entity",{entityName:c,interpolation:{escapeValue:!1}})},s.id)]})},Ud=B`
    query GET_PERMISSIONS_ACTIONS($type: PermissionTypes!, $applyOn: String) {
        permissionsActionsByType(type: $type, applyOn: $applyOn) {
            name
            label
        }
    }
`,Bd=B`
    query GET_PERMISSIONS(
        $type: PermissionTypes!
        $applyTo: ID
        $actions: [PermissionsActions!]!
        $usersGroup: ID
        $permissionTreeTarget: PermissionsTreeTargetInput
    ) {
        perm: permissions(
            type: $type
            applyTo: $applyTo
            actions: $actions
            usersGroup: $usersGroup
            permissionTreeTarget: $permissionTreeTarget
        ) {
            name
            allowed
        }
        inheritPerm: inheritedPermissions(
            type: $type
            applyTo: $applyTo
            actions: $actions
            userGroupNodeId: $usersGroup
            permissionTreeTarget: $permissionTreeTarget
        ) {
            name
            allowed
        }
    }
`,$d=B`
    mutation SAVE_PERMISSION($permData: PermissionInput!) {
        savePermission(permission: $permData) {
            type
            applyTo
            usersGroup
            actions {
                name
                allowed
            }
            permissionTreeTarget {
                nodeId
                tree
            }
        }
    }
`,qd=W.img`
    transform: translate(0px, -1px) scale(1.5);
    width: ${e=>(null==e?void 0:e.size)??"1em"};
`;function Kd({svg:e,label:t,size:r,style:n}){return U("div",{style:{width:r,height:r,display:"inline-block",...n},children:U(qd,{src:e,alt:t,size:r})})}const Qd=()=>U(Kd,{svg:String( window.__dynamic_base__+"/assets/PermissionsAllowedIcon-83649109.svg"),label:"permissions allowed"}),Yd=()=>U(Kd,{svg:String( window.__dynamic_base__+"/assets/PermissionsForbiddenIcon-8298256f.svg"),label:"permissions allowed"}),Xd=()=>U(Kd,{svg:String( window.__dynamic_base__+"/assets/PermissionsInheritIcon-2dbb482d.svg"),label:"permissions allowed"});var Jd=function(e,t){if(t=t||100,6===(e=e.replace("#","")).length)var r=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);else{var i=e.substring(0,1)+e.substring(0,1),a=e.substring(1,2)+e.substring(1,2),l=e.substring(2,3)+e.substring(2,3);r=parseInt(i,16),n=parseInt(a,16),o=parseInt(l,16)}return"rgba("+r+", "+n+", "+o+", "+t/100+")"};function Zd({value:t,inheritValue:r,as:n,onChange:o,forbiddenColor:i,allowedColor:a,readOnly:l}){const[s,c]=e.useState(!1),u=e=>!1===e?0:null===e?1:2,d={0:!1,1:null,2:!0},h={0:i,1:"#FFFFFF",2:a},f=u(t),p=null!==t?h[f]:Jd(h[u(r)],40),g=n;g.displayName="Wrapper";return U(g,{style:{background:p},children:s?U(Ae,{size:"tiny",withLabel:!1}):U(ct,{"aria-label":"permission-selector",type:"range",min:"0",max:"2",step:"1",value:f,disabled:l,style:{border:"none"},onChange:async(e,t)=>{c(!0),await o(d[t.value]),c(!1)},transparent:!0,fluid:!0})})}Zd.defaultProps={readOnly:!1};const eh=W.div`
    display: flex;
    flex-direction: row;
    justify-content: space-between;
`,th=({permissions:e,actions:t,inheritedPermissions:r,onChange:n,readOnly:o=!1})=>{const{t:i}=Me(),{lang:a}=Ge(),l=e.reduce(((e,t)=>({...e,[t.name]:t.allowed})),{}),s=r.reduce(((e,t)=>({...e,[t.name]:t.allowed})),{});return Ee(He,{children:[U(at,{as:"h4",children:i("permissions.permission_col_name")}),Ee(nt,{celled:!0,children:[U(nt.Header,{children:Ee(nt.Row,{children:[U(nt.HeaderCell,{width:10}),U(nt.HeaderCell,{width:6,children:Ee(eh,{children:[U(Yd,{}),U(Xd,{}),U(Qd,{})]})})]})}),U(nt.Body,{children:t.map((e=>{if(void 0===typeof l[e.name])return null;return Ee(nt.Row,{children:[U(nt.Cell,{children:U("p",{children:Ve(e.label,a)})}),U(Zd,{as:nt.Cell,value:l[e.name]??null,inheritValue:s[e.name],onChange:t=>n({name:e.name,allowed:t}),forbiddenColor:"#FF0000",allowedColor:"#99cc00",readOnly:o})]},e.name)}))})]})]})},rh=({permParams:e,readOnly:t=!1})=>{const{loading:r,error:n,data:o}=ze(Ud,{variables:{type:e.type,applyOn:e.applyTo},fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),i=((null==o?void 0:o.permissionsActionsByType)??[]).filter((t=>{var r;return!e.actions||(null==(r=e.actions)?void 0:r.includes(t.name))})),a={...e,actions:i.map((e=>e.name))},{loading:l,error:s,data:c}=ze(Bd,{variables:a,fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,skip:!o}),[u]=it($d);if(r||l)return U(Ae,{});if(s||n||!(null==c?void 0:c.perm)||!(null==c?void 0:c.inheritPerm))return Ee("div",{className:"error","data-test-id":"error",children:["Error fetching permissions ",null==n?void 0:n.toString()," ",null==s?void 0:s.toString()]});return U(th,{onChange:async t=>{await u({variables:{permData:{...e,actions:[t]}},refetchQueries:[{query:Bd,variables:a}]})},actions:i,permissions:c.perm,inheritedPermissions:c.inheritPerm,readOnly:t})},nh=W((({isSelected:e,...t})=>U(Ne.Item,{...t})))`
    &&&&& {
        background-color: ${e=>e.isSelected?"#DEF4FF":"none"};
        text-align: left;
        margin: 0.5em 0;
        border: 1px solid #ddd;
        border-radius: 3px;

        :hover {
            background-color: ${e=>e.isSelected?"#DEF4FF":"none"};
        }
    }
`;function oh({actions:e,type:t,selectedGroup:r,onSelect:n}){const{t:o}=Me(),i=e=>()=>n(e);return Ee(He,{children:[U(at,{as:"h4",children:o(`permissions.type.${t}`)}),U(Ne,{selection:!0,relaxed:!0,children:Object.keys(e).map((e=>U(nh,{onClick:i(e),isSelected:e===r,children:U(Ne.Content,{children:o(`permissions.group.${e}`)})},e)))})]})}function ih({applyTo:e,readOnly:t,type:r,actions:n}){const[o,i]=d.useState({node:{id:Pn},path:[],treeIndex:0}),[a,l]=d.useState(n?Object.keys(n)[0]:null),s=e=>i(Xe(e)!==Xe(o)?e:null),c=n?3:2,u=[],h=e=>{l(e)};return n&&u.push(U(oh,{actions:n,type:r,selectedGroup:a,onSelect:h})),n&&!a||u.push([U(Wd,{treeId:"users_groups",onClick:s,selectedNode:o},"users_groups")]),o&&u.push(U(rh,{permParams:{type:r,actions:null==n?void 0:n[a],applyTo:e,usersGroup:"root"!==o.node.id?o.node.id:null},readOnly:t})),U(Mn,{columnsNumber:c,columnsContent:u})}export{Lt as B,Mn as C,ih as D,ed as E,Kt as F,Vu as R,Et as S,Vd as T,Ou as a,Pu as b,zn as c,Dr as d,Qt as e,Wu as f,cs as g,as as h,zt as i,On as j,rs as k,ss as l,Tl as m,kl as n,ls as o,Ad as p,cd as q,Rl as r,Du as s,Pn as t,Hr as u,Wd as v,rh as w,dt as x};
