import{j as e,bs as l,dm as a,o as i,n,L as t,cG as d,R as s,f as r,v as o,F as c,w as p,t as h,l as m,h as u,K as C,dn as b,E as f,I as g,P as w,B as v,cb as y}from"./index-da778430.js";import{T as H,u as k,G as A,H as I}from"./Header-90427ac0.js";import{I as x}from"./Input-94df8f06.js";import{D as j}from"./Dropdown-4600c907.js";import{C as E,D as R}from"./DeleteButton-48c58b6e.js";const _=({applications:r=[],loading:o=!1,withFilters:c=!0,filters:p={},onRowClick:h,actions:m,onFiltersUpdate:u})=>{const C=(e,l)=>{"checkbox"===l.type&&!1===p[l.name]&&l.checked&&(l.indeterminate=!0,l.checked=!1),u&&u(l)},{t:b}=e(),f=l().lang,g=m?Array.isArray(m)?m:[m]:[],w=Object.keys(a).map((e=>({key:e,value:e,text:b("applications.types."+e)})));return i(H,{selectable:!0,striped:!0,children:[i(H.Header,{children:[i(H.Row,{children:[n(H.HeaderCell,{width:4,children:b("admin.label")}),n(H.HeaderCell,{width:4,children:b("admin.id")}),n(H.HeaderCell,{width:1,children:b("applications.endpoint")}),n(H.HeaderCell,{width:1,children:b("applications.type")}),n(H.HeaderCell,{width:1})]}),c&&i(H.Row,{className:"filters",children:[n(H.HeaderCell,{children:n(x,{size:"small",fluid:!0,placeholder:b("admin.label")+"...",name:"label","aria-label":"label",value:p.label||"",onChange:C})}),n(H.HeaderCell,{children:n(x,{size:"small",fluid:!0,placeholder:b("admin.id")+"...",name:"id","aria-label":"id",value:p.id||"",onChange:C})}),n(H.HeaderCell,{children:n(x,{size:"small",fluid:!0,placeholder:b("applications.endpoint")+"...",name:"endpoint","aria-label":"endpoint",value:p.endpoint||"",onChange:C})}),n(H.HeaderCell,{children:n(j,{fluid:!0,multiple:!0,search:!0,selection:!0,options:w,placeholder:b("attributes.type")+"...",name:"type",value:p.type||[],onChange:C})}),n(H.HeaderCell,{})]})]}),n(H.Body,{children:o?n(H.Row,{children:n(H.Cell,{colSpan:6,children:n(t,{})})}):!!r&&r.map((e=>{const l=d(e.label,f);return i(H.Row,{onClick:()=>h(e),children:[n(H.Cell,{children:l}),n(H.Cell,{children:e.id}),n(H.Cell,{children:e.endpoint}),n(H.Cell,{children:b("applications.types."+e.type)}),n(H.Cell,{textAlign:"right",width:1,className:"actions",children:g.map((l=>s.cloneElement(l,{application:e})))})]},e.id)}))})]})},D=r`
    mutation DELETE_APPLICATION($appId: ID!) {
        deleteApplication(id: $appId) {
            id
        }
    }
`,z=({application:a})=>{const{t:i}=e(),{lang:t}=l(),[s]=k(D,{onError:()=>{},update:(e,{data:{deleteApplication:l}})=>{o(e,l)}}),r=d(null==a?void 0:a.label,t);return a?n(E,{action:async()=>s({variables:{appId:a.id}}),confirmMessage:i("applications.confirm_delete",{appLabel:r}),children:n(R,{disabled:!1})}):n(c,{})},F=()=>{var l;const{t:a}=e(),[t,d]=p.useState({}),s=h(),r=m(),{loading:o,error:H,data:k}=u(b,{variables:{filters:{...C(t,["label","id","endpoint"])}}});return H?n(f,{message:H.message}):i(c,{children:[i(A,{children:[n(A.Column,{textAlign:"left",floated:"left",width:8,verticalAlign:"middle",children:i(I,{size:"large",children:[n(g,{name:"th"}),a("applications.title")]})}),s.permissions[w.admin_create_application]&&n(A.Column,{floated:"right",width:6,textAlign:"right",verticalAlign:"middle",children:i(v,{primary:!0,icon:!0,labelPosition:"left",size:"medium",as:y,to:"/applications/edit/",children:[n(g,{name:"plus"}),a("applications.new")]})})]}),H?i("p",{children:["Error: ",H.message]}):n(_,{loading:o,applications:(null==(l=null==k?void 0:k.applications)?void 0:l.list)??[],onRowClick:e=>r.push("/applications/edit/"+e.id),onFiltersUpdate:e=>{const l="checkbox"===e.type?e.indeterminate?void 0:e.checked:e.value;d({...t,[e.name]:l})},filters:t,actions:s.permissions[w.admin_delete_application]?n(z,{},"delete_app"):n(c,{})})]})};export{F as default};
