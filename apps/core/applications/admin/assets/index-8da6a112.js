import{j as e,bs as l,o as i,n as a,L as r,cG as s,R as n,f as d,t as o,v as t,P as c,s as m,w as f,l as h,h as p,K as u,E as g,F as v,dq as b,B as C,cb as w,I as _}from"./index-da778430.js";import{g as H}from"./getVersionProfilesQuery-6debab2c.js";import{T as R,u as E,G as y,H as A}from"./Header-90427ac0.js";import{I as P}from"./Input-94df8f06.js";import{C as j,D as x}from"./DeleteButton-48c58b6e.js";function F({profiles:d,onRowClick:o,onFiltersUpdate:t,loading:c,withFilters:m,filters:f,actions:h}){const p=(e,l)=>{t(l)},{t:u}=e(),g=l().lang,v=h?Array.isArray(h)?h:[h]:[];return i(R,{selectable:!0,striped:!0,children:[i(R.Header,{children:[i(R.Row,{children:[a(R.HeaderCell,{width:4,children:u("admin.label")}),a(R.HeaderCell,{width:4,children:u("admin.id")}),a(R.HeaderCell,{width:1})]}),m&&i(R.Row,{className:"filters",children:[a(R.HeaderCell,{children:a(P,{size:"small",fluid:!0,placeholder:u("admin.label")+"...",name:"label","aria-label":"label",value:f.label||"",onChange:p})}),a(R.HeaderCell,{children:a(P,{size:"small",fluid:!0,placeholder:u("admin.id")+"...",name:"id","aria-label":"id",value:f.id||"",onChange:p})}),a(R.HeaderCell,{})]})]}),a(R.Body,{children:c?a(R.Row,{children:a(R.Cell,{colSpan:6,children:a(r,{})})}):(d??[]).map((e=>{const l=s(e.label,g);return i(R.Row,{onClick:()=>o(e),children:[a(R.Cell,{children:l}),a(R.Cell,{children:e.id}),a(R.Cell,{textAlign:"right",width:1,className:"actions",children:v.map((l=>n.cloneElement(l,{profile:e})))})]},e.id)}))})]})}const z=d`
    mutation DELETE_VERSION_PROFILE($id: String!) {
        deleteVersionProfile(id: $id) {
            id
        }
    }
`,I=({profile:i})=>{const{t:r}=e(),n=o(),{lang:d}=l(),[m]=E(z,{update:(e,{data:{deleteVersionProfile:l}})=>{t(e,l)}}),f=s(i.label,d);return n.permissions[c.admin_delete_version_profile]?a(j,{action:async()=>m({variables:{id:i.id}}),confirmMessage:r("version_profiles.confirm_delete",{profileLabel:f}),children:a(x,{disabled:!1})}):null},k=m(A)`
    display: flex;
    gap: 0.5rem;
`;function L(){var l;const{t:r}=e(),[s,n]=f.useState({}),d=o(),t=h(),{loading:m,error:R,data:E}=p(H,{variables:{filters:{...u(s,["label","id"])}}});return R?a(g,{message:R.message}):i(v,{children:[i(y,{children:[a(y.Column,{textAlign:"left",floated:"left",width:8,verticalAlign:"middle",children:i(k,{size:"large",children:[a(b,{size:30}),r("version_profiles.title")]})}),d.permissions[c.admin_create_version_profile]&&a(y.Column,{floated:"right",width:6,textAlign:"right",verticalAlign:"middle",children:i(C,{primary:!0,icon:!0,labelPosition:"left",size:"medium",as:w,to:"/version_profiles/edit/",children:[a(_,{name:"plus"}),r("version_profiles.new")]})})]}),R?i("p",{children:["Error: ",R.message]}):a(F,{loading:m,onRowClick:e=>t.push("/version_profiles/edit/"+e.id),profiles:(null==(l=null==E?void 0:E.versionProfiles)?void 0:l.list)??[],actions:a(I,{},"delete"),filters:s,onFiltersUpdate:e=>{n({...s,[e.name]:e.value})},withFilters:!0})]})}export{L as default};
