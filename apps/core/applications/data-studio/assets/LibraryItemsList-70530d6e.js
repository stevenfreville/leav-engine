import{R as e,r as t,c as n,j as r,u as i,g as o}from"./useTranslation-6a88ac92.js";import{bx as l,by as a,bz as s,bA as u,bB as c,bC as d,bD as f,bE as p,bF as v,bG as m,aB as g,aF as h,aI as b,aG as y,ab as x,bH as w,bI as E,bJ as S,bK as _,aJ as j,aT as k,bL as C,b0 as R,b1 as T,ar as I,ao as O,bl as A,as as V,b2 as P,aW as L,bM as $,bc as D,a$ as N,at as F,aK as z,aP as B,aE as M,bN as H,bd as U,aH as G,aL as W,bm as q,aD as Y,bw as X,aM as Q,bO as K,bP as Z,bQ as J,bR as ee,bS as te,bT as ne,bU as re,bV as ie,a_ as oe,b5 as le,aQ as ae,bW as se,bX as ue,b3 as ce,bY as de,bZ as fe,aN as pe,b_ as ve,b$ as me,c0 as ge,c1 as he,c2 as be,c3 as ye,c4 as xe,c5 as we,c6 as Ee,av as Se,aO as _e,c7 as je,c8 as ke,c9 as Ce,aq as Re,ca as Te,cb as Ie,cc as Oe,cd as Ae,ce as Ve,cf as Pe,cg as Le,ch as $e,ci as De,cj as Ne,ck as Fe,cl as ze,cm as Be,cn as Me,co as He,cp as Ue,aU as Ge,cq as We,cr as qe,aX as Ye,b8 as Xe,cs as Qe,be as Ke,ct as Ze,aV as Je,cu as et,aS as tt}from"./recordIdentityFragment-3ccdcea1.js";import{A as nt,aR as rt,H as it,L as ot,q as lt,t as at,v as st,M as ut,$ as ct,aS as dt,aT as ft,aU as pt,a2 as vt,a1 as mt,aV as gt,aK as ht,aW as bt,aX as yt,aY as xt,aZ as wt,l as Et,a_ as St,z as _t,a$ as jt,b0 as kt,b1 as Ct,b2 as Rt,a0 as Tt}from"./utils-c614281c.js";import{C as It,e as Ot,f as At,r as Vt,g as Pt,h as Lt,j as $t,k as Dt,o as Nt,m as Ft,p as zt,n as Bt,q as Mt,t as Ht,v as Ut,l as Gt,w as Wt,x as qt,A as Yt,_ as Xt,y as Qt,z as Kt,B as Zt,D as Jt,E as en,F as tn,G as nn,H as rn,J as on,K as ln,M as an,N as sn,O as un,P as cn,Q as dn,R as fn,c as pn,S as vn,U as mn,V as gn,X as hn,Y as bn,Z as yn,$ as xn,a0 as wn,a1 as En,a2 as Sn,a3 as _n,u as jn,a4 as kn,a5 as Cn,I as Rn,a6 as Tn,a as In,a7 as On,a8 as An,a9 as Vn,aa as Pn,ab as Ln,ac as $n,ad as Dn,ae as Nn,af as Fn,ag as zn,d as Bn,b as Mn,ah as Hn,ai as Un,aj as Gn,ak as Wn,al as qn,am as Yn,an as Xn,ao as Qn,ap as Kn,aq as Zn,ar as Jn,as as er,at as tr,au as nr,av as rr,aw as ir,ax as or,ay as lr,az as ar,aA as sr,aB as ur,aC as cr,aD as dr,aE as fr,aF as pr,aG as vr,aH as mr,aI as gr,aJ as hr,aK as br,aL as yr,aM as xr,aN as wr,aO as Er,aP as Sr}from"./index-135e49ab.js";import{b5 as _r,c as jr,g as kr,m as Cr,r as Rr,t as Tr,C as Ir,v as Or,j as Ar,O as Vr,P as Pr,V as Lr,M as $r,K as Dr,bG as Nr,bH as Fr,$ as zr,bI as Br,B as Mr,bJ as Hr,L as Ur,by as Gr,y as Wr,bK as qr}from"./ImportReducerContext-19d27c8c.js";import{s as Yr}from"./styled-components.browser.esm-2d72260f.js";import{I as Xr}from"./InboxOutlined-82488bac.js";import{R as Qr}from"./index-8160faf7.js";const Kr=Object.freeze(Object.defineProperty({__proto__:null,Panel:a,default:l},Symbol.toStringTag,{value:"Module"})),Zr={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},Jr=e.createContext({});var ei=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function ti(e,n,r){const i=t.useMemo((()=>n||_r(r).map((e=>Object.assign({},null==e?void 0:e.props)))),[n,r]);return t.useMemo((()=>i.map((t=>{var{span:n}=t,r=ei(t,["span"]);return Object.assign(Object.assign({},r),{span:"number"==typeof n?n:s(e,n)})}))),[i,e])}function ni(e,t,n){let r=e,i=!1;return(void 0===n||n>t)&&(r=Object.assign(Object.assign({},e),{span:t}),i=void 0!==n),[r,i]}const ri=(e,n)=>{const[r,i]=t.useMemo((()=>function(e,t){const n=[];let r=[],i=t,o=!1;return e.filter((e=>e)).forEach(((l,a)=>{const s=null==l?void 0:l.span,u=s||1;if(a===e.length-1){const[e,t]=ni(l,i,s);return o=o||t,r.push(e),void n.push(r)}if(u<i)i-=u,r.push(l);else{const[e,a]=ni(l,i,u);o=o||a,r.push(e),n.push(r),i=t,r=[]}})),[n,o]}(n,e)),[n,e]);return r},ii=e=>{let{children:t}=e;return t};function oi(e){return null!=e}const li=e=>{const{itemPrefixCls:n,component:r,span:i,className:o,style:l,labelStyle:a,contentStyle:s,bordered:u,label:c,content:d,colon:f}=e,p=r;return u?t.createElement(p,{className:jr({[`${n}-item-label`]:oi(c),[`${n}-item-content`]:oi(d)},o),style:l,colSpan:i},oi(c)&&t.createElement("span",{style:a},c),oi(d)&&t.createElement("span",{style:s},d)):t.createElement(p,{className:jr(`${n}-item`,o),style:l,colSpan:i},t.createElement("div",{className:`${n}-item-container`},(c||0===c)&&t.createElement("span",{className:jr(`${n}-item-label`,{[`${n}-item-no-colon`]:!f}),style:a},c),(d||0===d)&&t.createElement("span",{className:jr(`${n}-item-content`),style:s},d)))};function ai(e,n,r){let{colon:i,prefixCls:o,bordered:l}=n,{component:a,type:s,showLabel:u,showContent:c,labelStyle:d,contentStyle:f}=r;return e.map(((e,n)=>{let{label:r,children:p,prefixCls:v=o,className:m,style:g,labelStyle:h,contentStyle:b,span:y=1,key:x}=e;return"string"==typeof a?t.createElement(li,{key:`${s}-${x||n}`,className:m,style:g,labelStyle:Object.assign(Object.assign({},d),h),contentStyle:Object.assign(Object.assign({},f),b),span:y,colon:i,component:a,itemPrefixCls:v,bordered:l,label:u?r:null,content:c?p:null}):[t.createElement(li,{key:`label-${x||n}`,className:m,style:Object.assign(Object.assign(Object.assign({},d),g),h),span:1,colon:i,component:a[0],itemPrefixCls:v,bordered:l,label:r}),t.createElement(li,{key:`content-${x||n}`,className:m,style:Object.assign(Object.assign(Object.assign({},f),g),b),span:2*y-1,component:a[1],itemPrefixCls:v,bordered:l,content:p})]}))}const si=e=>{const n=t.useContext(Jr),{prefixCls:r,vertical:i,row:o,index:l,bordered:a}=e;return i?t.createElement(t.Fragment,null,t.createElement("tr",{key:`label-${l}`,className:`${r}-row`},ai(o,e,Object.assign({component:"th",type:"label",showLabel:!0},n))),t.createElement("tr",{key:`content-${l}`,className:`${r}-row`},ai(o,e,Object.assign({component:"td",type:"content",showContent:!0},n)))):t.createElement("tr",{key:l,className:`${r}-row`},ai(o,e,Object.assign({component:a?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},n)))},ui=e=>{const{componentCls:t,labelBg:n}=e;return{[`&${t}-bordered`]:{[`> ${t}-view`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto",borderCollapse:"collapse"},[`${t}-row`]:{borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBottom:"none"},[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${e.padding}px ${e.paddingLG}px`,borderInlineEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`> ${t}-item-label`]:{color:e.colorTextSecondary,backgroundColor:n,"&::after":{display:"none"}}}},[`&${t}-middle`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${e.paddingSM}px ${e.paddingLG}px`}}},[`&${t}-small`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${e.paddingXS}px ${e.padding}px`}}}}}},ci=e=>{const{componentCls:t,extraColor:n,itemPaddingBottom:r,colonMarginRight:i,colonMarginLeft:o,titleMarginBottom:l}=e;return{[t]:Object.assign(Object.assign(Object.assign({},Rr(e)),ui(e)),{"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",alignItems:"center",marginBottom:l},[`${t}-title`]:Object.assign(Object.assign({},Tr),{flex:"auto",color:e.colorText,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${t}-extra`]:{marginInlineStart:"auto",color:n,fontSize:e.fontSize},[`${t}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed"}},[`${t}-row`]:{"> th, > td":{paddingBottom:r},"&:last-child":{borderBottom:"none"}},[`${t}-item-label`]:{color:e.colorTextTertiary,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${o}px ${i}px`},[`&${t}-item-no-colon::after`]:{content:'""'}},[`${t}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${t}-item-content`]:{display:"table-cell",flex:1,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${t}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${t}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${t}-item-content`]:{display:"inline-flex",alignItems:"baseline"}}},"&-middle":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},di=kr("Descriptions",(e=>{const t=Cr(e,{});return[ci(t)]}),(e=>({labelBg:e.colorFillAlter,titleMarginBottom:e.fontSizeSM*e.lineHeightSM,itemPaddingBottom:e.padding,colonMarginRight:e.marginXS,colonMarginLeft:e.marginXXS/2,extraColor:e.colorText})));var fi=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const pi=e=>{const{prefixCls:n,title:r,extra:i,column:o,colon:l=!0,bordered:a,layout:c,children:d,className:f,rootClassName:p,style:v,size:m,labelStyle:g,contentStyle:h,items:b}=e,y=fi(e,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle","items"]),{getPrefixCls:x,direction:w,descriptions:E}=t.useContext(Ir),S=x("descriptions",n),_=u(),j=t.useMemo((()=>{var e;return"number"==typeof o?o:null!==(e=s(_,Object.assign(Object.assign({},Zr),o)))&&void 0!==e?e:3}),[_,o]),k=ti(_,b,d),C=Or(m),R=ri(j,k),[T,I]=di(S),O=t.useMemo((()=>({labelStyle:g,contentStyle:h})),[g,h]);return T(t.createElement(Jr.Provider,{value:O},t.createElement("div",Object.assign({className:jr(S,null==E?void 0:E.className,{[`${S}-${C}`]:C&&"default"!==C,[`${S}-bordered`]:!!a,[`${S}-rtl`]:"rtl"===w},f,p,I),style:Object.assign(Object.assign({},null==E?void 0:E.style),v)},y),(r||i)&&t.createElement("div",{className:`${S}-header`},r&&t.createElement("div",{className:`${S}-title`},r),i&&t.createElement("div",{className:`${S}-extra`},i)),t.createElement("div",{className:`${S}-view`},t.createElement("table",null,t.createElement("tbody",null,R.map(((e,n)=>t.createElement(si,{key:n,index:n,colon:l,prefixCls:S,vertical:"vertical"===c,bordered:a,row:e})))))))))};pi.Item=ii;const vi=pi;const mi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},gi=Object.freeze(Object.defineProperty({__proto__:null,default:c},Symbol.toStringTag,{value:"Module"}));const hi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zM464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z"}}]},name:"appstore",theme:"filled"};var bi=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:hi}))};const yi=t.forwardRef(bi);const xi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855 160.1l-189.2 23.5c-6.6.8-9.3 8.8-4.7 13.5l54.7 54.7-153.5 153.5a8.03 8.03 0 000 11.3l45.1 45.1c3.1 3.1 8.2 3.1 11.3 0l153.6-153.6 54.7 54.7a7.94 7.94 0 0013.5-4.7L863.9 169a7.9 7.9 0 00-8.9-8.9zM416.6 562.3a8.03 8.03 0 00-11.3 0L251.8 715.9l-54.7-54.7a7.94 7.94 0 00-13.5 4.7L160.1 855c-.6 5.2 3.7 9.5 8.9 8.9l189.2-23.5c6.6-.8 9.3-8.8 4.7-13.5l-54.7-54.7 153.6-153.6c3.1-3.1 3.1-8.2 0-11.3l-45.2-45z"}}]},name:"arrows-alt",theme:"outlined"};var wi=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:xi}))};const Ei=t.forwardRef(wi);const Si={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"};var _i=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:Si}))};const ji=t.forwardRef(_i);const ki={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M632 888H392c-4.4 0-8 3.6-8 8v32c0 17.7 14.3 32 32 32h192c17.7 0 32-14.3 32-32v-32c0-4.4-3.6-8-8-8zM512 64c-181.1 0-328 146.9-328 328 0 121.4 66 227.4 164 284.1V792c0 17.7 14.3 32 32 32h264c17.7 0 32-14.3 32-32V676.1c98-56.7 164-162.7 164-284.1 0-181.1-146.9-328-328-328zm127.9 549.8L604 634.6V752H420V634.6l-35.9-20.8C305.4 568.3 256 484.5 256 392c0-141.4 114.6-256 256-256s256 114.6 256 256c0 92.5-49.4 176.3-128.1 221.8z"}}]},name:"bulb",theme:"outlined"};var Ci=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:ki}))};const Ri=t.forwardRef(Ci);var Ti=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:It}))};const Ii=t.forwardRef(Ti);var Oi=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:d}))};const Ai=t.forwardRef(Oi);var Vi=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:f}))};const Pi=t.forwardRef(Vi);const Li={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:t}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:e}}]}},name:"check-circle",theme:"twotone"};var $i=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:Li}))};const Di=t.forwardRef($i);var Ni=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:Ot}))};const Fi=t.forwardRef(Ni);var zi=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:p}))};const Bi=t.forwardRef(zi);var Mi=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:v}))};const Hi=t.forwardRef(Mi);const Ui={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm578 576h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z"}}]},name:"expand",theme:"outlined"};var Gi=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:Ui}))};const Wi=t.forwardRef(Gi);const qi={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"};var Yi=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:qi}))};const Xi=t.forwardRef(Yi);const Qi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"};var Ki=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:Qi}))};const Zi=t.forwardRef(Ki);var Ji=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:mi}))};const eo=t.forwardRef(Ji);const to={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};var no=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:to}))};const ro=t.forwardRef(no);const io={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"};var oo=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:io}))};const lo=t.forwardRef(oo);const ao={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zM288 421a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm376 272h-48.1c-4.2 0-7.8-3.2-8.1-7.4C604 636.1 562.5 597 512 597s-92.1 39.1-95.8 88.6c-.3 4.2-3.9 7.4-8.1 7.4H360a8 8 0 01-8-8.4c4.4-84.3 74.5-151.6 160-151.6s155.6 67.3 160 151.6a8 8 0 01-8 8.4zm24-224a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"frown",theme:"filled"};var so=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:ao}))};const uo=t.forwardRef(so);const co={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M912 820.1V203.9c28-9.9 48-36.6 48-67.9 0-39.8-32.2-72-72-72-31.3 0-58 20-67.9 48H203.9C194 84 167.3 64 136 64c-39.8 0-72 32.2-72 72 0 31.3 20 58 48 67.9v616.2C84 830 64 856.7 64 888c0 39.8 32.2 72 72 72 31.3 0 58-20 67.9-48h616.2c9.9 28 36.6 48 67.9 48 39.8 0 72-32.2 72-72 0-31.3-20-58-48-67.9zM888 112c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 912c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-752c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm704 680H184V184h656v656zm48 72c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}},{tag:"path",attrs:{d:"M288 474h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64zm-56 420h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64z"}}]},name:"group",theme:"outlined"};var fo=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:co}))};const po=t.forwardRef(fo);const vo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M448 224a64 64 0 10128 0 64 64 0 10-128 0zm96 168h-64c-4.4 0-8 3.6-8 8v464c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V400c0-4.4-3.6-8-8-8z"}}]},name:"info",theme:"outlined"};var mo=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:vo}))};const go=t.forwardRef(mo);const ho={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"};var bo=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:ho}))};const yo=t.forwardRef(bo);const xo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 394c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H400V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v236H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h228v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h164c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V394h164zM628 630H400V394h228v236z"}}]},name:"number",theme:"outlined"};var wo=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:xo}))};const Eo=t.forwardRef(wo);const So={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};var _o=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:So}))};const jo=t.forwardRef(_o);const ko={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z"}}]},name:"save",theme:"filled"};var Co=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:ko}))};const Ro=t.forwardRef(Co);var To=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:m}))};const Io=t.forwardRef(To);const Oo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.6 433.8L749 150.5a9.24 9.24 0 00-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9 0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4 2.4-.8 4.3-2.4 5.5-4.6 1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 00-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 00-9.2-9.3zM416 702h-76V172c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v530h-76c-6.7 0-10.5 7.8-6.3 13l112 141.9a8 8 0 0012.6 0l112-141.9c4.1-5.2.4-13-6.3-13z"}}]},name:"sort-ascending",theme:"outlined"};var Ao=function(e,n){return t.createElement(nt,Ar({},e,{ref:n,icon:Oo}))};const Vo=t.forwardRef(Ao),Po=e=>e.attributes.reduce(((t,n)=>{if((null===n.format||n.format&&Object.values(Vr).includes(n.format))&&n.type&&Object.values(Pr).includes(n.type)){const r=[{id:n.id,type:n.type,format:n.format,label:n.label,isLink:At(n.type),isMultiple:n.multiple_values,linkedLibrary:n.linked_library,linkedTree:n.linked_tree,library:e.id,embedded_fields:n.embedded_fields}];if((n.type===Pr.simple_link||n.type===Pr.advanced_link)&&n.linked_library){const e=n.linked_library.id,t=n.linked_library.attributes.map((t=>({id:t.id,type:t.type,format:t.format,label:t.label,isLink:At(t.type),isMultiple:t.multiple_values,linkedLibrary:n.linked_library,linkedTree:n.linked_tree,library:e})));r.push(...t)}if(n.type===Pr.tree&&n.linked_tree){const e=n.linked_tree.libraries.map((e=>{const t=e.library.id;return e.library.attributes.map((e=>({id:e.id,type:e.type,format:e.format,label:e.label,isLink:At(e.type),isMultiple:e.multiple_values,library:t})))})).flat();r.push(...e)}return[...t,...r]}return t}),[]),Lo=g`
    ${Vt}
    fragment ViewDetails on View {
        id
        display {
            size
            type
        }
        shared
        created_by {
            id
            whoAmI {
                id
                label
                library {
                    id
                    gqlNames {
                        query
                        type
                    }
                }
            }
        }
        label
        description
        color
        filters {
            field
            value
            tree {
                id
                label
            }
            condition
            operator
        }
        sort {
            field
            order
        }
        valuesVersions {
            treeId
            treeNode {
                id
                record {
                    ...RecordIdentity
                }
            }
        }
        settings {
            name
            value
        }
    }
`,$o=h`
    ${Vt}
    ${Lo}
    query GET_VIEW($viewId: String!) {
        view(viewId: $viewId) {
            ...ViewDetails
        }
    }
`,Do=e=>{const[n]=Pt(),[r,i]=t.useState(!0),[o,l]=t.useState(null),[a,s]=t.useState(Lt),u=e.permissions.access_library,c=$t(e.id),d=()=>{const t=Po(e);return{id:e.defaultView.id,owner:!0,library:e.id,label:e.defaultView.label,description:e.defaultView.description,display:Nt(a.display,["__typename"]),color:e.defaultView.color,shared:e.defaultView.shared,filters:Ft(e.defaultView.filters??[],e.id,t),sort:e.defaultView.sort&&Nt(e.defaultView.sort,["__typename"]),settings:e.defaultView.settings}},[f]=b($o,{onCompleted:t=>{t||(l(new Error("Unknown view")),i(!1));const r=zt(t.view,Po(e),e.id,null==n?void 0:n.userId);s(r),i(!1)},onError:t=>{if(e.defaultView){const e=d();s(e)}l(t),i(!1)}});return y(Dt,{fetchPolicy:"no-cache",variables:{keys:[c]},skip:!u,onCompleted:t=>{var n,r,o;if(!(null==(r=null==(n=t.userData)?void 0:n.data)?void 0:r[c])){if(e.defaultView){const e=d();s(e)}return void i(!1)}const l=null==(o=t.userData)?void 0:o.data[c];l!==Lt.id?f({variables:{viewId:l}}):i(!1)},onError:e=>{l(e),i(!1)}}),{loading:r,error:o,view:a}},No=t.createContext(!1),Fo=e=>{switch(e.type){case Pr.simple:case Pr.advanced:return e.id;case Pr.simple_link:case Pr.advanced_link:return`${e.id} {\n                ...RecordIdentity\n            }`;case Pr.tree:return`${e.id} {\n                record {\n                    ...RecordIdentity\n                }\n            }`}},zo=(e,t,n)=>{const r=null==e?void 0:e.toUpperCase();return(null==r?void 0:r.length)?Bt`
        ${Vt}
        query ${"GET_RECORDS_FROM_"+r} (
            $limit: Int!
            $offset: Int
            $filters: [RecordFilterInput]
            $sort: RecordSortInput
            $fullText: String
            $version: [ValueVersionInput]
        ) {
            ${e} (
                pagination: {limit: $limit, offset: $offset}
                filters: $filters
                sort: $sort
                searchQuery: $fullText,
                version: $version
            ) {
                ${n?"totalCount":""}
                list {
                    _id: id
                    ${((e=[])=>e.length?e.map((e=>{if(e.parentAttributeData){const t=e.parentAttributeData.id;switch(e.parentAttributeData.type){case Pr.simple:case Pr.advanced:return Fo(e);case Pr.simple_link:case Pr.advanced_link:return`${t} {\n                        ${Fo(e)}\n                    }`;case Pr.tree:const n=rt(e.recordLibrary);return n?`${t} {\n                        record {\n                            ...on ${n} {\n                                ${Fo(e)}\n                            }\n                        }\n                    }`:""}}else if(e.embeddedData)return[...e.embeddedData.path.split(".")].shift();return Fo(e)})):"id")(t)}
                    ...RecordIdentity
                }
            }
        }
    `:Bt`
            query nothing {
                libraries {
                    list {
                        id
                    }
                }
            }
        `},Bo=g`
    fragment ValuesVersionDetails on ValueVersion {
        treeId
        treeNode {
            id
            record {
                id
                whoAmI {
                    id
                    label
                    library {
                        id
                    }
                }
            }
        }
    }
`,Mo=g`
    ${Vt}
    ${Bo}
    fragment ValueDetails on GenericValue {
        id_value
        modified_at
        modified_by {
            ...RecordIdentity
        }
        created_at
        created_by {
            ...RecordIdentity
        }
        version {
            ...ValuesVersionDetails
        }
        attribute {
            id
            format
            type
            system
        }
        metadata {
            name
            value {
                id_value
                modified_at
                modified_by {
                    ...RecordIdentity
                }
                created_at
                created_by {
                    ...RecordIdentity
                }
                version {
                    ...ValuesVersionDetails
                }
                value
                raw_value
            }
        }

        ... on Value {
            value
            raw_value
        }

        ... on LinkValue {
            linkValue: value {
                ...RecordIdentity
            }
        }

        ... on TreeValue {
            treeValue: value {
                id
                record {
                    ...RecordIdentity
                }

                ancestors {
                    record {
                        ...RecordIdentity
                    }
                }
            }
        }
    }
`,Ho=g`
    ${Vt}
    ${Mo}
    subscription SUB_RECORD_UPDATE($filters: RecordUpdateFilterInput) {
        recordUpdate(filters: $filters) {
            record {
                ...RecordIdentity
                modified_by {
                    ...RecordIdentity
                }
            }
            updatedValues {
                attribute
                value {
                    ...ValueDetails
                }
            }
        }
    }
`;function Uo(){const{cache:e}=x();return(t,n)=>{const r={...t,__typename:t.library.gqlNames.type};for(const i of n){const t=Mt(i.attribute.id),n=e=>{const t=i.value??i.linkValue??i.treeValue??null;if(!Array.isArray(e))return t;{const n=[...e],r=e.findIndex((e=>e.id_value===i.id_value));-1!==r?n[r]=t:n.push(t)}};e.modify({id:e.identify(r),broadcast:!0,fields:{[t]:n,[i.attribute.id]:n}})}}}const Go=(e,t)=>{const n=Uo();return Ht(Ho,{skip:t,variables:{filters:e},onData:({data:e})=>{const{record:t,updatedValues:r}=e.data.recordUpdate;n(t.whoAmI,r.map((e=>e.value)))}})},Wo=(e,t,n,r)=>{let i;const o=e.split("."),l=Ut(e,t.id,n);let a=null;if(3===o.length){const e=o[0],r=n.find((n=>e===n.id&&t.id===n.library));r&&(i={id:r.id,type:r.type},a=o[1])}if(!l)return null;const s="string"==typeof l.label?l.label:Gt(l.label,r);return{key:e,id:l.id,library:l.library,label:s,format:l.format,type:l.type,multipleValues:l.isMultiple,parentAttributeData:i,recordLibrary:a}},qo=(e,t,n)=>{var r;const i=Po(t);return(null==(r=e.settings)?void 0:r.find((e=>e.name===Wt)))?e.settings.find((e=>e.name===Wt)).value.reduce(((e,r)=>{const o=Wo(r,t,i,n);return o?[...e,o]:e}),[]):[]};var Yo=(e=>(e.UPDATE_RESULT="UPDATE_RESULT",e.SET_ERROR="SET_ERROR",e.SET_PAGINATION="SET_PAGINATION",e.SET_OFFSET="SET_OFFSET",e.SET_LOADING="SET_LOADING",e.SET_SORT="SET_SORT",e.CANCEL_SORT="CANCEL_SORT",e.SET_ATTRIBUTES="SET_ATTRIBUTES",e.SET_FIELDS="SET_FIELDS",e.SET_FULLTEXT="SET_FULLTEXT",e.SET_FILTERS="SET_FILTERS",e.SET_VIEW_RELOAD="SET_VIEW_RELOAD",e.SET_VIEW_SYNC="SET_VIEW_SYNC",e.CHANGE_VIEW="CHANGE_VIEW",e.SET_USER_VIEWS_ORDER="SET_USER_VIEWS_ORDER",e.SET_SHARED_VIEWS_ORDER="SET_SHARED_VIEWS_ORDER",e.SET_DISPLAY="SET_DISPLAY",e.RESET_FILTERS="RESET_FILTERS",e.DISABLE_FILTERS="DISABLE_FILTERS",e.ENABLE_FILTERS="ENABLE_FILTERS",e.APPLY_FILTERS="APPLY_FILTERS",e.SET_VALUES_VERSIONS="SET_VALUES_VERSIONS",e.TOGGLE_TRANSPARENCY="TOGGLE_TRANSPARENCY",e))(Yo||{});const Xo={library:null,records:[],totalCount:0,loading:!1,pagination:20,offset:0,attributes:[],fields:[],fullText:"",filters:[],display:{type:Lr.list,size:$r.MEDIUM},view:{current:Lt,reload:!1,sync:!0},userViewsOrder:[],sharedViewsOrder:[],valuesVersions:{},lang:null},Qo=(e,t)=>{var n,r,i,o;let l=((e,t)=>{var n,r,i,o,l,a,s,u,c,d,f,p,v,m,g,h;let b=!0;if(t.sort&&(b=(null==(n=e.sort)?void 0:n.field)===(null==(o=null==(i=null==(r=e.view)?void 0:r.current)?void 0:i.sort)?void 0:o.field)&&(null==(l=e.sort)?void 0:l.order)===(null==(u=null==(s=null==(a=e.view)?void 0:a.current)?void 0:s.sort)?void 0:u.order)),t.filters&&(b=b&&JSON.stringify(null==(c=e.view.current)?void 0:c.filters)===JSON.stringify(e.filters)),t.display&&(b=b&&e.display.type===(null==(f=null==(d=e.view.current)?void 0:d.display)?void 0:f.type)&&e.display.size===(null==(v=null==(p=e.view.current)?void 0:p.display)?void 0:v.size)),t.fields){const t=(null==(g=null==(m=e.view.current)?void 0:m.settings)?void 0:g.find((e=>e.name===Wt)))?null==(h=e.view.current)?void 0:h.settings.find((e=>e.name===Wt)).value:[];b=b&&e.fields.map((e=>e.id)).join(".")===t.join(".")}return b})(e,{sort:"SET_SORT"!==t.type,filters:"SET_FILTERS"!==t.type,display:"SET_DISPLAY"!==t.type,fields:"SET_FIELDS"!==t.type,valuesVersions:"SET_VALUES_VERSIONS"!==t.type});switch(t.type){case"UPDATE_RESULT":return{...e,records:t.records??[],totalCount:t.totalCount??0,error:t.error,loading:!1};case"SET_PAGINATION":return{...e,pagination:t.page,loading:!0};case"SET_OFFSET":return{...e,offset:t.offset,loading:!0};case"SET_LOADING":return{...e,loading:t.loading};case"SET_SORT":return l=l&&(null==(n=e.view.current.sort)?void 0:n.field)===t.sort.field&&(null==(r=e.view.current.sort)?void 0:r.order)===t.sort.order,{...e,sort:t.sort,view:{...e.view,sync:l}};case"CANCEL_SORT":const{sort:a,...s}=e;return l=l&&void 0===e.view.current.sort,{...s,view:{...e.view,sync:l},loading:!0};case"SET_ATTRIBUTES":return{...e,attributes:t.attributes};case"SET_FIELDS":const u=(null==(i=e.view.current.settings)?void 0:i.find((e=>e.name===Wt)))?null==(o=e.view.current)?void 0:o.settings.find((e=>e.name===Wt)).value:[];return l=l&&t.fields.map((e=>e.id)).join(".")===u.join("."),{...e,fields:t.fields,view:{...e.view,sync:l},loading:!0};case"SET_FULLTEXT":return{...e,fullText:t.fullText};case"SET_FILTERS":return l=l&&JSON.stringify(e.view.current.filters)===JSON.stringify(t.filters),{...e,filters:t.filters,view:{...e.view,sync:l}};case"CHANGE_VIEW":return{...e,view:{current:t.view,reload:!0,sync:!0},fields:qo(t.view,e.library,e.lang),filters:t.view.filters,sort:t.view.sort,display:t.view.display,valuesVersions:t.view.valuesVersions};case"SET_VIEW_RELOAD":return{...e,view:{...e.view,reload:t.reload}};case"SET_VIEW_SYNC":return{...e,view:{...e.view,sync:t.sync}};case"SET_DISPLAY":return l=l&&t.display.type===e.view.current.display.type&&t.display.size===e.view.current.display.size,{...e,display:t.display,view:{...e.view,sync:l}};case"SET_USER_VIEWS_ORDER":return{...e,userViewsOrder:t.userViewsOrder};case"SET_SHARED_VIEWS_ORDER":return{...e,sharedViewsOrder:t.sharedViewsOrder};case"RESET_FILTERS":return{...e,filters:[],loading:!0};case"DISABLE_FILTERS":return{...e,filters:e.filters.map((e=>({...e,active:!1}))),loading:!0};case"ENABLE_FILTERS":return{...e,filters:e.filters.map((e=>({...e,active:!0}))),loading:!0};case"APPLY_FILTERS":return{...e,offset:0,loading:!0};case"SET_VALUES_VERSIONS":return l=l&&JSON.stringify(e.view.current.valuesVersions)===JSON.stringify(t.valuesVersions),{...e,view:{...e.view,sync:l},valuesVersions:{...e.valuesVersions,...t.valuesVersions}}}},Ko=e.createContext({state:Xo,dispatch:null}),Zo=e=>{const t=e.filter((e=>e.active)).reduce(((e,t)=>{var n,r,i,o;let l=[];const a=t.condition===qt.THROUGH?Yt.EQUAL:t.condition;if(null===t.value)l=[{field:a in Yt?t.key:null,condition:Dr[a],treeId:null==(n=t.tree)?void 0:n.id}];else if("string"==typeof t.value.value&&t.value.value.match(/\n/g)){const e=t.value.value.split("\n").filter(Boolean);l.push({operator:Nr.OPEN_BRACKET});for(const n of e)l.push({field:a in Yt?t.key:null,value:n,condition:Dr[a]}),l.push({operator:Nr.OR});l.pop(),l.push({operator:Nr.CLOSE_BRACKET})}else l=[{field:(null==t?void 0:t.condition)in Yt?t.key:null,value:(null==t?void 0:t.condition)===Yt.BETWEEN?JSON.stringify((null==(r=null==t?void 0:t.value)?void 0:r.value)??""):((null==(i=null==t?void 0:t.value)?void 0:i.value)??"").toString(),condition:Dr[null==t?void 0:t.condition],treeId:null==(o=t.tree)?void 0:o.id}];return e.concat(...l,{operator:Nr.AND})}),[]);return t.pop(),t},Jo=()=>t.useContext(Ko);var el={},tl=w.default,nl=E.default;Object.defineProperty(el,"__esModule",{value:!0});var rl=el.default=void 0,il=nl(t),ol=tl(S);var ll=il.forwardRef(((e,t)=>il.createElement(ol.default,Object.assign({ref:t},e,{component:"div"}))));rl=el.default=ll;var al=Xt;var sl=function(e,t,n){var r=null==e?void 0:al(e,t);return void 0===r?n:r};var ul=Qt,cl=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},dl=function(e){return this.__data__.has(e)};function fl(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ul;++t<n;)this.add(e[t])}fl.prototype.add=fl.prototype.push=cl,fl.prototype.has=dl;var pl=fl;var vl=function(e,t){return e.has(t)},ml=pl,gl=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},hl=vl;var bl=function(e,t,n,r,i,o){var l=1&n,a=e.length,s=t.length;if(a!=s&&!(l&&s>a))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var d=-1,f=!0,p=2&n?new ml:void 0;for(o.set(e,t),o.set(t,e);++d<a;){var v=e[d],m=t[d];if(r)var g=l?r(m,v,d,t,e,o):r(v,m,d,e,t,o);if(void 0!==g){if(g)continue;f=!1;break}if(p){if(!gl(t,(function(e,t){if(!hl(p,t)&&(v===e||i(v,e,n,r,o)))return p.push(t)}))){f=!1;break}}else if(v!==m&&!i(v,m,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f};var yl=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},xl=Kt,wl=Zt,El=bl,Sl=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},_l=yl,jl=it?it.prototype:void 0,kl=jl?jl.valueOf:void 0;var Cl=function(e,t,n,r,i,o,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new xl(e),new xl(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return wl(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=Sl;case"[object Set]":var s=1&r;if(a||(a=_l),e.size!=t.size&&!s)return!1;var u=l.get(e);if(u)return u==t;r|=2,l.set(e,t);var c=El(a(e),a(t),r,i,o,l);return l.delete(e),c;case"[object Symbol]":if(kl)return kl.call(e)==kl.call(t)}return!1},Rl=Jt,Tl=Object.prototype.hasOwnProperty;var Il=en,Ol=bl,Al=Cl,Vl=function(e,t,n,r,i,o){var l=1&n,a=Rl(e),s=a.length;if(s!=Rl(t).length&&!l)return!1;for(var u=s;u--;){var c=a[u];if(!(l?c in t:Tl.call(t,c)))return!1}var d=o.get(e),f=o.get(t);if(d&&f)return d==t&&f==e;var p=!0;o.set(e,t),o.set(t,e);for(var v=l;++u<s;){var m=e[c=a[u]],g=t[c];if(r)var h=l?r(g,m,c,t,e,o):r(m,g,c,e,t,o);if(!(void 0===h?m===g||i(m,g,n,r,o):h)){p=!1;break}v||(v="constructor"==c)}if(p&&!v){var b=e.constructor,y=t.constructor;b==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(p=!1)}return o.delete(e),o.delete(t),p},Pl=ot,Ll=st,$l=lt,Dl=at,Nl="[object Arguments]",Fl="[object Array]",zl="[object Object]",Bl=Object.prototype.hasOwnProperty;var Ml=function(e,t,n,r,i,o){var l=Ll(e),a=Ll(t),s=l?Fl:Pl(e),u=a?Fl:Pl(t),c=(s=s==Nl?zl:s)==zl,d=(u=u==Nl?zl:u)==zl,f=s==u;if(f&&$l(e)){if(!$l(t))return!1;l=!0,c=!1}if(f&&!c)return o||(o=new Il),l||Dl(e)?Ol(e,t,n,r,i,o):Al(e,t,s,n,r,i,o);if(!(1&n)){var p=c&&Bl.call(e,"__wrapped__"),v=d&&Bl.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,g=v?t.value():t;return o||(o=new Il),i(m,g,n,r,o)}}return!!f&&(o||(o=new Il),Vl(e,t,n,r,i,o))},Hl=ut;var Ul=function e(t,n,r,i,o){return t===n||(null==t||null==n||!Hl(t)&&!Hl(n)?t!=t&&n!=n:Ml(t,n,r,i,e,o))},Gl=Ul;var Wl=function(e,t){return Gl(e,t)},ql={},Yl={get exports(){return ql},set exports(e){ql=e}},Xl={};!function(e,t){function n(e,t,n,r,i,o,l){try{var a=e[o](l),s=a.value}catch(u){return void n(u)}a.done?t(s):Promise.resolve(s).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var l=e.apply(t,r);function a(e){n(l,i,o,a,s,"next",e)}function s(e){n(l,i,o,a,s,"throw",e)}a(void 0)}))}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function l(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var a={init:"init"},s=function(e){var t=e.value;return void 0===t?"":t},u=function(){return t.createElement(t.Fragment,null," ")},c={Cell:s,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){var n=t.style,r=t.className;return e=i({},e,{},o(t,["style","className"])),n&&(e.style=e.style?i({},e.style||{},{},n||{}):n),r&&(e.className=e.className?e.className+" "+r:r),""===e.className&&delete e.className,e}),{})}var f=function(e,t){return void 0===t&&(t={}),function(n){return void 0===n&&(n={}),[].concat(e,[n]).reduce((function(e,r){return function e(t,n,r){return"function"==typeof n?e({},n(t,r)):Array.isArray(n)?d.apply(void 0,[t].concat(n)):d(t,n)}(e,r,i({},t,{userProps:n}))}),{})}},p=function(e,t,n,r){return void 0===n&&(n={}),e.reduce((function(e,t){return t(e,n)}),t)},v=function(e,t,n){return void 0===n&&(n={}),e.forEach((function(e){e(t,n)}))};function m(e,t,n,r){e.findIndex((function(e){return e.pluginName===n})),t.forEach((function(t){e.findIndex((function(e){return e.pluginName===t}))}))}function g(e,t){return"function"==typeof e?e(t):e}function h(e){var n=t.useRef();return n.current=e,t.useCallback((function(){return n.current}),[])}var b="undefined"!=typeof document?t.useLayoutEffect:t.useEffect;function y(e,n){var r=t.useRef(!1);b((function(){r.current&&e(),r.current=!0}),n)}function x(e,t,n){return void 0===n&&(n={}),function(r,o){void 0===o&&(o={});var l="string"==typeof r?t[r]:r;if(void 0===l)throw console.info(t),new Error("Renderer Error ☝️");return w(l,i({},e,{column:t},n,{},o))}}function w(e,n){return"function"==typeof(r=o=e)&&(i=Object.getPrototypeOf(r)).prototype&&i.prototype.isReactComponent||"function"==typeof o||function(e){return"object"==typeof e&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}(o)?t.createElement(e,n):e;var r,i,o}function E(e,t,n){return void 0===n&&(n=0),e.map((function(e){return _(e=i({},e,{parent:t,depth:n})),e.columns&&(e.columns=E(e.columns,e,n+1)),e}))}function S(e){return I(e,"columns")}function _(e){var t=e.id,n=e.accessor,r=e.Header;if("string"==typeof n){t=t||n;var i=n.split(".");n=function(e){return function(e,t,n){if(!t)return e;var r,i,o="function"==typeof t?t:JSON.stringify(t),l=C.get(o)||(i=function e(t,n){if(void 0===n&&(n=[]),Array.isArray(t))for(var r=0;r<t.length;r+=1)e(t[r],n);else n.push(t);return n}(t).map((function(e){return String(e).replace(".","_")})).join(".").replace($,".").replace(D,"").split("."),C.set(o,i),i);try{r=l.reduce((function(e,t){return e[t]}),e)}catch(i){}return void 0!==r?r:n}(e,i)}}if(!t&&"string"==typeof r&&r&&(t=r),!t&&e.columns)throw console.error(e),new Error('A column ID (or unique "Header" value) is required!');if(!t)throw console.error(e),new Error("A column ID (or string accessor) is required!");return Object.assign(e,{id:t,accessor:n}),e}function j(e,t){if(!t)throw new Error;return Object.assign(e,i({Header:u,Footer:u},c,{},t,{},e)),Object.assign(e,{originalWidth:e.width}),e}function k(e,t,n){void 0===n&&(n=function(){return{}});for(var r=[],o=e,l=0,a=function(){return l++},s=function(){var e={headers:[]},l=[],s=o.some((function(e){return e.parent}));o.forEach((function(r){var o,u=[].concat(l).reverse()[0];s&&(o=r.parent?i({},r.parent,{originalId:r.parent.id,id:r.parent.id+"_"+a(),headers:[r]},n(r)):j(i({originalId:r.id+"_placeholder",id:r.id+"_placeholder_"+a(),placeholderOf:r,headers:[r]},n(r)),t),u&&u.originalId===o.originalId?u.headers.push(r):l.push(o)),e.headers.push(r)})),r.push(e),o=l};o.length;)s();return r.reverse()}var C=new Map;function R(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r+=1)if(void 0!==t[r])return t[r]}function T(e){if("function"==typeof e)return e}function I(e,t){var n=[];return function e(r){r.forEach((function(r){r[t]?e(r[t]):n.push(r)}))}(e),n}function O(e,t){var n=t.manualExpandedKey,r=t.expanded,i=t.expandSubRows,o=void 0===i||i,l=[];return e.forEach((function(e){return function e(t,i){void 0===i&&(i=!0),t.isExpanded=t.original&&t.original[n]||r[t.id],t.canExpand=t.subRows&&!!t.subRows.length,i&&l.push(t),t.subRows&&t.subRows.length&&t.isExpanded&&t.subRows.forEach((function(t){return e(t,o)}))}(e)})),l}function A(e,t,n){return T(e)||t[e]||n[e]||n.text}function V(e,t,n){return e?e(t,n):void 0===t}function P(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var L=null,$=/\[/g,D=/\]/g,N=function(e){return i({role:"table"},e)},F=function(e){return i({role:"rowgroup"},e)},z=function(e,t){var n=t.column;return i({key:"header_"+n.id,colSpan:n.totalVisibleHeaderCount,role:"columnheader"},e)},B=function(e,t){var n=t.column;return i({key:"footer_"+n.id,colSpan:n.totalVisibleHeaderCount},e)},M=function(e,t){return i({key:"headerGroup_"+t.index,role:"row"},e)},H=function(e,t){return i({key:"footerGroup_"+t.index},e)},U=function(e,t){return i({key:"row_"+t.row.id,role:"row"},e)},G=function(e,t){var n=t.cell;return i({key:"cell_"+n.row.id+"_"+n.column.id,role:"cell"},e)};function W(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[N],getTableBodyProps:[F],getHeaderGroupProps:[M],getFooterGroupProps:[H],getHeaderProps:[z],getFooterProps:[B],getRowProps:[U],getCellProps:[G],useFinalInstance:[]}}a.resetHiddenColumns="resetHiddenColumns",a.toggleHideColumn="toggleHideColumn",a.setHiddenColumns="setHiddenColumns",a.toggleHideAllColumns="toggleHideAllColumns";var q=function(e){e.getToggleHiddenProps=[Y],e.getToggleHideAllColumnsProps=[X],e.stateReducers.push(Q),e.useInstanceBeforeDimensions.push(K),e.headerGroupsDeps.push((function(e,t){var n=t.instance;return[].concat(e,[n.state.hiddenColumns])})),e.useInstance.push(Z)};q.pluginName="useColumnVisibility";var Y=function(e,t){var n=t.column;return[e,{onChange:function(e){n.toggleHidden(!e.target.checked)},style:{cursor:"pointer"},checked:n.isVisible,title:"Toggle Column Visible"}]},X=function(e,t){var n=t.instance;return[e,{onChange:function(e){n.toggleHideAllColumns(!e.target.checked)},style:{cursor:"pointer"},checked:!n.allColumnsHidden&&!n.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!n.allColumnsHidden&&n.state.hiddenColumns.length}]};function Q(e,t,n,r){if(t.type===a.init)return i({hiddenColumns:[]},e);if(t.type===a.resetHiddenColumns)return i({},e,{hiddenColumns:r.initialState.hiddenColumns||[]});if(t.type===a.toggleHideColumn){var o=(void 0!==t.value?t.value:!e.hiddenColumns.includes(t.columnId))?[].concat(e.hiddenColumns,[t.columnId]):e.hiddenColumns.filter((function(e){return e!==t.columnId}));return i({},e,{hiddenColumns:o})}return t.type===a.setHiddenColumns?i({},e,{hiddenColumns:g(t.value,e.hiddenColumns)}):t.type===a.toggleHideAllColumns?i({},e,{hiddenColumns:(void 0!==t.value?t.value:!e.hiddenColumns.length)?r.allColumns.map((function(e){return e.id})):[]}):void 0}function K(e){var n=e.headers,r=e.state.hiddenColumns;t.useRef(!1).current;var i=0;n.forEach((function(e){return i+=function e(t,n){t.isVisible=n&&!r.includes(t.id);var i=0;return t.headers&&t.headers.length?t.headers.forEach((function(n){return i+=e(n,t.isVisible)})):i=t.isVisible?1:0,t.totalVisibleHeaderCount=i,i}(e,!0)}))}function Z(e){var n=e.columns,r=e.flatHeaders,i=e.dispatch,o=e.allColumns,l=e.getHooks,s=e.state.hiddenColumns,u=e.autoResetHiddenColumns,c=void 0===u||u,d=h(e),p=o.length===s.length,v=t.useCallback((function(e,t){return i({type:a.toggleHideColumn,columnId:e,value:t})}),[i]),m=t.useCallback((function(e){return i({type:a.setHiddenColumns,value:e})}),[i]),g=t.useCallback((function(e){return i({type:a.toggleHideAllColumns,value:e})}),[i]),b=f(l().getToggleHideAllColumnsProps,{instance:d()});r.forEach((function(e){e.toggleHidden=function(t){i({type:a.toggleHideColumn,columnId:e.id,value:t})},e.getToggleHiddenProps=f(l().getToggleHiddenProps,{instance:d(),column:e})}));var x=h(c);y((function(){x()&&i({type:a.resetHiddenColumns})}),[i,n]),Object.assign(e,{allColumnsHidden:p,toggleHideColumn:v,setHiddenColumns:m,toggleHideAllColumns:g,getToggleHideAllColumnsProps:b})}var J={},ee={},te=function(e,t,n){return e},ne=function(e,t){return e.subRows||[]},re=function(e,t,n){return""+(n?[n.id,t].join("."):t)},ie=function(e){return e};function oe(e){var t=e.initialState,n=void 0===t?J:t,r=e.defaultColumn,l=void 0===r?ee:r,a=e.getSubRows,s=void 0===a?ne:a,u=e.getRowId,c=void 0===u?re:u,d=e.stateReducer,f=void 0===d?te:d,p=e.useControlledState,v=void 0===p?ie:p;return i({},o(e,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:n,defaultColumn:l,getSubRows:s,getRowId:c,stateReducer:f,useControlledState:v})}function le(e,t){void 0===t&&(t=0);var n=0,r=0,i=0,o=0;return e.forEach((function(e){var l=e.headers;if(e.totalLeft=t,l&&l.length){var a=le(l,t),s=a[0],u=a[1],c=a[2],d=a[3];e.totalMinWidth=s,e.totalWidth=u,e.totalMaxWidth=c,e.totalFlexWidth=d}else e.totalMinWidth=e.minWidth,e.totalWidth=Math.min(Math.max(e.minWidth,e.width),e.maxWidth),e.totalMaxWidth=e.maxWidth,e.totalFlexWidth=e.canResize?e.totalWidth:0;e.isVisible&&(t+=e.totalWidth,n+=e.totalMinWidth,r+=e.totalWidth,i+=e.totalMaxWidth,o+=e.totalFlexWidth)})),[n,r,i,o]}function ae(e){var t=e.data,n=e.rows,r=e.flatRows,i=e.rowsById,o=e.column,l=e.getRowId,a=e.getSubRows,s=e.accessValueHooks,u=e.getInstance;t.forEach((function(e,c){return function e(n,c,d,f,v){void 0===d&&(d=0);var m=n,g=l(n,c,f),h=i[g];if(h)h.subRows&&h.originalSubRows.forEach((function(t,n){return e(t,n,d+1,h)}));else if((h={id:g,original:m,index:c,depth:d,cells:[{}]}).cells.map=P,h.cells.filter=P,h.cells.forEach=P,h.cells[0].getCellProps=P,h.values={},v.push(h),r.push(h),i[g]=h,h.originalSubRows=a(n,c),h.originalSubRows){var b=[];h.originalSubRows.forEach((function(t,n){return e(t,n,d+1,h,b)})),h.subRows=b}o.accessor&&(h.values[o.id]=o.accessor(n,c,h,v,t)),h.values[o.id]=p(s,h.values[o.id],{row:h,column:o,instance:u()})}(e,c,0,void 0,n)}))}a.resetExpanded="resetExpanded",a.toggleRowExpanded="toggleRowExpanded",a.toggleAllRowsExpanded="toggleAllRowsExpanded";var se=function(e){e.getToggleAllRowsExpandedProps=[ue],e.getToggleRowExpandedProps=[ce],e.stateReducers.push(de),e.useInstance.push(fe),e.prepareRow.push(pe)};se.pluginName="useExpanded";var ue=function(e,t){var n=t.instance;return[e,{onClick:function(e){n.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},ce=function(e,t){var n=t.row;return[e,{onClick:function(){n.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function de(e,t,n,r){if(t.type===a.init)return i({expanded:{}},e);if(t.type===a.resetExpanded)return i({},e,{expanded:r.initialState.expanded||{}});if(t.type===a.toggleAllRowsExpanded){var s=t.value,u=r.rowsById,c=Object.keys(u).length===Object.keys(e.expanded).length;if(void 0!==s?s:!c){var d={};return Object.keys(u).forEach((function(e){d[e]=!0})),i({},e,{expanded:d})}return i({},e,{expanded:{}})}if(t.type===a.toggleRowExpanded){var f,p=t.id,v=t.value,m=e.expanded[p],g=void 0!==v?v:!m;if(!m&&g)return i({},e,{expanded:i({},e.expanded,(f={},f[p]=!0,f))});if(m&&!g){var h=e.expanded;return h[p],i({},e,{expanded:o(h,[p].map(l))})}return e}}function fe(e){var n=e.data,r=e.rows,i=e.rowsById,o=e.manualExpandedKey,l=void 0===o?"expanded":o,s=e.paginateExpandedRows,u=void 0===s||s,c=e.expandSubRows,d=void 0===c||c,p=e.autoResetExpanded,v=void 0===p||p,g=e.getHooks,b=e.plugins,x=e.state.expanded,w=e.dispatch;m(b,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var E=h(v),S=Boolean(Object.keys(i).length&&Object.keys(x).length);S&&Object.keys(i).some((function(e){return!x[e]}))&&(S=!1),y((function(){E()&&w({type:a.resetExpanded})}),[w,n]);var _=t.useCallback((function(e,t){w({type:a.toggleRowExpanded,id:e,value:t})}),[w]),j=t.useCallback((function(e){return w({type:a.toggleAllRowsExpanded,value:e})}),[w]),k=t.useMemo((function(){return u?O(r,{manualExpandedKey:l,expanded:x,expandSubRows:d}):r}),[u,r,l,x,d]),C=t.useMemo((function(){return e=x,t=0,Object.keys(e).forEach((function(e){var n=e.split(".");t=Math.max(t,n.length)})),t;var e,t}),[x]),R=h(e),T=f(g().getToggleAllRowsExpandedProps,{instance:R()});Object.assign(e,{preExpandedRows:r,expandedRows:k,rows:k,expandedDepth:C,isAllRowsExpanded:S,toggleRowExpanded:_,toggleAllRowsExpanded:j,getToggleAllRowsExpandedProps:T})}function pe(e,t){var n=t.instance.getHooks,r=t.instance;e.toggleRowExpanded=function(t){return r.toggleRowExpanded(e.id,t)},e.getToggleRowExpandedProps=f(n().getToggleRowExpandedProps,{instance:r,row:e})}var ve=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return String(r).toLowerCase().includes(String(n).toLowerCase())}))}))};ve.autoRemove=function(e){return!e};var me=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return void 0===r||String(r).toLowerCase()===String(n).toLowerCase()}))}))};me.autoRemove=function(e){return!e};var ge=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return void 0===r||String(r)===String(n)}))}))};ge.autoRemove=function(e){return!e};var he=function(e,t,n){return e.filter((function(e){return t.some((function(t){return e.values[t].includes(n)}))}))};he.autoRemove=function(e){return!e||!e.length};var be=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return r&&r.length&&n.every((function(e){return r.includes(e)}))}))}))};be.autoRemove=function(e){return!e||!e.length};var ye=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return r&&r.length&&n.some((function(e){return r.includes(e)}))}))}))};ye.autoRemove=function(e){return!e||!e.length};var xe=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return n.includes(r)}))}))};xe.autoRemove=function(e){return!e||!e.length};var we=function(e,t,n){return e.filter((function(e){return t.some((function(t){return e.values[t]===n}))}))};we.autoRemove=function(e){return void 0===e};var Ee=function(e,t,n){return e.filter((function(e){return t.some((function(t){return e.values[t]==n}))}))};Ee.autoRemove=function(e){return null==e};var Se=function(e,t,n){var r=n||[],i=r[0],o=r[1];if((i="number"==typeof i?i:-1/0)>(o="number"==typeof o?o:1/0)){var l=i;i=o,o=l}return e.filter((function(e){return t.some((function(t){var n=e.values[t];return n>=i&&n<=o}))}))};Se.autoRemove=function(e){return!e||"number"!=typeof e[0]&&"number"!=typeof e[1]};var _e=Object.freeze({__proto__:null,text:ve,exactText:me,exactTextCase:ge,includes:he,includesAll:be,includesSome:ye,includesValue:xe,exact:we,equals:Ee,between:Se});a.resetFilters="resetFilters",a.setFilter="setFilter",a.setAllFilters="setAllFilters";var je=function(e){e.stateReducers.push(ke),e.useInstance.push(Ce)};function ke(e,t,n,r){if(t.type===a.init)return i({filters:[]},e);if(t.type===a.resetFilters)return i({},e,{filters:r.initialState.filters||[]});if(t.type===a.setFilter){var o=t.columnId,l=t.filterValue,s=r.allColumns,u=r.filterTypes,c=s.find((function(e){return e.id===o}));if(!c)throw new Error("React-Table: Could not find a column with id: "+o);var d=A(c.filter,u||{},_e),f=e.filters.find((function(e){return e.id===o})),p=g(l,f&&f.value);return V(d.autoRemove,p,c)?i({},e,{filters:e.filters.filter((function(e){return e.id!==o}))}):i({},e,f?{filters:e.filters.map((function(e){return e.id===o?{id:o,value:p}:e}))}:{filters:[].concat(e.filters,[{id:o,value:p}])})}if(t.type===a.setAllFilters){var v=t.filters,m=r.allColumns,h=r.filterTypes;return i({},e,{filters:g(v,e.filters).filter((function(e){var t=m.find((function(t){return t.id===e.id}));return!V(A(t.filter,h||{},_e).autoRemove,e.value,t)}))})}}function Ce(e){var n=e.data,r=e.rows,i=e.flatRows,o=e.rowsById,l=e.allColumns,s=e.filterTypes,u=e.manualFilters,c=e.defaultCanFilter,d=void 0!==c&&c,f=e.disableFilters,p=e.state.filters,v=e.dispatch,m=e.autoResetFilters,g=void 0===m||m,b=t.useCallback((function(e,t){v({type:a.setFilter,columnId:e,filterValue:t})}),[v]),x=t.useCallback((function(e){v({type:a.setAllFilters,filters:e})}),[v]);l.forEach((function(e){var t=e.id,n=e.accessor,r=e.defaultCanFilter,i=e.disableFilters;e.canFilter=n?R(!0!==i&&void 0,!0!==f&&void 0,!0):R(r,d,!1),e.setFilter=function(t){return b(e.id,t)};var o=p.find((function(e){return e.id===t}));e.filterValue=o&&o.value}));var w=t.useMemo((function(){if(u||!p.length)return[r,i,o];var e=[],t={};return[function n(r,i){void 0===i&&(i=0);var o=r;return(o=p.reduce((function(e,t){var n=t.id,r=t.value,o=l.find((function(e){return e.id===n}));if(!o)return e;0===i&&(o.preFilteredRows=e);var a=A(o.filter,s||{},_e);return a?(o.filteredRows=a(e,[n],r),o.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+o.id+"."),e)}),r)).forEach((function(r){e.push(r),t[r.id]=r,r.subRows&&(r.subRows=r.subRows&&r.subRows.length>0?n(r.subRows,i+1):r.subRows)})),o}(r),e,t]}),[u,p,r,i,o,l,s]),E=w[0],S=w[1],_=w[2];t.useMemo((function(){l.filter((function(e){return!p.find((function(t){return t.id===e.id}))})).forEach((function(e){e.preFilteredRows=E,e.filteredRows=E}))}),[E,p,l]);var j=h(g);y((function(){j()&&v({type:a.resetFilters})}),[v,u?null:n]),Object.assign(e,{preFilteredRows:r,preFilteredFlatRows:i,preFilteredRowsById:o,filteredRows:E,filteredFlatRows:S,filteredRowsById:_,rows:E,flatRows:S,rowsById:_,setFilter:b,setAllFilters:x})}je.pluginName="useFilters",a.resetGlobalFilter="resetGlobalFilter",a.setGlobalFilter="setGlobalFilter";var Re=function(e){e.stateReducers.push(Te),e.useInstance.push(Ie)};function Te(e,t,n,r){if(t.type===a.resetGlobalFilter)return i({},e,{globalFilter:r.initialState.globalFilter||void 0});if(t.type===a.setGlobalFilter){var l=t.filterValue,s=r.userFilterTypes,u=A(r.globalFilter,s||{},_e),c=g(l,e.globalFilter);return V(u.autoRemove,c)?(e.globalFilter,o(e,["globalFilter"])):i({},e,{globalFilter:c})}}function Ie(e){var n=e.data,r=e.rows,i=e.flatRows,o=e.rowsById,l=e.allColumns,s=e.filterTypes,u=e.globalFilter,c=e.manualGlobalFilter,d=e.state.globalFilter,f=e.dispatch,p=e.autoResetGlobalFilter,v=void 0===p||p,m=e.disableGlobalFilter,g=t.useCallback((function(e){f({type:a.setGlobalFilter,filterValue:e})}),[f]),b=t.useMemo((function(){if(c||void 0===d)return[r,i,o];var e=[],t={},n=A(u,s||{},_e);if(!n)return console.warn("Could not find a valid 'globalFilter' option."),r;l.forEach((function(e){var t=e.disableGlobalFilter;e.canFilter=R(!0!==t&&void 0,!0!==m&&void 0,!0)}));var a=l.filter((function(e){return!0===e.canFilter}));return[function r(i){return(i=n(i,a.map((function(e){return e.id})),d)).forEach((function(n){e.push(n),t[n.id]=n,n.subRows=n.subRows&&n.subRows.length?r(n.subRows):n.subRows})),i}(r),e,t]}),[c,d,u,s,l,r,i,o,m]),x=b[0],w=b[1],E=b[2],S=h(v);y((function(){S()&&f({type:a.resetGlobalFilter})}),[f,c?null:n]),Object.assign(e,{preGlobalFilteredRows:r,preGlobalFilteredFlatRows:i,preGlobalFilteredRowsById:o,globalFilteredRows:x,globalFilteredFlatRows:w,globalFilteredRowsById:E,rows:x,flatRows:w,rowsById:E,setGlobalFilter:g,disableGlobalFilter:m})}function Oe(e,t){return t.reduce((function(e,t){return e+("number"==typeof t?t:0)}),0)}Re.pluginName="useGlobalFilter";var Ae=Object.freeze({__proto__:null,sum:Oe,min:function(e){var t=e[0]||0;return e.forEach((function(e){"number"==typeof e&&(t=Math.min(t,e))})),t},max:function(e){var t=e[0]||0;return e.forEach((function(e){"number"==typeof e&&(t=Math.max(t,e))})),t},minMax:function(e){var t=e[0]||0,n=e[0]||0;return e.forEach((function(e){"number"==typeof e&&(t=Math.min(t,e),n=Math.max(n,e))})),t+".."+n},average:function(e){return Oe(0,e)/e.length},median:function(e){if(!e.length)return null;var t=Math.floor(e.length/2),n=[].concat(e).sort((function(e,t){return e-t}));return e.length%2!=0?n[t]:(n[t-1]+n[t])/2},unique:function(e){return Array.from(new Set(e).values())},uniqueCount:function(e){return new Set(e).size},count:function(e){return e.length}}),Ve=[],Pe={};a.resetGroupBy="resetGroupBy",a.setGroupBy="setGroupBy",a.toggleGroupBy="toggleGroupBy";var Le=function(e){e.getGroupByToggleProps=[$e],e.stateReducers.push(De),e.visibleColumnsDeps.push((function(e,t){var n=t.instance;return[].concat(e,[n.state.groupBy])})),e.visibleColumns.push(Ne),e.useInstance.push(ze),e.prepareRow.push(Be)};Le.pluginName="useGroupBy";var $e=function(e,t){var n=t.header;return[e,{onClick:n.canGroupBy?function(e){e.persist(),n.toggleGroupBy()}:void 0,style:{cursor:n.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function De(e,t,n,r){if(t.type===a.init)return i({groupBy:[]},e);if(t.type===a.resetGroupBy)return i({},e,{groupBy:r.initialState.groupBy||[]});if(t.type===a.setGroupBy)return i({},e,{groupBy:t.value});if(t.type===a.toggleGroupBy){var o=t.columnId,l=t.value,s=void 0!==l?l:!e.groupBy.includes(o);return i({},e,s?{groupBy:[].concat(e.groupBy,[o])}:{groupBy:e.groupBy.filter((function(e){return e!==o}))})}}function Ne(e,t){var n=t.instance.state.groupBy,r=n.map((function(t){return e.find((function(e){return e.id===t}))})).filter(Boolean),i=e.filter((function(e){return!n.includes(e.id)}));return(e=[].concat(r,i)).forEach((function(e){e.isGrouped=n.includes(e.id),e.groupedIndex=n.indexOf(e.id)})),e}var Fe={};function ze(e){var n=e.data,r=e.rows,o=e.flatRows,l=e.rowsById,s=e.allColumns,u=e.flatHeaders,c=e.groupByFn,d=void 0===c?Me:c,p=e.manualGroupBy,v=e.aggregations,g=void 0===v?Fe:v,b=e.plugins,x=e.state.groupBy,w=e.dispatch,E=e.autoResetGroupBy,S=void 0===E||E,_=e.disableGroupBy,j=e.defaultCanGroupBy,k=e.getHooks;m(b,["useColumnOrder","useFilters"],"useGroupBy");var C=h(e);s.forEach((function(t){var n=t.accessor,r=t.defaultGroupBy,i=t.disableGroupBy;t.canGroupBy=n?R(t.canGroupBy,!0!==i&&void 0,!0!==_&&void 0,!0):R(t.canGroupBy,r,j,!1),t.canGroupBy&&(t.toggleGroupBy=function(){return e.toggleGroupBy(t.id)}),t.Aggregated=t.Aggregated||t.Cell}));var T=t.useCallback((function(e,t){w({type:a.toggleGroupBy,columnId:e,value:t})}),[w]),O=t.useCallback((function(e){w({type:a.setGroupBy,value:e})}),[w]);u.forEach((function(e){e.getGroupByToggleProps=f(k().getGroupByToggleProps,{instance:C(),header:e})}));var A=t.useMemo((function(){if(p||!x.length)return[r,o,l,Ve,Pe,o,l];var e=x.filter((function(e){return s.find((function(t){return t.id===e}))})),t=[],n={},a=[],u={},c=[],f={},v=function r(o,l,p){if(void 0===l&&(l=0),l===e.length)return o.map((function(e){return i({},e,{depth:l})}));var v=e[l],m=d(o,v);return Object.entries(m).map((function(i,o){var d,m,h,b,y=i[0],x=i[1],w=v+":"+y,E=r(x,l+1,w=p?p+">"+w:w),S=l?I(x,"leafRows"):x,_=(d=S,m=x,h=l,b={},s.forEach((function(t){if(e.includes(t.id))b[t.id]=m[0]?m[0].values[t.id]:null;else{var n="function"==typeof t.aggregate?t.aggregate:g[t.aggregate]||Ae[t.aggregate];if(n){var r=m.map((function(e){return e.values[t.id]})),i=d.map((function(e){var n=e.values[t.id];if(!h&&t.aggregateValue){var r="function"==typeof t.aggregateValue?t.aggregateValue:g[t.aggregateValue]||Ae[t.aggregateValue];if(!r)throw console.info({column:t}),new Error("React Table: Invalid column.aggregateValue option for column listed above");n=r(n,e,t)}return n}));b[t.id]=n(i,r)}else{if(t.aggregate)throw console.info({column:t}),new Error("React Table: Invalid column.aggregate option for column listed above");b[t.id]=null}}})),b),j={id:w,isGrouped:!0,groupByID:v,groupByVal:y,values:_,subRows:E,leafRows:S,depth:l,index:o};return E.forEach((function(e){t.push(e),n[e.id]=e,e.isGrouped?(a.push(e),u[e.id]=e):(c.push(e),f[e.id]=e)})),j}))}(r);return v.forEach((function(e){t.push(e),n[e.id]=e,e.isGrouped?(a.push(e),u[e.id]=e):(c.push(e),f[e.id]=e)})),[v,t,n,a,u,c,f]}),[p,x,r,o,l,s,g,d]),V=A[0],P=A[1],L=A[2],$=A[3],D=A[4],N=A[5],F=A[6],z=h(S);y((function(){z()&&w({type:a.resetGroupBy})}),[w,p?null:n]),Object.assign(e,{preGroupedRows:r,preGroupedFlatRow:o,preGroupedRowsById:l,groupedRows:V,groupedFlatRows:P,groupedRowsById:L,onlyGroupedFlatRows:$,onlyGroupedRowsById:D,nonGroupedFlatRows:N,nonGroupedRowsById:F,rows:V,flatRows:P,rowsById:L,toggleGroupBy:T,setGroupBy:O})}function Be(e){e.allCells.forEach((function(t){var n;t.isGrouped=t.column.isGrouped&&t.column.id===e.groupByID,t.isPlaceholder=!t.isGrouped&&t.column.isGrouped,t.isAggregated=!t.isGrouped&&!t.isPlaceholder&&(null==(n=e.subRows)?void 0:n.length)}))}function Me(e,t){return e.reduce((function(e,n,r){var i=""+n.values[t];return e[i]=Array.isArray(e[i])?e[i]:[],e[i].push(n),e}),{})}var He=/([0-9]+)/gm;function Ue(e,t){return e===t?0:e>t?1:-1}function Ge(e,t,n){return[e.values[n],t.values[n]]}function We(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}var qe=Object.freeze({__proto__:null,alphanumeric:function(e,t,n){var r=Ge(e,t,n),i=r[0],o=r[1];for(i=We(i),o=We(o),i=i.split(He).filter(Boolean),o=o.split(He).filter(Boolean);i.length&&o.length;){var l=i.shift(),a=o.shift(),s=parseInt(l,10),u=parseInt(a,10),c=[s,u].sort();if(isNaN(c[0])){if(l>a)return 1;if(a>l)return-1}else{if(isNaN(c[1]))return isNaN(s)?-1:1;if(s>u)return 1;if(u>s)return-1}}return i.length-o.length},datetime:function(e,t,n){var r=Ge(e,t,n),i=r[0],o=r[1];return Ue(i=i.getTime(),o=o.getTime())},basic:function(e,t,n){var r=Ge(e,t,n);return Ue(r[0],r[1])},string:function(e,t,n){var r=Ge(e,t,n),i=r[0],o=r[1];for(i=i.split("").filter(Boolean),o=o.split("").filter(Boolean);i.length&&o.length;){var l=i.shift(),a=o.shift(),s=l.toLowerCase(),u=a.toLowerCase();if(s>u)return 1;if(u>s)return-1;if(l>a)return 1;if(a>l)return-1}return i.length-o.length},number:function(e,t,n){var r=Ge(e,t,n),i=r[0],o=r[1],l=/[^0-9.]/gi;return Ue(i=Number(String(i).replace(l,"")),o=Number(String(o).replace(l,"")))}});a.resetSortBy="resetSortBy",a.setSortBy="setSortBy",a.toggleSortBy="toggleSortBy",a.clearSortBy="clearSortBy",c.sortType="alphanumeric",c.sortDescFirst=!1;var Ye=function(e){e.getSortByToggleProps=[Xe],e.stateReducers.push(Qe),e.useInstance.push(Ke)};Ye.pluginName="useSortBy";var Xe=function(e,t){var n=t.instance,r=t.column,i=n.isMultiSortEvent,o=void 0===i?function(e){return e.shiftKey}:i;return[e,{onClick:r.canSort?function(e){e.persist(),r.toggleSortBy(void 0,!n.disableMultiSort&&o(e))}:void 0,style:{cursor:r.canSort?"pointer":void 0},title:r.canSort?"Toggle SortBy":void 0}]};function Qe(e,t,n,r){if(t.type===a.init)return i({sortBy:[]},e);if(t.type===a.resetSortBy)return i({},e,{sortBy:r.initialState.sortBy||[]});if(t.type===a.clearSortBy)return i({},e,{sortBy:e.sortBy.filter((function(e){return e.id!==t.columnId}))});if(t.type===a.setSortBy)return i({},e,{sortBy:t.sortBy});if(t.type===a.toggleSortBy){var o,l=t.columnId,s=t.desc,u=t.multi,c=r.allColumns,d=r.disableMultiSort,f=r.disableSortRemove,p=r.disableMultiRemove,v=r.maxMultiSortColCount,m=void 0===v?Number.MAX_SAFE_INTEGER:v,g=e.sortBy,h=c.find((function(e){return e.id===l})).sortDescFirst,b=g.find((function(e){return e.id===l})),y=g.findIndex((function(e){return e.id===l})),x=null!=s,w=[];return"toggle"!=(o=!d&&u?b?"toggle":"add":y!==g.length-1||1!==g.length?"replace":b?"toggle":"replace")||f||x||u&&p||!(b&&b.desc&&!h||!b.desc&&h)||(o="remove"),"replace"===o?w=[{id:l,desc:x?s:h}]:"add"===o?(w=[].concat(g,[{id:l,desc:x?s:h}])).splice(0,w.length-m):"toggle"===o?w=g.map((function(e){return e.id===l?i({},e,{desc:x?s:!b.desc}):e})):"remove"===o&&(w=g.filter((function(e){return e.id!==l}))),i({},e,{sortBy:w})}}function Ke(e){var n=e.data,r=e.rows,i=e.flatRows,o=e.allColumns,l=e.orderByFn,s=void 0===l?Ze:l,u=e.sortTypes,c=e.manualSortBy,d=e.defaultCanSort,p=e.disableSortBy,v=e.flatHeaders,g=e.state.sortBy,b=e.dispatch,x=e.plugins,w=e.getHooks,E=e.autoResetSortBy,S=void 0===E||E;m(x,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var _=t.useCallback((function(e){b({type:a.setSortBy,sortBy:e})}),[b]),j=t.useCallback((function(e,t,n){b({type:a.toggleSortBy,columnId:e,desc:t,multi:n})}),[b]),k=h(e);v.forEach((function(e){var t=e.accessor,n=e.canSort,r=e.disableSortBy,i=e.id,o=t?R(!0!==r&&void 0,!0!==p&&void 0,!0):R(d,n,!1);e.canSort=o,e.canSort&&(e.toggleSortBy=function(t,n){return j(e.id,t,n)},e.clearSortBy=function(){b({type:a.clearSortBy,columnId:e.id})}),e.getSortByToggleProps=f(w().getSortByToggleProps,{instance:k(),column:e});var l=g.find((function(e){return e.id===i}));e.isSorted=!!l,e.sortedIndex=g.findIndex((function(e){return e.id===i})),e.isSortedDesc=e.isSorted?l.desc:void 0}));var C=t.useMemo((function(){if(c||!g.length)return[r,i];var e=[],t=g.filter((function(e){return o.find((function(t){return t.id===e.id}))}));return[function n(r){var i=s(r,t.map((function(e){var t=o.find((function(t){return t.id===e.id}));if(!t)throw new Error("React-Table: Could not find a column with id: "+e.id+" while sorting");var n=t.sortType,r=T(n)||(u||{})[n]||qe[n];if(!r)throw new Error("React-Table: Could not find a valid sortType of '"+n+"' for column '"+e.id+"'.");return function(t,n){return r(t,n,e.id,e.desc)}})),t.map((function(e){var t=o.find((function(t){return t.id===e.id}));return t&&t.sortInverted?e.desc:!e.desc})));return i.forEach((function(t){e.push(t),t.subRows&&0!==t.subRows.length&&(t.subRows=n(t.subRows))})),i}(r),e]}),[c,g,r,i,o,s,u]),I=C[0],O=C[1],A=h(S);y((function(){A()&&b({type:a.resetSortBy})}),[c?null:n]),Object.assign(e,{preSortedRows:r,preSortedFlatRows:i,sortedRows:I,sortedFlatRows:O,rows:I,flatRows:O,setSortBy:_,toggleSortBy:j})}function Ze(e,t,n){return[].concat(e).sort((function(e,r){for(var i=0;i<t.length;i+=1){var o=t[i],l=!1===n[i]||"desc"===n[i],a=o(e,r);if(0!==a)return l?-a:a}return n[0]?e.index-r.index:r.index-e.index}))}a.resetPage="resetPage",a.gotoPage="gotoPage",a.setPageSize="setPageSize";var Je=function(e){e.stateReducers.push(et),e.useInstance.push(tt)};function et(e,t,n,r){if(t.type===a.init)return i({pageSize:10,pageIndex:0},e);if(t.type===a.resetPage)return i({},e,{pageIndex:r.initialState.pageIndex||0});if(t.type===a.gotoPage){var o=r.pageCount,l=r.page,s=g(t.pageIndex,e.pageIndex),u=!1;return s>e.pageIndex?u=-1===o?l.length>=e.pageSize:s<o:s<e.pageIndex&&(u=s>-1),u?i({},e,{pageIndex:s}):e}if(t.type===a.setPageSize){var c=t.pageSize,d=e.pageSize*e.pageIndex;return i({},e,{pageIndex:Math.floor(d/c),pageSize:c})}}function tt(e){var n=e.rows,r=e.autoResetPage,i=void 0===r||r,o=e.manualExpandedKey,l=void 0===o?"expanded":o,s=e.plugins,u=e.pageCount,c=e.paginateExpandedRows,d=void 0===c||c,f=e.expandSubRows,p=void 0===f||f,v=e.state,g=v.pageSize,b=v.pageIndex,x=v.expanded,w=v.globalFilter,E=v.filters,S=v.groupBy,_=v.sortBy,j=e.dispatch,k=e.data,C=e.manualPagination;m(s,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var R=h(i);y((function(){R()&&j({type:a.resetPage})}),[j,C?null:k,w,E,S,_]);var T=C?u:Math.ceil(n.length/g),I=t.useMemo((function(){return T>0?[].concat(new Array(T)).fill(null).map((function(e,t){return t})):[]}),[T]),A=t.useMemo((function(){var e;if(C)e=n;else{var t=g*b,r=t+g;e=n.slice(t,r)}return d?e:O(e,{manualExpandedKey:l,expanded:x,expandSubRows:p})}),[p,x,l,C,b,g,d,n]),V=b>0,P=-1===T?A.length>=g:b<T-1,L=t.useCallback((function(e){j({type:a.gotoPage,pageIndex:e})}),[j]),$=t.useCallback((function(){return L((function(e){return e-1}))}),[L]),D=t.useCallback((function(){return L((function(e){return e+1}))}),[L]),N=t.useCallback((function(e){j({type:a.setPageSize,pageSize:e})}),[j]);Object.assign(e,{pageOptions:I,pageCount:T,page:A,canPreviousPage:V,canNextPage:P,gotoPage:L,previousPage:$,nextPage:D,setPageSize:N})}Je.pluginName="usePagination",a.resetPivot="resetPivot",a.togglePivot="togglePivot";var nt=function(e){e.getPivotToggleProps=[it],e.stateReducers.push(ot),e.useInstanceAfterData.push(lt),e.allColumns.push(at),e.accessValue.push(st),e.materializedColumns.push(ut),e.materializedColumnsDeps.push(ct),e.visibleColumns.push(dt),e.visibleColumnsDeps.push(ft),e.useInstance.push(pt),e.prepareRow.push(vt)};nt.pluginName="usePivotColumns";var rt=[],it=function(e,t){var n=t.header;return[e,{onClick:n.canPivot?function(e){e.persist(),n.togglePivot()}:void 0,style:{cursor:n.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function ot(e,t,n,r){if(t.type===a.init)return i({pivotColumns:rt},e);if(t.type===a.resetPivot)return i({},e,{pivotColumns:r.initialState.pivotColumns||rt});if(t.type===a.togglePivot){var o=t.columnId,l=t.value,s=void 0!==l?l:!e.pivotColumns.includes(o);return i({},e,s?{pivotColumns:[].concat(e.pivotColumns,[o])}:{pivotColumns:e.pivotColumns.filter((function(e){return e!==o}))})}}function lt(e){e.allColumns.forEach((function(t){t.isPivotSource=e.state.pivotColumns.includes(t.id)}))}function at(e,t){var n=t.instance;return e.forEach((function(e){e.isPivotSource=n.state.pivotColumns.includes(e.id),e.uniqueValues=new Set})),e}function st(e,t){var n=t.column;return n.uniqueValues&&void 0!==e&&n.uniqueValues.add(e),e}function ut(e,t){var n=t.instance,r=n.allColumns,o=n.state;if(!o.pivotColumns.length||!o.groupBy||!o.groupBy.length)return e;var l=o.pivotColumns.map((function(e){return r.find((function(t){return t.id===e}))})).filter(Boolean),a=r.filter((function(e){return!e.isPivotSource&&!o.groupBy.includes(e.id)&&!o.pivotColumns.includes(e.id)})),s=S(function e(t,n,r){void 0===t&&(t=0),void 0===r&&(r=[]);var o=l[t];return o?Array.from(o.uniqueValues).sort().map((function(l){var a=i({},o,{Header:o.PivotHeader||"string"==typeof o.header?o.Header+": "+l:l,isPivotGroup:!0,parent:n,depth:t,id:n?n.id+"."+o.id+"."+l:o.id+"."+l,pivotValue:l});return a.columns=e(t+1,a,[].concat(r,[function(e){return e.values[o.id]===l}])),a})):a.map((function(e){return i({},e,{canPivot:!1,isPivoted:!0,parent:n,depth:t,id:""+(n?n.id+"."+e.id:e.id),accessor:function(t,n,i){if(r.every((function(e){return e(i)})))return i.values[e.id]}})}))}());return[].concat(e,s)}function ct(e,t){var n=t.instance.state,r=n.pivotColumns,i=n.groupBy;return[].concat(e,[r,i])}function dt(e,t){var n=t.instance.state;return e=e.filter((function(e){return!e.isPivotSource})),n.pivotColumns.length&&n.groupBy&&n.groupBy.length&&(e=e.filter((function(e){return e.isGrouped||e.isPivoted}))),e}function ft(e,t){var n=t.instance;return[].concat(e,[n.state.pivotColumns,n.state.groupBy])}function pt(e){var t=e.columns,n=e.allColumns,r=e.flatHeaders,i=e.getHooks,o=e.plugins,l=e.dispatch,s=e.autoResetPivot,u=void 0===s||s,c=e.manaulPivot,d=e.disablePivot,p=e.defaultCanPivot;m(o,["useGroupBy"],"usePivotColumns");var v=h(e);n.forEach((function(t){var n=t.accessor,r=t.defaultPivot,i=t.disablePivot;t.canPivot=n?R(t.canPivot,!0!==i&&void 0,!0!==d&&void 0,!0):R(t.canPivot,r,p,!1),t.canPivot&&(t.togglePivot=function(){return e.togglePivot(t.id)}),t.Aggregated=t.Aggregated||t.Cell})),r.forEach((function(e){e.getPivotToggleProps=f(i().getPivotToggleProps,{instance:v(),header:e})}));var g=h(u);y((function(){g()&&l({type:a.resetPivot})}),[l,c?null:t]),Object.assign(e,{togglePivot:function(e,t){l({type:a.togglePivot,columnId:e,value:t})}})}function vt(e){e.allCells.forEach((function(e){e.isPivoted=e.column.isPivoted}))}a.resetSelectedRows="resetSelectedRows",a.toggleAllRowsSelected="toggleAllRowsSelected",a.toggleRowSelected="toggleRowSelected",a.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var mt=function(e){e.getToggleRowSelectedProps=[gt],e.getToggleAllRowsSelectedProps=[ht],e.getToggleAllPageRowsSelectedProps=[bt],e.stateReducers.push(yt),e.useInstance.push(xt),e.prepareRow.push(wt)};mt.pluginName="useRowSelect";var gt=function(e,t){var n=t.instance,r=t.row,i=n.manualRowSelectedKey,o=void 0===i?"isSelected":i;return[e,{onChange:function(e){r.toggleRowSelected(e.target.checked)},style:{cursor:"pointer"},checked:!(!r.original||!r.original[o])||r.isSelected,title:"Toggle Row Selected",indeterminate:r.isSomeSelected}]},ht=function(e,t){var n=t.instance;return[e,{onChange:function(e){n.toggleAllRowsSelected(e.target.checked)},style:{cursor:"pointer"},checked:n.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:Boolean(!n.isAllRowsSelected&&Object.keys(n.state.selectedRowIds).length)}]},bt=function(e,t){var n=t.instance;return[e,{onChange:function(e){n.toggleAllPageRowsSelected(e.target.checked)},style:{cursor:"pointer"},checked:n.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:Boolean(!n.isAllPageRowsSelected&&n.page.some((function(e){var t=e.id;return n.state.selectedRowIds[t]})))}]};function yt(e,t,n,r){if(t.type===a.init)return i({selectedRowIds:{}},e);if(t.type===a.resetSelectedRows)return i({},e,{selectedRowIds:r.initialState.selectedRowIds||{}});if(t.type===a.toggleAllRowsSelected){var o=t.value,l=r.isAllRowsSelected,s=r.rowsById,u=r.nonGroupedRowsById,c=void 0===u?s:u,d=void 0!==o?o:!l,f=Object.assign({},e.selectedRowIds);return d?Object.keys(c).forEach((function(e){f[e]=!0})):Object.keys(c).forEach((function(e){delete f[e]})),i({},e,{selectedRowIds:f})}if(t.type===a.toggleRowSelected){var p=t.id,v=t.value,m=r.rowsById,g=r.selectSubRows,h=void 0===g||g,b=r.getSubRows,y=e.selectedRowIds[p],x=void 0!==v?v:!y;if(y===x)return e;var w=i({},e.selectedRowIds);return function e(t){var n=m[t];if(n&&(n.isGrouped||(x?w[t]=!0:delete w[t]),h&&b(n)))return b(n).forEach((function(t){return e(t.id)}))}(p),i({},e,{selectedRowIds:w})}if(t.type===a.toggleAllPageRowsSelected){var E=t.value,S=r.page,_=r.rowsById,j=r.selectSubRows,k=void 0===j||j,C=r.isAllPageRowsSelected,R=r.getSubRows,T=void 0!==E?E:!C,I=i({},e.selectedRowIds);return S.forEach((function(e){return function e(t){var n=_[t];if(n.isGrouped||(T?I[t]=!0:delete I[t]),k&&R(n))return R(n).forEach((function(t){return e(t.id)}))}(e.id)})),i({},e,{selectedRowIds:I})}return e}function xt(e){var n=e.data,r=e.rows,i=e.getHooks,o=e.plugins,l=e.rowsById,s=e.nonGroupedRowsById,u=void 0===s?l:s,c=e.autoResetSelectedRows,d=void 0===c||c,p=e.state.selectedRowIds,v=e.selectSubRows,g=void 0===v||v,b=e.dispatch,x=e.page,w=e.getSubRows;m(o,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var E=t.useMemo((function(){var e=[];return r.forEach((function(t){var n=g?function e(t,n,r){if(n[t.id])return!0;var i=r(t);if(i&&i.length){var o=!0,l=!1;return i.forEach((function(t){l&&!o||(e(t,n,r)?l=!0:o=!1)})),!!o||!!l&&null}return!1}(t,p,w):!!p[t.id];t.isSelected=!!n,t.isSomeSelected=null===n,n&&e.push(t)})),e}),[r,g,p,w]),S=Boolean(Object.keys(u).length&&Object.keys(p).length),_=S;S&&Object.keys(u).some((function(e){return!p[e]}))&&(S=!1),S||x&&x.length&&x.some((function(e){var t=e.id;return!p[t]}))&&(_=!1);var j=h(d);y((function(){j()&&b({type:a.resetSelectedRows})}),[b,n]);var k=t.useCallback((function(e){return b({type:a.toggleAllRowsSelected,value:e})}),[b]),C=t.useCallback((function(e){return b({type:a.toggleAllPageRowsSelected,value:e})}),[b]),R=t.useCallback((function(e,t){return b({type:a.toggleRowSelected,id:e,value:t})}),[b]),T=h(e),I=f(i().getToggleAllRowsSelectedProps,{instance:T()}),O=f(i().getToggleAllPageRowsSelectedProps,{instance:T()});Object.assign(e,{selectedFlatRows:E,isAllRowsSelected:S,isAllPageRowsSelected:_,toggleRowSelected:R,toggleAllRowsSelected:k,getToggleAllRowsSelectedProps:I,getToggleAllPageRowsSelectedProps:O,toggleAllPageRowsSelected:C})}function wt(e,t){var n=t.instance;e.toggleRowSelected=function(t){return n.toggleRowSelected(e.id,t)},e.getToggleRowSelectedProps=f(n.getHooks().getToggleRowSelectedProps,{instance:n,row:e})}var Et=function(e){return{}},St=function(e){return{}};a.setRowState="setRowState",a.setCellState="setCellState",a.resetRowState="resetRowState";var _t=function(e){e.stateReducers.push(jt),e.useInstance.push(kt),e.prepareRow.push(Ct)};function jt(e,t,n,r){var o=r.initialRowStateAccessor,l=void 0===o?Et:o,s=r.initialCellStateAccessor,u=void 0===s?St:s,c=r.rowsById;if(t.type===a.init)return i({rowState:{}},e);if(t.type===a.resetRowState)return i({},e,{rowState:r.initialState.rowState||{}});if(t.type===a.setRowState){var d,f=t.rowId,p=t.value,v=void 0!==e.rowState[f]?e.rowState[f]:l(c[f]);return i({},e,{rowState:i({},e.rowState,(d={},d[f]=g(p,v),d))})}if(t.type===a.setCellState){var m,h,b,y,x,w=t.rowId,E=t.columnId,S=t.value,_=void 0!==e.rowState[w]?e.rowState[w]:l(c[w]),j=void 0!==(null==_||null==(m=_.cellState)?void 0:m[E])?_.cellState[E]:u(null==(h=c[w])||null==(b=h.cells)?void 0:b.find((function(e){return e.column.id===E})));return i({},e,{rowState:i({},e.rowState,(x={},x[w]=i({},_,{cellState:i({},_.cellState||{},(y={},y[E]=g(S,j),y))}),x))})}}function kt(e){var n=e.autoResetRowState,r=void 0===n||n,i=e.data,o=e.dispatch,l=t.useCallback((function(e,t){return o({type:a.setRowState,rowId:e,value:t})}),[o]),s=t.useCallback((function(e,t,n){return o({type:a.setCellState,rowId:e,columnId:t,value:n})}),[o]),u=h(r);y((function(){u()&&o({type:a.resetRowState})}),[i]),Object.assign(e,{setRowState:l,setCellState:s})}function Ct(e,t){var n=t.instance,r=n.initialRowStateAccessor,i=void 0===r?Et:r,o=n.initialCellStateAccessor,l=void 0===o?St:o,a=n.state.rowState;e&&(e.state=void 0!==a[e.id]?a[e.id]:i(e),e.setState=function(t){return n.setRowState(e.id,t)},e.cells.forEach((function(t){e.state.cellState||(e.state.cellState={}),t.state=void 0!==e.state.cellState[t.column.id]?e.state.cellState[t.column.id]:l(t),t.setState=function(r){return n.setCellState(e.id,t.column.id,r)}})))}_t.pluginName="useRowState",a.resetColumnOrder="resetColumnOrder",a.setColumnOrder="setColumnOrder";var Rt=function(e){e.stateReducers.push(Tt),e.visibleColumnsDeps.push((function(e,t){var n=t.instance;return[].concat(e,[n.state.columnOrder])})),e.visibleColumns.push(It),e.useInstance.push(Ot)};function Tt(e,t,n,r){return t.type===a.init?i({columnOrder:[]},e):t.type===a.resetColumnOrder?i({},e,{columnOrder:r.initialState.columnOrder||[]}):t.type===a.setColumnOrder?i({},e,{columnOrder:g(t.columnOrder,e.columnOrder)}):void 0}function It(e,t){var n=t.instance.state.columnOrder;if(!n||!n.length)return e;for(var r=[].concat(n),i=[].concat(e),o=[],l=function(){var e=r.shift(),t=i.findIndex((function(t){return t.id===e}));t>-1&&o.push(i.splice(t,1)[0])};i.length&&r.length;)l();return[].concat(o,i)}function Ot(e){var n=e.dispatch;e.setColumnOrder=t.useCallback((function(e){return n({type:a.setColumnOrder,columnOrder:e})}),[n])}Rt.pluginName="useColumnOrder",c.canResize=!0,a.columnStartResizing="columnStartResizing",a.columnResizing="columnResizing",a.columnDoneResizing="columnDoneResizing",a.resetResize="resetResize";var At=function(e){e.getResizerProps=[Vt],e.getHeaderProps.push({style:{position:"relative"}}),e.stateReducers.push(Pt),e.useInstance.push($t),e.useInstanceBeforeDimensions.push(Lt)},Vt=function(e,t){var n=t.instance,r=t.header,i=n.dispatch,o=function(e,t){var n=!1;if("touchstart"===e.type){if(e.touches&&e.touches.length>1)return;n=!0}var r,o,l,s,u=(l=t,s=[],function e(t){t.columns&&t.columns.length&&t.columns.map(e),s.push(t)}(l),s).map((function(e){return[e.id,e.totalWidth]})),c=n?Math.round(e.touches[0].clientX):e.clientX,d=function(){window.cancelAnimationFrame(r),r=null,i({type:a.columnDoneResizing})},f=function(){window.cancelAnimationFrame(r),r=null,i({type:a.columnResizing,clientX:o})},p=function(e){o=e,r||(r=window.requestAnimationFrame(f))},v={mouse:{moveEvent:"mousemove",moveHandler:function(e){return p(e.clientX)},upEvent:"mouseup",upHandler:function(e){document.removeEventListener("mousemove",v.mouse.moveHandler),document.removeEventListener("mouseup",v.mouse.upHandler),d()}},touch:{moveEvent:"touchmove",moveHandler:function(e){return e.cancelable&&(e.preventDefault(),e.stopPropagation()),p(e.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(e){document.removeEventListener(v.touch.moveEvent,v.touch.moveHandler),document.removeEventListener(v.touch.upEvent,v.touch.moveHandler),d()}}},m=n?v.touch:v.mouse,g=!!function(){if("boolean"==typeof L)return L;var e=!1;try{var t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(n){e=!1}return L=e}()&&{passive:!1};document.addEventListener(m.moveEvent,m.moveHandler,g),document.addEventListener(m.upEvent,m.upHandler,g),i({type:a.columnStartResizing,columnId:t.id,columnWidth:t.totalWidth,headerIdWidths:u,clientX:c})};return[e,{onMouseDown:function(e){return e.persist()||o(e,r)},onTouchStart:function(e){return e.persist()||o(e,r)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function Pt(e,t){if(t.type===a.init)return i({columnResizing:{columnWidths:{}}},e);if(t.type===a.resetResize)return i({},e,{columnResizing:{columnWidths:{}}});if(t.type===a.columnStartResizing){var n=t.clientX,r=t.columnId,o=t.columnWidth,l=t.headerIdWidths;return i({},e,{columnResizing:i({},e.columnResizing,{startX:n,headerIdWidths:l,columnWidth:o,isResizingColumn:r})})}if(t.type===a.columnResizing){var s=t.clientX,u=e.columnResizing,c=u.startX,d=u.columnWidth,f=u.headerIdWidths,p=(s-c)/d,v={};return(void 0===f?[]:f).forEach((function(e){var t=e[0],n=e[1];v[t]=Math.max(n+n*p,0)})),i({},e,{columnResizing:i({},e.columnResizing,{columnWidths:i({},e.columnResizing.columnWidths,{},v)})})}return t.type===a.columnDoneResizing?i({},e,{columnResizing:i({},e.columnResizing,{startX:null,isResizingColumn:null})}):void 0}At.pluginName="useResizeColumns";var Lt=function(e){var t=e.flatHeaders,n=e.disableResizing,r=e.getHooks,i=e.state.columnResizing,o=h(e);t.forEach((function(e){var t=R(!0!==e.disableResizing&&void 0,!0!==n&&void 0,!0);e.canResize=t,e.width=i.columnWidths[e.id]||e.originalWidth||e.width,e.isResizing=i.isResizingColumn===e.id,t&&(e.getResizerProps=f(r().getResizerProps,{instance:o(),header:e}))}))};function $t(e){var n=e.plugins,r=e.dispatch,i=e.autoResetResize,o=void 0===i||i,l=e.columns;m(n,["useAbsoluteLayout"],"useResizeColumns");var s=h(o);y((function(){s()&&r({type:a.resetResize})}),[l]);var u=t.useCallback((function(){return r({type:a.resetResize})}),[r]);Object.assign(e,{resetResizing:u})}var Dt={position:"absolute",top:0},Nt=function(e){e.getTableBodyProps.push(Ft),e.getRowProps.push(Ft),e.getHeaderGroupProps.push(Ft),e.getFooterGroupProps.push(Ft),e.getHeaderProps.push((function(e,t){var n=t.column;return[e,{style:i({},Dt,{left:n.totalLeft+"px",width:n.totalWidth+"px"})}]})),e.getCellProps.push((function(e,t){var n=t.cell;return[e,{style:i({},Dt,{left:n.column.totalLeft+"px",width:n.column.totalWidth+"px"})}]})),e.getFooterProps.push((function(e,t){var n=t.column;return[e,{style:i({},Dt,{left:n.totalLeft+"px",width:n.totalWidth+"px"})}]}))};Nt.pluginName="useAbsoluteLayout";var Ft=function(e,t){return[e,{style:{position:"relative",width:t.instance.totalColumnsWidth+"px"}}]},zt={display:"inline-block",boxSizing:"border-box"},Bt=function(e,t){return[e,{style:{display:"flex",width:t.instance.totalColumnsWidth+"px"}}]},Mt=function(e){e.getRowProps.push(Bt),e.getHeaderGroupProps.push(Bt),e.getFooterGroupProps.push(Bt),e.getHeaderProps.push((function(e,t){var n=t.column;return[e,{style:i({},zt,{width:n.totalWidth+"px"})}]})),e.getCellProps.push((function(e,t){var n=t.cell;return[e,{style:i({},zt,{width:n.column.totalWidth+"px"})}]})),e.getFooterProps.push((function(e,t){var n=t.column;return[e,{style:i({},zt,{width:n.totalWidth+"px"})}]}))};function Ht(e){e.getTableProps.push(Ut),e.getRowProps.push(Gt),e.getHeaderGroupProps.push(Gt),e.getFooterGroupProps.push(Gt),e.getHeaderProps.push(Wt),e.getCellProps.push(qt),e.getFooterProps.push(Yt)}Mt.pluginName="useBlockLayout",Ht.pluginName="useFlexLayout";var Ut=function(e,t){return[e,{style:{minWidth:t.instance.totalColumnsMinWidth+"px"}}]},Gt=function(e,t){return[e,{style:{display:"flex",flex:"1 0 auto",minWidth:t.instance.totalColumnsMinWidth+"px"}}]},Wt=function(e,t){var n=t.column;return[e,{style:{boxSizing:"border-box",flex:n.totalFlexWidth?n.totalFlexWidth+" 0 auto":void 0,minWidth:n.totalMinWidth+"px",width:n.totalWidth+"px"}}]},qt=function(e,t){var n=t.cell;return[e,{style:{boxSizing:"border-box",flex:n.column.totalFlexWidth+" 0 auto",minWidth:n.column.totalMinWidth+"px",width:n.column.totalWidth+"px"}}]},Yt=function(e,t){var n=t.column;return[e,{style:{boxSizing:"border-box",flex:n.totalFlexWidth?n.totalFlexWidth+" 0 auto":void 0,minWidth:n.totalMinWidth+"px",width:n.totalWidth+"px"}}]};function Xt(e){e.stateReducers.push(Jt),e.getTableProps.push(Qt),e.getHeaderProps.push(Kt),e.getRowProps.push(Zt)}a.columnStartResizing="columnStartResizing",a.columnResizing="columnResizing",a.columnDoneResizing="columnDoneResizing",a.resetResize="resetResize",Xt.pluginName="useGridLayout";var Qt=function(e,t){var n=t.instance;return[e,{style:{display:"grid",gridTemplateColumns:n.visibleColumns.map((function(e){var t;return n.state.gridLayout.columnWidths[e.id]?n.state.gridLayout.columnWidths[e.id]+"px":(null==(t=n.state.columnResizing)?void 0:t.isResizingColumn)?n.state.gridLayout.startWidths[e.id]+"px":"number"==typeof e.width?e.width+"px":e.width})).join(" ")}}]},Kt=function(e,t){var n=t.column;return[e,{id:"header-cell-"+n.id,style:{position:"sticky",gridColumn:"span "+n.totalVisibleHeaderCount}}]},Zt=function(e,t){var n=t.row;return n.isExpanded?[e,{style:{gridColumn:"1 / "+(n.cells.length+1)}}]:[e,{}]};function Jt(e,t,n,r){if(t.type===a.init)return i({gridLayout:{columnWidths:{}}},e);if(t.type===a.resetResize)return i({},e,{gridLayout:{columnWidths:{}}});if(t.type===a.columnStartResizing){var o=t.columnId,l=t.headerIdWidths,s=en(o);if(void 0!==s){var u=r.visibleColumns.reduce((function(e,t){var n;return i({},e,((n={})[t.id]=en(t.id),n))}),{}),c=r.visibleColumns.reduce((function(e,t){var n;return i({},e,((n={})[t.id]=t.minWidth,n))}),{}),d=r.visibleColumns.reduce((function(e,t){var n;return i({},e,((n={})[t.id]=t.maxWidth,n))}),{}),f=l.map((function(e){var t=e[0];return[t,en(t)]}));return i({},e,{gridLayout:i({},e.gridLayout,{startWidths:u,minWidths:c,maxWidths:d,headerIdGridWidths:f,columnWidth:s})})}return e}if(t.type===a.columnResizing){var p=t.clientX,v=e.columnResizing.startX,m=e.gridLayout,g=m.columnWidth,h=m.minWidths,b=m.maxWidths,y=m.headerIdGridWidths,x=(p-v)/g,w={};return(void 0===y?[]:y).forEach((function(e){var t=e[0],n=e[1];w[t]=Math.min(Math.max(h[t],n+n*x),b[t])})),i({},e,{gridLayout:i({},e.gridLayout,{columnWidths:i({},e.gridLayout.columnWidths,{},w)})})}return t.type===a.columnDoneResizing?i({},e,{gridLayout:i({},e.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function en(e){var t,n=null==(t=document.getElementById("header-cell-"+e))?void 0:t.offsetWidth;if(void 0!==n)return n}e._UNSTABLE_usePivotColumns=nt,e.actions=a,e.defaultColumn=c,e.defaultGroupByFn=Me,e.defaultOrderByFn=Ze,e.defaultRenderer=s,e.emptyRenderer=u,e.ensurePluginOrder=m,e.flexRender=w,e.functionalUpdate=g,e.loopHooks=v,e.makePropGetter=f,e.makeRenderer=x,e.reduceHooks=p,e.safeUseLayoutEffect=b,e.useAbsoluteLayout=Nt,e.useAsyncDebounce=function(e,n){void 0===n&&(n=0);var i,o=t.useRef({}),l=h(e),a=h(n);return t.useCallback((i=r(regeneratorRuntime.mark((function e(){var t,n,i,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=s.length,n=new Array(t),i=0;i<t;i++)n[i]=s[i];return o.current.promise||(o.current.promise=new Promise((function(e,t){o.current.resolve=e,o.current.reject=t}))),o.current.timeout&&clearTimeout(o.current.timeout),o.current.timeout=setTimeout(r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete o.current.timeout,e.prev=1,e.t0=o.current,e.next=5,l().apply(void 0,n);case 5:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(1),o.current.reject(e.t2);case 12:return e.prev=12,delete o.current.promise,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])}))),a()),e.abrupt("return",o.current.promise);case 5:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)}),[l,a])},e.useBlockLayout=Mt,e.useColumnOrder=Rt,e.useExpanded=se,e.useFilters=je,e.useFlexLayout=Ht,e.useGetLatest=h,e.useGlobalFilter=Re,e.useGridLayout=Xt,e.useGroupBy=Le,e.useMountedLayoutEffect=y,e.usePagination=Je,e.useResizeColumns=At,e.useRowSelect=mt,e.useRowState=_t,e.useSortBy=Ye,e.useTable=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e=oe(e),r=[q].concat(r);var l=h(t.useRef({}).current);Object.assign(l(),i({},e,{plugins:r,hooks:W()})),r.filter(Boolean).forEach((function(e){e(l().hooks)}));var s=h(l().hooks);l().getHooks=s,delete l().hooks,Object.assign(l(),p(s().useOptions,oe(e)));var u=l(),c=u.data,d=u.columns,m=u.initialState,g=u.defaultColumn,b=u.getSubRows,y=u.getRowId,w=u.stateReducer,C=u.useControlledState,R=h(w),T=t.useCallback((function(e,t){if(!t.type)throw console.info({action:t}),new Error("Unknown Action 👆");return[].concat(s().stateReducers,Array.isArray(R())?R():[R()]).reduce((function(n,r){return r(n,t,e,l())||n}),e)}),[s,R,l]),I=t.useReducer(T,void 0,(function(){return T(m,{type:a.init})})),O=I[0],A=I[1],V=p([].concat(s().useControlledState,[C]),O,{instance:l()});Object.assign(l(),{state:V,dispatch:A});var P=t.useMemo((function(){return E(p(s().columns,d,{instance:l()}))}),[s,l,d].concat(p(s().columnsDeps,[],{instance:l()})));l().columns=P;var L=t.useMemo((function(){return p(s().allColumns,S(P),{instance:l()}).map(_)}),[P,s,l].concat(p(s().allColumnsDeps,[],{instance:l()})));l().allColumns=L;var $=t.useMemo((function(){for(var e=[],t=[],n={},r=[].concat(L);r.length;){var i=r.shift();ae({data:c,rows:e,flatRows:t,rowsById:n,column:i,getRowId:y,getSubRows:b,accessValueHooks:s().accessValue,getInstance:l})}return[e,t,n]}),[L,c,y,b,s,l]),D=$[0],N=$[1],F=$[2];Object.assign(l(),{rows:D,initialRows:[].concat(D),flatRows:N,rowsById:F}),v(s().useInstanceAfterData,l());var z=t.useMemo((function(){return p(s().visibleColumns,L,{instance:l()}).map((function(e){return j(e,g)}))}),[s,L,l,g].concat(p(s().visibleColumnsDeps,[],{instance:l()})));L=t.useMemo((function(){var e=[].concat(z);return L.forEach((function(t){e.find((function(e){return e.id===t.id}))||e.push(t)})),e}),[L,z]),l().allColumns=L;var B=t.useMemo((function(){return p(s().headerGroups,k(z,g),l())}),[s,z,g,l].concat(p(s().headerGroupsDeps,[],{instance:l()})));l().headerGroups=B;var M=t.useMemo((function(){return B.length?B[0].headers:[]}),[B]);l().headers=M,l().flatHeaders=B.reduce((function(e,t){return[].concat(e,t.headers)}),[]),v(s().useInstanceBeforeDimensions,l());var H=z.filter((function(e){return e.isVisible})).map((function(e){return e.id})).sort().join("_");z=t.useMemo((function(){return z.filter((function(e){return e.isVisible}))}),[z,H]),l().visibleColumns=z;var U=le(M),G=U[0],Y=U[1],X=U[2];return l().totalColumnsMinWidth=G,l().totalColumnsWidth=Y,l().totalColumnsMaxWidth=X,v(s().useInstance,l()),[].concat(l().flatHeaders,l().allColumns).forEach((function(e){e.render=x(l(),e),e.getHeaderProps=f(s().getHeaderProps,{instance:l(),column:e}),e.getFooterProps=f(s().getFooterProps,{instance:l(),column:e})})),l().headerGroups=t.useMemo((function(){return B.filter((function(e,t){return e.headers=e.headers.filter((function(e){return e.headers?function e(t){return t.filter((function(t){return t.headers?e(t.headers):t.isVisible})).length}(e.headers):e.isVisible})),!!e.headers.length&&(e.getHeaderGroupProps=f(s().getHeaderGroupProps,{instance:l(),headerGroup:e,index:t}),e.getFooterGroupProps=f(s().getFooterGroupProps,{instance:l(),headerGroup:e,index:t}),!0)}))}),[B,l,s]),l().footerGroups=[].concat(l().headerGroups).reverse(),l().prepareRow=t.useCallback((function(e){e.getRowProps=f(s().getRowProps,{instance:l(),row:e}),e.allCells=L.map((function(t){var n=e.values[t.id],r={column:t,row:e,value:n};return r.getCellProps=f(s().getCellProps,{instance:l(),cell:r}),r.render=x(l(),t,{row:e,cell:r,value:n}),r})),e.cells=z.map((function(t){return e.allCells.find((function(e){return e.column.id===t.id}))})),v(s().prepareRow,e,{instance:l()})}),[s,l,L,z]),l().getTableProps=f(s().getTableProps,{instance:l()}),l().getTableBodyProps=f(s().getTableBodyProps,{instance:l()}),v(s().useFinalInstance,l()),l()},Object.defineProperty(e,"__esModule",{value:!0})}(Xl,t),Yl.exports=Xl;var Ql={};function Kl(){const{state:e,dispatch:t}=Jo(),n=e.offset/e.pagination+1;return r.jsx(_,{defaultCurrent:n,current:n,total:e.totalCount,defaultPageSize:e.pagination,onShowSizeChange:(e,n)=>{t({type:Yo.SET_PAGINATION,page:n})},showSizeChanger:!0,pageSizeOptions:tn.map((e=>e.toString())),onChange:(e,n)=>{t({type:Yo.SET_OFFSET,offset:(e-1)*(n??0)})}})}!function(e){function t(e){return"left"===e.sticky||"right"===e.sticky?e.sticky:e.parent?t(e.parent):null}function n(e,n){const r=n.findIndex((({id:t})=>t===e)),i=n[r],o=n[r+1],l="left"===t(i),a=o&&"left"===t(o);return l&&!a}function r(e,n){const r=n.findIndex((({id:t})=>t===e)),i=n[r],o=n[r-1],l="right"===t(i),a=o&&"right"===t(o);return l&&!a}function i(e,t){let n=0;for(let r=t.findIndex((({id:t})=>t===e))+1;r<t.length;r+=1)!1!==t[r].isVisible&&(n+=t[r].width);return n}Object.defineProperty(e,"__esModule",{value:!0}),e.checkErrors=e=>{const t=!!e.find((e=>e.parent)),n=e.filter((e=>e.sticky&&!e.parent)).map((({Header:e})=>`'${e}'`));if(t&&n.length)throw new Error(`WARNING react-table-sticky:\n      \nYour ReactTable has group and sticky columns outside groups, and that will break UI.\n      \nYou must place ${n.join(" and ")} columns into a group (even a group with an empty Header label)\n`);const r=e.find((e=>!e.sticky&&e.columns&&e.columns.find((e=>e.sticky))));if(!r)return;const i=r.columns.find((({sticky:e})=>e));if(i)throw new Error(`WARNING react-table-sticky:\n    \nYour ReactTable contain columns group with at least one child columns sticky.\n    \nWhen ReactTable has columns groups, only columns groups can be sticky\n    \nYou must set sticky: 'left' | 'right' for the '${r.Header}'\n    column, or remove the sticky property of '${i.Header}' column.`)},e.getStickyValue=t,e.columnIsLastLeftSticky=n,e.columnIsFirstRightSticky=r,e.getMarginRight=i;const o={position:"sticky",zIndex:3};function l(l,a){let s={};const u={};e.checkErrors(a.columns);const c=t(l);if(c){s=Object.assign({},o),u["data-sticky-td"]=!0;const e=function(e,t){return t.filter((t=>t.depth===e.depth))}(l,a.flatHeaders),t="left"===c?l.totalLeft:i(l.id,e);s=Object.assign(Object.assign({},s),{[c]:`${t}px`});n(l.id,e)&&(u["data-sticky-last-left-td"]=!0);r(l.id,e)&&(u["data-sticky-first-right-td"]=!0)}return Object.assign({style:s},u)}e.useSticky=e=>{e.getHeaderProps.push(((e,{instance:t,column:n})=>[e,l(n,t)])),e.getCellProps.push(((e,{instance:t,cell:n})=>[e,l(n.column,t)]))},e.useSticky.pluginName="useSticky"}(Ql);const Zl=g`
    ${Vt}
    mutation CREATE_RECORD($library: ID!, $data: CreateRecordDataInput) {
        createRecord(library: $library, data: $data) {
            record {
                ...RecordIdentity
            }
            valuesErrors {
                attributeId
                id_value
                input
                message
                type
            }
        }
    }
`,Jl=h`
    query GET_LIBRARY_PERMISSIONS($libraryId: [ID!]) {
        libraries(filters: {id: $libraryId}) {
            list {
                permissions {
                    access_library
                    access_record
                    create_record
                    edit_record
                    delete_record
                }
            }
        }
    }
`,ea=(e,t)=>{const n=!t,{loading:r,error:i,data:o}=y(nn,{variables:{type:Fr.record,applyTo:e.id,target:{recordId:t},actions:[zr.access_record,zr.create_record,zr.edit_record,zr.delete_record]},skip:n,fetchPolicy:"cache-and-network"}),{loading:l,error:a,data:s}=y(Jl,{variables:{libraryId:[e.id]},skip:!n,fetchPolicy:"cache-and-network"});if(i||a)return{loading:!1,canEdit:!1,isReadOnly:!0};const u=null==s?void 0:s.libraries.list[0],c=null==o?void 0:o.isAllowed.reduce(((e,t)=>(e[t.name]=t.allowed,e)),{});return{loading:r||l,canEdit:n?null==u?void 0:u.permissions.create_record:null==c?void 0:c.access_record,isReadOnly:n?!(null==u?void 0:u.permissions.create_record):!(null==c?void 0:c.edit_record)}},ta=g`
    ${Vt}
    ${Bo}

    fragment StandardValuesListFragment on StandardValuesListConf {
        ... on StandardStringValuesListConf {
            enable
            allowFreeEntry
            values
        }

        ... on StandardDateRangeValuesListConf {
            enable
            allowFreeEntry
            dateRangeValues: values {
                from
                to
            }
        }
    }

    query RECORD_FORM($libraryId: String!, $formId: String!, $recordId: String, $version: [ValueVersionInput!]) {
        recordForm(recordId: $recordId, libraryId: $libraryId, formId: $formId, version: $version) {
            id
            recordId
            library {
                id
            }
            dependencyAttributes {
                id
            }
            elements {
                id
                containerId
                uiElementType
                type
                valueError
                values {
                    id_value
                    created_at
                    modified_at
                    created_by {
                        ...RecordIdentity
                    }
                    modified_by {
                        ...RecordIdentity
                    }
                    metadata {
                        name
                        value {
                            id_value
                            value
                            raw_value
                        }
                    }

                    version {
                        ...ValuesVersionDetails
                    }

                    ... on Value {
                        value
                        raw_value
                    }

                    ... on LinkValue {
                        linkValue: value {
                            ...RecordIdentity
                        }
                    }

                    ... on TreeValue {
                        treeValue: value {
                            id
                            record {
                                ...RecordIdentity
                            }

                            ancestors {
                                record {
                                    ...RecordIdentity
                                }
                            }
                        }
                    }
                }
                attribute {
                    id
                    label
                    description
                    type
                    format
                    system
                    readonly
                    multiple_values
                    permissions(record: {id: $recordId, library: $libraryId}) {
                        access_attribute
                        edit_value
                    }
                    versions_conf {
                        versionable
                        profile {
                            id
                            trees {
                                id
                                label
                            }
                        }
                    }
                    metadata_fields {
                        id
                        label
                        description
                        type
                        format
                        system
                        readonly
                        multiple_values
                        permissions(record: {id: $recordId, library: $libraryId}) {
                            access_attribute
                            edit_value
                        }
                        values_list {
                            ...StandardValuesListFragment
                        }
                        metadata_fields {
                            id
                        }
                    }

                    ... on StandardAttribute {
                        values_list {
                            ...StandardValuesListFragment
                        }
                    }

                    ... on LinkAttribute {
                        linked_library {
                            id
                            label
                            behavior
                            gqlNames {
                                type
                                query
                            }
                            permissions {
                                create_record
                            }
                        }
                        linkValuesList: values_list {
                            enable
                            allowFreeEntry
                            values {
                                ...RecordIdentity
                            }
                        }
                    }

                    ... on TreeAttribute {
                        linked_tree {
                            id
                            label
                        }
                        treeValuesList: values_list {
                            enable
                            allowFreeEntry
                            values {
                                id
                                record {
                                    ...RecordIdentity
                                }
                                ancestors {
                                    record {
                                        ...RecordIdentity
                                    }
                                }
                            }
                        }
                    }
                }
                settings {
                    key
                    value
                }
            }
        }
    }
`,na=({libraryId:t,recordId:n,formId:r,version:i})=>{const[o,l]=e.useState(null),a=i?ct(i).filter((e=>!!e.value)).map((({name:e,value:t})=>({treeId:e,treeNodeId:t.id}))):null,{loading:s,error:u,refetch:c}=y(ta,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{libraryId:t,recordId:n,formId:r,version:a},onCompleted:e=>{const t={...e.recordForm,elements:e.recordForm.elements.map((e=>({...e,values:((null==e?void 0:e.values)??[]).map((e=>({...e,version:rn(e.version??[])})))})))};l(t)}});return{loading:s||!o&&!u,error:u,recordForm:o,refetch:()=>c({libraryId:t,recordId:n,formId:r,version:a})}},ra="records_consultation",ia=10;var oa=(e=>(e.SET_RECORD="SET_RECORD",e.SET_ACTIVE_VALUE="SET_ACTIVE_VALUE",e.SET_SIDEBAR_CONTENT="SET_SIDEBAR_CONTENT",e.SET_VALUES_VERSION="SET_VALUES_VERSION",e.SET_EDITING_VALUE="SET_CURRENT_VALUE_CONTENT",e.REQUEST_REFRESH="REQUEST_REFRESH",e.REFRESH_DONE="REFRESH_DONE",e.ADD_EXTERNAL_UPDATE="ADD_EXTERNAL_UPDATE",e.CLEAR_EXTERNAL_UPDATE="CLEAR_EXTERNAL_UPDATE",e))(oa||{});const la={record:null,libraryId:null,activeValue:null,sidebarContent:"summary",valuesVersion:null,originValuesVersion:null,refreshRequested:!1,externalUpdate:{modifiers:[],updatedValues:{}}},aa=(e,t)=>{var n,r,i,o;switch(t.type){case"SET_RECORD":return{...e,record:t.record};case"SET_ACTIVE_VALUE":return{...e,activeValue:t.value,sidebarContent:null!==t.value?"valueDetails":"summary"};case"SET_SIDEBAR_CONTENT":return{...e,sidebarContent:t.content};case"SET_VALUES_VERSION":return{...e,valuesVersion:t.valuesVersion};case"SET_CURRENT_VALUE_CONTENT":return{...e,activeValue:{...e.activeValue,editingValue:t.value}};case"REQUEST_REFRESH":return{...e,refreshRequested:!0};case"REFRESH_DONE":return{...e,refreshRequested:!1};case"ADD_EXTERNAL_UPDATE":const l={...e},a=(null==(n=e.externalUpdate)?void 0:n.modifiers.find((e=>e.id===t.modifier.id)))?(null==(r=l.externalUpdate)?void 0:r.modifiers)??[]:[...(null==(i=l.externalUpdate)?void 0:i.modifiers)??[],t.modifier],s=t.updatedValues.reduce(((e,t)=>{var n;return{...e,[t.attribute]:[...(null==(n=l.externalUpdate)?void 0:n[t.attribute])??[],t.value]}}),{});return l.externalUpdate={modifiers:a,updatedValues:{...(null==(o=e.externalUpdate)?void 0:o.updatedValues)??{},...s}},l;case"CLEAR_EXTERNAL_UPDATE":return{...e,externalUpdate:{...la.externalUpdate}};default:return e}},sa=e.createContext({state:la,dispatch:()=>la}),ua=()=>t.useContext(sa);function ca({rows:e}){const t=Array(e).fill("").map(((e,t)=>t));return r.jsx(r.Fragment,{children:t.map((e=>r.jsxs("div",{"data-testid":"edit-record-skeleton",children:[r.jsx(k.Input,{active:!0,size:"large",style:{width:100,margin:"0 .5rem"}}),r.jsx(k.Input,{active:!0,size:"large",style:{width:450,margin:"0 .5rem"}}),r.jsx(C,{})]},e)))})}const da=t.createContext({elements:{},readOnly:!1,record:null}),fa=()=>t.useContext(da);const pa=Yr(A)`
    && {
        padding: 1rem;
        border: 1px solid ${I.borderLightColor};
        margin: 1rem 0;
        border-radius: 3px;
        overflow: visible;
    }
`;const va=t.createContext({}),ma=Yr.div`
    position: fixed;
    z-index: 1;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: rgba(0, 0, 0, 0.2);
`;function ga({onClick:e}){return r.jsx(ma,{"data-testid":"dimmer",onClick:()=>e()})}const ha=Yr.div`
    color: ${I.errorColor};
    font-weight: bold;
`,ba=Yr.ul`
    list-style: none;
`;function ya({error:e,onClose:t}){const n=Array.isArray(e)?r.jsx(ba,{children:e.map(((e,t)=>r.jsx("li",{children:e},t)))}):e;return r.jsx(ha,{children:r.jsxs(V,{size:"small",align:"start",children:[r.jsx(P,{}),n,r.jsx(Mr,{onClick:t,size:"small",icon:r.jsx(L,{}),style:{border:"none"}})]})})}const xa=e=>e.reduce(((e,t,n)=>(n&&e.push({operator:Nr.OR}),e.push({field:"id",condition:Dr.EQUAL,value:t}),e)),[]),wa=(e,n,r)=>{const[i,o]=t.useState(),l=t=>{var n;return((null==(n=t[e])?void 0:n.list)??[]).reduce(((e,t)=>(e[t._id]=t,e)),{})},a=y(((e,t)=>Bt`
    ${t.length?Vt:""}

    query RECORD_COLUMNS_VALUES_${e}($filters: [RecordFilterInput]) {
        ${e}(filters: $filters) {
            list {
                _id: id
                ${t.length?t.map((e=>(e=>`\n    ${e}: property(attribute: "${e}") {\n        ...on Value {\n            value\n        }\n\n        ...on LinkValue {\n            linkValue: value {\n                ...RecordIdentity\n            }\n        }\n\n        ...on TreeValue {\n            treeValue: value {\n                record {\n                    ...RecordIdentity\n                }\n            }\n        }\n    }\n`)(e))).join("\n"):""}
            }
        }
    }`)(e,n),{variables:{filters:xa(r)},skip:!e||!n.length||!r.length,onCompleted:e=>{const t=l(e);o(t)}});return{...a,loading:a.loading||void 0===typeof i,data:i,refetch:async e=>{const t={filters:xa(e??[])},n=await a.refetch(t),r=l(n.data);return o({...i,...r}),n}}},Ea=g`
    query NOOP {
        __typename
    }
`,Sa=e=>`\n    ${e.attributeId}: property(attribute: "${e.attributeId}") {\n        id_value\n        created_at\n        modified_at\n        version {\n            ...ValuesVersionDetails\n        }\n        created_by {\n            ...RecordIdentity\n        }\n        modified_by {\n            ...RecordIdentity\n        }\n\n        ...on Value {\n            value\n            raw_value\n        }\n\n        ...on LinkValue {\n            linkValue: value {\n                ...RecordIdentity\n\n                ${(e=>e.linkedLibrary?`... on ${rt(e.linkedLibrary.id)} {\n            ${e.linkedAttributes.length?e.linkedAttributes.join(" "):"id"}\n        }`:"")(e)}\n\n            }\n        }\n\n        ...on TreeValue {\n            treeValue: value {\n                record {\n                    ...RecordIdentity\n                }\n\n                ancestors {\n                    record {\n                        ...RecordIdentity\n                    }\n                }\n            }\n        }\n    }\n`,_a=(e,t,n)=>{const r=pt(e),[i]=b((l=[{attributeId:t}],(o=r)?Bt`
        ${Vt}
        ${Bo}

        query RECORD_PROPERTIES_${o}($recordId: String, $version: [ValueVersionInput!]) {
            ${o}(
                filters: [{field: "id", condition: ${Dr.EQUAL}, value: $recordId}],
                version: $version
            ) {
                list {
                    _id: id
                    ${l.length?l.map((e=>Sa(e))).join("\n"):""}
                }
            }
        }
    `:Ea),{fetchPolicy:"network-only"});var o,l;return{fetchValues:async e=>{const o=await i({variables:{recordId:n,version:e?ct(e).map((e=>({treeId:e.name,treeNodeId:e.value.id}))):null}});return o.data[r].list.length?o.data[r].list[0][t].map((e=>({...e,version:rn(e.version??[])}))):null}}},ja=e=>e.values[e.activeScope].values,ka=(e,t)=>{var n;if(e===t)return!0;if(!e||!t)return!1;for(const r of Object.keys(t))if((null==(n=null==e?void 0:e[r])?void 0:n.id)!==t[r].id)return!1;return!0};var Ca=(e=>(e.SUCCESS="SUCCESS",e.ERROR="ERROR",e.PARTIAL="PARTIAL",e))(Ca||{}),Ra=(e=>(e.INHERITED="INHERITED",e.CURRENT="CURRENT",e))(Ra||{}),Ta=(e=>(e.ADD_VALUES="ADD_VALUES",e.DELETE_VALUE="DELETE_VALUE",e.DELETE_ALL_VALUES="DELETE_ALL_VALUES",e.SET_ERROR_MESSAGE="SET_ERROR_MESSAGE",e.CLEAR_ERROR_MESSAGE="CLEAR_ERROR_MESSAGE",e.SET_IS_VALUES_ADD_VISIBLE="SET_IS_VALUES_ADD_VISIBLE",e.CHANGE_ACTIVE_SCOPE="CHANGE_ACTIVE_SCOPE",e.REFRESH_VALUES="REFRESH_VALUES",e))(Ta||{});const Ia={record:null,formElement:null,attribute:null,isReadOnly:!1,activeScope:Ra.CURRENT,values:{[Ra.CURRENT]:{version:null,values:[]},[Ra.INHERITED]:null},errorMessage:"",isValuesAddVisible:!1},Oa=e=>{var t,n,r,i;const{attribute:o,values:l,formVersion:a}=e,s=(null==(t=null==o?void 0:o.versions_conf)?void 0:t.versionable)?o.versions_conf.profile.trees.reduce(((e,t)=>((null==a?void 0:a[t.id])&&(e[t.id]=a[t.id]),e)),{}):null,u=!!(null==(n=null==o?void 0:o.versions_conf)?void 0:n.versionable)&&!ka(s,(null==(r=null==l?void 0:l[0])?void 0:r.version)??s),c=u?null==(i=null==l?void 0:l[0])?void 0:i.version:null;return{activeScope:u?Ra.INHERITED:Ra.CURRENT,values:{[Ra.CURRENT]:{version:s??null,values:u?[]:l},[Ra.INHERITED]:u?{version:c??null,values:l}:null}}},Aa=e=>{const{element:t,record:n,isRecordReadOnly:r,formVersion:i}=e,o=t.attribute,l=t.values??[];return{...Ia,attribute:o,record:n,formElement:t,isReadOnly:(null==o?void 0:o.readonly)||r||!o.permissions.edit_value,...Oa({attribute:o,values:l,formVersion:i})}},Va=(e,t)=>{switch(t.type){case"ADD_VALUES":{const n=[...e.values[e.activeScope].values,...t.values];return{...e,values:{...e.values,[e.activeScope]:{...e.values[e.activeScope],values:n}}}}case"DELETE_VALUE":{const n=ja(e).filter((e=>e.id_value!==t.idValue));return{...e,values:{...e.values,[e.activeScope]:{...e.values[e.activeScope],values:n}}}}case"DELETE_ALL_VALUES":return{...e,values:{...e.values,[e.activeScope]:{...e.values[e.activeScope],values:[]}}};case"SET_ERROR_MESSAGE":return{...e,errorMessage:t.errorMessage};case"CLEAR_ERROR_MESSAGE":return{...e,errorMessage:""};case"SET_IS_VALUES_ADD_VISIBLE":return{...e,isValuesAddVisible:t.isValuesAddVisible};case"CHANGE_ACTIVE_SCOPE":return{...e,activeScope:t.scope};case"REFRESH_VALUES":return{...e,...Oa({attribute:e.formElement.attribute,values:t.values,formVersion:e.values[Ra.CURRENT].version})};default:return e}};function Pa({bordered:e=!1,linkField:t=!1,activeScope:n,...o}){const{t:l}=i();return r.jsxs($,{bordered:e,...o,style:{color:n===Ra.INHERITED?I.inheritedValuesVersionColor:I.defaultTextColor},children:[r.jsx(D,{}),l(t?"record_edition.add_value_link":"record_edition.add_value")]})}function La({onDelete:e}){const{t:n}=i(),[o,l]=t.useState(!1);return r.jsx(N,{placement:"leftTop",title:n("record_edition.delete_all_values_confirm"),onConfirm:async()=>{l(!0),await e(),l(!1)},okText:n("global.submit"),okButtonProps:{"aria-label":"delete-confirm-button"},cancelText:n("global.cancel"),children:r.jsx(r.Fragment,{children:r.jsx(vt,{title:n("record_edition.delete_all_values"),children:r.jsx($,{"aria-label":"delete-all-values",icon:r.jsx(ln,{}),shape:"circle",loading:o})})})})}const $a=Yr.div`
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-direction: row-reverse;
    padding: 0.25rem;
    background: ${I.lightBg};
    border-radius: ${e=>e.$themeToken.borderRadius}px;
    border-top-left-radius: 0;
    border-top-right-radius: 0;

    ${e=>e.$bordered?`border: 1px solid ${I.borderColor};`:""}

    ${e=>e.style}
`;function Da({children:e,bordered:t,style:n}){const{token:i}=F.useToken();return r.jsx($a,{style:n,$bordered:t,$themeToken:i,children:e})}const Na=Yr.span`
    font-style: italic;
    font-size: 0.9em;

    ::before {
        content: ' - ';
    }
`;function Fa({version:e}){const{t:t}=i(),n=an(e);return r.jsxs(Na,{children:[t("values_version.inherited_from"),": ",n]})}const za=Yr.div`
    font-size: 1.1em;

    span {
        margin-left: 0.5em;
    }
`,Ba=Yr(Mr)`
    && {
        border: none;
        width: 100%;
        color: rgba(0, 0, 0, 0.25);
        box-shadow: none;
    }

    &&:hover {
        border: none;
    }
`;function Ma({canAddValue:e,onAddValue:t,linkField:n=!1}){const{t:o}=i();return r.jsx(za,{onClick:t,children:e?r.jsxs(Ba,{onClick:t,size:"small",children:[r.jsx(Zi,{}),r.jsx("span",{children:o(n?"record_edition.add_value_link":"record_edition.add_value")})]}):r.jsxs(r.Fragment,{children:[r.jsx(sn,{}),r.jsx("span",{children:o("record_edition.no_value")})]})})}function Ha(){const{t:e}=i();return r.jsx(vt,{title:e("record_edition.field_external_update"),children:r.jsx(P,{style:{marginLeft:"5px",fontSize:"0.9em"}})})}function Ua({value:e,attribute:t,basic:n=!1,...o}){const{dispatch:l}=ua(),{t:a}=i(),s=()=>{const n=cn(t.type)?null==e?void 0:e.value:null;l({type:oa.SET_ACTIVE_VALUE,value:{value:e,editingValue:n,attribute:t}})},u=n?r.jsx($,{shape:"circle",...o,icon:r.jsx(un,{}),onClick:s}):r.jsx(Mr,{shape:"circle",...o,icon:r.jsx(go,{}),onClick:s});return r.jsx(vt,{title:a("record_edition.value_details_tooltip"),children:u})}var Ga={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Wa=e.createContext&&e.createContext(Ga),qa=globalThis&&globalThis.__assign||function(){return qa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},qa.apply(this,arguments)},Ya=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Xa(t){return t&&t.map((function(t,n){return e.createElement(t.tag,qa({key:n},t.attr),Xa(t.child))}))}function Qa(t){return function(n){return e.createElement(Ka,qa({attr:qa({},t.attr)},n),Xa(t.child))}}function Ka(t){var n=function(n){var r,i=t.attr,o=t.size,l=t.title,a=Ya(t,["attr","size","title"]),s=o||n.size||"1em";return n.className&&(r=n.className),t.className&&(r=(r?r+" ":"")+t.className),e.createElement("svg",qa({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:r,style:qa(qa({color:t.color||n.color},n.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),l&&e.createElement("title",null,l),t.children)};return void 0!==Wa?e.createElement(Wa.Consumer,null,(function(e){return n(e)})):n(Ga)}function Za(e){return Qa({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8.18535 1.08325L7.62706 1.08717L1.71796 5.12422L1.72152 5.95233L7.63062 9.91528L8.1818 9.91912L14.2727 5.95617L14.2762 5.1203L8.18535 1.08325ZM2.89198 5.53323L7.91335 2.10268L13.0891 5.5332L7.91329 8.90079L2.89198 5.53323ZM7.63059 12.4153L1.79257 8.5H3.58794L7.91326 11.4008L12.3716 8.5H14.2053L13.4056 9.02031C13.2722 9.00688 13.1369 9 13 9C11.224 9 9.71839 10.1574 9.19622 11.7591L8.18177 12.4191L7.63059 12.4153ZM9.00447 13.1908L7.91326 13.9008L3.58794 11H1.79257L7.63059 14.9153L8.18177 14.9191L9.20113 14.2559C9.08965 13.9185 9.02187 13.5612 9.00447 13.1908Z"}},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3333 10.5056C11.8266 10.1759 12.4067 10 13 10C13.7954 10.001 14.5578 10.3174 15.1202 10.8798C15.6826 11.4422 15.999 12.2046 16 13C16 13.5933 15.8241 14.1734 15.4944 14.6667C15.1648 15.1601 14.6962 15.5446 14.1481 15.7716C13.5999 15.9987 12.9967 16.0581 12.4147 15.9424C11.8328 15.8266 11.2982 15.5409 10.8787 15.1213C10.4591 14.7018 10.1734 14.1672 10.0576 13.5853C9.94189 13.0033 10.0013 12.4001 10.2284 11.8519C10.4554 11.3038 10.8399 10.8352 11.3333 10.5056ZM13.0315 14.3226L14.8213 11.9363L14.0213 11.3363L12.541 13.3099L11.6655 12.6095L11.0408 13.3903L12.3192 14.413L13.0315 14.3226Z"}}]})(e)}function Ja(e){return Qa({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M7.62706 1.08717L8.18535 1.08325L14.2762 5.1203L14.2727 5.95617L8.1818 9.91912L7.63062 9.91528L1.72152 5.95233L1.71796 5.12422L7.62706 1.08717ZM7.91335 2.10268L2.89198 5.53323L7.91329 8.90079L13.0891 5.5332L7.91335 2.10268ZM1.79257 8.5L7.63059 12.4153L8.18177 12.4191L14.2053 8.5H12.3716L7.91326 11.4008L3.58794 8.5H1.79257ZM7.63059 14.9153L1.79257 11H3.58794L7.91326 13.9008L12.3716 11H14.2053L8.18177 14.9191L7.63059 14.9153Z"}}]})(e)}function es({versions:e,activeScope:t,onScopeChange:n,basic:o,...l}){const{t:a}=i(),s=!!e[Ra.INHERITED],u=e=>{e.domEvent.preventDefault(),e.domEvent.stopPropagation(),n(e.key)},c=an(e[Ra.CURRENT]),d={size:"1.8em",style:{paddingTop:"5px"}},f=t===Ra.CURRENT?r.jsx(Za,{...d}):r.jsx(Ja,{...d}),p=[{key:Ra.CURRENT,label:r.jsxs(V,{style:{paddingLeft:s?"1rem":0},children:[f,c]}),onClick:u}];if(s){const n=an(e[Ra.INHERITED])+` (${a("values_version.inherited_value")})`,i={size:"1.8em",style:{paddingTop:"5px",color:I.inheritedValuesVersionColor}},o=t===Ra.INHERITED?r.jsx(Za,{...i}):r.jsx(Ja,{...i});p.unshift({key:Ra.INHERITED,label:r.jsxs(V,{children:[o,n]}),onClick:u})}const v=r.jsx(Ja,{size:"1.35em",style:{paddingTop:"3px"}}),m=o?r.jsx($,{"aria-label":"values-version",shape:"circle",...l,icon:v,centered:!0}):r.jsx(Mr,{"aria-label":"values-version",shape:"circle",...l,icon:v});return r.jsx(z,{trigger:["click"],menu:{items:p,activeKey:t},overlayStyle:{zIndex:1e3},children:m})}const ts=Yr.div`
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    background: ${e=>e.$isCurrentVersion?"none":I.inheritedValuesVersionColor};
    width: 6px;
    z-index: 100;
    border-radius: ${e=>e.$themeToken.borderRadius}px;;

    .first-value & {
        border-top-left-radius: ${e=>e.$themeToken.borderRadius}}
    }

    ${e=>e.$style}

    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
`;function ns({activeScope:e,style:t}){const n=e===Ra.CURRENT,{token:i}=F.useToken();return r.jsx(ts,{$isCurrentVersion:n,$style:t,$themeToken:i})}function rs({onDelete:e,...t}){const{t:n}=i();return r.jsx(N,{placement:"leftTop",title:n("record_edition.delete_value_confirm"),onConfirm:()=>e(),okText:n("global.submit"),okButtonProps:{"aria-label":"delete-confirm-button"},cancelText:n("global.cancel"),children:r.jsx(Mr,{shape:"circle",...t,icon:r.jsx(ln,{}),style:{background:"#FFF"},danger:!0,"aria-label":"delete-value",onClick:e=>e.stopPropagation(),className:"delete-value-button"})})}function is({record:e,valuesVersion:n,...i}){const[o,l]=t.useState();return r.jsxs(r.Fragment,{children:[r.jsx(Mr,{"aria-label":"edit-record",shape:"circle",...i,icon:r.jsx(Ei,{size:48}),onClick:e=>{e.stopPropagation(),e.preventDefault(),l(!0)}}),o&&r.jsx(Yy,{open:o,record:e,library:e.library.id,onClose:()=>{l(!1)},valuesVersion:n})]})}function os({record:e,onDelete:t,value:n,attribute:o,isReadOnly:l,children:a}){const{t:s}=i(),u=()=>t(e),c=[{title:s("global.edit"),button:r.jsx(is,{record:e,shape:"circle"})},{title:s("record_edition.value_details"),button:r.jsx(Ua,{value:n,attribute:o})}];return l||c.push({title:s("global.delete"),button:r.jsx(rs,{onDelete:u})}),r.jsxs("div",{children:[a,r.jsx(B,{actions:c})]})}const ls=h`
    ${Vt}
    query TREE_NODE_CHILDREN($treeId: ID!, $node: ID, $pagination: Pagination) {
        treeNodeChildren(treeId: $treeId, node: $node, pagination: $pagination) {
            totalCount
            list {
                id
                childrenCount
                record {
                    ...RecordIdentity
                    active
                }
                permissions {
                    access_tree
                    detach
                    edit_children
                }
            }
        }
    }
`,as=e=>e.map((e=>({record:e.record,title:e.record.whoAmI.label||e.record.whoAmI.id,id:e.id,key:e.id,isLeaf:!e.childrenCount,children:[]})));function ss({tree:e,onSelect:n,onCheck:o,selectedNode:l,multiple:a=!1,canSelectRoot:s=!1,selectableLibraries:u}){const{lang:c}=O(),{t:d}=i(),f={title:Gt(e.label,c)||e.id,record:null,id:e.id,key:e.id,isLeaf:!1,paginationOffset:0,children:[]},[p,v]=t.useState({[e.id]:f}),[m,g]=t.useState(l),[h,y]=t.useState(),[x,{error:w,called:E}]=b(ls),S=async(t,n=0)=>{try{const r=await x({variables:{treeId:e.id,node:t&&t!==e.id?t:null,pagination:{limit:fn,offset:n}}}),i=as(r.data.treeNodeChildren.list),o=t??e.id,l={...p},a=r.data.treeNodeChildren.totalCount,s=l[o],u="__showMore"+o+n;s.children=s.children.filter((e=>!e.key.match(`__showMore${o}`)));for(const e of i){const t={...e,paginationOffset:0};l[t.key]=t,s.paginationOffset=n,s.children.push(t)}if(a>s.paginationOffset+fn){const e={id:o,key:u,record:null,title:d("tree-node-selection.show_more"),isLeaf:!1,paginationOffset:0,isShowMore:!0,selectable:!1,children:[]};s.children.push(e)}v(l),y(null)}catch(r){y(r.message)}};t.useEffect((()=>{g(l)}),[l]),t.useEffect((()=>{S()}),[]);return E?w||h?r.jsx(M,{message:(null==w?void 0:w.message)??h}):r.jsx(H,{defaultExpandedKeys:[e.id],multiple:a,selectable:!0,selectedKeys:[m],onSelect:(t,r)=>{const i=p[r.node.key],o=i.id===e.id;!s&&o||!o&&void 0!==u&&-1===u.indexOf(i.record.whoAmI.library.id)||i&&n(i,r.selected)},onCheck:e=>{const t=("object"==typeof e?e.checked:e).map((e=>p[e]));o(t)},treeData:[p[f.key]],loadData:async t=>{var n,r;const{id:i,isShowMore:o}=t,l=(null==(n=p[i])?void 0:n.paginationOffset)??0,a=o?((null==(r=p[i])?void 0:r.paginationOffset)??0)+fn:l;(i!==e.id||o)&&await S(String(i),a)},checkStrictly:!0,checkable:a,showLine:{showLeafIcon:!1},switcherIcon:r.jsx(dn,{"aria-label":"toggle-children"})}):r.jsx(mt,{})}const us=h`
    query GET_TREE_LIBRARIES($treeId: [ID!], $library: String) {
        trees(filters: {id: $treeId, library: $library}) {
            totalCount
            list {
                id
                behavior
                system
                libraries {
                    library {
                        id
                        label
                        behavior
                        system
                    }
                    settings {
                        allowMultiplePositions
                        allowedChildren
                        allowedAtRoot
                    }
                }
            }
        }
    }
`,cs=h`
    query DOES_FILE_EXIST_AS_CHILD($parentNode: ID, $treeId: ID!, $filename: String!) {
        doesFileExistAsChild(parentNode: $parentNode, treeId: $treeId, filename: $filename)
    }
`,ds=h`
    ${Vt}
    mutation CREATE_DIRECTORY($library: String!, $nodeId: String!, $name: String!) {
        createDirectory(library: $library, nodeId: $nodeId, name: $name) {
            ...RecordIdentity
        }
    }
`,{warning:fs}=G;function ps({defaultSelectedKey:e,libraryId:n,onCompleted:o,onClose:l}){const{t:a}=i(),{token:s}=F.useToken(),[u,c]=t.useState(e);Pt();const[d,f]=t.useState(),[p,v]=t.useState("wait"),[m,g]=t.useState(e?1:0),[h,x]=t.useState(),[w]=b(cs,{fetchPolicy:"no-cache"}),E=async(e,t)=>(await w({variables:{treeId:h,parentNode:e!==h?e:null,filename:t}})).data.doesFileExistAsChild;y(us,{variables:{library:n},onCompleted:e=>{const t=e.trees.list.filter((e=>e.system&&e.behavior===Hr.files))[0];x(t.id)}});const[S,{loading:_}]=j(ds,{fetchPolicy:"no-cache",onCompleted:e=>{void 0!==o&&o(e),v("finish")},onError:e=>{v("error")}}),k=()=>{f(""),l()},C=()=>{fs({className:"warning-duplicate-modal",closable:!0,open:!0,title:a("create_directory.duplicate_modal.title"),okText:a("global.ok"),content:r.jsx("p",{children:a("create_directory.duplicate_modal.message",{directoryName:d})})})},R=[{title:a("create_directory.select_path_step_title"),content:r.jsx("div",{"data-testid":"select-tree-node",style:{borderRadius:s.borderRadiusLG,border:`1px dashed ${s.colorBorder}`},children:h&&n&&r.jsx(ss,{tree:{id:h},onSelect:async(e,t)=>{const n=t?e:void 0;d&&n&&await E(null==n?void 0:n.id,d)?C():c(null==n?void 0:n.key)},selectedNode:u,canSelectRoot:!0,selectableLibraries:[n]})})},{title:a("create_directory.choose_name_step_title"),content:r.jsx(U,{"data-testid":"directory-name-input",placeholder:a("create_directory.directory_name"),value:d,onChange:e=>f(e.target.value)})}],T=R.map((e=>({key:e.title,title:e.title})));return r.jsxs(G,{"data-testid":"create-directory-modal",title:a("create_directory.title"),open:!0,width:"70rem",onCancel:k,footer:r.jsxs("div",{style:{marginTop:50},children:[m>0&&r.jsx(Mr,{"data-testid":"prev-btn",onClick:()=>{g(m-1)},children:a("create_directory.previous")}),m<R.length-1&&r.jsx(Mr,{"data-testid":"next-btn",disabled:!u,type:"primary",onClick:()=>{g(m+1)},children:a("create_directory.next")}),m>0&&r.jsx(Mr,{"data-testid":"create-btn",loading:_,disabled:!d,className:"submit-btn",title:"Create",type:"primary",onClick:async()=>{await E(u,d)?C():(v("process"),await S({variables:{library:n,nodeId:u,name:d}}),k())},children:a("create_directory.create_step_title")})]}),children:[r.jsx(W,{status:p,current:m,items:T}),r.jsx("div",{style:{lineHeight:"260px",textAlign:"center",marginTop:16},children:R[m].content})]})}const vs=(e=0)=>`\n        embedded_fields {\n            id\n            format\n            label\n            ${e>0?vs(e-1):""}\n        }\n    `,ms=e=>Bt`
    query GET_LIBRARY_DETAIL_EXTENDED($libId: [ID!]) {
        libraries(filters: {id: $libId}) {
            list {
                id
                system
                label
                behavior
                linkedTrees {
                    id
                    label
                    permissions {
                        access_tree
                    }
                }
                attributes {
                    type
                    format
                    label
                    multiple_values
                    system
                    readonly
                    ... on StandardAttribute {
                        id
                        ${vs(e)}
                    }
                    ... on LinkAttribute {
                        id
                        linked_library {
                            id
                            label
                            attributes {
                                type
                                format
                                label
                                multiple_values
                                system
                                readonly
                                ... on StandardAttribute {
                                    id
                                    ${vs(e)}
                                }
                                ... on LinkAttribute {
                                    id
                                }
                                ... on TreeAttribute {
                                    id
                                    linked_tree {
                                        id
                                        label
                                    }
                                }
                            }
                            __typename
                        }
                        __typename
                    }
                    ... on TreeAttribute {
                        id
                        linked_tree {
                            id
                            label
                            libraries {
                                library {
                                    id
                                    label
                                    attributes {
                                        id
                                        type
                                        format
                                        label
                                        multiple_values
                                        system
                                        readonly
                                        ... on StandardAttribute {
                                            id
                                            ${vs(e)}
                                        }
                                        ... on LinkAttribute {
                                            id
                                        }
                                        ... on TreeAttribute {
                                            id
                                            linked_tree {
                                                id
                                                label
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                gqlNames {
                    query
                    type
                    filter
                    searchableFields
                }
                defaultView {
                    id
                    description
                    label
                    display {
                        size
                        type
                    }
                    shared
                    filters {
                        field
                        value
                        condition
                        operator
                    }
                    color
                    sort {
                        field
                        order
                    }
                    settings {
                        name
                        value
                    }
                }
                permissions {
                    access_library
                    access_record
                    create_record
                    edit_record
                    delete_record
                }
            }
        }
    }
`,gs=100;function hs({library:e}){return y(ms(gs),{variables:{libId:[e]},skip:!e})}const bs=Yr.div`
    position: relative;
`;function ys({visible:e,setVisible:t,submitAction:n,libId:o}){var l,a;const{t:s}=i(),{selectionState:u}=pn((e=>({selectionState:e.selection}))),c=vn(),d=()=>{c(mn()),t(!1)},f=()=>{n(u.searchSelection),d()},p=t=>r.jsx(G,{open:e,onCancel:d,width:"95vw",bodyStyle:{height:"90vh",overflow:"hidden"},style:{top:"1rem"},onOk:f,okText:s("global.apply"),cancelText:s("global.cancel"),children:t}),{loading:v,data:m,error:g}=hs({library:o});return v?p(r.jsx(Y,{})):g?p(r.jsx(M,{message:g.message})):(null==(a=null==(l=null==m?void 0:m.libraries)?void 0:l.list)?void 0:a.length)?m.libraries.list[0].permissions.access_library?p(r.jsx(bs,{children:r.jsx(nk,{selectionMode:!0,library:m.libraries.list[0],style:{height:"calc(100vh - 11rem)"}})})):r.jsx(M,{type:q.PERMISSION_ERROR,showActionButton:!1}):p(r.jsx(M,{message:s("lib_detail.not_found",{libraryId:o})}))}const xs=e=>e?Bt`
    ${Vt}
    query GET_DIRECTORY_DATA($directoryId: String!) {
        ${gt(e).query}(
            filters: [{field: "id", value: $directoryId, condition: EQUAL}])
        {
            list {
                ...RecordIdentity
                created_at
                created_by {
                    ...RecordIdentity
                }
                modified_at
                modified_by {
                    ...RecordIdentity
                }
                file_name
                file_path
                library {
                    behavior
                }
            }
        }
    }`:Ea,ws=g`
    subscription SUB_UPLOAD_UPDATE($filters: UploadFiltersInput) {
        upload(filters: $filters) {
            userId
            progress {
                length
                transferred
                speed
                runtime
                remaining
                percentage
                eta
                delta
            }
            uid
        }
    }
`;let Es;const Ss=new Uint8Array(16);function _s(){if(!Es&&(Es="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Es))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Es(Ss)}const js=[];for(let rk=0;rk<256;++rk)js.push((rk+256).toString(16).slice(1));const ks={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Cs(e,t,n){if(ks.randomUUID&&!t&&!e)return ks.randomUUID();const r=(e=e||{}).random||(e.rng||_s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(js[e[t+0]]+js[e[t+1]]+js[e[t+2]]+js[e[t+3]]+"-"+js[e[t+4]]+js[e[t+5]]+"-"+js[e[t+6]]+js[e[t+7]]+"-"+js[e[t+8]]+js[e[t+9]]+"-"+js[e[t+10]]+js[e[t+11]]+js[e[t+12]]+js[e[t+13]]+js[e[t+14]]+js[e[t+15]]).toLowerCase()}(r)}const Rs=h`
    ${Vt}
    mutation UPLOAD($library: String!, $nodeId: String!, $files: [FileInput!]!) {
        upload(library: $library, nodeId: $nodeId, files: $files) {
            uid
            record {
                ...RecordIdentity
            }
        }
    }
`,{confirm:Ts}=G;function Is({defaultSelectedNode:e,libraryId:n,multiple:o=!1,onCompleted:l,onClose:a}){const{t:s}=i(),{token:u}=F.useToken(),[c,d]=t.useState(e),[f,p]=t.useState(),[v,m]=t.useState([]),[g]=Pt(),[h,x]=t.useState("process"),[w,E]=t.useState(e?1:0),[S,_]=t.useState(),[k,T]=t.useState(),[I,O]=t.useState(),[A,{loading:P}]=j(Rs,{fetchPolicy:"no-cache",onCompleted:e=>{void 0!==l&&l(e),x("finish")},onError:e=>{x("error"),O(e.message)}});y(xs(k),{skip:!k||!(null==c?void 0:c.recordId),onCompleted:e=>{const t=e[gt(k).query].list[0];p({path:t.file_path,name:t.file_name})},variables:{directoryId:null==c?void 0:c.recordId}});const L={name:"files",multiple:o,maxCount:o?99999:1,showUploadList:!0,fileList:v,disabled:"process"!==h||P,beforeUpload:async e=>(e.uid=Cs(),m((t=>t.concat([e]))),!1),onRemove:e=>{const t=v.filter((t=>t.uid!==e.uid));m(t)},iconRender:e=>"uploading"===e.status?r.jsx(Q,{}):"done"===e.status?r.jsx(Di,{twoToneColor:u.colorSuccess}):r.jsx(sn,{}),progress:{showInfo:!0,strokeWidth:2}},[$]=b(cs,{fetchPolicy:"no-cache"});y(us,{variables:{library:n},onCompleted:e=>{var t;const n=e.trees.list.filter((e=>e.system&&e.behavior===Hr.files))[0];_(n.id);const r=null==(t=n.libraries.filter((e=>e.library.behavior===Ur.directories))[0])?void 0:t.library.id;T(r)}}),Ht(ws,{variables:{filters:{userId:null==g?void 0:g.userId}},skip:!(null==g?void 0:g.userId),onData:e=>{const t=e.data.data.upload;m((e=>e.map((e=>(e.uid===t.uid&&(e.percent=t.progress.percentage,e.status=100===t.progress.percentage?"done":"uploading"),e)))))}});const D=()=>{m([]),a()},N=()=>{E(w+1)},z=r.jsxs(ht.Dragger,{"data-testid":"dragger",...L,children:[r.jsx("p",{className:"ant-upload-drag-icon",children:r.jsx(Xr,{})}),r.jsx("p",{className:"ant-upload-text",children:s("upload.dragger_content")})]}),B="finish"===h||"error"===h,M=async e=>new Promise((t=>{let n=!1;Ts({className:"confirm-replace-modal",closable:!0,open:!0,title:s("upload.replace_modal.title"),content:r.jsx("p",{children:s("upload.replace_modal.message",{filename:e})}),footer:r.jsx(R,{justify:"end",children:r.jsxs(V,{children:[r.jsx(K,{onChange:e=>{n=e.target.checked},children:s("upload.replace_modal.applyToAll")}),r.jsx(Mr,{onClick:()=>t({replace:!1,applyToAll:n}),children:s("upload.replace_modal.keepBtn")},"keepBtn"),r.jsx(Mr,{type:"primary",onClick:()=>t({replace:!0,applyToAll:n}),children:s("upload.replace_modal.replaceBtn")},"replaceBtn")]})})})})),H=()=>{const e=c?f?`${null==f?void 0:f.path}/${null==f?void 0:f.name}`.replace("./",""):S:s("upload.select_path_step_title");return r.jsx(vt,{title:e,children:(null==e?void 0:e.length)>30?`${e.slice(0,30)}...`:e})},U=[{title:r.jsx(H,{}),content:r.jsx("div",{"data-testid":"select-tree-node",style:{borderRadius:u.borderRadiusLG,border:`1px dashed ${u.colorBorder}`},children:S&&k&&r.jsx(ss,{tree:{id:S},onSelect:async(e,t)=>{var n;const r=t?{id:e.id,recordId:null==(n=e.record)?void 0:n.id}:void 0;d(r),(null==r?void 0:r.recordId)||p(null)},selectedNode:null==c?void 0:c.id,canSelectRoot:!0,selectableLibraries:[k]})})},{title:s("upload.select_files_step_title"),content:z},{title:s("upload.upload_step_title"),content:r.jsxs(r.Fragment,{children:[z,!!I&&r.jsxs(r.Fragment,{children:[r.jsx(C,{}),r.jsx(X,{message:I,type:"error"})]})]}),icon:P?r.jsx(Q,{}):null}],q=U.map((e=>({key:e.title,title:e.title,icon:e.icon})));return r.jsx(r.Fragment,{children:r.jsxs(G,{title:s("upload.title"),open:!0,width:"70rem",onCancel:D,footer:r.jsxs("div",{style:{marginTop:50},children:[w>0&&w<U.length-1&&r.jsx(Mr,{"data-testid":"prev-btn",onClick:()=>{E(w-1)},children:s("upload.previous")}),w<U.length-2&&r.jsx(Mr,{"data-testid":"next-btn",disabled:!c,type:"primary",onClick:()=>N(),children:s("upload.next")}),(!v.length||!B)&&w>=U.length-2&&r.jsx(Mr,{"data-testid":"upload-btn",loading:P,disabled:!v.length,className:"submit-btn",title:"Upload",type:"primary",onClick:()=>{(async e=>{let t;const n=[...v];for(const r of n)if(t)r.replace=r.replace??t.replace;else if((await $({variables:{treeId:S,parentNode:e!==S?e:null,filename:r.name}})).data.doesFileExistAsChild){const{applyToAll:e,replace:n}=await M(r.name);G.destroyAll(),r.replace=n,e&&(t={replace:n})}m(n)})(c.id).then((()=>{N(),(async()=>{await A({variables:{library:n,nodeId:c.id,files:v.map((e=>({data:e,uid:e.uid,size:e.size,replace:e.replace})))}})})()}))},children:s("upload.upload_step_title")}),B&&r.jsx(Mr,{"data-testid":"close-btn",onClick:D,children:s("global.close")})]}),"data-testid":"upload-modal","upload-modal":!0,children:[r.jsx(W,{status:h,current:w,items:q}),r.jsx("div",{style:{marginTop:16},children:U[w].content})]})})}var Os={};const As=o(Z);var Vs={},Ps=w.default;Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.default=void 0;var Ls=Ps(t).default.createContext(null);Vs.default=Ls;var $s=w.default,Ds=E.default;Object.defineProperty(Os,"__esModule",{value:!0});var Ns=Os.default=void 0,Fs=Ds(t),zs=$s(Gr),Bs=$s(As),Ms=$s(J),Hs=ne,Us=re,Gs=$s(ee),Ws=ie,qs=$s(Vs),Ys=$s(te);const Xs=(e,t)=>{var n;const{prefixCls:r,className:i,rootClassName:o,children:l,indeterminate:a=!1,style:s,onMouseEnter:u,onMouseLeave:c,skipGroup:d=!1,disabled:f}=e,p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:v,direction:m,checkbox:g}=Fs.useContext(Us.ConfigContext),h=Fs.useContext(qs.default),{isFormItemInput:b}=Fs.useContext(Ws.FormItemInputContext),y=Fs.useContext(Gs.default),x=null!==(n=(null==h?void 0:h.disabled)||f)&&void 0!==n?n:y,w=Fs.useRef(p.value);Fs.useEffect((()=>{null==h||h.registerValue(p.value)}),[]),Fs.useEffect((()=>{if(!d)return p.value!==w.current&&(null==h||h.cancelValue(w.current),null==h||h.registerValue(p.value),w.current=p.value),()=>null==h?void 0:h.cancelValue(p.value)}),[p.value]);const E=v("checkbox",r),[S,_]=(0,Ys.default)(E),j=Object.assign({},p);h&&!d&&(j.onChange=function(){p.onChange&&p.onChange.apply(p,arguments),h.toggleOption&&h.toggleOption({label:l,value:p.value})},j.name=h.name,j.checked=h.value.includes(p.value));const k=(0,zs.default)(`${E}-wrapper`,{[`${E}-rtl`]:"rtl"===m,[`${E}-wrapper-checked`]:j.checked,[`${E}-wrapper-disabled`]:x,[`${E}-wrapper-in-form-item`]:b},null==g?void 0:g.className,i,o,_),C=(0,zs.default)({[`${E}-indeterminate`]:a},Hs.TARGET_CLS,_),R=a?"mixed":void 0;return S(Fs.createElement(Ms.default,{component:"Checkbox",disabled:x},Fs.createElement("label",{className:k,style:Object.assign(Object.assign({},null==g?void 0:g.style),s),onMouseEnter:u,onMouseLeave:c},Fs.createElement(Bs.default,Object.assign({"aria-checked":R},j,{prefixCls:E,className:C,disabled:x,ref:t})),void 0!==l&&Fs.createElement("span",null,l))))};var Qs=Fs.forwardRef(Xs);Ns=Os.default=Qs;const Ks=Yr.div`
    background-color: ${I.defaultBg};
    border-radius: 5px;

    .ant-list-items {
        max-height: ${e=>e.$maxHeight||"auto"};
        overflow-y: auto;
    }
`,Zs=Yr(oe.Item)`
    cursor: ${e=>e.onClick?"pointer":"auto"};
    && {
        padding: 0;
        justify-content: flex-start;
    }
`,Js=Yr.div`
    margin: 0 1em;
`;function eu({maxHeight:e,onItemClick:t,renderItemContent:n,selectable:i,selectedItems:o,onSelectionChange:l,...a}){const s={renderItem:e=>{const a=t?()=>{t(e)}:null;return r.jsxs(Zs,{onClick:a,children:[i&&r.jsx(Js,{onClick:e=>e.stopPropagation(),children:r.jsx(Ns,{checked:o.some((t=>Wl(e,t))),onChange:t=>{const n=[...o];t.target.checked?n.push(e):n.splice(n.indexOf(e),1),l(n)}})}),n?n(e):e]})},...a},u="number"==typeof e?`${e}px`:String(e);return r.jsx(Ks,{$maxHeight:u,children:r.jsx(oe,{...s})})}const tu=Yr.div`
    background-color: ${I.defaultBg};
    padding: 1em;
    z-index: 1;
    position: relative;

    & .record-card .label {
        font-weight: normal;
        padding: 0.2em;
    }

    & .ant-list-pagination {
        margin-top: 5px;
    }
`,nu=Yr.div`
    max-height: 30rem;
    overflow-y: scroll;
`,ru=Yr.div`
    margin: 0 0 1em 0;
    width: 100%;
    display: flex;
    direction: row;
    align-items: center;
`,iu=Yr(V)`
    padding-top: 1em;
    width: 100%;
    display: flex;
    justify-content: space-between;
`,ou=Yr(U.Search)`
    flex-grow: 1;
    margin-right: 1em;
`,lu=Yr(L)`
    margin-left: 2em;
`,au=Yr.div`
    padding: 0.5rem;
    font-style: italic;
`,su=e=>r.jsx(hn,{record:e.whoAmI,size:bn.small,withLibrary:!1,simplistic:!0,style:{margin:"0.3rem 0"}},e.id);function uu({attribute:e,onAdd:n,onClose:o}){var l,a;const{t:s}=i(),{lang:u}=O(),c=e.linkValuesList.enable?e.linkValuesList.values:[],[d,f]=t.useState(c),p=t.useRef(),v=t.useRef(),[m,g]=t.useState([]),[h,y]=t.useState(!1),[x,w]=t.useState(!1),[E,S]=t.useState(!1),[_,j]=t.useState(!1),[k,R]=t.useState(1),[T,I]=t.useState(1),A=!e.linkValuesList.enable||e.linkValuesList.allowFreeEntry,P=e.linked_library.permissions.create_record&&e.linked_library.behavior!==Ur.files&&e.linked_library.behavior!==Ur.directories,L=e.linked_library.permissions.create_record&&e.linked_library.behavior===Ur.files,$=e.linked_library.permissions.create_record&&e.linked_library.behavior===Ur.directories,[N,{loading:F,error:z,data:B}]=b(zo(e.linked_library.gqlNames.query,[],!0));t.useEffect((()=>{var e;p.current.scrollIntoView({block:"nearest"}),null==(e=v.current)||e.focus()}),[]);const H=()=>o(),U=null==(a=null==(l=null==v?void 0:v.current)?void 0:l.input)?void 0:a.value,G=B&&U?B[e.linked_library.gqlNames.query].list.map((e=>({id:e.whoAmI.id,whoAmI:e.whoAmI}))):[],W={onItemClick:e=>{n([e])},renderItemContent:su,selectable:e.multiple_values,selectedItems:m,onSelectionChange:e=>g(e),locale:{emptyText:s("record_edition.no_matching_value")}},q={simple:!0,pageSize:10,current:k};return r.jsxs(r.Fragment,{children:[r.jsxs(tu,{"data-testid":"values-add",ref:p,children:[r.jsxs(ru,{children:[r.jsx(ou,{placeholder:s("record_edition.search_elements"),onSearch:e=>{if(R(1),I(1),c.length){const t=c.filter((t=>{var n;const r=new RegExp(e.toLowerCase()),i=String(null==(n=t.whoAmI)?void 0:n.label)??"";return!e||t.id.match(r)||i.toLowerCase().match(r)}));f(t)}A&&e&&N({variables:{fullText:e,limit:10,offset:0}})},loading:F,allowClear:!0,ref:v,"aria-label":s("record_edition.search_elements")}),r.jsx(lu,{onClick:H,role:"button"})]}),r.jsxs(nu,{children:[d.length||G.length||!U?r.jsx(r.Fragment,{}):s("record_edition.no_matching_value"),!!d.length&&r.jsxs(r.Fragment,{children:[r.jsx(C,{orientation:"left",children:s("record_edition.values_list")}),r.jsx(eu,{...W,"data-testid":"values_list",dataSource:d,pagination:!1})]}),A&&!!G.length&&r.jsxs(r.Fragment,{children:[r.jsx(C,{orientation:"left",children:Gt(e.linked_library.label,u)}),F&&r.jsx(mt,{}),z&&r.jsx(M,{message:z.message}),!F&&!z&&r.jsx(eu,{...W,"data-testid":"search_result",dataSource:G,pagination:{...q,total:(null==B?void 0:B[e.linked_library.gqlNames.query].totalCount)??0,current:T,onChange:e=>{v.current.input.value&&(I(e),N({variables:{fullText:v.current.input.value,limit:10,offset:10*(e-1)}}))}}})]}),A&&!U&&r.jsxs(au,{children:[r.jsx(Ri,{})," ",s("record_edition.start_typing_message")]})]}),r.jsxs(iu,{children:[r.jsxs(V,{children:[A&&r.jsx(Mr,{size:"small",icon:r.jsx(Io,{}),onClick:()=>{S(!0)},children:s("record_edition.advanced_search")}),P&&r.jsx(Mr,{size:"small",icon:r.jsx(D,{}),onClick:()=>{j(!0)},children:s("record_edition.new_record")}),L&&r.jsx(Mr,{size:"small",icon:r.jsx(gn,{}),onClick:()=>y(!0),children:s("upload.title")}),$&&r.jsx(Mr,{size:"small",icon:r.jsx(lo,{}),onClick:()=>w(!0),children:s("create_directory.title")})]}),r.jsxs(V,{children:[r.jsx(Mr,{size:"small",onClick:H,children:s("global.cancel")}),r.jsx(Mr,{type:"primary",size:"small",onClick:()=>{n(m)},children:s("global.submit")})]})]})]}),E&&r.jsx(ys,{libId:e.linked_library.id,visible:E,setVisible:S,submitAction:async({selected:t})=>{if(!t.length)return;const r=(e.multiple_values?t:[t[0]]).map((t=>({id:t.id,whoAmI:{id:t.id,label:t.label,subLabel:null,library:e.linked_library,color:null,preview:null}})));n(r)}}),_&&r.jsx(Yy,{open:_,library:e.linked_library.id,record:null,onClose:()=>{j(!1)},afterCreate:e=>{n([{id:e.id,whoAmI:e}])}}),h&&r.jsx(Is,{libraryId:e.linked_library.id,multiple:e.multiple_values,onCompleted:async e=>{const t=e.upload.map((e=>({id:e.record.id,whoAmI:e.record.whoAmI})));n(t)},onClose:()=>y(!1)}),x&&r.jsx(ps,{libraryId:e.linked_library.id,onCompleted:async e=>{n([{id:e.createDirectory.id,whoAmI:e.createDirectory.whoAmI}])},onClose:()=>w(!1)})]})}const cu=Yr.div`
    position: relative;
    z-index: ${e=>e.$isValuesAddVisible?1:"auto"};
    border: 1px solid ${I.borderColor};
    margin-bottom: 1.5em;
    border-radius: ${e=>e.$themeToken.borderRadius}px;

    tr:not(:hover) .floating-menu {
        display: none;
    }

    td {
        height: 2.5rem; // In case we have no value on the whole row
    }

    // Disable some unwanted antd styles
    && table > thead > tr:first-child {
        th:first-child,
        th:last-child {
            border-radius: 0;
        }
    }

    &&& .ant-table-header {
        border-radius: 0;
    }

    &&& .ant-table-footer {
        padding: 0;
    }
`,du=Yr(rl)`
    && {
        top: calc(50% - 0.9em);
        font-size: 0.9em;
        background: ${I.lightBg};
        padding: 0 0.5em;
        color: ${I.secondaryTextColor};
        z-index: 1;
        margin-bottom: 0;
        border-top-left-radius: ${e=>e.$themeToken.borderRadius}px;
        border-top-right-radius: ${e=>e.$themeToken.borderRadius}px;
    }
`;const fu="__new__";var pu=(e=>(e.PRISTINE="PRISTINE",e.DIRTY="DIRTY",e))(pu||{}),vu=(e=>(e.ADD_VALUE="ADD_VALUE",e.CHANGE_VALUE="CHANGE_VALUE",e.FOCUS_FIELD="FOCUS_FIELD",e.SET_ERROR="SET_ERROR",e.SET_ERROR_DISPLAY="SET_ERROR_DISPLAY",e.UNEDIT_FIELD="UNEDIT_FIELD",e.CLOSE_ERROR="CLOSE_ERROR",e.CLEAR_ERROR="CLEAR_ERROR",e.UPDATE_AFTER_SUBMIT="UPDATE_AFTER_SUBMIT",e.UPDATE_AFTER_DELETE="UPDATE_AFTER_DELETE",e.CANCEL_EDITING="CANCEL_EDITING",e.CHANGE_VERSION_SCOPE="CHANGE_VERSION_SCOPE",e.REFRESH_VALUES="REFRESH_VALUES",e))(vu||{});const mu={idValue:null,index:0,value:null,displayValue:"",editingValue:"",originRawValue:"",error:"",isErrorDisplayed:!1,isEditing:!1,state:"PRISTINE"},gu=(e,t,n)=>{var r,i,o,l;if(void 0===(null==e?void 0:e.idValue)||void 0===(null==(o=null==(i=null==(r=null==t?void 0:t.values)?void 0:r[t.activeScope])?void 0:i.values)?void 0:o[e.idValue]))return t;return{...t,values:{...t.values,[t.activeScope]:{...t.values[t.activeScope],values:{...null==(l=t.values[t.activeScope])?void 0:l.values,[e.idValue]:{...t.values[t.activeScope].values[e.idValue],...n}}}}}},hu=e=>{var t,n,r,i;const{attribute:o,values:l,formVersion:a}=e,s=Array.isArray(l)&&l.length?l.reduce(((e,t,n)=>({...e,[(null==t?void 0:t.id_value)??null]:{...mu,idValue:(null==t?void 0:t.id_value)??null,index:n,value:t??null,displayValue:(null==t?void 0:t.value)??"",editingValue:o.format===Vr.encrypted?"":(null==t?void 0:t.raw_value)??"",originRawValue:o.format===Vr.encrypted?"":(null==t?void 0:t.raw_value)??""}})),{}):{[fu]:{...mu,idValue:fu}},u=(null==(t=null==o?void 0:o.versions_conf)?void 0:t.versionable)?o.versions_conf.profile.trees.reduce(((e,t)=>((null==a?void 0:a[t.id])&&(e[t.id]=a[t.id]),e)),{}):null,c=!!(null==(n=null==o?void 0:o.versions_conf)?void 0:n.versionable)&&!ka(u,(null==(r=null==l?void 0:l[0])?void 0:r.version)??u),d=c?null==(i=null==l?void 0:l[0])?void 0:i.version:null;return{activeScope:c?Ra.INHERITED:Ra.CURRENT,values:{[Ra.CURRENT]:{version:u??null,values:c?{[fu]:{...mu,idValue:fu}}:s},[Ra.INHERITED]:c?{version:d??null,values:s}:null}}},bu=e=>{const{element:t,record:n,metadataEdit:r,isRecordReadOnly:i,formVersion:o}=e,l=t.attribute,a=[...t.values];return{attribute:l,record:n,formElement:{...t},isReadOnly:(null==l?void 0:l.readonly)||i||!l.permissions.edit_value,metadataEdit:r,...hu({attribute:l,values:a,formVersion:o})}},yu=(e,t)=>{var n,r,i;const o=e=>Object.keys(e).length?e:{[fu]:{...mu,idValue:fu}};switch(t.type){case"ADD_VALUE":return{...e,values:{...e.values,[e.activeScope]:{...e.values[e.activeScope],values:{...e.values[e.activeScope].values,[t.idValue??fu]:{...mu,idValue:t.idValue??fu,index:Object.keys(e.values).length,isEditing:!0}}}}};case"CHANGE_VALUE":return gu(t,e,{editingValue:t.value,state:"DIRTY"});case"FOCUS_FIELD":return gu(t,e,{isEditing:!0});case"SET_ERROR":return gu(t,e,{error:t.error,isErrorDisplayed:!0,state:"DIRTY"});case"CLEAR_ERROR":return gu(t,e,{error:"",isErrorDisplayed:!1});case"SET_ERROR_DISPLAY":return gu(t,e,{isErrorDisplayed:t.displayError});case"UNEDIT_FIELD":return gu(t,e,{isEditing:!1,isErrorDisplayed:!1,error:"",state:"PRISTINE"});case"UPDATE_AFTER_SUBMIT":{const o=e.attribute.format!==Vr.encrypted?t.newValue.raw_value:null==(r=null==(n=e.values[e.activeScope].values)?void 0:n[t.idValue])?void 0:r.editingValue,l=t.newValue.version?rn(t.newValue.version):null,a={...mu,idValue:t.newValue.id_value,value:{...t.newValue,version:l},displayValue:t.newValue.value,editingValue:o,originRawValue:o,version:l};if(t.idValue!==fu)return gu(t,e,a);const s={...e},u=s.values[s.activeScope].values,c=null==(i=u[fu])?void 0:i.index;return delete u[fu],u[t.newValue.id_value]={...a,index:c??Object.keys(s.values).length},s}case"UPDATE_AFTER_DELETE":{const n={...e};let r=n.values[n.activeScope].values;return delete r[t.idValue],t.allDeleted?(n.values[n.activeScope].values=o({}),n):(r=o(r),r=Object.values(r).reduce(((e,t,n)=>({...e,[t.idValue]:{...t,index:n}})),{}),n.values[n.activeScope].values=r,n)}case"CANCEL_EDITING":{if(t.idValue!==fu)return gu(t,e,{editingValue:e.values[e.activeScope].values[t.idValue].originRawValue,isEditing:!1,state:"PRISTINE"});const n={...e};return delete n.values[n.activeScope].values[fu],n.values[n.activeScope].values=o(n.values[n.activeScope].values),n}case"CHANGE_VERSION_SCOPE":return{...e,activeScope:t.scope};case"REFRESH_VALUES":{const n=hu({attribute:e.formElement.attribute,values:t.values,formVersion:t.formVersion});return{...e,...n}}default:return e}};const xu=Yr(U)`
    // Remove arrows on number input
    && {
        input {
            -moz-appearance: textfield;
            ::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }
        }
    }
`;function wu({state:e,fieldValue:n,onFocus:i,onChange:o,onPressEnter:l,inputRef:a}){const{isEditing:s,editingValue:u}=n;t.useEffect((()=>{s&&a.current.focus()}),[s,a]);return r.jsx(U,{ref:a,className:"field-wrapper "+(u?"has-value":""),value:String(u),onFocus:i,onChange:e=>{o(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&l()},disabled:e.isReadOnly,allowClear:!0,autoFocus:!0},"editing")}const Eu=Yr.div`
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    width: 100%;
`;function Su({attribute:e,valuesList:t,onValueCopy:n,onValueSelect:o}){const{t:l,i18n:a}=i();return r.jsx(eu,{dataSource:t,bordered:!0,size:"small",maxHeight:250,locale:{emptyText:l("record_edition.no_matching_value")},renderItemContent:t=>{const i=e.format===Vr.date?new Intl.DateTimeFormat(a.language).format(new Date(1e3*Number(t.value))):t.value;return r.jsxs(Eu,{children:[r.jsxs("span",{children:[i,t.isNewValue&&` (${l("record_edition.new_value")})`]}),t.canCopy&&r.jsx(vt,{title:l("record_edition.copy_value"),children:r.jsx(Mr,{icon:r.jsx(Bi,{}),shape:"circle",onClick:e=>{e.stopPropagation(),n(t.rawValue)}})})]})},onItemClick:e=>{o(e.rawValue)}})}const _u=Yr.div`
    color: ${I.errorColor};
    font-weight: bold;
`,ju=Yr.div`
    position: relative;
    z-index: ${e=>e.$isEditing?2:0};
`,ku=Yr.div`
    position: relative;

    && input {
        background: ${I.defaultBg};
        transition: none;
        border-radius: 0;
        line-height: 2.5em;
        padding-left: 17px;
    }

    ${ju}:not(:last-child) & input:not(:hover) {
        border-bottom: none;
    }

    ${ju}:first-child & input {
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
    }

    ${ju}:last-child & input {
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px;
    }

    &.editing input {
        border-radius: 5px;
    }

    &.editing .field-wrapper,
    &.editing .nested-input {
        z-index: 0;
    }

    &.format-boolean label {
        margin-right: 1em;
    }

    &:not(.format-boolean) label {
        position: absolute;
        left: 11px;
        top: calc(50% - 0.9em);
        font-size: 1.1em;
        background: transparent;
        padding: 0 0.5em;
        color: ${I.secondaryTextColor};
        transition: all 0.2s ease;
        transition-property: left, top, font-size;
        z-index: 1;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        width: 100%;
    }

    &:not(.format-boolean):not(.editing):not(.has-value) label {
        padding-right: 3rem;
    }

    input:disabled {
        background: ${I.defaultBg};
    }

    &.has-value:not(.format-boolean) label,
    &.editing:not(.format-boolean) label {
        top: 0px;
        font-size: 0.9em;
        background: transparent;
        text-shadow: 0px 0px 4px #fff;
        z-index: 2;
        border-radius: 5px;
    }

    ${ju}.first-value &.has-value:not(.format-boolean) input:not(:first-child),
    ${ju}.first-value &.editing:not(.format-boolean) input:not(:only-child),
    ${ju}.first-value &.editing.format-date_range input,
    ${ju}.first-value &.editing.format-date_range .ant-picker-range-separator {
        padding-top: 1em;
    }

    &:not(.has-value):not(.editing):not(.format-boolean) input {
        padding: 9px 0;
    }

    &:not(:hover) .floating-menu {
        display: none;
    }

    .floating-menu {
        top: 50%;
        transform: translateY(-50%);
    }
`,Cu=Yr.div`
    position: absolute;
    display: flex;
    width: 100%;
    flex-direction: column;
`,Ru=Yr.div`
    display: flex;
    margin: 0.5em 0;
    justify-content: flex-end;

    & > button {
        margin-left: 0.5em;
    }
`,Tu=Yr(ce.Item)`
    && {
        margin: 0;
    }
`,Iu=e.lazy((()=>En((()=>import("./RichTextEditorInput-6fd95ab3.js")),["assets/RichTextEditorInput-6fd95ab3.js","assets/useTranslation-6a88ac92.js","assets/styled-components.browser.esm-2d72260f.js"]))),Ou={[Vr.text]:wu,[Vr.date]:function({state:e,fieldValue:t,onFocus:n,onSubmit:o,settings:l}){var a,s;const{editingValue:u}=t,{i18n:c}=i(),d=e.formElement.attribute,f=!!(null==(a=null==d?void 0:d.values_list)?void 0:a.enable),p=!!(null==(s=null==d?void 0:d.values_list)?void 0:s.allowFreeEntry),v=e=>{const t=e?String(e.unix()):null;o(t)},m=u?yn(1e3*Number(u)):null,g=f?{points:["bl","tl"],offset:[0,-1]}:null;return!f||p?r.jsx(xn,{className:"field-wrapper","data-testid":"datepicker",disabled:e.isReadOnly,picker:"date",onChange:v,value:m,autoFocus:!0,defaultOpen:!0,showTime:!!l.withTime,onOk:v,popupStyle:{background:I.defaultBg},style:{background:I.defaultBg,width:"100%"},allowClear:!1,dropdownAlign:g}):r.jsx(U,{className:"field-wrapper "+(u?"has-value":""),value:u?new Intl.DateTimeFormat(c.language).format(new Date(1e3*Number(u))):"",onFocus:n,disabled:!0,allowClear:!0,autoFocus:!0},"editing")},[Vr.date_range]:function({state:e,fieldValue:t,onFocus:n,onSubmit:o,settings:l}){var a,s;const{editingValue:u,displayValue:c}=t,{t:d}=i(),f=e.formElement.attribute,p=!!(null==(a=null==f?void 0:f.values_list)?void 0:a.enable),v=!!(null==(s=null==f?void 0:f.values_list)?void 0:s.allowFreeEntry),m=e=>{const[t,n]=e,r=e?{from:String(t.unix()),to:String(n.unix())}:null;o(r)},g=u,h=g?[yn(1e3*Number(g.from)),yn(1e3*Number(g.to))]:null,b=p?{points:["bl","tl"],offset:[0,-1]}:null,y=c;return!p||v?r.jsx(xn.RangePicker,{className:"field-wrapper","data-testid":"datepicker",disabled:e.isReadOnly,picker:"date",onChange:m,value:h,autoFocus:!0,defaultOpen:!0,showTime:!!l.withTime,onOk:m,popupStyle:{background:I.defaultBg},style:{background:I.defaultBg,width:"100%"},allowClear:!1,dropdownAlign:b}):r.jsx(U,{className:"field-wrapper "+(u?"has-value":""),value:y.from&&y.to?wn(y,d):"",onFocus:n,disabled:!0,allowClear:!0,autoFocus:!0},"editing")},[Vr.boolean]:function({state:e,fieldValue:t,onSubmit:n}){const{value:i}=t;return r.jsx(K,{className:"nested-input",disabled:e.isReadOnly,checked:!!(null==i?void 0:i.value),indeterminate:"boolean"!=typeof(null==i?void 0:i.value),onChange:e=>{n(String(e.target.checked))}})},[Vr.numeric]:function({state:e,fieldValue:t,onFocus:n,onPressEnter:i,onChange:o,inputRef:l}){const{editingValue:a}=t,s=Number(a),u=""!==a?s:"";return r.jsx(xu,{type:"number",ref:l,className:"nested-input",value:u,onFocus:n,onChange:e=>{o(String(e.target.value))},onPressEnter:()=>{i()},disabled:e.isReadOnly,allowClear:!0,autoFocus:!0})},[Vr.encrypted]:function({state:e,fieldValue:t,onChange:n,onPressEnter:i,inputRef:o}){const{editingValue:l}=t;return r.jsx(U.Password,{className:"nested-input",ref:o,value:String(l),onChange:e=>{n(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&i()},disabled:e.isReadOnly,autoFocus:!0,"data-testid":"encrypted-input"})},[Vr.extended]:wu,[Vr.color]:function({state:e,fieldValue:t,onChange:n,onFocus:i}){const{editingValue:o}=t,l="#"+o.toString(),a={height:t.index?"44px":"54px",width:"100%",justifyContent:"left",paddingTop:t.index?"4px":"14px",paddingLeft:"15px"};return r.jsx(ue,{showText:!0,disabledAlpha:!0,disabled:e.isReadOnly,value:l,style:a,open:t.isEditing,size:"small",onChangeComplete:e=>{n(e.toHex().toUpperCase())},onOpenChange:i})},[Vr.rich_text]:Iu};function Au({value:e,onSubmit:n,onDelete:o,onScopeChange:l,state:a,dispatch:s}){var u,c,d,f,p,v,m;const{t:g,i18n:h}=i(),{token:b}=F.useToken(),y=t.useRef(),x=t.useRef(),{state:w,dispatch:E}=ua(),S=a.formElement.attribute,_=!!(null==(u=null==S?void 0:S.values_list)?void 0:u.enable),j=!!(null==(c=null==S?void 0:S.values_list)?void 0:c.allowFreeEntry);t.useEffect((()=>{var t;e.isEditing&&(null==(t=null==y?void 0:y.current)||t.scrollIntoView({block:"nearest"}))}),[e.isEditing]),t.useEffect((()=>{null===w.activeValue&&e.isEditing&&s({type:vu.CANCEL_EDITING,idValue:e.idValue})}),[w.activeValue]),t.useEffect((()=>{e.isEditing&&E({type:oa.SET_EDITING_VALUE,value:e.editingValue})}),[e.isEditing,e.editingValue]);const k=async t=>{if(""===t)return R();const r="object"==typeof t?JSON.stringify(t):t;n(e.idValue,r)},C=async()=>{if(!_)return k(e.editingValue);const t=$();return t.length?k(t[0].value):void 0},R=async()=>{if(e.idValue===fu)return O();o(e.idValue)},T=()=>{a.isReadOnly||e.isEditing||S.format===Vr.boolean||(s({type:vu.FOCUS_FIELD,idValue:e.idValue}),a.metadataEdit||E({type:oa.SET_ACTIVE_VALUE,value:{value:e.value,editingValue:e.editingValue,attribute:S}}))},I=t=>{s({type:vu.CHANGE_VALUE,idValue:e.idValue,value:t})},O=()=>{s({type:vu.CANCEL_EDITING,idValue:e.idValue}),a.metadataEdit||E({type:oa.SET_ACTIVE_VALUE,value:null})},A=()=>{const t={width:"16px",height:"16px",borderRadius:"2px",backgroundColor:"#"+String(e.displayValue),marginTop:e.index?"15px":"25px",marginLeft:"5px"};return r.jsx("label",{style:t})},$=()=>{var t,n,r;let i=[];if(_)if(S.format===Vr.date_range){i=((null==(t=null==S?void 0:S.values_list)?void 0:t.dateRangeValues)??[]).filter((t=>e.state===pu.PRISTINE||!e.editingValue)).map((e=>{const t={from:Sn(1e3*Number(e.from)).format("L"),to:Sn(1e3*Number(e.to)).format("L")};return{value:wn(t,g),rawValue:{from:e.from,to:e.to}}}))}else{i=((null==(n=null==S?void 0:S.values_list)?void 0:n.values)??[]).filter((t=>e.state===pu.PRISTINE||!e.editingValue||S.format===Vr.date||t.match(new RegExp(String(e.editingValue),"i")))).map((e=>({value:e,rawValue:e})))}const o=i.map((e=>({...e,isNewValue:!1,canCopy:j&&S.format!==Vr.date&&S.format!==Vr.date_range})));return j&&String(e.editingValue)&&S.format!==Vr.date_range&&!((null==(r=null==S?void 0:S.values_list)?void 0:r.values)??[]).some((t=>t===e.editingValue))&&o.unshift({value:String(e.editingValue),rawValue:String(e.editingValue),isNewValue:!0,canCopy:!1}),o},D=r.jsx(_u,{children:r.jsxs(V,{size:"small",children:[r.jsx(P,{}),e.error,r.jsx(Mr,{onClick:()=>s({type:vu.SET_ERROR_DISPLAY,displayError:!1,idValue:e.idValue}),size:"small",icon:r.jsx(L,{}),style:{border:"none"}})]})}),N=e.isErrorDisplayed,z=`\n        ${S.format?`format-${S.format}`:""}\n        ${(null==(d=null==e?void 0:e.value)?void 0:d.value)?"has-value":""}\n        ${e.isEditing?"editing":""}\n    `,M=!a.isReadOnly&&e.idValue!==fu&&S.format!==Vr.boolean,H=$(),G=[];e.isEditing||G.push({button:r.jsx(Ua,{value:e.value,attribute:S,shape:"circle"})});const W=S.multiple_values&&!!Object.keys(a.values[a.activeScope].values).length;if(null==(f=null==S?void 0:S.versions_conf)?void 0:f.versionable){const e={[Ra.CURRENT]:(null==(p=a.values[Ra.CURRENT])?void 0:p.version)??null,[Ra.INHERITED]:(null==(v=a.values[Ra.INHERITED])?void 0:v.version)??null};W||G.push({title:g("values_version.title"),button:r.jsx(es,{versions:e,activeScope:a.activeScope,onScopeChange:l})})}M&&!e.isEditing&&e.displayValue&&G.push({title:g("global.delete"),button:r.jsx(rs,{onDelete:R,shape:"circle"})});const q={top:"1px",left:"1px",bottom:W?"0":"1px",borderRadius:W?"none":b.borderRadius};return r.jsxs(r.Fragment,{children:[e.isEditing&&r.jsx(ga,{onClick:O}),r.jsx(ju,{$isEditing:e.isEditing,className:e.index?"":"first-value",children:r.jsx(ce,{children:r.jsxs(Tu,{children:[r.jsx(se,{placement:"topLeft",open:N,content:D,children:r.jsxs(ku,{$isEditing:e.isEditing,className:z,"data-testid":"input-wrapper",children:[r.jsx(ns,{activeScope:a.activeScope,style:q}),!e.index&&r.jsxs("label",{className:"attribute-label",onClick:T,children:[a.formElement.settings.label,w.externalUpdate.updatedValues[null==S?void 0:S.id]&&r.jsx(Ha,{}),a.activeScope===Ra.INHERITED&&r.jsx(Fa,{version:a.values[Ra.INHERITED].version})]}),(()=>{let t={};if(!e.isEditing&&S.format!==Vr.boolean&&S.format!==Vr.rich_text){let n,i=String(e.displayValue);S.format!==Vr.color||null!==e.value&&null!==e.value.value||(e.value=null);const o=null!==e.value;if(o)switch(S.format){case Vr.date_range:const r=e.displayValue;i=(null==r?void 0:r.from)&&(null==r?void 0:r.to)?wn(r,g):"";break;case Vr.encrypted:i="•••••••••";break;case Vr.date:isNaN(e.displayValue)||(i=new Intl.DateTimeFormat(h.language).format(new Date(1e3*Number(i))));break;case Vr.color:n=A(),i="#"+i,t={paddingLeft:"39px"}}return r.jsxs(r.Fragment,{children:[n,r.jsx(U,{style:t,className:o?"has-value":"",value:i,onFocus:T,disabled:a.isReadOnly},"display")]})}const n=Ou[S.format];return n?r.jsx(n,{state:a,fieldValue:e,onChange:I,onFocus:T,onSubmit:k,onPressEnter:C,settings:a.formElement.settings,inputRef:x}):r.jsx("div",{children:g("record_edition.invalid_format")})})(),!a.metadataEdit&&r.jsx(B,{actions:G})]})}),r.jsxs(Cu,{ref:y,children:[e.isEditing&&(null==(m=null==S?void 0:S.values_list)?void 0:m.enable)&&r.jsx(Su,{attribute:S,valuesList:H,onValueSelect:k,onValueCopy:e=>{var t;null==(t=null==x?void 0:x.current)||t.focus(),I(e)}}),e.isEditing&&r.jsxs(Ru,{children:[r.jsx(Mr,{size:"small",onClick:O,style:{background:"#FFF"},children:g("global.cancel")}),(!_||j)&&r.jsx(Mr,{type:"primary",size:"small",onClick:()=>{k(e.editingValue)},children:g("global.submit")})]})]})]})})})]})}const Vu=Yr.div`
    margin-bottom: ${e=>e.$metadataEdit?0:"1.5em"};
`;function Pu({element:e,onValueSubmit:n,onValueDelete:o,onDeleteMultipleValues:l,metadataEdit:a=!1}){var s,u,c,d,f,p,v,m;const{t:g}=i(),{readOnly:h,record:b}=fa(),{state:y}=ua(),{state:x,dispatch:w}=ua(),{fetchValues:E}=_a(null==(u=null==(s=y.record)?void 0:s.library)?void 0:u.id,null==(c=e.attribute)?void 0:c.id,null==(d=y.record)?void 0:d.id),S=e.attribute.multiple_values,{attribute:_}=e,j=t.useContext(va),k=null===b,C=t.useMemo((()=>bu({element:e,record:b,isRecordReadOnly:h,formVersion:y.valuesVersion,metadataEdit:a})),[]),[R,T]=t.useReducer(yu,C);t.useEffect((()=>{if(j[_.id])for(const e of j[_.id]){const t=e.id_value??null;T({type:vu.SET_ERROR,idValue:t,error:e.message})}}),[j,_.id]);const I=async(t,r)=>{var i,o,l,a;const s=t===fu;T({type:vu.CLEAR_ERROR,idValue:t});const u=R.values[R.activeScope].version,c=await n([{value:r,idValue:s?null:t,attribute:_}],u);if(c.status===Ca.SUCCESS){const n=c.values[0];let r;if(R.metadataEdit){const t=(null==(i=(n.metadata??[]).find((({name:t})=>t===e.attribute.id)))?void 0:i.value)??null;r={id_value:null,created_at:null,modified_at:null,created_by:null,modified_by:null,version:null,raw_value:t.raw_value??t.value,value:t.value,metadata:null,attribute:_}}else r=n;T({type:vu.UPDATE_AFTER_SUBMIT,newValue:r,idValue:t});const a=R.metadataEdit?{...x.activeValue,value:{...x.activeValue.value,metadata:[...(null==(l=null==(o=x.activeValue)?void 0:o.value)?void 0:l.metadata)??[],{name:e.attribute.id,value:{...r,version:null,metadata:null}}]}}:null;return void w({type:oa.SET_ACTIVE_VALUE,value:a})}let d=c.error;if(!d&&c.errors){const e=null==(a=((null==c?void 0:c.errors)??[]).filter((e=>e.attribute===_.id)))?void 0:a[0];e&&(d=e.type===bt.VALIDATION_ERROR?e.message:g(`errors.${e.type}`))}T({type:vu.SET_ERROR,idValue:t,error:d})},O=async e=>{T({type:vu.UNEDIT_FIELD,idValue:e});const t=await o({id_value:e},_.id);if(t.status!==Ca.SUCCESS)T({type:vu.SET_ERROR,idValue:e,error:t.error});else if(T({type:vu.UPDATE_AFTER_DELETE,idValue:e}),!k){const e=await E(R.values[R.activeScope].version);T({type:vu.REFRESH_VALUES,formVersion:y.valuesVersion,values:e})}},A=e=>{T({type:vu.CHANGE_VERSION_SCOPE,scope:e})};if(!e.attribute)return r.jsx(M,{message:g("record_edition.missing_attribute")});const V=Object.values(R.values[R.activeScope].values).sort(((e,t)=>e.index-t.index)),P=V[0].idValue!==fu&&null!==V[0].idValue,L=!R.isReadOnly&&S&&P&&_.format!==Vr.boolean,$=!R.isReadOnly&&P&&V.length>1,D=null==(f=null==_?void 0:_.versions_conf)?void 0:f.versionable,N={[Ra.CURRENT]:(null==(p=R.values[Ra.CURRENT])?void 0:p.version)??null,[Ra.INHERITED]:(null==(v=R.values[Ra.INHERITED])?void 0:v.version)??null};return r.jsxs(Vu,{$metadataEdit:a,children:[V.map((e=>r.jsx(Au,{value:e,state:R,dispatch:T,onSubmit:I,onDelete:O,onScopeChange:A},e.idValue))),($||L||(null==(m=null==_?void 0:_.versions_conf)?void 0:m.versionable))&&r.jsxs(Da,{bordered:!0,style:{flexDirection:!L||$||D?"row-reverse":"row"},children:[r.jsxs("div",{children:[D&&r.jsx(es,{basic:!0,versions:N,activeScope:R.activeScope,onScopeChange:A}),$&&r.jsx(La,{onDelete:async()=>{var e;const t=await l(_.id,Object.values(R.values[R.activeScope].values).map((e=>e.value)),null);if(t.status!==Ca.SUCCESS)T({type:vu.SET_ERROR,idValue:null==(e=R.values[R.activeScope].values[0])?void 0:e.idValue,error:t.error});else if(T({type:vu.UPDATE_AFTER_DELETE,allDeleted:!0}),!k){const e=await E(R.values[R.activeScope].version);T({type:vu.REFRESH_VALUES,formVersion:y.valuesVersion,values:e})}}})]}),L&&r.jsx(Pa,{activeScope:R.activeScope,onClick:()=>{w({type:oa.SET_ACTIVE_VALUE,value:{attribute:_,value:null}}),T({type:vu.ADD_VALUE})}})]})]})}var Lu=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)$u.call(n,r)&&(e[r]=n[r])}return e},$u=Object.prototype.hasOwnProperty;var Du=function(e){if(e)throw e}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */;var Nu=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},Fu=Object.prototype.hasOwnProperty,zu=Object.prototype.toString,Bu=Object.defineProperty,Mu=Object.getOwnPropertyDescriptor,Hu=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===zu.call(e)},Uu=function(e){if(!e||"[object Object]"!==zu.call(e))return!1;var t,n=Fu.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Fu.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;for(t in e);return void 0===t||Fu.call(e,t)},Gu=function(e,t){Bu&&"__proto__"===t.name?Bu(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},Wu=function(e,t){if("__proto__"===t){if(!Fu.call(e,t))return;if(Mu)return Mu(e,t).value}return e[t]},qu=[].slice;var Yu=function(e,t){var n;return function(){var t,o=qu.call(arguments,0),l=e.length>o.length;l&&o.push(r);try{t=e.apply(null,o)}catch(a){if(l&&n)throw a;return r(a)}l||(t&&"function"==typeof t.then?t.then(i,r):t instanceof Error?r(t):i(t))};function r(){n||(n=!0,t.apply(null,arguments))}function i(e){r(null,e)}},Xu=Ku;Ku.wrap=Yu;var Qu=[].slice;function Ku(){var e=[],t={run:function(){var t=-1,n=Qu.call(arguments,0,-1),r=arguments[arguments.length-1];if("function"!=typeof r)throw new Error("Expected function as last argument, not "+r);(function i(o){var l=e[++t],a=Qu.call(arguments,0).slice(1),s=n.length,u=-1;if(o)r(o);else{for(;++u<s;)null!==a[u]&&void 0!==a[u]||(a[u]=n[u]);n=a,l?Yu(l,i).apply(null,n):r.apply(null,[null].concat(n))}}).apply(null,[null].concat(n))},use:function(n){if("function"!=typeof n)throw new Error("Expected `fn` to be a function, not "+n);return e.push(n),t}};return t}var Zu={},Ju={get exports(){return Zu},set exports(e){Zu=e}},ec={}.hasOwnProperty,tc=function(e){if(!e||"object"!=typeof e)return"";if(ec.call(e,"position")||ec.call(e,"type"))return rc(e.position);if(ec.call(e,"start")||ec.call(e,"end"))return rc(e);if(ec.call(e,"line")||ec.call(e,"column"))return nc(e);return""};function nc(e){return e&&"object"==typeof e||(e={}),ic(e.line)+":"+ic(e.column)}function rc(e){return e&&"object"==typeof e||(e={}),nc(e.start)+"-"+nc(e.end)}function ic(e){return e&&"number"==typeof e?e:1}var oc=tc,lc=uc;function ac(){}ac.prototype=Error.prototype,uc.prototype=new ac;var sc=uc.prototype;function uc(e,t,n){var r,i,o;"string"==typeof t&&(n=t,t=null),r=function(e){var t,n=[null,null];"string"==typeof e&&(-1===(t=e.indexOf(":"))?n[1]=e:(n[0]=e.slice(0,t),n[1]=e.slice(t+1)));return n}(n),i=oc(t)||"1:1",o={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(o=t,t=t.start):o.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=i,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=o,this.source=r[0],this.ruleId=r[1]}sc.file="",sc.name="",sc.reason="",sc.message="",sc.stack="",sc.fatal=null,sc.column=null,sc.line=null;var cc={};function dc(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}cc.basename=function(e,t){var n,r,i,o,l=0,a=-1;if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');if(dc(e),n=e.length,void 0===t||!t.length||t.length>e.length){for(;n--;)if(47===e.charCodeAt(n)){if(i){l=n+1;break}}else a<0&&(i=!0,a=n+1);return a<0?"":e.slice(l,a)}if(t===e)return"";r=-1,o=t.length-1;for(;n--;)if(47===e.charCodeAt(n)){if(i){l=n+1;break}}else r<0&&(i=!0,r=n+1),o>-1&&(e.charCodeAt(n)===t.charCodeAt(o--)?o<0&&(a=n):(o=-1,a=r));l===a?a=r:a<0&&(a=e.length);return e.slice(l,a)},cc.dirname=function(e){var t,n,r;if(dc(e),!e.length)return".";t=-1,r=e.length;for(;--r;)if(47===e.charCodeAt(r)){if(n){t=r;break}}else n||(n=!0);return t<0?47===e.charCodeAt(0)?"/":".":1===t&&47===e.charCodeAt(0)?"//":e.slice(0,t)},cc.extname=function(e){var t,n,r,i=-1,o=0,l=-1,a=0;dc(e),r=e.length;for(;r--;)if(47!==(n=e.charCodeAt(r)))l<0&&(t=!0,l=r+1),46===n?i<0?i=r:1!==a&&(a=1):i>-1&&(a=-1);else if(t){o=r+1;break}if(i<0||l<0||0===a||1===a&&i===l-1&&i===o+1)return"";return e.slice(i,l)},cc.join=function(){var e,t=-1;for(;++t<arguments.length;)dc(arguments[t]),arguments[t]&&(e=void 0===e?arguments[t]:e+"/"+arguments[t]);return void 0===e?".":function(e){var t,n;dc(e),t=47===e.charCodeAt(0),n=function(e,t){var n,r,i="",o=0,l=-1,a=0,s=-1;for(;++s<=e.length;){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(l===s-1||1===a);else if(l!==s-1&&2===a){if(i.length<2||2!==o||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){if((r=i.lastIndexOf("/"))!==i.length-1){r<0?(i="",o=0):o=(i=i.slice(0,r)).length-1-i.lastIndexOf("/"),l=s,a=0;continue}}else if(i.length){i="",o=0,l=s,a=0;continue}t&&(i=i.length?i+"/..":"..",o=2)}else i.length?i+="/"+e.slice(l+1,s):i=e.slice(l+1,s),o=s-l-1;l=s,a=0}else 46===n&&a>-1?a++:a=-1}return i}(e,!t),n.length||t||(n=".");n.length&&47===e.charCodeAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},cc.sep="/";var fc={};fc.cwd=function(){return"/"};var pc=cc,vc=fc,mc=Nu,gc=yc,hc={}.hasOwnProperty,bc=["history","path","basename","stem","extname","dirname"];function yc(e){var t,n;if(e){if("string"==typeof e||mc(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof yc))return new yc(e);for(this.data={},this.messages=[],this.history=[],this.cwd=vc.cwd(),n=-1;++n<bc.length;)t=bc[n],hc.call(e,t)&&(this[t]=e[t]);for(t in e)bc.indexOf(t)<0&&(this[t]=e[t])}function xc(e,t){if(e&&e.indexOf(pc.sep)>-1)throw new Error("`"+t+"` cannot be a path: did not expect `"+pc.sep+"`")}function wc(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Ec(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}yc.prototype.toString=function(e){return(this.contents||"").toString(e)},Object.defineProperty(yc.prototype,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){wc(e,"path"),this.path!==e&&this.history.push(e)}}),Object.defineProperty(yc.prototype,"dirname",{get:function(){return"string"==typeof this.path?pc.dirname(this.path):void 0},set:function(e){Ec(this.path,"dirname"),this.path=pc.join(e||"",this.basename)}}),Object.defineProperty(yc.prototype,"basename",{get:function(){return"string"==typeof this.path?pc.basename(this.path):void 0},set:function(e){wc(e,"basename"),xc(e,"basename"),this.path=pc.join(this.dirname||"",e)}}),Object.defineProperty(yc.prototype,"extname",{get:function(){return"string"==typeof this.path?pc.extname(this.path):void 0},set:function(e){if(xc(e,"extname"),Ec(this.path,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.indexOf(".",1)>-1)throw new Error("`extname` cannot contain multiple dots")}this.path=pc.join(this.dirname,this.stem+(e||""))}}),Object.defineProperty(yc.prototype,"stem",{get:function(){return"string"==typeof this.path?pc.basename(this.path,this.extname):void 0},set:function(e){wc(e,"stem"),xc(e,"stem"),this.path=pc.join(this.dirname||"",e+(this.extname||""))}});var Sc=lc,_c=gc,jc=_c;_c.prototype.message=function(e,t,n){var r=new Sc(e,t,n);this.path&&(r.name=this.path+":"+r.name,r.file=this.path);return r.fatal=!1,this.messages.push(r),r},_c.prototype.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},_c.prototype.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e},Ju.exports=jc;var kc=Du,Cc=Nu,Rc=function e(){var t,n,r,i,o,l,a=arguments[0],s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},s=2),(null==a||"object"!=typeof a&&"function"!=typeof a)&&(a={});s<u;++s)if(null!=(t=arguments[s]))for(n in t)r=Wu(a,n),a!==(i=Wu(t,n))&&(c&&i&&(Uu(i)||(o=Hu(i)))?(o?(o=!1,l=r&&Hu(r)?r:[]):l=r&&Uu(r)?r:{},Gu(a,{name:n,newValue:e(c,l,i)})):void 0!==i&&Gu(a,{name:n,newValue:i}));return a},Tc=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype},Ic=Xu,Oc=Zu,Ac=function e(){var t,n=[],r=Ic(),i={},o=-1;return l.data=function(e,n){if("string"==typeof e)return 2===arguments.length?(Fc("data",t),i[e]=n,l):Pc.call(i,e)&&i[e]||null;if(e)return Fc("data",t),i=e,l;return i},l.freeze=a,l.attachers=n,l.use=function(e){var r;if(Fc("use",t),null==e);else if("function"==typeof e)c.apply(null,arguments);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?u(e):o(e)}r&&(i.settings=Rc(i.settings||{},r));return l;function o(e){u(e.plugins),e.settings&&(r=Rc(r||{},e.settings))}function a(e){if("function"==typeof e)c(e);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?c.apply(null,e):o(e)}}function u(e){var t=-1;if(null==e);else{if("object"!=typeof e||!("length"in e))throw new Error("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;)a(e[t])}}function c(e,t){var r=s(e);r?(Tc(r[1])&&Tc(t)&&(t=Rc(!0,r[1],t)),r[1]=t):n.push(Vc.call(arguments))}},l.parse=function(e){var t,n=Oc(e);if(a(),Dc("parse",t=l.Parser),$c(t,"parse"))return new t(String(n),n).parse();return t(String(n),n)},l.stringify=function(e,t){var n,r=Oc(t);if(a(),Nc("stringify",n=l.Compiler),zc(e),$c(n,"compile"))return new n(e,r).compile();return n(e,r)},l.run=u,l.runSync=function(e,t){var n,r;return u(e,t,i),Bc("runSync","run",r),n;function i(e,t){r=!0,n=t,kc(e)}},l.process=c,l.processSync=function(e){var t,n;return a(),Dc("processSync",l.Parser),Nc("processSync",l.Compiler),c(t=Oc(e),r),Bc("processSync","process",n),t;function r(e){n=!0,kc(e)}},l;function l(){for(var t=e(),r=-1;++r<n.length;)t.use.apply(null,n[r]);return t.data(Rc(!0,{},i)),t}function a(){var e,i;if(t)return l;for(;++o<n.length;)!1!==(e=n[o])[1]&&(!0===e[1]&&(e[1]=void 0),"function"==typeof(i=e[0].apply(l,e.slice(1)))&&r.use(i));return t=!0,o=1/0,l}function s(e){for(var t=-1;++t<n.length;)if(n[t][0]===e)return n[t]}function u(e,t,n){if(zc(e),a(),n||"function"!=typeof t||(n=t,t=null),!n)return new Promise(i);function i(i,o){r.run(e,Oc(t),(function(t,r,l){r=r||e,t?o(t):i?i(r):n(null,r,l)}))}i(null,n)}function c(e,t){if(a(),Dc("process",l.Parser),Nc("process",l.Compiler),!t)return new Promise(n);function n(n,r){var i=Oc(e);Lc.run(l,{file:i},(function(e){e?r(e):n?n(i):t(null,i)}))}n(null,t)}}().freeze(),Vc=[].slice,Pc={}.hasOwnProperty,Lc=Ic().use((function(e,t){t.tree=e.parse(t.file)})).use((function(e,t,n){e.run(t.tree,t.file,(function(e,r,i){e?n(e):(t.tree=r,t.file=i,n())}))})).use((function(e,t){var n=e.stringify(t.tree,t.file);null==n||("string"==typeof n||Cc(n)?("value"in t.file&&(t.file.value=n),t.file.contents=n):t.file.result=n)}));function $c(e,t){return"function"==typeof e&&e.prototype&&(function(e){var t;for(t in e)return!0;return!1}(e.prototype)||t in e.prototype)}function Dc(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Parser`")}function Nc(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Compiler`")}function Fc(e,t){if(t)throw new Error("Cannot invoke `"+e+"` on a frozen processor.\nCreate a new processor first, by invoking it: use `processor()` instead of `processor`.")}function zc(e){if(!e||"string"!=typeof e.type)throw new Error("Expected node, got `"+e+"`")}function Bc(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}var Mc={},Hc={get exports(){return Mc},set exports(e){Mc=e}},Uc=Gc;function Gc(e){return e&&(e.value||e.alt||e.title||"children"in e&&Wc(e.children)||"length"in e&&Wc(e))||""}function Wc(e){for(var t=[],n=-1;++n<e.length;)t[n]=Gc(e[n]);return t.join("")}var qc=Object.assign,Yc={}.hasOwnProperty;var Xc=function(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()},Qc=String.fromCharCode,Kc=Qc;var Zc=function(e,t){var n=parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535==(65535&n)||65534==(65535&n)||n>1114111?"�":Kc(n)},Jc={};var ed=function(e){return e<-2};var td=function(e){return-2===e||-1===e||32===e},nd=td;var rd=function(e,t,n,r){var i=r?r-1:1/0,o=0;return function(r){if(nd(r))return e.enter(n),l(r);return t(r)};function l(r){return nd(r)&&o++<i?(e.consume(r),l):(e.exit(n),t(r))}};Object.defineProperty(Jc,"__esModule",{value:!0});var id=ed,od=rd,ld=function(e){var t,n=e.attempt(this.parser.constructs.contentInitial,(function(t){if(null===t)return void e.consume(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),od(e,n,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));return n;function r(n){var r=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=r),t=r,i(n)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):id(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}};Jc.tokenize=ld;var ad={},sd=ed,ud=rd;var cd={tokenize:function(e,t,n){return ud(e,(function(e){return null===e||sd(e)?t(e):n(e)}),"linePrefix")},partial:!0};Object.defineProperty(ad,"__esModule",{value:!0});var dd=ed,fd=rd,pd=cd,vd=function(e){var t,n,r,i=this,o=[],l=0,a={tokenize:function(e,r){var l=0;return t={},a;function a(r){return l<o.length?(i.containerState=o[l][1],e.attempt(o[l][0].continuation,s,u)(r)):n.currentConstruct&&n.currentConstruct.concrete?(t.flowContinue=!0,f(r)):(i.interrupt=n.currentConstruct&&n.currentConstruct.interruptible,i.containerState={},e.attempt(md,d,f)(r))}function s(e){return l++,i.containerState._closeFlow?d(e):a(e)}function u(t){return n.currentConstruct&&n.currentConstruct.lazy?(i.containerState={},e.attempt(md,d,e.attempt(gd,d,e.check(pd,d,c)))(t)):d(t)}function c(e){return l=o.length,t.lazy=!0,t.flowContinue=!0,f(e)}function d(e){return t.flowEnd=!0,f(e)}function f(e){return t.continued=l,i.interrupt=i.containerState=void 0,r(e)}},partial:!0};return s;function s(t){return l<o.length?(i.containerState=o[l][1],e.attempt(o[l][0].continuation,u,c)(t)):c(t)}function u(e){return l++,s(e)}function c(r){return t&&t.flowContinue?f(r):(i.interrupt=n&&n.currentConstruct&&n.currentConstruct.interruptible,i.containerState={},e.attempt(md,d,f)(r))}function d(e){return o.push([i.currentConstruct,i.containerState]),i.containerState=void 0,c(e)}function f(t){return null===t?(g(0,!0),void e.consume(t)):(n=n||i.parser.flow(i.now()),e.enter("chunkFlow",{contentType:"flow",previous:r,_tokenizer:n}),p(t))}function p(t){return null===t?(m(e.exit("chunkFlow")),f(t)):dd(t)?(e.consume(t),m(e.exit("chunkFlow")),e.check(a,v)):(e.consume(t),p)}function v(e){return g(t.continued,t&&t.flowEnd),l=0,s(e)}function m(e){r&&(r.next=e),r=e,n.lazy=t&&t.lazy,n.defineSkip(e.start),n.write(i.sliceStream(e))}function g(t,l){var a=o.length;for(n&&l&&(n.write([null]),r=n=void 0);a-- >t;)i.containerState=o[a][1],o[a][0].exit.call(i,e);o.length=t}},md={tokenize:function(e,t,n){return fd(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}},gd={tokenize:function(e,t,n){return fd(e,e.lazy(this.parser.constructs.flow,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}};ad.tokenize=vd;var hd={};var bd=function(e){for(var t=-1,n=0;++t<e.length;)n+="string"==typeof e[t]?e[t].length:1;return n},yd=bd;var xd=function(e,t){var n=e[e.length-1];return n&&n[1].type===t?yd(n[2].sliceStream(n[1])):0},wd=[].splice;var Ed=function(e,t,n,r){var i,o=e.length,l=0;if(t=t<0?-t>o?0:o+t:t>o?o:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),wd.apply(e,i);else for(n&&wd.apply(e,[t,n]);l<r.length;)(i=r.slice(l,l+1e4)).unshift(t,0),wd.apply(e,i),l+=1e4,t+=1e4},Sd=qc;var _d=function(e){return Sd({},e)},jd=qc,kd=Ed,Cd=_d;function Rd(e,t){for(var n,r,i,o,l,a,s=e[t][1],u=e[t][2],c=t-1,d=[],f=s._tokenizer||u.parser[s.contentType](s.start),p=f.events,v=[],m={};s;){for(;e[++c][1]!==s;);d.push(c),s._tokenizer||(n=u.sliceStream(s),s.next||n.push(null),r&&f.defineSkip(s.start),s.isInFirstContentOfListItem&&(f._gfmTasklistFirstContentOfListItem=!0),f.write(n),s.isInFirstContentOfListItem&&(f._gfmTasklistFirstContentOfListItem=void 0)),r=s,s=s.next}for(s=r,i=p.length;i--;)"enter"===p[i][0]?o=!0:o&&p[i][1].type===p[i-1][1].type&&p[i][1].start.line!==p[i][1].end.line&&(g(p.slice(i+1,l)),s._tokenizer=s.next=void 0,s=s.previous,l=i+1);for(f.events=s._tokenizer=s.next=void 0,g(p.slice(0,l)),i=-1,a=0;++i<v.length;)m[a+v[i][0]]=a+v[i][1],a+=v[i][1]-v[i][0]-1;return m;function g(t){var n=d.pop();v.unshift([n,n+t.length-1]),kd(e,n,2,t)}}var Td=function(e){for(var t,n,r,i,o,l,a,s={},u=-1;++u<e.length;){for(;u in s;)u=s[u];if(t=e[u],u&&"chunkFlow"===t[1].type&&"listItemPrefix"===e[u-1][1].type&&((r=0)<(l=t[1]._tokenizer.events).length&&"lineEndingBlank"===l[r][1].type&&(r+=2),r<l.length&&"content"===l[r][1].type))for(;++r<l.length&&"content"!==l[r][1].type;)"chunkText"===l[r][1].type&&(l[r][1].isInFirstContentOfListItem=!0,r++);if("enter"===t[0])t[1].contentType&&(jd(s,Rd(e,u)),u=s[u],a=!0);else if(t[1]._container||t[1]._movePreviousLineEndings){for(r=u,n=void 0;r--&&("lineEnding"===(i=e[r])[1].type||"lineEndingBlank"===i[1].type);)"enter"===i[0]&&(n&&(e[n][1].type="lineEndingBlank"),i[1].type="lineEnding",n=r);n&&(t[1].end=Cd(e[n][1].start),(o=e.slice(n,u)).unshift(t),kd(e,n,u-n+1,o))}}return!a},Id=ed,Od=xd,Ad=Td,Vd=rd,Pd={tokenize:function(e,t){var n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):Id(t)?e.check(Ld,o,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function o(t){return e.consume(t),e.exit("chunkContent"),n=n.next=e.enter("chunkContent",{contentType:"content",previous:n}),r}},resolve:function(e){return Ad(e),e},interruptible:!0,lazy:!0},Ld={tokenize:function(e,t,n){var r=this;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Vd(e,i,"linePrefix")};function i(i){return null===i||Id(i)?n(i):r.parser.constructs.disable.null.indexOf("codeIndented")>-1||Od(r.events,"linePrefix")<4?e.interrupt(r.parser.constructs.flow,n,t)(i):t(i)}},partial:!0};var $d=Pd;Object.defineProperty(hd,"__esModule",{value:!0});var Dd=$d,Nd=rd,Fd=cd,zd=function(e){var t=this,n=e.attempt(Fd,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,Nd(e,e.attempt(this.parser.constructs.flow,r,e.attempt(Dd,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}};hd.tokenize=zd;var Bd={};Object.defineProperty(Bd,"__esModule",{value:!0});var Md=qc,Hd=_d,Ud=qd("text"),Gd=qd("string"),Wd={resolveAll:Yd()};function qd(e){return{tokenize:function(t){var n=this,r=this.parser.constructs[e],i=t.attempt(r,o,l);return o;function o(e){return s(e)?i(e):l(e)}function l(e){if(null!==e)return t.enter("data"),t.consume(e),a;t.consume(e)}function a(e){return s(e)?(t.exit("data"),i(e)):(t.consume(e),a)}function s(e){var t=r[e],i=-1;if(null===e)return!0;if(t)for(;++i<t.length;)if(!t[i].previous||t[i].previous.call(n,n.previous))return!0}},resolveAll:Yd("text"===e?Xd:void 0)}}function Yd(e){return function(t,n){var r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function Xd(e,t){for(var n,r,i,o,l,a,s,u,c=-1;++c<=e.length;)if((c===e.length||"lineEnding"===e[c][1].type)&&"data"===e[c-1][1].type){for(r=e[c-1][1],o=(n=t.sliceStream(r)).length,l=-1,a=0,s=void 0;o--;)if("string"==typeof(i=n[o])){for(l=i.length;32===i.charCodeAt(l-1);)a++,l--;if(l)break;l=-1}else if(-2===i)s=!0,a++;else if(-1!==i){o++;break}a&&(u={type:c===e.length||s||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+o,_bufferIndex:o?l:r.start._bufferIndex+l},end:Hd(r.end)},r.end=Hd(u.start),r.start.offset===r.end.offset?Md(r,u):(e.splice(c,0,["enter",u,t],["exit",u,t]),c+=2)),c++}return e}Bd.resolver=Wd,Bd.string=Gd,Bd.text=Ud;var Qd=function(e){return null==e?[]:"length"in e?e:[e]},Kd=Yc,Zd=Ed,Jd=Qd;function ef(e,t){var n,r,i,o;for(n in t)for(o in r=Kd.call(e,n)?e[n]:e[n]={},i=t[n])r[o]=tf(Jd(i[o]),Kd.call(r,o)?r[o]:[])}function tf(e,t){for(var n=-1,r=[];++n<e.length;)("after"===e[n].add?t:r).push(e[n]);return Zd(t,0,0,r),t}var nf=function(e){for(var t={},n=-1;++n<e.length;)ef(t,e[n]);return t},rf=Ed;var of=function(e,t){return e.length?(rf(e,e.length,0,t),e):t};var lf=function(e,t,n){for(var r,i=[],o=-1;++o<e.length;)(r=e[o].resolveAll)&&i.indexOf(r)<0&&(t=r(t,n),i.push(r));return t},af=Qc;var sf=qc,uf=ed,cf=of,df=Ed,ff=Qd,pf=lf,vf=function(e){for(var t,n,r,i=-1,o=[];++i<e.length;){if("string"==typeof(t=e[i]))n=t;else if(-5===t)n="\r";else if(-4===t)n="\n";else if(-3===t)n="\r\n";else if(-2===t)n="\t";else if(-1===t){if(r)continue;n=" "}else n=af(t);r=-2===t,o.push(n)}return o.join("")},mf=_d,gf=function(e,t){var n,r=t.start._index,i=t.start._bufferIndex,o=t.end._index,l=t.end._bufferIndex;return r===o?n=[e[r].slice(i,l)]:(n=e.slice(r,o),i>-1&&(n[0]=n[0].slice(i)),l>0&&n.push(e[o].slice(0,l))),n};var hf=function(e,t,n){var r=n?mf(n):{line:1,column:1,offset:0},i={},o=[],l=[],a=[],s={consume:function(e){uf(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,b()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++));u.previous=e},enter:function(e,t){var n=t||{};return n.type=e,n.start=f(),u.events.push(["enter",n,u]),a.push(n),n},exit:function(e){var t=a.pop();return t.end=f(),u.events.push(["exit",t,u]),t},attempt:g((function(e,t){h(e,t.from)})),check:g(m),interrupt:g(m,{interrupt:!0}),lazy:g(m,{lazy:!0})},u={previous:null,events:[],parser:e,sliceStream:d,sliceSerialize:function(e){return vf(d(e))},now:f,defineSkip:function(e){i[e.line]=e.column,b()},write:function(e){if(l=cf(l,e),p(),null!==l[l.length-1])return[];return h(t,0),u.events=pf(o,u.events,u),u.events}},c=t.tokenize.call(u,s);return t.resolveAll&&o.push(t),r._index=0,r._bufferIndex=-1,u;function d(e){return gf(l,e)}function f(){return mf(r)}function p(){for(var e,t;r._index<l.length;)if("string"==typeof(t=l[r._index]))for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)v(t.charCodeAt(r._bufferIndex));else v(t)}function v(e){c=c(e)}function m(e,t){t.restore()}function g(e,t){return function(n,i,o){var l,c,d,p;return n.tokenize||"length"in n?v(ff(n)):function(e){if(e in n||null in n)return v(n.null?ff(n[e]).concat(ff(n.null)):n[e])(e);return o(e)};function v(e){return l=e,m(e[c=0])}function m(e){return function(n){p=function(){var e=f(),t=u.previous,n=u.currentConstruct,i=u.events.length,o=Array.from(a);return{restore:l,from:i};function l(){r=e,u.previous=t,u.currentConstruct=n,u.events.length=i,a=o,b()}}(),d=e,e.partial||(u.currentConstruct=e);if(e.name&&u.parser.constructs.disable.null.indexOf(e.name)>-1)return h();return e.tokenize.call(t?sf({},u,t):u,s,g,h)(n)}}function g(t){return e(d,p),i}function h(e){return p.restore(),++c<l.length?m(l[c]):o}}}function h(e,t){e.resolveAll&&o.indexOf(e)<0&&o.push(e),e.resolve&&df(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function b(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}},bf={};var yf=function(e){return e<0||32===e},xf=Qc;var wf=function(e){return function(t){return e.test(xf(t))}},Ef=wf(/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/),Sf=wf(/\s/),_f=yf,jf=Ef,kf=Sf;var Cf=of,Rf=Ed,Tf=function(e){return null===e||_f(e)||kf(e)?1:jf(e)?2:void 0},If=function(e,t){return e.column+=t,e.offset+=t,e._bufferIndex+=t,e},Of=lf,Af=_d;var Vf={name:"attention",tokenize:function(e,t){var n,r=Tf(this.previous);return function(t){return e.enter("attentionSequence"),n=t,i(t)};function i(o){var l,a,s,u;return o===n?(e.consume(o),i):(l=e.exit("attentionSequence"),s=!(a=Tf(o))||2===a&&r,u=!r||2===r&&a,l._open=42===n?s:s&&(r||!u),l._close=42===n?u:u&&(a||!s),t(o))}},resolveAll:function(e,t){var n,r,i,o,l,a,s,u,c=-1;for(;++c<e.length;)if("enter"===e[c][0]&&"attentionSequence"===e[c][1].type&&e[c][1]._close)for(n=c;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[c][1]).charCodeAt(0)){if((e[n][1]._close||e[c][1]._open)&&(e[c][1].end.offset-e[c][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[c][1].end.offset-e[c][1].start.offset)%3))continue;o={type:(a=e[n][1].end.offset-e[n][1].start.offset>1&&e[c][1].end.offset-e[c][1].start.offset>1?2:1)>1?"strongSequence":"emphasisSequence",start:If(Af(e[n][1].end),-a),end:Af(e[n][1].end)},l={type:a>1?"strongSequence":"emphasisSequence",start:Af(e[c][1].start),end:If(Af(e[c][1].start),a)},i={type:a>1?"strongText":"emphasisText",start:Af(e[n][1].end),end:Af(e[c][1].start)},r={type:a>1?"strong":"emphasis",start:Af(o.start),end:Af(l.end)},e[n][1].end=Af(o.start),e[c][1].start=Af(l.end),s=[],e[n][1].end.offset-e[n][1].start.offset&&(s=Cf(s,[["enter",e[n][1],t],["exit",e[n][1],t]])),s=Cf(s,[["enter",r,t],["enter",o,t],["exit",o,t],["enter",i,t]]),s=Cf(s,Of(t.parser.constructs.insideSpan.null,e.slice(n+1,c),t)),s=Cf(s,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",r,t]]),e[c][1].end.offset-e[c][1].start.offset?(u=2,s=Cf(s,[["enter",e[c][1],t],["exit",e[c][1],t]])):u=0,Rf(e,n-1,c-n+3,s),c=n+s.length-u-2;break}c=-1;for(;++c<e.length;)"attentionSequence"===e[c][1].type&&(e[c][1].type="data");return e}},Pf=wf(/[A-Za-z]/),Lf=wf(/[\dA-Za-z]/),$f=wf(/[#-'*+\--9=?A-Z^-~]/);var Df=function(e){return e<32||127===e},Nf=Pf,Ff=Lf,zf=$f,Bf=Df;var Mf={name:"autolink",tokenize:function(e,t,n){var r=1;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return Nf(t)?(e.consume(t),o):zf(t)?s(t):n(t)}function o(e){return 43===e||45===e||46===e||Ff(e)?l(e):s(e)}function l(t){return 58===t?(e.consume(t),a):(43===t||45===t||46===t||Ff(t))&&r++<32?(e.consume(t),l):s(t)}function a(t){return 62===t?(e.exit("autolinkProtocol"),f(t)):32===t||60===t||Bf(t)?n(t):(e.consume(t),a)}function s(t){return 64===t?(e.consume(t),r=0,u):zf(t)?(e.consume(t),s):n(t)}function u(e){return Ff(e)?c(e):n(e)}function c(t){return 46===t?(e.consume(t),r=0,u):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",f(t)):d(t)}function d(t){return(45===t||Ff(t))&&r++<63?(e.consume(t),45===t?d:c):n(t)}function f(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}},Hf=td,Uf=rd,Gf={name:"blockQuote",tokenize:function(e,t,n){var r=this;return function(t){if(62===t)return r.containerState.open||(e.enter("blockQuote",{_container:!0}),r.containerState.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i;return n(t)};function i(n){return Hf(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){return Uf(e,e.attempt(Gf,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}},exit:function(e){e.exit("blockQuote")}};var Wf=Gf,qf=wf(/[!-/:-@[-`{-~]/);var Yf,Xf={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return qf(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}},Qf=function(e){var t,n="&"+e+";";if((Yf=Yf||document.createElement("i")).innerHTML=n,59===(t=Yf.textContent).charCodeAt(t.length-1)&&"semi"!==e)return!1;return t!==n&&t};var Kf=wf(/\d/),Zf=wf(/[\dA-Fa-f]/),Jf=Lf,ep=Kf,tp=Zf;function np(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var rp=np(Qf);var ip={name:"characterReference",tokenize:function(e,t,n){var r,i,o=this,l=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),a};function a(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),s):(e.enter("characterReferenceValue"),r=31,i=Jf,u(t))}function s(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),r=6,i=tp,u):(e.enter("characterReferenceValue"),r=7,i=ep,u(t))}function u(a){var s;return 59===a&&l?(s=e.exit("characterReferenceValue"),i!==Jf||rp.default(o.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(a),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(a)):i(a)&&l++<r?(e.consume(a),u):n(a)}}},op=ed,lp=yf,ap=xd,sp=rd;var up={name:"codeFenced",tokenize:function(e,t,n){var r,i=this,o={tokenize:function(e,t,n){var i=0;return sp(e,o,"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4);function o(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}function l(t){return t===r?(e.consume(t),i++,l):i<a?n(t):(e.exit("codeFencedFenceSequence"),sp(e,s,"whitespace")(t))}function s(r){return null===r||op(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0},l=ap(this.events,"linePrefix"),a=0;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),r=t,s(t)};function s(t){return t===r?(e.consume(t),a++,s):(e.exit("codeFencedFenceSequence"),a<3?n(t):sp(e,u,"whitespace")(t))}function u(t){return null===t||op(t)?p(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return null===t||lp(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),sp(e,d,"whitespace")(t)):96===t&&t===r?n(t):(e.consume(t),c)}function d(t){return null===t||op(t)?p(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return null===t||op(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(t)):96===t&&t===r?n(t):(e.consume(t),f)}function p(n){return e.exit("codeFencedFence"),i.interrupt?t(n):v(n)}function v(t){return null===t?g(t):op(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.attempt(o,g,l?sp(e,v,"linePrefix",l+1):v)):(e.enter("codeFlowValue"),m(t))}function m(t){return null===t||op(t)?(e.exit("codeFlowValue"),v(t)):(e.consume(t),m)}function g(n){return e.exit("codeFenced"),t(n)}},concrete:!0},cp=ed,dp=Ed,fp=xd,pp=rd,vp={name:"codeIndented",tokenize:function(e,t,n){return e.attempt(mp,r,n);function r(n){return null===n?t(n):cp(n)?e.attempt(mp,r,t)(n):(e.enter("codeFlowValue"),i(n))}function i(t){return null===t||cp(t)?(e.exit("codeFlowValue"),r(t)):(e.consume(t),i)}},resolve:function(e,t){var n={type:"codeIndented",start:e[0][1].start,end:e[e.length-1][1].end};return dp(e,0,0,[["enter",n,t]]),dp(e,e.length,0,[["exit",n,t]]),e}},mp={tokenize:function(e,t,n){var r=this;return pp(e,(function i(o){if(cp(o))return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),pp(e,i,"linePrefix",5);return fp(r.events,"linePrefix")<4?n(o):t(o)}),"linePrefix",5)},partial:!0};var gp=vp,hp=ed;var bp={name:"codeText",tokenize:function(e,t,n){var r,i,o=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),l(t)};function l(t){return 96===t?(e.consume(t),o++,l):(e.exit("codeTextSequence"),a(t))}function a(t){return null===t?n(t):96===t?(i=e.enter("codeTextSequence"),r=0,u(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),a):hp(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a):(e.enter("codeTextData"),s(t))}function s(t){return null===t||32===t||96===t||hp(t)?(e.exit("codeTextData"),a(t)):(e.consume(t),s)}function u(n){return 96===n?(e.consume(n),r++,u):r===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",s(n))}},resolve:function(e){var t,n,r=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[r][1].type=e[i][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}},yp=Df,xp=yf,wp=ed;var Ep=function(e,t,n,r,i,o,l,a,s){var u=s||1/0,c=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(o),e.consume(t),e.exit(o),d;if(yp(t)||41===t)return n(t);return e.enter(r),e.enter(l),e.enter(a),e.enter("chunkString",{contentType:"string"}),v(t)};function d(n){return 62===n?(e.enter(o),e.consume(n),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),f(n))}function f(t){return 62===t?(e.exit("chunkString"),e.exit(a),d(t)):null===t||60===t||wp(t)?n(t):(e.consume(t),92===t?p:f)}function p(t){return 60===t||62===t||92===t?(e.consume(t),f):f(t)}function v(i){return 40===i?++c>u?n(i):(e.consume(i),v):41===i?c--?(e.consume(i),v):(e.exit("chunkString"),e.exit(a),e.exit(l),e.exit(r),t(i)):null===i||xp(i)?c?n(i):(e.exit("chunkString"),e.exit(a),e.exit(l),e.exit(r),t(i)):yp(i)?n(i):(e.consume(i),92===i?m:v)}function m(t){return 40===t||41===t||92===t?(e.consume(t),v):v(t)}},Sp=ed,_p=td;var jp=function(e,t,n,r,i,o){var l,a=this,s=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(o),u};function u(d){return null===d||91===d||93===d&&!l||94===d&&!s&&"_hiddenFootnoteSupport"in a.parser.constructs||s>999?n(d):93===d?(e.exit(o),e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):Sp(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(t){return null===t||91===t||93===t||Sp(t)||s++>999?(e.exit("chunkString"),u(t)):(e.consume(t),l=l||!_p(t),92===t?d:c)}function d(t){return 91===t||92===t||93===t?(e.consume(t),s++,c):c(t)}},kp=ed,Cp=td,Rp=rd;var Tp=function(e,t){var n;return function r(i){if(kp(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(Cp(i))return Rp(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}},Ip=ed,Op=rd;var Ap=function(e,t,n,r,i,o){var l;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),l=40===t?41:t,a};function a(n){return n===l?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(o),s(n))}function s(t){return t===l?(e.exit(o),a(l)):null===t?n(t):Ip(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Op(e,s,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(t))}function u(t){return t===l||null===t||Ip(t)?(e.exit("chunkString"),s(t)):(e.consume(t),92===t?c:u)}function c(t){return t===l||92===t?(e.consume(t),u):u(t)}},Vp=ed,Pp=yf,Lp=Xc,$p=Ep,Dp=jp,Np=rd,Fp=Tp,zp=Ap,Bp={name:"definition",tokenize:function(e,t,n){var r,i=this;return function(t){return e.enter("definition"),Dp.call(i,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function o(t){return r=Lp(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),Fp(e,$p(e,e.attempt(Mp,Np(e,l,"whitespace"),Np(e,l,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function l(o){return null===o||Vp(o)?(e.exit("definition"),i.parser.defined.indexOf(r)<0&&i.parser.defined.push(r),t(o)):n(o)}}},Mp={tokenize:function(e,t,n){return function(t){return Pp(t)?Fp(e,r)(t):n(t)};function r(t){return 34===t||39===t||40===t?zp(e,Np(e,i,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function i(e){return null===e||Vp(e)?t(e):n(e)}},partial:!0};var Hp=Bp,Up=ed;var Gp={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),r};function r(r){return Up(r)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(r)):n(r)}}},Wp=ed,qp=yf,Yp=td,Xp=Ed,Qp=rd;var Kp={name:"headingAtx",tokenize:function(e,t,n){var r=this,i=0;return function(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),o(t)};function o(a){return 35===a&&i++<6?(e.consume(a),o):null===a||qp(a)?(e.exit("atxHeadingSequence"),r.interrupt?t(a):l(a)):n(a)}function l(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||Wp(n)?(e.exit("atxHeading"),t(n)):Yp(n)?Qp(e,l,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),l(t))}function s(t){return null===t||35===t||qp(t)?(e.exit("atxHeadingText"),l(t)):(e.consume(t),s)}},resolve:function(e,t){var n,r,i=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);i-2>o&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(o===i-1||i-4>o&&"whitespace"===e[i-2][1].type)&&(i-=o+1===i?2:4);i>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[i][1].end},r={type:"chunkText",start:e[o][1].start,end:e[i][1].end,contentType:"text"},Xp(e,o,i-o+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e}},Zp=Pf,Jp=Lf,ev=ed,tv=yf,nv=td,rv=Qc,iv=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ov=["pre","script","style","textarea"],lv=cd,av={name:"htmlFlow",tokenize:function(e,t,n){var r,i,o,l,a,s=this;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),u};function u(l){return 33===l?(e.consume(l),c):47===l?(e.consume(l),p):63===l?(e.consume(l),r=3,s.interrupt?t:V):Zp(l)?(e.consume(l),o=rv(l),i=!0,v):n(l)}function c(i){return 45===i?(e.consume(i),r=2,d):91===i?(e.consume(i),r=5,o="CDATA[",l=0,f):Zp(i)?(e.consume(i),r=4,s.interrupt?t:V):n(i)}function d(r){return 45===r?(e.consume(r),s.interrupt?t:V):n(r)}function f(r){return r===o.charCodeAt(l++)?(e.consume(r),l===o.length?s.interrupt?t:k:f):n(r)}function p(t){return Zp(t)?(e.consume(t),o=rv(t),v):n(t)}function v(l){return null===l||47===l||62===l||tv(l)?47!==l&&i&&ov.indexOf(o.toLowerCase())>-1?(r=1,s.interrupt?t(l):k(l)):iv.indexOf(o.toLowerCase())>-1?(r=6,47===l?(e.consume(l),m):s.interrupt?t(l):k(l)):(r=7,s.interrupt?n(l):i?h(l):g(l)):45===l||Jp(l)?(e.consume(l),o+=rv(l),v):n(l)}function m(r){return 62===r?(e.consume(r),s.interrupt?t:k):n(r)}function g(t){return nv(t)?(e.consume(t),g):_(t)}function h(t){return 47===t?(e.consume(t),_):58===t||95===t||Zp(t)?(e.consume(t),b):nv(t)?(e.consume(t),h):_(t)}function b(t){return 45===t||46===t||58===t||95===t||Jp(t)?(e.consume(t),b):y(t)}function y(t){return 61===t?(e.consume(t),x):nv(t)?(e.consume(t),y):h(t)}function x(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),a=t,w):nv(t)?(e.consume(t),x):(a=void 0,E(t))}function w(t){return t===a?(e.consume(t),S):null===t||ev(t)?n(t):(e.consume(t),w)}function E(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||tv(t)?y(t):(e.consume(t),E)}function S(e){return 47===e||62===e||nv(e)?h(e):n(e)}function _(t){return 62===t?(e.consume(t),j):n(t)}function j(t){return nv(t)?(e.consume(t),j):null===t||ev(t)?k(t):n(t)}function k(t){return 45===t&&2===r?(e.consume(t),T):60===t&&1===r?(e.consume(t),I):62===t&&4===r?(e.consume(t),P):63===t&&3===r?(e.consume(t),V):93===t&&5===r?(e.consume(t),A):!ev(t)||6!==r&&7!==r?null===t||ev(t)?C(t):(e.consume(t),k):e.check(sv,P,C)(t)}function C(t){return e.exit("htmlFlowData"),R(t)}function R(t){return null===t?L(t):ev(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),R):(e.enter("htmlFlowData"),k(t))}function T(t){return 45===t?(e.consume(t),V):k(t)}function I(t){return 47===t?(e.consume(t),o="",O):k(t)}function O(t){return 62===t&&ov.indexOf(o.toLowerCase())>-1?(e.consume(t),P):Zp(t)&&o.length<8?(e.consume(t),o+=rv(t),O):k(t)}function A(t){return 93===t?(e.consume(t),V):k(t)}function V(t){return 62===t?(e.consume(t),P):k(t)}function P(t){return null===t||ev(t)?(e.exit("htmlFlowData"),L(t)):(e.consume(t),P)}function L(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){var t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},sv={tokenize:function(e,t,n){return function(r){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),e.attempt(lv,t,n)}},partial:!0};var uv=av,cv=Pf,dv=Lf,fv=ed,pv=yf,vv=td,mv=rd;var gv={name:"htmlText",tokenize:function(e,t,n){var r,i,o,l,a=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),u):47===t?(e.consume(t),E):63===t?(e.consume(t),x):cv(t)?(e.consume(t),j):n(t)}function u(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),i="CDATA[",o=0,m):cv(t)?(e.consume(t),y):n(t)}function c(t){return 45===t?(e.consume(t),d):n(t)}function d(t){return null===t||62===t?n(t):45===t?(e.consume(t),f):p(t)}function f(e){return null===e||62===e?n(e):p(e)}function p(t){return null===t?n(t):45===t?(e.consume(t),v):fv(t)?(l=p,V(t)):(e.consume(t),p)}function v(t){return 45===t?(e.consume(t),L):p(t)}function m(t){return t===i.charCodeAt(o++)?(e.consume(t),o===i.length?g:m):n(t)}function g(t){return null===t?n(t):93===t?(e.consume(t),h):fv(t)?(l=g,V(t)):(e.consume(t),g)}function h(t){return 93===t?(e.consume(t),b):g(t)}function b(t){return 62===t?L(t):93===t?(e.consume(t),b):g(t)}function y(t){return null===t||62===t?L(t):fv(t)?(l=y,V(t)):(e.consume(t),y)}function x(t){return null===t?n(t):63===t?(e.consume(t),w):fv(t)?(l=x,V(t)):(e.consume(t),x)}function w(e){return 62===e?L(e):x(e)}function E(t){return cv(t)?(e.consume(t),S):n(t)}function S(t){return 45===t||dv(t)?(e.consume(t),S):_(t)}function _(t){return fv(t)?(l=_,V(t)):vv(t)?(e.consume(t),_):L(t)}function j(t){return 45===t||dv(t)?(e.consume(t),j):47===t||62===t||pv(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),L):58===t||95===t||cv(t)?(e.consume(t),C):fv(t)?(l=k,V(t)):vv(t)?(e.consume(t),k):L(t)}function C(t){return 45===t||46===t||58===t||95===t||dv(t)?(e.consume(t),C):R(t)}function R(t){return 61===t?(e.consume(t),T):fv(t)?(l=R,V(t)):vv(t)?(e.consume(t),R):k(t)}function T(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),r=t,I):fv(t)?(l=T,V(t)):vv(t)?(e.consume(t),T):(e.consume(t),r=void 0,A)}function I(t){return t===r?(e.consume(t),O):null===t?n(t):fv(t)?(l=I,V(t)):(e.consume(t),I)}function O(e){return 62===e||47===e||pv(e)?k(e):n(e)}function A(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||pv(t)?k(t):(e.consume(t),A)}function V(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),mv(e,P,"linePrefix",a.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}function P(t){return e.enter("htmlTextData"),l(t)}function L(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}}},hv=yf,bv=of,yv=Ed,xv=Xc,wv=lf,Ev=_d,Sv=Ep,_v=jp,jv=Ap,kv=Tp,Cv={name:"labelEnd",tokenize:function(e,t,n){var r,i,o=this,l=o.events.length;for(;l--;)if(("labelImage"===o.events[l][1].type||"labelLink"===o.events[l][1].type)&&!o.events[l][1]._balanced){r=o.events[l][1];break}return function(t){if(!r)return n(t);return r._inactive?s(t):(i=o.parser.defined.indexOf(xv(o.sliceSerialize({start:r.end,end:o.now()})))>-1,e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),a)};function a(n){return 40===n?e.attempt(Rv,t,i?t:s)(n):91===n?e.attempt(Tv,t,i?e.attempt(Iv,t,s):s)(n):i?t(n):s(n)}function s(e){return r._balanced=!0,n(e)}},resolveTo:function(e,t){var n,r,i,o,l,a,s,u=e.length,c=0;for(;u--;)if(o=e[u][1],l){if("link"===o.type||"labelLink"===o.type&&o._inactive)break;"enter"===e[u][0]&&"labelLink"===o.type&&(o._inactive=!0)}else if(a){if("enter"===e[u][0]&&("labelImage"===o.type||"labelLink"===o.type)&&!o._balanced&&(l=u,"labelLink"!==o.type)){c=2;break}}else"labelEnd"===o.type&&(a=u);return n={type:"labelLink"===e[l][1].type?"link":"image",start:Ev(e[l][1].start),end:Ev(e[e.length-1][1].end)},r={type:"label",start:Ev(e[l][1].start),end:Ev(e[a][1].end)},i={type:"labelText",start:Ev(e[l+c+2][1].end),end:Ev(e[a-2][1].start)},s=bv(s=[["enter",n,t],["enter",r,t]],e.slice(l+1,l+c+3)),s=bv(s,[["enter",i,t]]),s=bv(s,wv(t.parser.constructs.insideSpan.null,e.slice(l+c+4,a-3),t)),s=bv(s,[["exit",i,t],e[a-2],e[a-1],["exit",r,t]]),s=bv(s,e.slice(a+1)),s=bv(s,[["exit",n,t]]),yv(e,l,e.length,s),e},resolveAll:function(e){var t,n=-1;for(;++n<e.length;)(t=e[n][1])._used||"labelImage"!==t.type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}},Rv={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),kv(e,r)};function r(t){return 41===t?l(t):Sv(e,i,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",3)(t)}function i(t){return hv(t)?kv(e,o)(t):l(t)}function o(t){return 34===t||39===t||40===t?jv(e,kv(e,l),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):l(t)}function l(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Tv={tokenize:function(e,t,n){var r=this;return function(t){return _v.call(r,e,i,n,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.indexOf(xv(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))<0?n(e):t(e)}}},Iv={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};var Ov=Cv;var Av={name:"labelStartImage",tokenize:function(e,t,n){var r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Ov.resolveAll};var Vv={name:"labelStartLink",tokenize:function(e,t,n){var r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Ov.resolveAll},Pv=rd;var Lv={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Pv(e,t,"linePrefix")}}},$v=ed,Dv=td,Nv=rd;var Fv={name:"thematicBreak",tokenize:function(e,t,n){var r,i=0;return function(t){return e.enter("thematicBreak"),r=t,o(t)};function o(a){return a===r?(e.enter("thematicBreakSequence"),l(a)):Dv(a)?Nv(e,o,"whitespace")(a):i<3||null!==a&&!$v(a)?n(a):(e.exit("thematicBreak"),t(a))}function l(t){return t===r?(e.consume(t),i++,l):(e.exit("thematicBreakSequence"),o(t))}}},zv=Kf,Bv=td,Mv=xd,Hv=bd,Uv=rd,Gv=cd,Wv=Fv,qv={name:"list",tokenize:function(e,t,n){var r=this,i=Mv(r.events,"linePrefix"),o=0;return function(t){var i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:zv(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(Wv,n,a)(t):a(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(t)}return n(t)};function l(t){return zv(t)&&++o<10?(e.consume(t),l):(!r.interrupt||o<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),a(t)):n(t)}function a(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(Gv,r.interrupt?n:s,e.attempt(Yv,c,u))}function s(e){return r.containerState.initialBlankLine=!0,i++,c(e)}function u(t){return Bv(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),c):n(t)}function c(n){return r.containerState.size=i+Hv(r.sliceStream(e.exit("listItemPrefix"))),t(n)}},continuation:{tokenize:function(e,t,n){var r=this;return r.containerState._closeFlow=void 0,e.check(Gv,(function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Uv(e,t,"listItemIndent",r.containerState.size+1)(n)}),(function(n){if(r.containerState.furtherBlankLines||!Bv(n))return r.containerState.furtherBlankLines=r.containerState.initialBlankLine=void 0,i(n);return r.containerState.furtherBlankLines=r.containerState.initialBlankLine=void 0,e.attempt(Xv,t,i)(n)}));function i(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,Uv(e,e.attempt(qv,t,n),"linePrefix",r.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},Yv={tokenize:function(e,t,n){var r=this;return Uv(e,(function(e){return Bv(e)||!Mv(r.events,"listItemPrefixWhitespace")?n(e):t(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:5)},partial:!0},Xv={tokenize:function(e,t,n){var r=this;return Uv(e,(function(e){return Mv(r.events,"listItemIndent")===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)},partial:!0};var Qv=qv,Kv=ed,Zv=_d,Jv=rd;var em={name:"setextUnderline",tokenize:function(e,t,n){var r,i,o=this,l=o.events.length;for(;l--;)if("lineEnding"!==o.events[l][1].type&&"linePrefix"!==o.events[l][1].type&&"content"!==o.events[l][1].type){i="paragraph"===o.events[l][1].type;break}return function(t){if(!o.lazy&&(o.interrupt||i))return e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),r=t,a(t);return n(t)};function a(t){return t===r?(e.consume(t),a):(e.exit("setextHeadingLineSequence"),Jv(e,s,"lineSuffix")(t))}function s(r){return null===r||Kv(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){var n,r,i,o,l=e.length;for(;l--;)if("enter"===e[l][0]){if("content"===e[l][1].type){n=l;break}"paragraph"===e[l][1].type&&(r=l)}else"content"===e[l][1].type&&e.splice(l,1),i||"definition"!==e[l][1].type||(i=l);o={type:"setextHeading",start:Zv(e[r][1].start),end:Zv(e[e.length-1][1].end)},e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",o,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=Zv(e[i][1].end)):e[n][1]=o;return e.push(["exit",o,t]),e}};Object.defineProperty(bf,"__esModule",{value:!0});var tm={42:Qv,43:Qv,45:Qv,48:Qv,49:Qv,50:Qv,51:Qv,52:Qv,53:Qv,54:Qv,55:Qv,56:Qv,57:Qv,62:Wf},nm={91:Hp},rm={"-2":gp,"-1":gp,32:gp},im={35:Kp,42:Fv,45:[em,Fv],60:uv,61:em,95:Fv,96:up,126:up},om={38:ip,92:Xf},lm={"-5":Lv,"-4":Lv,"-3":Lv,33:Av,38:ip,42:Vf,60:[Mf,gv],91:Vv,92:[Gp,Xf],93:Ov,95:Vf,96:bp},am={null:[Vf,Bd.resolver]};bf.contentInitial=nm,bf.disable={null:[]},bf.document=tm,bf.flow=im,bf.flowInitial=rm,bf.insideSpan=am,bf.string=om,bf.text=lm;var sm=Jc,um=ad,cm=hd,dm=Bd,fm=nf,pm=hf,vm=Qd,mm=bf;var gm=/[\0\t\n\r]/g;var hm=Td;var bm=function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);return function(e){var t=e||{},n=function(e,t){var n=-1;for(;++n<t.length;)Tm(e,t[n]);return e}({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(ie),autolinkProtocol:T,autolinkEmail:T,atxHeading:u(ee),blockQuote:u(X),characterEscape:T,characterReference:T,codeFenced:u(Q),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:u(Q,c),codeText:u(K,c),codeTextData:T,data:T,codeFlowValue:T,definition:u(Z),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:u(J),hardBreakEscape:u(te),hardBreakTrailing:u(te),htmlFlow:u(ne,c),htmlFlowData:T,htmlText:u(ne,c),htmlTextData:T,image:u(re),label:c,link:u(ie),listItem:u(le),listItemValue:g,listOrdered:u(oe,m),listUnordered:u(oe),paragraph:u(ae),reference:H,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:u(ee),strong:u(se),thematicBreak:u(ce)},exit:{atxHeading:f(),atxHeadingSequence:j,autolink:f(),autolinkEmail:Y,autolinkProtocol:q,blockQuote:f(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:W,codeFenced:f(x),codeFencedFence:y,codeFencedFenceInfo:h,codeFencedFenceMeta:b,codeFlowValue:I,codeIndented:f(w),codeText:f(L),codeTextData:I,data:I,definition:f(),definitionDestinationString:_,definitionLabelString:E,definitionTitleString:S,emphasis:f(),hardBreakEscape:f(A),hardBreakTrailing:f(A),htmlFlow:f(V),htmlFlowData:I,htmlText:f(P),htmlTextData:I,image:f(D),label:F,labelText:N,lineEnding:O,link:f($),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:U,resourceDestinationString:z,resourceTitleString:B,resource:M,setextHeading:f(R),setextHeadingLineSequence:C,setextHeadingText:k,strong:f(),thematicBreak:f()}},t.mdastExtensions||[]),r={};return i;function i(e){for(var t,r={type:"root",children:[]},i=[],u=[],f=-1,m={stack:[r],tokenStack:i,config:n,enter:d,exit:p,buffer:c,resume:v,setData:l,getData:a};++f<e.length;)"listOrdered"!==e[f][1].type&&"listUnordered"!==e[f][1].type||("enter"===e[f][0]?u.push(f):f=o(e,u.pop(f),f));for(f=-1;++f<e.length;)t=n[e[f][0]],wm.call(t,e[f][1].type)&&t[e[f][1].type].call(xm({sliceSerialize:e[f][2].sliceSerialize},m),e[f][1]);if(i.length)throw new Error("Cannot close document, a token (`"+i[i.length-1].type+"`, "+Rm({start:i[i.length-1].start,end:i[i.length-1].end})+") is still open");for(r.position={start:s(e.length?e[0][1].start:{line:1,column:1,offset:0}),end:s(e.length?e[e.length-2][1].end:{line:1,column:1,offset:0})},f=-1;++f<n.transforms.length;)r=n.transforms[f](r)||r;return r}function o(e,t,n){for(var r,i,o,l,a,u,c,d=t-1,f=-1,p=!1;++d<=n;)if("listUnordered"===(a=e[d])[1].type||"listOrdered"===a[1].type||"blockQuote"===a[1].type?("enter"===a[0]?f++:f--,c=void 0):"lineEndingBlank"===a[1].type?"enter"===a[0]&&(!r||c||f||u||(u=d),c=void 0):"linePrefix"===a[1].type||"listItemValue"===a[1].type||"listItemMarker"===a[1].type||"listItemPrefix"===a[1].type||"listItemPrefixWhitespace"===a[1].type||(c=void 0),!f&&"enter"===a[0]&&"listItemPrefix"===a[1].type||-1===f&&"exit"===a[0]&&("listUnordered"===a[1].type||"listOrdered"===a[1].type)){if(r){for(i=d,o=void 0;i--;)if("lineEnding"===(l=e[i])[1].type||"lineEndingBlank"===l[1].type){if("exit"===l[0])continue;o&&(e[o][1].type="lineEndingBlank",p=!0),l[1].type="lineEnding",o=i}else if("linePrefix"!==l[1].type&&"blockQuotePrefix"!==l[1].type&&"blockQuotePrefixWhitespace"!==l[1].type&&"blockQuoteMarker"!==l[1].type&&"listItemIndent"!==l[1].type)break;u&&(!o||u<o)&&(r._spread=!0),r.end=s(o?e[o][1].start:a[1].end),e.splice(o||d,0,["exit",r,a[2]]),d++,n++}"listItemPrefix"===a[1].type&&(r={type:"listItem",_spread:!1,start:s(a[1].start)},e.splice(d,0,["enter",r,a[2]]),d++,n++,u=void 0,c=!0)}return e[t][1]._spread=p,n}function l(e,t){r[e]=t}function a(e){return r[e]}function s(e){return{line:e.line,column:e.column,offset:e.offset}}function u(e,t){return n;function n(n){d.call(this,e(n),n),t&&t.call(this,n)}}function c(){this.stack.push({type:"fragment",children:[]})}function d(e,t){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push(t),e.position={start:s(t.start)},e}function f(e){return t;function t(t){e&&e.call(this,t),p.call(this,t)}}function p(e){var t=this.stack.pop(),n=this.tokenStack.pop();if(!n)throw new Error("Cannot close `"+e.type+"` ("+Rm({start:e.start,end:e.end})+"): it’s not open");if(n.type!==e.type)throw new Error("Cannot close `"+e.type+"` ("+Rm({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+Rm({start:n.start,end:n.end})+") is open");return t.position.end=s(e.end),t}function v(){return ym(this.stack.pop())}function m(){l("expectingFirstListItemValue",!0)}function g(e){a("expectingFirstListItemValue")&&(this.stack[this.stack.length-2].start=parseInt(this.sliceSerialize(e),10),l("expectingFirstListItemValue"))}function h(){var e=this.resume();this.stack[this.stack.length-1].lang=e}function b(){var e=this.resume();this.stack[this.stack.length-1].meta=e}function y(){a("flowCodeInside")||(this.buffer(),l("flowCodeInside",!0))}function x(){var e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),l("flowCodeInside")}function w(){var e=this.resume();this.stack[this.stack.length-1].value=e}function E(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=Em(this.sliceSerialize(e)).toLowerCase()}function S(){var e=this.resume();this.stack[this.stack.length-1].title=e}function _(){var e=this.resume();this.stack[this.stack.length-1].url=e}function j(e){this.stack[this.stack.length-1].depth||(this.stack[this.stack.length-1].depth=this.sliceSerialize(e).length)}function k(){l("setextHeadingSlurpLineEnding",!0)}function C(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function R(){l("setextHeadingSlurpLineEnding")}function T(e){var t=this.stack[this.stack.length-1].children,n=t[t.length-1];n&&"text"===n.type||((n=ue()).position={start:s(e.start)},this.stack[this.stack.length-1].children.push(n)),this.stack.push(n)}function I(e){var t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=s(e.end)}function O(e){var t=this.stack[this.stack.length-1];if(a("atHardBreak"))return t.children[t.children.length-1].position.end=s(e.end),void l("atHardBreak");!a("setextHeadingSlurpLineEnding")&&n.canContainEols.indexOf(t.type)>-1&&(T.call(this,e),I.call(this,e))}function A(){l("atHardBreak",!0)}function V(){var e=this.resume();this.stack[this.stack.length-1].value=e}function P(){var e=this.resume();this.stack[this.stack.length-1].value=e}function L(){var e=this.resume();this.stack[this.stack.length-1].value=e}function $(){var e=this.stack[this.stack.length-1];a("inReference")?(e.type+="Reference",e.referenceType=a("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType),l("referenceType")}function D(){var e=this.stack[this.stack.length-1];a("inReference")?(e.type+="Reference",e.referenceType=a("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType),l("referenceType")}function N(e){this.stack[this.stack.length-2].identifier=Em(this.sliceSerialize(e)).toLowerCase()}function F(){var e=this.stack[this.stack.length-1],t=this.resume();this.stack[this.stack.length-1].label=t,l("inReference",!0),"link"===this.stack[this.stack.length-1].type?this.stack[this.stack.length-1].children=e.children:this.stack[this.stack.length-1].alt=t}function z(){var e=this.resume();this.stack[this.stack.length-1].url=e}function B(){var e=this.resume();this.stack[this.stack.length-1].title=e}function M(){l("inReference")}function H(){l("referenceType","collapsed")}function U(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=Em(this.sliceSerialize(e)).toLowerCase(),l("referenceType","full")}function G(e){l("characterReferenceType",e.type)}function W(e){var t,n,r=this.sliceSerialize(e),i=a("characterReferenceType");i?(t=Sm(r,"characterReferenceMarkerNumeric"===i?10:16),l("characterReferenceType")):t=Cm(r),(n=this.stack.pop()).value+=t,n.position.end=s(e.end)}function q(e){I.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function Y(e){I.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function X(){return{type:"blockquote",children:[]}}function Q(){return{type:"code",lang:null,meta:null,value:""}}function K(){return{type:"inlineCode",value:""}}function Z(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function J(){return{type:"emphasis",children:[]}}function ee(){return{type:"heading",depth:void 0,children:[]}}function te(){return{type:"break"}}function ne(){return{type:"html",value:""}}function re(){return{type:"image",title:null,url:"",alt:null}}function ie(){return{type:"link",title:null,url:"",children:[]}}function oe(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function le(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ae(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function ue(){return{type:"text",value:""}}function ce(){return{type:"thematicBreak"}}}(n)(km(_m(n).document().write(jm()(e,t,!0))))},ym=Uc,xm=qc,wm=Yc,Em=Xc,Sm=Zc,_m=function(e){var t={defined:[],constructs:fm([mm].concat(vm((e||{}).extensions))),content:n(sm),document:n(um),flow:n(cm),string:n(dm.string),text:n(dm.text)};return t;function n(e){return function(n){return pm(t,e,n)}}},jm=function(){var e,t=!0,n=1,r="";return function(i,o,l){var a,s,u,c,d,f=[];i=r+i.toString(o),u=0,r="",t&&(65279===i.charCodeAt(0)&&u++,t=void 0);for(;u<i.length;){if(gm.lastIndex=u,c=(a=gm.exec(i))?a.index:i.length,d=i.charCodeAt(c),!a){r=i.slice(u);break}if(10===d&&u===c&&e)f.push(-3),e=void 0;else if(e&&(f.push(-5),e=void 0),u<c&&(f.push(i.slice(u,c)),n+=c-u),0===d)f.push(65533),n++;else if(9===d)for(s=4*Math.ceil(n/4),f.push(-2);n++<s;)f.push(-1);else 10===d?(f.push(-4),n=1):(e=!0,n=1);u=c+1}l&&(e&&f.push(-5),r&&f.push(r),f.push(null));return f}},km=function(e){for(;!hm(e););return e},Cm=Qf,Rm=tc;function Tm(e,t){var n,r;for(n in t)r=wm.call(e,n)?e[n]:e[n]={},"canContainEols"===n||"transforms"===n?e[n]=[].concat(r,t[n]):Object.assign(r,t[n])}Hc.exports=bm;var Im=function(e){var t=this;this.Parser=function(n){return Om(n,Object.assign({},t.data("settings"),e,{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}},Om=Mc;var Am=function(e,t,n){var r=[];"function"==typeof t&&(n=t,t=null);function i(e){var o;return t&&e.type!==t||(o=n(e,r.concat())),e.children&&!1!==o?function(e,t){var n,o=e.length,l=-1;r.push(t);for(;++l<o;)if((n=e[l])&&!1===i(n))return!1;return r.pop(),!0}(e.children,e):o}i(e)};var Vm=function(){return function(e){return Am(e,"list",(function(e,t){var n,r,i=0;for(n=0,r=t.length;n<r;n++)"list"===t[n].type&&(i+=1);for(n=0,r=e.children.length;n<r;n++){var o=e.children[n];o.index=n,o.ordered=e.ordered}e.depth=i})),e}};function Pm(e){if(null==e)return Lm;if("string"==typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"==typeof e)return"length"in e?function(e){var t=[],n=-1;for(;++n<e.length;)t[n]=Pm(e[n]);return r;function r(){for(var e=-1;++e<t.length;)if(t[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function Lm(){return!0}var $m=Mm,Dm=Pm,Nm=function(e){return e},Fm=!0,zm="skip",Bm=!1;function Mm(e,t,n,r){var i,o;"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),o=Dm(t),i=r?-1:1,function e(l,a,s){var u,c="object"==typeof l&&null!==l?l:{};"string"==typeof c.type&&(u="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0,d.displayName="node ("+Nm(c.type+(u?"<"+u+">":""))+")");return d;function d(){var u,c,d=s.concat(l),f=[];if((!t||o(l,a,s[s.length-1]||null))&&(f=function(e){if(null!==e&&"object"==typeof e&&"length"in e)return e;if("number"==typeof e)return[Fm,e];return[e]}(n(l,s)),f[0]===Bm))return f;if(l.children&&f[0]!==zm)for(c=(r?l.children.length:-1)+i;c>-1&&c<l.children.length;){if((u=e(l.children[c],c,d)())[0]===Bm)return u;c="number"==typeof u[1]?u[1]:c+i}return f}}(e,null,[])()}Mm.CONTINUE=Fm,Mm.SKIP=zm,Mm.EXIT=Bm;var Hm=Ym,Um=$m,Gm=Um.CONTINUE,Wm=Um.SKIP,qm=Um.EXIT;function Ym(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),Um(e,t,(function(e,t){var r=t[t.length-1],i=r?r.children.indexOf(e):null;return n(e,i,r)}),r)}Ym.CONTINUE=Gm,Ym.SKIP=Wm,Ym.EXIT=qm;var Xm=Hm,Qm="virtualHtml",Km=/^<(area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\s*\/?>$/i,Zm=/^<(\/?)([a-z]+)\s*>$/;var Jm={},eg=Hm,tg=[].splice;function ng(e,t){return function(e){return eg(e,n),e};function n(n,r,i){if(i&&!e(n,r,i)){var o=[r,1];return"unwrap"===t&&n.children&&(o=o.concat(n.children)),tg.apply(i.children,o),r}}}Jm.ofType=function(e,t){return ng((function(t,n,r){return!e.includes(t.type)}),t)},Jm.ifNotMatch=ng;var rg=t,ig=Lu,og=Wr;function lg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.renderers[e.type];e.position||(e.position={start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}});var o=e.position.start,l=[e.type,o.line,o.column,r].join("-");if(!og.isValidElementType(i))throw new Error("Renderer for type `".concat(e.type,"` not defined or is not renderable"));var a=function(e,t,n,r,i,o){var l={key:t},a="string"==typeof r||r===rg.Fragment;n.sourcePos&&e.position&&(l["data-sourcepos"]=function(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}(e.position));n.rawSourcePos&&!a&&(l.sourcePosition=e.position);n.includeNodeIndex&&i.node&&i.node.children&&!a&&(l.index=i.node.children.indexOf(e),l.parentChildCount=i.node.children.length);var s=null!==e.identifier&&void 0!==e.identifier?n.definitions[e.identifier.toUpperCase()]||{}:null;switch(e.type){case"root":ag(l,{className:n.className});break;case"text":l.nodeKey=t,l.children=e.value;break;case"heading":l.level=e.depth;break;case"list":l.start=e.start,l.ordered=e.ordered,l.spread=e.spread,l.depth=e.depth;break;case"listItem":l.checked=e.checked,l.spread=e.spread,l.ordered=e.ordered,l.index=e.index,l.children=function(e,t){var n=t&&t.node?function(e){var t=e.children,n=e.spread,r=-1;for(;!n&&++r<t.length;)n=sg(t[r]);return n}(t.node):sg(e);return n?e.children:function(e){return e.children.reduce((function(e,t){return e.concat("paragraph"===t.type?t.children:[t])}),[])}(e)}(e,i).map((function(t,r){return lg(t,n,{node:e,props:l},r)}));break;case"definition":ag(l,{identifier:e.identifier,title:e.title,url:e.url});break;case"code":ag(l,{language:e.lang&&e.lang.split(/\s/,1)[0]});break;case"inlineCode":l.children=e.value,l.inline=!0;break;case"link":ag(l,{title:e.title||void 0,target:"function"==typeof n.linkTarget?n.linkTarget(e.url,e.children,e.title):n.linkTarget,href:n.transformLinkUri?n.transformLinkUri(e.url,e.children,e.title):e.url});break;case"image":ag(l,{src:n.transformImageUri?n.transformImageUri(e.url,e.children,e.title,e.alt):e.url,alt:e.alt||"",title:e.title||void 0});break;case"linkReference":ag(l,ig(s,{href:n.transformLinkUri?n.transformLinkUri(s.href):s.href}));break;case"imageReference":ag(l,{src:n.transformImageUri&&s.href?n.transformImageUri(s.href,e.children,s.title,e.alt):s.href,alt:e.alt||"",title:s.title||void 0});break;case"table":case"tableHead":case"tableBody":l.columnAlignment=e.align;break;case"tableRow":l.isHeader="tableHead"===i.node.type,l.columnAlignment=i.props.columnAlignment;break;case"tableCell":ag(l,{isHeader:i.props.isHeader,align:i.props.columnAlignment[o]});break;case"virtualHtml":l.tag=e.tag;break;case"html":l.isBlock=e.position.start.line!==e.position.end.line,l.allowDangerousHtml=n.allowDangerousHtml,l.escapeHtml=n.escapeHtml,l.skipHtml=n.skipHtml;break;case"parsedHtml":var u;e.children&&(u=e.children.map((function(t,r){return lg(t,n,{node:e,props:l},r)}))),l.allowDangerousHtml=n.allowDangerousHtml,l.escapeHtml=n.escapeHtml,l.skipHtml=n.skipHtml,l.element=e.element?function(e,t){var n=e.element;if(Array.isArray(n)){var r=rg.Fragment||"div";return rg.createElement(r,null,n)}if(n.props.children||t){var i=rg.Children.toArray(n.props.children).concat(t);return rg.cloneElement(n,null,i)}return rg.cloneElement(n,null)}(e,u):null;break;default:ag(l,ig(e,{type:void 0,position:void 0,children:void 0}))}!a&&e.value&&(l.value=e.value);a||(l.node=e);return l}(e,l,t,i,n,r);return rg.createElement(i,a,a.children||e.children&&e.children.map((function(n,r){return lg(n,t,{node:e,props:a},r)}))||void 0)}function ag(e,t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}function sg(e){var t=e.spread;return null==t?e.children.length>1:t}var ug=lg,cg=Hm;function dg(e){var t=e.children;e.children=[{type:"tableHead",align:e.align,children:[t[0]],position:t[0].position}],t.length>1&&e.children.push({type:"tableBody",align:e.align,children:t.slice(1),position:{start:t[1].position.start,end:t[t.length-1].position.end}})}var fg=Hm,pg=["http","https","mailto","tel"],vg=Lu,mg=t,gg=parseInt((mg.version||"16").slice(0,2),10)>=16,hg=mg.createElement,bg={break:"br",paragraph:"p",emphasis:"em",strong:"strong",thematicBreak:"hr",blockquote:"blockquote",delete:"del",link:"a",image:"img",linkReference:"a",imageReference:"img",table:yg.bind(null,"table"),tableHead:yg.bind(null,"thead"),tableBody:yg.bind(null,"tbody"),tableRow:yg.bind(null,"tr"),tableCell:function(e){var t=e.align?{textAlign:e.align}:void 0,n=xg(e);return hg(e.isHeader?"th":"td",t?vg({style:t},n):n,e.children)},root:function(e){var t=e.className,n=!t&&mg.Fragment||"div";return hg(n,t?{className:t}:null,e.children)},text:function(e){var t=e.children||"";return gg?t:hg("span",null,t)},list:function(e){var t=xg(e);null!==e.start&&1!==e.start&&void 0!==e.start&&(t.start=e.start.toString());return hg(e.ordered?"ol":"ul",t,e.children)},listItem:function(e){var t=null;if(null!==e.checked&&void 0!==e.checked){var n=e.checked;t=hg("input",{type:"checkbox",checked:n,readOnly:!0})}return hg("li",xg(e),t,e.children)},definition:function(){return null},heading:function(e){return hg("h".concat(e.level),xg(e),e.children)},inlineCode:function(e){return hg("code",xg(e),e.children)},code:function(e){var t=e.language&&"language-".concat(e.language),n=hg("code",t?{className:t}:null,e.value);return hg("pre",xg(e),n)},html:function(e){if(e.skipHtml)return null;var t=e.allowDangerousHtml||!1===e.escapeHtml,n=e.isBlock?"div":"span";if(!t)return hg(mg.Fragment||n,null,e.value);var r={dangerouslySetInnerHTML:{__html:e.value}};return hg(n,r)},virtualHtml:function(e){return hg(e.tag,xg(e),e.children)},parsedHtml:function(e){return e["data-sourcepos"]?mg.cloneElement(e.element,{"data-sourcepos":e["data-sourcepos"]}):e.element}};function yg(e,t){return hg(e,xg(t),t.children)}function xg(e){var t=e["data-sourcepos"];return t?{"data-sourcepos":t}:{}}var wg={},Eg="__RMD_HTML_PARSER__";wg.HtmlParser="undefined"==typeof Symbol?Eg:Symbol(Eg);var Sg=Lu,_g=Ac,jg=Im,kg=de,Cg=Vm,Rg=function(e){var t,n;return Xm(e,"html",(function(e,r,i){n!==i&&(t=[],n=i);var o=function(e){var t=e.value.match(Km);return!!t&&t[1]}(e);if(o)return i.children.splice(r,1,{type:Qm,tag:o,position:e.position}),!0;var l=function(e,t){var n=e.value.match(Zm);return!!n&&{tag:n[2],opening:!n[1],node:e}}(e);if(!l)return!0;var a=function(e,t){var n=e.length;for(;n--;)if(e[n].tag===t)return e.splice(n,1)[0];return!1}(t,l.tag);return a?i.children.splice(r,0,function(e,t,n){var r=n.children.indexOf(e.node),i=n.children.indexOf(t.node),o=n.children.splice(r,i-r+1),l=o.slice(1,-1);return{type:Qm,children:l,tag:e.tag,position:{start:e.node.position.start,end:t.node.position.end,indent:[]}}}(l,a,i)):l.opening||t.push(l),!0}),!0),e},Tg=Jm,Ig=ug,Og=function(e){return cg(e,"table",dg),e},Ag=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fg(e,"definition",(function(e){var n=e.identifier.toUpperCase();n in t||(t[n]={href:e.url,title:e.title})})),t},Vg=function(e){var t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;var r=t.indexOf(":");if(-1===r)return t;for(var i=pg.length,o=-1;++o<i;){var l=pg[o];if(r===l.length&&t.slice(0,l.length).toLowerCase()===l)return t}return-1!==(o=t.indexOf("?"))&&r>o||-1!==(o=t.indexOf("#"))&&r>o?t:"javascript:void(0)"},Pg=bg,Lg=wg,$g=Object.keys(Pg),Dg=function(e){var t=e.source||e.children||"";if(e.allowedTypes&&e.disallowedTypes)throw new Error("Only one of `allowedTypes` and `disallowedTypes` should be defined");var n=Sg(Pg,e.renderers),r=_g().use(jg).use(e.plugins||[]),i=r.runSync(r.parse(t)),o=Sg(e,{renderers:n,definitions:Ag(i)});return function(e){var t=[Og,Cg()],n=e.disallowedTypes;e.allowedTypes&&(n=$g.filter((function(t){return"root"!==t&&-1===e.allowedTypes.indexOf(t)})));var r=e.unwrapDisallowed?"unwrap":"remove";n&&n.length>0&&t.push(Tg.ofType(n,r));e.allowNode&&t.push(Tg.ifNotMatch(e.allowNode,r));var i=(e.allowDangerousHtml||!1===e.escapeHtml)&&!e.skipHtml,o=(e.astPlugins||[]).some((function(e){return e.identity===Lg.HtmlParser}));i&&!o&&t.push(Rg);e.astPlugins&&(t=t.concat(e.astPlugins));return t.push(Ig),t}(e).forEach((function(e){i=e(i,o)})),i};Dg.defaultProps={transformLinkUri:Vg},Dg.propTypes={className:kg.string,source:kg.string,children:kg.string,sourcePos:kg.bool,rawSourcePos:kg.bool,escapeHtml:kg.bool,allowDangerousHtml:kg.bool,skipHtml:kg.bool,allowNode:kg.func,allowedTypes:kg.arrayOf(kg.oneOf($g)),disallowedTypes:kg.arrayOf(kg.oneOf($g)),transformLinkUri:kg.oneOfType([kg.func,kg.bool]),linkTarget:kg.oneOfType([kg.func,kg.string]),transformImageUri:kg.func,astPlugins:kg.arrayOf(kg.func),unwrapDisallowed:kg.bool,renderers:kg.object,plugins:kg.array},Dg.types=$g,Dg.renderers=Pg,Dg.uriTransformer=Vg;var Ng=Dg;const Fg=Yr.div`
    padding: 0.5em 0;
    position: relative;
    &:not(:last-child) {
        border-bottom: 1px solid ${I.borderColor};
    }

    &:not(:hover) .floating-menu {
        display: none;
    }

    & .floating-menu {
        right: 30px;
    }
`;function zg({value:e,attribute:t,onDelete:n,isReadOnly:o}){const{t:l}=i(),a=async()=>n(),s=[{title:l("record_edition.edit_record"),button:r.jsx(is,{record:e.treeValue.record.whoAmI})},{title:l("record_edition.value_details"),button:r.jsx(Ua,{value:e,attribute:t})}];return o||s.push({title:l("global.delete"),button:r.jsx(rs,{onDelete:a})}),r.jsxs(Fg,{children:[r.jsx(hn,{record:e.treeValue.record.whoAmI,size:bn.small}),r.jsx(B,{actions:s})]})}const Bg=Yr.div`
    background-color: ${I.defaultBg};
    z-index: 1;
    position: relative;
`,Mg=Yr.div`
    padding: 1em;
    max-height: 350px;
    overflow: auto;
`,Hg=Yr.div`
    padding: 0.5em 1em;
    display: flex;
    justify-content: flex-end;
    background: ${I.lightBg};
`,Ug=Yr.div`
    & .record-card .label {
        font-weight: normal;
    }
`,Gg=Yr(fe)`
    display: flex;
    align-items: center;
`;function Wg({attribute:e,onAdd:n,onClose:o}){var l,a;const{t:s}=i(),{lang:u}=O(),c=(null==(l=null==e?void 0:e.treeValuesList)?void 0:l.enable)?(null==(a=null==e?void 0:e.treeValuesList)?void 0:a.values)??[]:[],d=t.useRef(),[f,p]=t.useState([]),[v,m]=t.useState([]);t.useEffect((()=>{d.current.scrollIntoView({block:"nearest"})}),[]);return r.jsx(r.Fragment,{children:r.jsxs(Bg,{"data-testid":"values-add",ref:d,children:[r.jsxs(Mg,{children:[!!c.length&&r.jsxs(r.Fragment,{children:[r.jsx(C,{orientation:"left",children:s("record_edition.values_list")}),r.jsx(eu,{dataSource:c,onItemClick:e=>{const t=e.id;n([{record:e.record,key:t,id:t,title:e.record.whoAmI.label,children:null}])},renderItemContent:e=>{const t=e.ancestors,n=t.slice(0,-1),i=t.slice(-1)[0],o={withLibrary:!1,withPreview:!1},l=n.map((e=>({key:e.record.id,title:r.jsx(hn,{record:e.record.whoAmI,size:bn.small,...o})})));return l.push({key:i.record.id,title:r.jsx(hn,{record:i.record.whoAmI,size:bn.small,...o})}),r.jsx(Ug,{children:r.jsx(Gg,{items:l,separator:">"})})},selectable:e.multiple_values,selectedItems:v,onSelectionChange:e=>m(e),pagination:!1})]}),r.jsx(C,{orientation:"left",children:Gt(e.linked_tree.label,u)}),r.jsx(ss,{tree:e.linked_tree,onSelect:(e,t)=>{t&&n([e])},onCheck:e=>p(e),multiple:e.multiple_values})]}),e.multiple_values&&r.jsx(Hg,{children:r.jsxs(V,{children:[r.jsx(Mr,{size:"small",onClick:()=>o(),children:s("global.cancel")}),r.jsx(Mr,{type:"primary",size:"small",onClick:()=>{const e=[...v.map((e=>{const t=_n(e.record);return{record:e.record,id:t,key:t,title:e.record.whoAmI.label,children:null}})),...f];n(e)},children:s("global.submit")})]})})]})})}const qg=Yr.div`
    position: relative;
    border: 1px solid ${I.borderColor};
    margin-bottom: 1.5em;
    border-radius: ${e=>e.$themeToken.borderRadius}px;
    background: ${I.defaultBg};
    z-index: ${e=>e.$isValuesAddVisible?1:"auto"};

    .ant-list-items {
        max-height: 320px;
        overflow-y: auto;
    }

    .ant-list-footer {
        padding: 0;
        border-radius: ${e=>e.$themeToken.borderRadius}px;
    }
`,Yg=Yr(rl)`
    && {
        top: calc(50% - 0.9em);
        font-size: 0.9em;
        padding: 0 0.5em;
        color: ${I.secondaryTextColor};
        z-index: 1;
        margin-bottom: 0;
    }
`;const Xg={[ft.FIELDS_CONTAINER]:function({element:e,onValueSubmit:t,onValueDelete:n,onDeleteMultipleValues:i}){const{elements:o}=fa(),l=o[e.id]??[];return r.jsx(r.Fragment,{children:l.map((e=>r.jsx(R,{"data-testid":"container-child-element",children:r.jsx(T,{span:24,children:e.uiElement&&r.jsx(e.uiElement,{element:e,onValueSubmit:t,onValueDelete:n,onDeleteMultipleValues:i})})},e.id)))})},[yt.TEXT_INPUT]:Pu,[yt.DATE]:Pu,[yt.CHECKBOX]:Pu,[yt.ENCRYPTED]:Pu,[yt.LINK]:function({element:e,onValueSubmit:n,onValueDelete:o,onDeleteMultipleValues:l}){var a,s,u,c,d,f;const{t:p}=i(),{lang:v}=O(),{token:m}=F.useToken(),{readOnly:g,record:h}=fa(),{state:b,dispatch:y}=ua(),x=t.useContext(va),w=null===h,[E,S]=t.useReducer(Va,Aa({element:e,formVersion:b.valuesVersion,isRecordReadOnly:g,record:h})),{fetchValues:_}=_a(null==(a=null==h?void 0:h.library)?void 0:a.id,E.attribute.id,null==h?void 0:h.id),j=E.attribute,C=E.formElement.settings,R=(null==C?void 0:C.columns)??[],T=ja(E),I=E.values[E.activeScope].version,{loading:A,data:V,refetch:P}=wa(null==(s=null==j?void 0:j.linked_library)?void 0:s.gqlNames.query,R.map((e=>e.id)),T.map((e=>{var t;return null==(t=e.linkValue)?void 0:t.id})));t.useEffect((()=>{null===b.activeValue&&E.isValuesAddVisible&&$()}),[b.activeValue]),t.useEffect((()=>{x[j.id]&&S({type:Ta.SET_ERROR_MESSAGE,errorMessage:x[j.id].map((e=>e.message)).join(" ")})}),[x,j.id]);const L=()=>{y({type:oa.SET_ACTIVE_VALUE,value:{attribute:j,value:null}}),S({type:Ta.SET_IS_VALUES_ADD_VISIBLE,isValuesAddVisible:!0})},$=()=>{S({type:Ta.SET_IS_VALUES_ADD_VISIBLE,isValuesAddVisible:!1}),y({type:oa.SET_ACTIVE_VALUE,value:null})},D=async()=>{var e;const t=await l(j.id,ja(E),E.values[E.activeScope].version);if(t.status===Ca.SUCCESS&&(S({type:Ta.DELETE_ALL_VALUES}),!w)){const e=await _(E.values[E.activeScope].version);S({type:Ta.REFRESH_VALUES,formVersion:b.valuesVersion,values:e})}(null==(e=null==t?void 0:t.errors)?void 0:e.length)&&S({type:Ta.SET_ERROR_MESSAGE,errorMessage:t.errors.map((e=>e.message))})},N=e=>{S({type:Ta.CHANGE_ACTIVE_SCOPE,scope:e})},z=(null==(u=e.attribute)?void 0:u.readonly)||g||!j.permissions.edit_value;let B=[];!C.displayRecordIdentity&&(null==(c=null==C?void 0:C.columns)?void 0:c.length)||B.push({title:p("record_edition.whoAmI"),key:"whoAmI"}),B=[...B,...R.map((e=>({title:Gt(e.label,v),key:e.id})))];const M=B.map(((e,t)=>({title:e.title,dataIndex:e.key,render:(n,i)=>{var l;const a="whoAmI"===e.key?r.jsx(hn,{record:n,size:bn.small}):A?r.jsx(k,{title:!0,paragraph:!1,active:!0}):r.jsx("span",{children:"boolean"==typeof n?r.jsx(le,{checked:n,disabled:!0}):String(n??"")}),s=r.jsxs(r.Fragment,{children:[!t&&(null==(l=j.versions_conf)?void 0:l.versionable)&&r.jsx(ns,{activeScope:E.activeScope}),a]});return t===B.length-1?r.jsx(os,{record:i.whoAmI,onDelete:()=>(async e=>{if((await o({value:e.linkValue.id,id_value:e.id_value},j.id)).status!==Ca.SUCCESS);else if(S({type:Ta.DELETE_VALUE,idValue:e.id_value}),!w){const e=await _(E.values[E.activeScope].version);S({type:Ta.REFRESH_VALUES,formVersion:b.valuesVersion,values:e})}})(i.value),value:i.value,attribute:j,isReadOnly:z,children:s}):s}}))),H=T.map((e=>{var t,n,r,i;return{key:e.id_value+(null==(t=e.linkValue)?void 0:t.id),value:e,whoAmI:null==(n=e.linkValue)?void 0:n.whoAmI,...(i=null==(r=e.linkValue)?void 0:r.id,R.reduce(((e,t)=>{var n;return e[t.id]=((null==(n=null==V?void 0:V[i])?void 0:n[t.id])??[]).map((e=>void 0!==e.value?e.value:(e=>void 0!==e.linkValue)(e)?e.linkValue.whoAmI.label??e.linkValue.id:(e=>void 0!==e.treeValue)(e)?e.treeValue.record.whoAmI.label??e.treeValue.record.id:"")).join(", "),e}),{}))}})),U=!z&&(j.multiple_values||!T.length),G={[Ra.CURRENT]:(null==(d=E.values[Ra.CURRENT])?void 0:d.version)??null,[Ra.INHERITED]:(null==(f=E.values[Ra.INHERITED])?void 0:f.version)??null};return r.jsxs(r.Fragment,{children:[E.isValuesAddVisible&&r.jsx(ga,{onClick:$}),r.jsxs(cu,{$isValuesAddVisible:E.isValuesAddVisible,$themeToken:m,children:[r.jsxs(du,{ellipsis:{rows:1,tooltip:!0},$themeToken:m,children:[e.settings.label,b.externalUpdate.updatedValues[null==j?void 0:j.id]&&r.jsx(Ha,{}),E.activeScope===Ra.INHERITED&&r.jsx(Fa,{version:E.values[Ra.INHERITED].version})]}),r.jsx(ae,{columns:M,dataSource:H,size:"small",pagination:!1,locale:{emptyText:r.jsx(Ma,{canAddValue:U,onAddValue:L,linkField:!0})},"data-testid":"linked-field-values",footer:()=>{var e;return r.jsxs(Da,{style:{borderRadius:0},children:[r.jsxs("div",{children:[(null==(e=null==j?void 0:j.versions_conf)?void 0:e.versionable)&&r.jsx(es,{versions:G,activeScope:E.activeScope,onScopeChange:N,basic:!0}),!z&&!!T.length&&r.jsx(La,{onDelete:D}),r.jsx(Ua,{attribute:j,value:null,size:"small",basic:!0})]}),!!T.length&&U&&r.jsx(Pa,{activeScope:E.activeScope,onClick:L,disabled:E.isValuesAddVisible,linkField:!0})]})},scroll:{y:280}}),E.isValuesAddVisible&&U&&r.jsx(uu,{onAdd:async e=>{var t;const r=e.map((e=>({attribute:j,idValue:null,value:e}))),i=await n(r,I);if(i.status===Ca.ERROR)S({type:Ta.SET_ERROR_MESSAGE,errorMessage:i.error});else if(i.values){const e=i.values.map((e=>({...e,version:rn(e.version)})));S({type:Ta.ADD_VALUES,values:e}),h&&P(r.map((e=>e.value.id)))}if(null==(t=null==i?void 0:i.errors)?void 0:t.length){const t=e.reduce(((e,t)=>({...e,[t.id]:t})),{}),n=i.errors.map((e=>`${t[e.input].label||t[e.input].id}: ${e.message}`));S({type:Ta.SET_ERROR_MESSAGE,errorMessage:n})}else S({type:Ta.SET_IS_VALUES_ADD_VISIBLE,isValuesAddVisible:!1})},attribute:j,onClose:$})]}),E.errorMessage&&r.jsx(se,{placement:"bottomLeft",open:!!E.errorMessage,content:r.jsx(ya,{error:E.errorMessage,onClose:()=>{S({type:Ta.CLEAR_ERROR_MESSAGE})}})})]})},[yt.TREE]:function({element:e,onValueSubmit:n,onValueDelete:i,onDeleteMultipleValues:o}){var l,a,s,u,c;const{token:d}=F.useToken(),{state:f,dispatch:p}=ua(),{readOnly:v,record:m}=fa(),g=t.useContext(va),h=null===m,[b,y]=t.useReducer(Va,Aa({element:e,formVersion:f.valuesVersion,isRecordReadOnly:v,record:m})),{fetchValues:x}=_a(null==(l=null==m?void 0:m.library)?void 0:l.id,b.attribute.id,null==m?void 0:m.id),w=b.attribute,E=(null==w?void 0:w.readonly)||v||!w.permissions.edit_value,S=ja(b),_=null==(a=b.values[b.activeScope])?void 0:a.version,j=S.map((e=>({...e,key:e.id_value})));t.useEffect((()=>{null===f.activeValue&&b.isValuesAddVisible&&I()}),[f.activeValue]),t.useEffect((()=>{g[w.id]&&y({type:Ta.SET_ERROR_MESSAGE,errorMessage:g[w.id].map((e=>e.message)).join(" ")})}),[g,w.id]);const k=!E&&(w.multiple_values||!S.length),C=()=>{p({type:oa.SET_ACTIVE_VALUE,value:{attribute:w,value:null}}),y({type:Ta.SET_IS_VALUES_ADD_VISIBLE,isValuesAddVisible:!0})},R={[Ra.CURRENT]:(null==(s=b.values[Ra.CURRENT])?void 0:s.version)??null,[Ra.INHERITED]:(null==(u=b.values[Ra.INHERITED])?void 0:u.version)??null},T=r.jsxs(Da,{children:[r.jsxs("div",{children:[(null==(c=null==w?void 0:w.versions_conf)?void 0:c.versionable)&&r.jsx(es,{versions:R,activeScope:b.activeScope,onScopeChange:e=>{y({type:Ta.CHANGE_ACTIVE_SCOPE,scope:e})},basic:!0}),!E&&!!S.length&&r.jsx(La,{onDelete:async()=>{var e;const t=await o(w.id,S,_);if(t.status===Ca.SUCCESS&&(y({type:Ta.DELETE_ALL_VALUES}),!h)){const e=await x(b.values[b.activeScope].version);y({type:Ta.REFRESH_VALUES,formVersion:f.valuesVersion,values:e})}(null==(e=null==t?void 0:t.errors)?void 0:e.length)&&y({type:Ta.SET_ERROR_MESSAGE,errorMessage:t.errors.map((e=>e.message))})}}),r.jsx(Ua,{attribute:w,value:null,size:"small",basic:!0})]}),!!S.length&&k&&r.jsx(Pa,{activeScope:b.activeScope,onClick:C,disabled:b.isValuesAddVisible,linkField:!0})]}),I=()=>{y({type:Ta.SET_IS_VALUES_ADD_VISIBLE,isValuesAddVisible:!1}),p({type:oa.SET_ACTIVE_VALUE,value:null})};return r.jsxs(r.Fragment,{children:[b.isValuesAddVisible&&r.jsx(ga,{onClick:I}),r.jsxs(qg,{$isValuesAddVisible:b.isValuesAddVisible,$themeToken:d,children:[r.jsxs(Yg,{ellipsis:{rows:1,tooltip:!0},children:[e.settings.label,f.externalUpdate.updatedValues[null==w?void 0:w.id]&&r.jsx(Ha,{}),b.activeScope===Ra.INHERITED&&r.jsx(Fa,{version:b.values[Ra.INHERITED].version})]}),r.jsx(oe,{dataSource:j,renderItem:e=>{var t;return r.jsxs(r.Fragment,{children:[(null==(t=w.versions_conf)?void 0:t.versionable)&&r.jsx(ns,{activeScope:b.activeScope}),r.jsx(zg,{value:e,attribute:w,onDelete:async()=>{if((await i({id_value:e.id_value},w.id)).status!==Ca.SUCCESS);else if(y({type:Ta.DELETE_VALUE,idValue:e.id_value}),!h){const e=await x(b.values[b.activeScope].version);y({type:Ta.REFRESH_VALUES,formVersion:f.valuesVersion,values:e})}},isReadOnly:E})]})},split:!0,locale:{emptyText:r.jsx(Ma,{canAddValue:k,onAddValue:C,linkField:!0})},footer:T}),b.isValuesAddVisible&&r.jsx(Wg,{attribute:w,onAdd:async e=>{var t;const r=e.map((e=>({attribute:w,idValue:null,value:e}))),i=await n(r,_);if(i.status===Ca.ERROR)y({type:Ta.SET_ERROR_MESSAGE,errorMessage:i.error});else if(i.values){const e=i.values.map((e=>({...e,version:rn(e.version)})));y({type:Ta.ADD_VALUES,values:e})}if(null==(t=null==i?void 0:i.errors)?void 0:t.length){const t=e.reduce(((e,t)=>({...e,[t.id]:t})),{}),n=i.errors.map((e=>`${t[e.input].title||t[e.input].id}: ${e.message}`));y({type:Ta.SET_ERROR_MESSAGE,errorMessage:n})}else y({type:Ta.SET_IS_VALUES_ADD_VISIBLE,isValuesAddVisible:!1})},onClose:I})]}),b.errorMessage&&r.jsx(se,{placement:"bottomLeft",open:!!b.errorMessage,content:r.jsx(ya,{error:b.errorMessage,onClose:()=>{y({type:Ta.CLEAR_ERROR_MESSAGE})}})})]})},[ft.TABS]:function({element:e,...t}){const{lang:n}=O(),i=e.settings.direction===dt.VERTICAL?"left":"top",o=e.settings.tabs.map((i=>{const o={id:`${e.id}/${i.id}`,containerId:e.id,settings:{},attribute:null,type:Br.layout,uiElement:Xg[ft.FIELDS_CONTAINER],uiElementType:ft.FIELDS_CONTAINER,valueError:null,values:null};return{label:Gt(i.label,n),key:i.id,children:r.jsx(o.uiElement,{...t,element:o})}}));return r.jsx(pa,{tabPosition:i,"data-testid":"form-tabs",items:o})},[ft.TEXT_BLOCK]:function({element:e}){return r.jsx(Ng,{children:e.settings.content})},[ft.DIVIDER]:function({element:e}){const t=e.settings.title??null;return r.jsx(C,{children:t})}},Qg=Yr.div`
    position: relative;
    border: 1px solid ${I.errorColor};
    margin-bottom: 1.5em;
    border-radius: ${e=>e.$themeToken.borderRadius}px;

    label {
        font-size: 0.9em;
        background: transparent;
        text-shadow: 0px 0px 4px #fff;
        background: transparent;
        padding: 0 0.5em;
        color: ${I.errorColor};
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        width: 100%;
    }
`,Kg=Yr.div`
    display: grid;
    grid-template-areas:
        'icon title'
        'icon message';
    grid-template-columns: 4rem 1fr;
`,Zg=Yr.div`
    grid-area: icon;
    font-size: 1.5rem;
    padding: 0.5rem 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    color: ${I.errorColor};
`,Jg=Yr.div`
    grid-area: title;
    align-content: flex-end;
    font-size: 0.95rem;
    align-self: end;
`,eh=Yr.div`
    grid-area: message;
    color: ${I.secondaryTextColor};
    font-size: 0.8rem;
    align-self: start;
`;function th({element:e}){const{t:t}=i(),{token:n}=F.useToken();return r.jsxs(Qg,{$themeToken:n,children:[r.jsx("label",{children:e.settings.label}),r.jsxs(Kg,{children:[r.jsx(Zg,{children:r.jsx(uo,{color:"yellow",size:48})}),r.jsx(Jg,{children:t("error.error_occurred")}),r.jsx(eh,{children:e.valueError})]})]})}const nh=e=>e.elements.reduce(((e,t)=>{void 0===e[t.containerId]&&(e[t.containerId]=[]);const n=t.valueError?th:Xg[t.uiElementType];return e[t.containerId].push({...t,uiElement:n,settings:t.settings.reduce(((e,t)=>({...e,[t.key]:t.value})),{})}),e}),{});function rh({record:e,library:n,onValueSubmit:o,onValueDelete:l,onDeleteMultipleValues:a,readonly:s}){var u,c,d,f;const p=e?"edition":"creation",{t:v}=i(),{state:m,dispatch:g}=ua();!async function(e,t){const n=`${ra}_${e}`,[r]=j(on);y(Dt,{skip:!e||!t,variables:{keys:[n]},onCompleted:async e=>{const i=e.userData.data[n]?[...e.userData.data[n]]:[],o=i.indexOf(t);-1!==o?i.splice(o,1):i.length>=ia&&i.pop(),i.unshift(t),await r({variables:{key:n,value:i,global:!1}})}})}((null==(u=null==e?void 0:e.library)?void 0:u.id)??null,(null==e?void 0:e.id)??null);const{data:h}=Go({records:[null==e?void 0:e.id],ignoreOwnEvents:!0});t.useEffect((()=>{var e,t,n,r;h&&g({type:oa.ADD_EXTERNAL_UPDATE,modifier:null==(n=null==(t=null==(e=null==h?void 0:h.recordUpdate)?void 0:e.record)?void 0:t.modified_by)?void 0:n.whoAmI,updatedValues:null==(r=null==h?void 0:h.recordUpdate)?void 0:r.updatedValues})}),[h]);const{loading:b,error:x,recordForm:w,refetch:E}=na({libraryId:n,recordId:null==e?void 0:e.id,formId:p,version:m.valuesVersion}),S=t.useMemo((()=>xt(JSON.stringify(w))),[w]);if(t.useEffect((()=>{m.refreshRequested&&(E(),g({type:oa.REFRESH_DONE}))}),[m.refreshRequested]),b)return r.jsx(ca,{rows:5});if(x){const e=Object.values((null==(f=null==(d=null==(c=x.graphQLErrors[0])?void 0:c.extensions)?void 0:d.exception)?void 0:f.fields)??{}).join("\n")??(null==x?void 0:x.message);return r.jsx(M,{message:e??v("record_edition.no_form_error")})}const _=e=>{w.dependencyAttributes.map((e=>e.id)).includes(e)&&g({type:oa.REQUEST_REFRESH})},k=nh(w),C={id:wt,containerId:null,type:Br.layout,uiElementType:ft.FIELDS_CONTAINER,settings:{},attribute:null,valueError:null,values:null,uiElement:Xg[ft.FIELDS_CONTAINER]};return r.jsx(da.Provider,{value:{elements:k,readOnly:s,record:e},children:r.jsx(C.uiElement,{element:C,onValueSubmit:async(e,t)=>{const n=await o(e,t);return _(e[0].attribute.id),n},onValueDelete:async(e,t)=>{const n=await l(e,t);return _(t),n},onDeleteMultipleValues:a},S)})}const ih=g`
    ${Mo}
    mutation DELETE_VALUE($library: ID!, $recordId: ID!, $attribute: ID!, $value: ValueInput) {
        deleteValue(library: $library, recordId: $recordId, attribute: $attribute, value: $value) {
            ...ValueDetails
        }
    }
`;const oh=h`
    ${Mo}
    mutation SAVE_VALUE_BATCH(
        $library: ID!
        $recordId: ID!
        $version: [ValueVersionInput!]
        $values: [ValueBatchInput!]!
        $deleteEmpty: Boolean
    ) {
        saveValueBatch(
            library: $library
            recordId: $recordId
            version: $version
            values: $values
            deleteEmpty: $deleteEmpty
        ) {
            values {
                ...ValueDetails
            }
            errors {
                type
                attribute
                input
                message
            }
        }
    }
`;function lh({items:e}){return r.jsx(vi,{layout:"horizontal",column:1,children:e.map(((e,t)=>{const{title:n,value:i}=e;return r.jsx(vi.Item,{label:n,style:{paddingBottom:"5px"},labelStyle:{fontWeight:"bold",width:"50%"},children:e.divider?r.jsx(C,{"data-testid":"divider"},t):i},t)}))})}const ah=e=>Bt`
    ${Vt}
    query GET_FILE_DATA($fileId: String!) {
        ${gt(e).query}(filters: [{field: "id", value: $fileId, condition: EQUAL}]) {
            list {
                ...RecordIdentity
                created_at
                created_by {
                    ...RecordIdentity
                }
                modified_at
                modified_by {
                    ...RecordIdentity
                }
                file_name
                file_path
                file_type
                library {
                    behavior
                }
            }
        }
    }`;const sh=1200;function uh({fileData:e,fallback:n}){var i,o;const[l,a]=t.useState(!1);return!(null==(o=null==(i=null==e?void 0:e.whoAmI)?void 0:i.preview)?void 0:o.original)||l?n:r.jsx("audio",{controls:!0,src:e.whoAmI.preview.original,title:e.file_name,"data-testid":"audio-player",onError:()=>{a(!0)}})}const ch=Yr(Mr)`
    && {
        position: absolute;
        right: 0.5rem;
        bottom: 0.5rem;
    }
`;function dh({fileData:e,fallback:n}){var i,o;const l=t.useRef();if(!(null==(o=null==(i=null==e?void 0:e.whoAmI)?void 0:i.preview)?void 0:o.pdf))return n;return r.jsxs(r.Fragment,{children:[r.jsx(ch,{onClick:()=>{l.current.requestFullscreen()},icon:r.jsx(Wi,{}),shape:"circle"}),r.jsx("iframe",{"data-testid":"document-viewer",ref:l,src:`${e.whoAmI.preview.pdf}#toolbar=0`,width:"100%",height:"100%",allowFullScreen:!0})]})}const fh=g`
    mutation FORCE_PREVIEWS_GENERATION(
        $libraryId: ID!
        $filters: [RecordFilterInput!]
        $recordIds: [ID!]
        $failedOnly: Boolean
        $previewVersionSizeNames: [String!]
    ) {
        forcePreviewsGeneration(
            libraryId: $libraryId
            filters: $filters
            recordIds: $recordIds
            failedOnly: $failedOnly
            previewVersionSizeNames: $previewVersionSizeNames
        )
    }
`;function ph({libraryId:e,filesLibraryId:n,recordIds:o,filters:l,onClose:a}){const{t:s}=i(),{lang:u}=O(),[c,d]=t.useState(!1),[f,p]=t.useState([]),[v,m]=t.useState([]),[g,h]=t.useState([]),[b,{loading:x,data:w}]=j(fh),E=jn(),{error:S,loading:_}=y(kn,{variables:{filters:{id:[n||e]}},onCompleted:e=>{var t;const n=(null==(t=e.libraries.list)?void 0:t[0].previewsSettings)||[],r=[],i=n.map((e=>{const t=e.versions.sizes.map((e=>({title:`${e.name} (${e.size}px)`,key:e.name})));return r.push(...t.map((e=>e.key))),{title:Et(e.label,u),key:Et(e.label,u),children:t}}));m(i),h(r)}});return r.jsxs(G,{open:!0,title:s("files.generate_previews"),cancelText:s("global.cancel"),okText:s("global.submit"),onCancel:a,width:600,onOk:async()=>{var t;try{const n=(null==(t=(await b({variables:{libraryId:e,recordIds:o,filters:l?Zo(l):null,failedOnly:c,previewVersionSizeNames:f}})).data)?void 0:t.forcePreviewsGeneration)??!1,r=s(n?"files.previews_generation_success":"files.previews_generation_nothing_to_do");E(Cn({type:Rn.success,channel:Tn.passive,content:r})),a()}catch(n){console.error(n)}},okButtonProps:{disabled:!f.length},confirmLoading:x,children:[_&&r.jsx(Y,{}),!_&&S&&r.jsx(M,{message:S.message}),!_&&!S&&r.jsxs(r.Fragment,{children:[r.jsx(K,{onChange:()=>{f.length===g.length?p([]):p(g)},checked:f.length===g.length,children:s("files.previews_generation_select_all")}),r.jsx(H,{checkable:!0,onCheck:(e,{checkedNodes:t})=>{const n=t.filter((e=>!e.children)).map((e=>e.key));p(n)},checkedKeys:f,selectable:!1,treeData:v}),r.jsx(C,{}),r.jsx(K,{onChange:()=>{d(!c)},checked:c,"aria-label":"failed-only",children:s("files.previews_generation_failed_only")})]})]})}const vh=Yr.div`
    position: relative;
    grid-area: sidebar;
    background: ${I.secondaryBg};
    border-top-right-radius: 3px;
    z-index: 1;
    display: flex;
    justify-content: space-between;
    flex-direction: column;
`,mh=Yr.div`
    overflow-x: auto;
    height: 2em;
    white-space: nowrap;
    background: ${I.defaultBg};
    padding: 0.5em;
    line-height: 1em;
    width: 135px;
    font-family: monospace;
`,gh=Yr.div`
    padding: 0.5rem 1rem;
    border-top: 1px solid ${I.borderColor};
    text-align: center;
`;function hh({fileData:e}){const{t:n}=i(),[o,l]=t.useState(!1),a=[{title:n("record_summary.id"),value:e.id},{title:n("record_summary.label"),value:e.whoAmI.label},{title:n("record_summary.created_at"),value:n("record_summary.created_at_value",{date:e.created_at,user:e.created_by.whoAmI.label,interpolation:{escapeValue:!1}})},{title:n("record_summary.modified_at"),value:n("record_summary.modified_at_value",{date:e.modified_at,user:e.modified_by.whoAmI.label,interpolation:{escapeValue:!1}})},{title:n("file_data.path"),value:r.jsx(mh,{children:"/"+e.file_path})}];return r.jsxs(r.Fragment,{children:[r.jsxs(vh,{"data-testid":"sidebar-section",children:[r.jsx(vi,{layout:"horizontal",column:1,style:{padding:"1rem"},children:a.map(((e,t)=>{const{title:n,value:i}=e;return r.jsx(vi.Item,{label:n,style:{paddingBottom:"5px"},labelStyle:{fontWeight:"bold",width:"50%"},children:i},t)}))}),!e.isPreviewsGenerationPending&&r.jsx(gh,{children:r.jsx($,{icon:r.jsx(pe,{}),onClick:()=>{l(!0)},children:n("files.generate_previews")})})]}),o&&r.jsx(ph,{libraryId:e.whoAmI.library.id,recordIds:[e.id],onClose:()=>{l(!1)}})]})}var bh={},yh={},xh={get exports(){return yh},set exports(e){yh=e}},wh={},Eh={};Object.defineProperty(Eh,"__esModule",{value:!0});Eh.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return d}});var n=s(t),r=l(Eh),i=l(ve);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return e&&e.__esModule?e:{default:e}}function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var c=function(e,t){return n.createElement(i.default,u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e),{ref:t,icon:r.default}))},d=n.forwardRef(c)}(wh),function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n;const r=(n=wh)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(xh,yh);var Sh={},_h={get exports(){return Sh},set exports(e){Sh=e}},jh={},kh={};Object.defineProperty(kh,"__esModule",{value:!0});kh.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return d}});var n=s(t),r=l(kh),i=l(ve);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return e&&e.__esModule?e:{default:e}}function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var c=function(e,t){return n.createElement(i.default,u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e),{ref:t,icon:r.default}))},d=n.forwardRef(c)}(jh),function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n;const r=(n=jh)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(_h,Sh);var Ch={},Rh={get exports(){return Ch},set exports(e){Ch=e}},Th={},Ih={};Object.defineProperty(Ih,"__esModule",{value:!0});Ih.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return d}});var n=s(t),r=l(Ih),i=l(ve);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return e&&e.__esModule?e:{default:e}}function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var c=function(e,t){return n.createElement(i.default,u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e),{ref:t,icon:r.default}))},d=n.forwardRef(c)}(Th),function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n;const r=(n=Th)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(Rh,Ch);var Oh={},Ah={get exports(){return Oh},set exports(e){Oh=e}},Vh={},Ph={};Object.defineProperty(Ph,"__esModule",{value:!0});Ph.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return d}});var n=s(t),r=l(Ph),i=l(ve);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return e&&e.__esModule?e:{default:e}}function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var c=function(e,t){return n.createElement(i.default,u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e),{ref:t,icon:r.default}))},d=n.forwardRef(c)}(Vh),function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n;const r=(n=Vh)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(Ah,Oh);var Lh={},$h={get exports(){return Lh},set exports(e){Lh=e}},Dh={},Nh={};Object.defineProperty(Nh,"__esModule",{value:!0});Nh.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return d}});var n=s(t),r=l(Nh),i=l(ve);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return e&&e.__esModule?e:{default:e}}function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var c=function(e,t){return n.createElement(i.default,u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e),{ref:t,icon:r.default}))},d=n.forwardRef(c)}(Dh),function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n;const r=(n=Dh)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}($h,Lh);var Fh={},zh={get exports(){return Fh},set exports(e){Fh=e}},Bh={},Mh={};Object.defineProperty(Mh,"__esModule",{value:!0});Mh.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return d}});var n=s(t),r=l(Mh),i=l(ve);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return e&&e.__esModule?e:{default:e}}function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var c=function(e,t){return n.createElement(i.default,u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e),{ref:t,icon:r.default}))},d=n.forwardRef(c)}(Bh),function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n;const r=(n=Bh)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(zh,Fh);var Hh={},Uh={get exports(){return Hh},set exports(e){Hh=e}},Gh={},Wh={};Object.defineProperty(Wh,"__esModule",{value:!0});Wh.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return d}});var n=s(t),r=l(Wh),i=l(ve);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return e&&e.__esModule?e:{default:e}}function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var c=function(e,t){return n.createElement(i.default,u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e),{ref:t,icon:r.default}))},d=n.forwardRef(c)}(Gh),function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n;const r=(n=Gh)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(Uh,Hh);const qh=o(gi);var Yh={},Xh={};Object.defineProperty(Xh,"__esModule",{value:!0}),Xh.prepareToken=Xh.prepareComponentToken=Xh.genModalMaskStyle=Xh.default=void 0;var Qh=he,Kh=me,Zh=ge;function Jh(e){return{position:e,inset:0}}const eb=e=>{const{componentCls:t,antCls:n}=e;return[{[`${t}-root`]:{[`${t}${n}-zoom-enter, ${t}${n}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},[`${t}${n}-zoom-leave ${t}-content`]:{pointerEvents:"none"},[`${t}-mask`]:Object.assign(Object.assign({},Jh("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,pointerEvents:"none",[`${t}-hidden`]:{display:"none"}}),[`${t}-wrap`]:Object.assign(Object.assign({},Jh("fixed")),{zIndex:e.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch",[`&:has(${t}${n}-zoom-enter), &:has(${t}${n}-zoom-appear)`]:{pointerEvents:"none"}})}},{[`${t}-root`]:(0,Kh.initFadeMotion)(e)}]};Xh.genModalMaskStyle=eb;const tb=e=>{const{componentCls:t}=e;return[{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl"},[`${t}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[t]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${e.screenSMMax})`]:{[t]:{maxWidth:"calc(100vw - 16px)",margin:`${e.marginXS} auto`},[`${t}-centered`]:{[t]:{flex:1}}}}},{[t]:Object.assign(Object.assign({},(0,Qh.resetComponent)(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${2*e.margin}px)`,margin:"0 auto",paddingBottom:e.paddingLG,[`${t}-title`]:{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"},[`${t}-content`]:{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`},[`${t}-close`]:Object.assign({position:"absolute",top:(e.modalHeaderHeight-e.modalCloseBtnSize)/2,insetInlineEnd:(e.modalHeaderHeight-e.modalCloseBtnSize)/2,zIndex:e.zIndexPopupBase+10,padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:`${e.modalCloseBtnSize}px`,justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:hover":{color:e.modalIconHoverColor,backgroundColor:e.wireframe?"transparent":e.colorFillContent,textDecoration:"none"},"&:active":{backgroundColor:e.wireframe?"transparent":e.colorFillContentHover}},(0,Qh.genFocusStyle)(e)),[`${t}-header`]:{color:e.colorText,background:e.headerBg,borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`,marginBottom:e.marginXS},[`${t}-body`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word"},[`${t}-footer`]:{textAlign:"end",background:e.footerBg,marginTop:e.marginSM,[`${e.antCls}-btn + ${e.antCls}-btn:not(${e.antCls}-dropdown-trigger)`]:{marginBottom:0,marginInlineStart:e.marginXS}},[`${t}-open`]:{overflow:"hidden"}})},{[`${t}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${t}-content,\n          ${t}-body,\n          ${t}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${t}-confirm-body`]:{marginBottom:"auto"}}}]},nb=e=>{const{componentCls:t,antCls:n}=e,r=`${t}-confirm`;return{[t]:{[`${t}-content`]:{padding:0},[`${t}-header`]:{padding:e.modalHeaderPadding,borderBottom:`${e.modalHeaderBorderWidth}px ${e.modalHeaderBorderStyle} ${e.modalHeaderBorderColorSplit}`,marginBottom:0},[`${t}-body`]:{padding:e.modalBodyPadding},[`${t}-footer`]:{padding:`${e.modalFooterPaddingVertical}px ${e.modalFooterPaddingHorizontal}px`,borderTop:`${e.modalFooterBorderWidth}px ${e.modalFooterBorderStyle} ${e.modalFooterBorderColorSplit}`,borderRadius:`0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px`,marginTop:0}},[r]:{[`${n}-modal-body`]:{padding:`${2*e.padding}px ${2*e.padding}px ${e.paddingLG}px`},[`${r}-body`]:{[`> ${e.iconCls}`]:{marginInlineEnd:e.margin,[`+ ${r}-title + ${r}-content`]:{marginInlineStart:e.modalConfirmIconSize+e.margin}}},[`${r}-btns`]:{marginTop:e.marginLG}}}},rb=e=>{const{componentCls:t}=e;return{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl",[`${t}-confirm-body`]:{direction:"rtl"}}}}},ib=e=>{const t=e.padding,n=e.fontSizeHeading5,r=e.lineHeightHeading5;return(0,Zh.mergeToken)(e,{modalBodyPadding:e.paddingLG,modalHeaderPadding:`${t}px ${e.paddingLG}px`,modalHeaderBorderWidth:e.lineWidth,modalHeaderBorderStyle:e.lineType,modalHeaderBorderColorSplit:e.colorSplit,modalHeaderHeight:r*n+2*t,modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterPaddingVertical:e.paddingXS,modalFooterPaddingHorizontal:e.padding,modalFooterBorderWidth:e.lineWidth,modalIconHoverColor:e.colorIconHover,modalCloseIconColor:e.colorIcon,modalCloseBtnSize:e.fontSize*e.lineHeight,modalConfirmIconSize:e.fontSize*e.lineHeight})};Xh.prepareToken=ib;const ob=e=>({footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading});Xh.prepareComponentToken=ob;var lb=(0,Zh.genComponentStyleHook)("Modal",(e=>{const t=ib(e);return[tb(t),rb(t),eb(t),e.wireframe&&nb(t),(0,Kh.initZoomMotion)(t,"zoom")]}),ob);Xh.default=lb,Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.genPreviewSwitchStyle=Yh.genPreviewOperationsStyle=Yh.genImagePreviewStyle=Yh.genImageMaskStyle=Yh.genBoxStyle=Yh.default=void 0;var ab=be,sb=Xh,ub=he,cb=me,db=ge;const fb=e=>({position:e||"absolute",inset:0});Yh.genBoxStyle=fb;const pb=e=>{const{iconCls:t,motionDurationSlow:n,paddingXXS:r,marginXXS:i,prefixCls:o,colorTextLightSolid:l}=e;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:l,background:new ab.TinyColor("#000").setAlpha(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${n}`,[`.${o}-mask-info`]:Object.assign(Object.assign({},ub.textEllipsis),{padding:`0 ${r}px`,[t]:{marginInlineEnd:i,svg:{verticalAlign:"baseline"}}})}};Yh.genImageMaskStyle=pb;const vb=e=>{const{previewCls:t,modalMaskBg:n,paddingSM:r,marginXL:i,margin:o,paddingLG:l,previewOperationColorDisabled:a,previewOperationHoverColor:s,motionDurationSlow:u,iconCls:c,colorTextLightSolid:d}=e,f=new ab.TinyColor(n).setAlpha(.1),p=f.clone().setAlpha(.2);return{[`${t}-footer`]:{position:"fixed",bottom:i,left:{_skip_check_:!0,value:0},width:"100%",display:"flex",flexDirection:"column",alignItems:"center",color:e.previewOperationColor},[`${t}-progress`]:{marginBottom:o},[`${t}-close`]:{position:"fixed",top:i,right:{_skip_check_:!0,value:i},display:"flex",color:d,backgroundColor:f.toRgbString(),borderRadius:"50%",padding:r,outline:0,border:0,cursor:"pointer",transition:`all ${u}`,"&:hover":{backgroundColor:p.toRgbString()},[`& > ${c}`]:{fontSize:e.previewOperationSize}},[`${t}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${l}px`,backgroundColor:f.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:r,padding:r,cursor:"pointer",transition:`all ${u}`,userSelect:"none",[`&:not(${t}-operations-operation-disabled):hover > ${c}`]:{color:s},"&-disabled":{color:a,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${c}`]:{fontSize:e.previewOperationSize}}}}};Yh.genPreviewOperationsStyle=vb;const mb=e=>{const{modalMaskBg:t,iconCls:n,previewOperationColorDisabled:r,previewCls:i,zIndexPopup:o,motionDurationSlow:l}=e,a=new ab.TinyColor(t).setAlpha(.1),s=a.clone().setAlpha(.2);return{[`${i}-switch-left, ${i}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:o+1,display:"flex",alignItems:"center",justifyContent:"center",width:e.imagePreviewSwitchSize,height:e.imagePreviewSwitchSize,marginTop:-e.imagePreviewSwitchSize/2,color:e.previewOperationColor,background:a.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${l}`,userSelect:"none","&:hover":{background:s.toRgbString()},"&-disabled":{"&, &:hover":{color:r,background:"transparent",cursor:"not-allowed",[`> ${n}`]:{cursor:"not-allowed"}}},[`> ${n}`]:{fontSize:e.previewOperationSize}},[`${i}-switch-left`]:{insetInlineStart:e.marginSM},[`${i}-switch-right`]:{insetInlineEnd:e.marginSM}}};Yh.genPreviewSwitchStyle=mb;const gb=e=>{const{motionEaseOut:t,previewCls:n,motionDurationSlow:r,componentCls:i}=e;return[{[`${i}-preview-root`]:{[n]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${n}-body`]:Object.assign(Object.assign({},fb()),{overflow:"hidden"}),[`${n}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${r} ${t} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},fb()),{transition:`transform ${r} ${t} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${n}-moving`]:{[`${n}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${i}-preview-root`]:{[`${n}-wrap`]:{zIndex:e.zIndexPopup}}},{[`${i}-preview-operations-wrapper`]:{position:"fixed",zIndex:e.zIndexPopup+1},"&":[vb(e),mb(e)]}]};Yh.genImagePreviewStyle=gb;const hb=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",display:"inline-block",[`${t}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${t}-img-placeholder`]:{backgroundColor:e.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${t}-mask`]:Object.assign({},pb(e)),[`${t}-mask:hover`]:{opacity:1},[`${t}-placeholder`]:Object.assign({},fb())}}},bb=e=>{const{previewCls:t}=e;return{[`${t}-root`]:(0,cb.initZoomMotion)(e,"zoom"),"&":(0,cb.initFadeMotion)(e,!0)}};var yb=(0,db.genComponentStyleHook)("Image",(e=>{const t=`${e.componentCls}-preview`,n=(0,db.mergeToken)(e,{previewCls:t,modalMaskBg:new ab.TinyColor("#000").setAlpha(.45).toRgbString(),imagePreviewSwitchSize:e.controlHeightLG});return[hb(n),gb(n),(0,sb.genModalMaskStyle)((0,db.mergeToken)(n,{componentCls:t})),bb(n)]}),(e=>({zIndexPopup:e.zIndexPopupBase+80,previewOperationColor:new ab.TinyColor(e.colorTextLightSolid).setAlpha(.65).toRgbString(),previewOperationHoverColor:new ab.TinyColor(e.colorTextLightSolid).setAlpha(.85).toRgbString(),previewOperationColorDisabled:new ab.TinyColor(e.colorTextLightSolid).setAlpha(.25).toRgbString(),previewOperationSize:1.5*e.fontSizeIcon})));Yh.default=yb;var xb=E.default,wb=w.default;Object.defineProperty(bh,"__esModule",{value:!0});var Eb=bh.icons=bh.default=void 0,Sb=wb(ye),_b=wb(yh),jb=wb(Sh),kb=wb(Ch),Cb=wb(Oh),Rb=wb(Lh),Tb=wb(Fh),Ib=wb(Hh),Ob=wb(qh),Ab=xb(t),Vb=wb(Gr),Pb=re,Lb=xe,$b=wb(Yh);const Db={rotateLeft:Ab.createElement(kb.default,null),rotateRight:Ab.createElement(Cb.default,null),zoomIn:Ab.createElement(Tb.default,null),zoomOut:Ab.createElement(Ib.default,null),close:Ab.createElement(Sb.default,null),left:Ab.createElement(_b.default,null),right:Ab.createElement(jb.default,null),flipX:Ab.createElement(Rb.default,null),flipY:Ab.createElement(Rb.default,{rotate:90})};Eb=bh.icons=Db;var Nb=e=>{var{previewPrefixCls:t,preview:n}=e,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["previewPrefixCls","preview"]);const{getPrefixCls:i}=Ab.useContext(Pb.ConfigContext),o=i("image",t),l=`${o}-preview`,a=i(),[s,u]=(0,$b.default)(o),c=Ab.useMemo((()=>{var e;if(!1===n)return n;const t="object"==typeof n?n:{},r=(0,Vb.default)(u,null!==(e=t.rootClassName)&&void 0!==e?e:"");return Object.assign(Object.assign({},t),{transitionName:(0,Lb.getTransitionName)(a,"zoom",t.transitionName),maskTransitionName:(0,Lb.getTransitionName)(a,"fade",t.maskTransitionName),rootClassName:r})}),[n]);return s(Ab.createElement(Ob.default.PreviewGroup,Object.assign({preview:c,previewPrefixCls:l,icons:Db},r)))};bh.default=Nb;const Fb=()=>{var e;const{currentApp:t}=In();return(null==(e=null==t?void 0:t.settings)?void 0:e.showTransparency)??!1},zb=Yr(we)`
    display: ${e=>e.$loaded?"block":"none"};
`;function Bb({fileData:e,fallback:n}){var i;const o=null==(i=null==e?void 0:e.whoAmI)?void 0:i.preview,[l,a]=t.useState(!1),[s,u]=t.useState(!1),c=Fb();if(!(null==o?void 0:o.huge)||s)return n;return r.jsxs(r.Fragment,{children:[!l&&r.jsx(Ee,{style:{height:"50%",width:"50%"}}),r.jsx(zb,{$loaded:l,src:o.huge,onLoad:()=>{a(!0)},onError:()=>{a(!0),u(!0)},style:{background:c?I.checkerBoard:I.imageDefaultBackground},preview:{icons:{...Eb,rotateLeft:!1,rotateRight:!1}}})]})}const Mb=Yr.div`
    width: 80%;
    height: 80%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    border-radius: ${e=>e.$themeToken.borderRadius}px;
    background-color: ${e=>e.$background};
    color: ${e=>e.$color};
`,Hb=Yr.div`
    font-size: ${e=>e.$isDirectory?"4em":"7em"};
`,Ub=Yr(V)`
    font-size: 1.2em;
`;function Gb({fileData:e,noPreviewMessage:t=!1}){const{t:n}=i(),o=e.file_name.split(".").pop().toUpperCase(),l=e.whoAmI.color||On(e.whoAmI.label),a=An(l),s="directories"===e.library.behavior,{token:u}=F.useToken();let c;return e.isPreviewsGenerationPending?c=r.jsxs(r.Fragment,{children:[r.jsx(Fi,{}),n("file_data.previews_generation_pending")]}):t&&(c=r.jsxs(r.Fragment,{children:[r.jsx(Se,{}),n("file_data.no_preview")]})),r.jsxs(Mb,{$background:l,$color:a,$themeToken:u,children:[r.jsx(Hb,{$isDirectory:s,children:s?r.jsxs(V,{children:[r.jsx(Vn,{}),n("file_data.directory")]}):o}),c&&r.jsx(Ub,{children:c})]})}const Wb=Yr.video`
    max-height: 100%;
    max-width: 100%;
`;function qb({fileData:e,fallback:n}){var i,o;const[l,a]=t.useState(!1);return!(null==(o=null==(i=null==e?void 0:e.whoAmI)?void 0:i.preview)?void 0:o.original)||l?n:r.jsx(Wb,{controls:!0,src:e.whoAmI.preview.original,title:e.file_name,"data-testid":"video-player",onError:()=>{a(!0)}})}const Yb=Yr.div`
    height: calc(100vh - 12rem);
    display: grid;
    grid-template-columns: minmax(0, ${sh-300}px) ${300}px;
    grid-template-rows: 5rem auto;
    grid-template-areas:
        'title title'
        'content sidebar';
    overflow: hidden;
    grid-gutter: 0;
`,Xb=Yr.div`
    grid-area: title;
    align-self: center;
    font-size: 1rem;
    padding: 1rem;
    border-bottom: 1px solid ${I.borderColor};
`,Qb=Yr.div`
    position: relative;
    height: calc(100vh - 17rem);
    grid-area: content;
    overflow-x: hidden;
    overflow-y: scroll;
    padding: 1rem;
    display: flex;
    align-content: center;
    justify-content: center;
    align-items: center;
    justify-items: center;

    .ant-image {
        max-height: calc(100vh - 19rem);
        border: 1px solid ${I.borderLightColor};

        height: fit-content;
        img {
            max-height: calc(100vh - 19rem);
        }
    }
`;function Kb({fileData:e}){let t;const n={fileData:e,fallback:r.jsx(Gb,{fileData:e,noPreviewMessage:!0,fallback:null})};switch(e.file_type){case"image":t=r.jsx(Bb,{...n});break;case"video":t=r.jsx(qb,{...n});break;case"audio":t=r.jsx(uh,{...n});break;case"document":t=r.jsx(dh,{...n});break;default:t=r.jsx(Gb,{fileData:e,fallback:null})}return r.jsxs(Yb,{children:[r.jsx(Xb,{"data-testid":"title-section",children:r.jsx(hn,{record:e.whoAmI,size:bn.small})}),r.jsx(Qb,{"data-testid":"content-section",children:t}),r.jsx(hh,{fileData:e})]})}const Zb=Yr(G)`
    .ant-modal-close {
        top: 0;
        right: 0;
        width: 4rem;
        height: 4rem;
        line-height: 4rem;
    }

    && .ant-modal-content {
        padding: 0;
    }
`,Jb=Yr.div`
    padding: 0.5rem 1rem;
`;function ey({fileId:e,libraryId:n,open:o,onClose:l}){const{t:a}=i(),{loading:s,error:u,fileData:c}=function(e,n){const[r,i]=t.useState(),{data:o,error:l,loading:a}=y(ah(e),{fetchPolicy:"cache-and-network",skip:!n,variables:{fileId:n}});return t.useEffect((()=>{var t,n,r;if(o){if(!(null==(n=null==(t=o[e])?void 0:t.list)?void 0:n.length))return void i(null);const l=null==(r=o[e])?void 0:r.list[0],a=(null==l?void 0:l.previews_status)?JSON.parse(l.previews_status):null,s={...l,previews_status:a,isPreviewsGenerationPending:!!a&&Object.keys(a).some((e=>{var t;return-1===(null==(t=a[e])?void 0:t.status)}))};i(s)}}),[o]),{error:l,loading:a||!a&&void 0===typeof r,fileData:r}}(n,e),d=[r.jsx(Mr,{"aria-label":a("global.close"),onClick:l,children:a("global.close")},"close")],f=r.jsx(Jb,{children:d});return r.jsxs(Zb,{open:o,destroyOnClose:!0,okText:a("global.close"),onCancel:l,width:"90vw",centered:!0,style:{padding:0,maxWidth:`${sh}px`},bodyStyle:{height:"calc(100vh - 12rem)",overflowY:"auto",padding:0},footer:f,children:[s&&r.jsx(Y,{}),!s&&(u||!c)&&r.jsx(M,{message:(null==u?void 0:u.message)??a("global.element_not_found")}),!s&&!u&&c&&r.jsx(Kb,{fileData:c})]})}const ty=Yr.div`
    position: relative;
    cursor: pointer;
    width: fit-content;
    height: fit-content;
    margin: auto;
`,ny=Yr.div`
    background: ${I.secondaryBg}99; // Hexadecimal color + opacity
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: none;
    justify-content: center;
    align-items: center;
    font-size: 2em;

    ${ty}:hover & {
        display: flex;
    }
`;function ry({previewFile:e,imageStyle:n,...i}){const[o,l]=t.useState(!1),a=null==e?void 0:e.id,s=null==e?void 0:e.library,u=Fb();return r.jsxs(r.Fragment,{children:[r.jsxs(ty,{onClick:()=>{l(!0)},"data-testid":"click-handler",children:[r.jsx(_e,{imageStyle:{background:u?I.checkerBoard:"transparent",...n},...i}),r.jsx(ny,{children:r.jsx(je,{})})]}),o&&r.jsx(ey,{open:o,fileId:a,libraryId:s,onClose:()=>l(!1)})]})}const iy=Yr(V)`
    padding: 1em;
    display: flex;
`;function oy({record:e}){var t,n,o,l,a,s,u,c,d,f,p,v,m,g,h;const b=null==(t=null==e?void 0:e.preview)?void 0:t.medium,y=null==(n=null==e?void 0:e.preview)?void 0:n.file,{token:x}=F.useToken(),{t:w}=i(),{lang:E}=O(),{loading:S,error:_,data:j}=wa(null==(o=null==e?void 0:e.library)?void 0:o.gqlNames.query,["created_at","created_by","modified_at","modified_by"],[null==e?void 0:e.id]);if(S)return r.jsx(Y,{});if(_)return r.jsx(M,{message:_.message});const k=null==j?void 0:j[null==e?void 0:e.id],C=[{title:w("record_summary.label"),value:null==e?void 0:e.label},{title:w("record_summary.id"),value:null==e?void 0:e.id},{title:w("record_summary.library"),value:Gt(null==e?void 0:e.library.label,E)}];return k&&((null==(l=k.created_at)?void 0:l[0])&&C.push({title:w("record_summary.created_at"),value:w("record_summary.created_at_value",{date:(null==(a=null==k?void 0:k.created_at)?void 0:a[0]).value,user:null==(d=null==(c=null==(u=null==(s=null==k?void 0:k.created_by)?void 0:s[0])?void 0:u.linkValue)?void 0:c.whoAmI)?void 0:d.label,interpolation:{escapeValue:!1}})}),(null==(f=k.modified_at)?void 0:f[0])&&C.push({title:w("record_summary.modified_at"),value:w("record_summary.modified_at_value",{date:(null==(p=null==k?void 0:k.modified_at)?void 0:p[0]).value,user:null==(h=null==(g=null==(m=null==(v=null==k?void 0:k.modified_by)?void 0:v[0])?void 0:m.linkValue)?void 0:g.whoAmI)?void 0:h.label,interpolation:{escapeValue:!1}})})),r.jsxs(iy,{direction:"vertical",children:[r.jsx(ry,{label:(null==e?void 0:e.label)??(null==e?void 0:e.id),color:null==e?void 0:e.color,image:b&&Pn(b),tile:!0,size:bn.medium,style:{borderRadius:x.borderRadius},previewFile:y,imageStyle:{borderRadius:x.borderRadius}}),r.jsx(lh,{items:C})]})}const ly=Yr(ke)`
    &&& {
        margin: 1rem;
        background: none;

        .ant-collapse-header {
            justify-content: flex-end;
        }

        .ant-collapse-content {
            background: ${I.defaultBg};
            border: 1px solid ${I.borderColor};
            border-radius: ${e=>e.$themeToken.borderRadius}px;
        }
    }
`;function ay({attribute:e}){const{t:t}=i(),{token:n}=F.useToken(),o=[{title:t("record_edition.attribute.id"),value:e.id},{title:t("record_edition.attribute.type"),value:t(`record_edition.attribute.type_${e.type}`)}];cn(e.type)&&o.push({title:t("record_edition.attribute.format"),value:e.format?t(`record_edition.attribute.format_${e.format}`):null});const l=[{key:"attribute",label:t("record_edition.attribute_details_section"),children:r.jsx(lh,{items:o})}];return r.jsx(ly,{items:l,destroyInactivePanel:!0,bordered:!1,ghost:!0,$themeToken:n})}const sy=Yr(H)`
    && {
        border: 1px solid ${I.borderColor};
    }
`;function uy({value:e,attribute:t}){const{lang:n}=O(),i=e.treeValue.ancestors??[],o={checkable:!1,selectable:!1},l=[...i].reverse().reduce(((e,t)=>[{...o,title:t.record.whoAmI.label,key:t.record.id,children:e??[]}]),[]),a=[{...o,title:Gt(t.linked_tree.label,n),key:t.linked_tree.id,children:l}];return r.jsx(sy,{showIcon:!1,treeData:a,defaultExpandAll:!0},e.id_value)}const cy=Yr.div`
    padding: 1rem;
`,dy=Yr.div`
    background: ${I.activeColor};
    padding: 0px 15px;
    border-radius: 1em;
    width: fit-content;
`,fy=Yr.div`
    margin-bottom: 1rem;
    display: flex;
    gap: 1rem;
`;function py(){var e,t,n;const{t:o}=i(),{state:l}=ua(),{value:a,attribute:s}=l.activeValue,u=(null==a?void 0:a.modified_at)?[{title:cn(s.type)?o("record_edition.created_at"):o("record_edition.link_created_at"),value:`${new Date(1e3*a.created_at).toLocaleString()} ${(null==a?void 0:a.created_by)?` ${o("record_edition.by")} ${a.created_by.whoAmI.label}`:""}`},{title:o("record_edition.modified_at"),value:`${new Date(1e3*a.modified_at).toLocaleString()} ${(null==a?void 0:a.modified_by)?` ${o("record_edition.by")} ${a.modified_by.whoAmI.label}`:""}`}]:[];(null==a?void 0:a.version)&&!St(null==a?void 0:a.version)&&u.push({title:o("values_version.version"),value:an(a.version)}),(null==l?void 0:l.record)&&(null==a?void 0:a.id_value)&&!St(null==a?void 0:a.id_value)&&u.push({title:o("record_edition.attribute.id"),value:null==a?void 0:a.id_value});const c=cn(s.type)&&s.format===Vr.text&&!!l.activeValue.value;if(!u.length&&!c)return null;const d=c?String(l.activeValue.editingValue).length:null,f=cn(s.type)?o("record_edition.value_details"):o("record_edition.link_details"),p=cn(s.type)?null:At(s.type)?null==(e=null==a?void 0:a.linkValue)?void 0:e.whoAmI:null==(n=null==(t=null==a?void 0:a.treeValue)?void 0:t.record)?void 0:n.whoAmI;return r.jsxs(cy,{children:[r.jsxs(fy,{children:[f,":",c&&r.jsx(dy,{children:o("record_edition.value_length",{length:d})})]}),p&&r.jsx(hn,{record:p,size:bn.big,tile:!0,style:{marginBottom:"1rem"}}),r.jsx(lh,{items:u})]})}Yr.div`
    font-style: italic;
    color: rgba(0, 0, 0, 0.4);
    font-size: 10px;
    position: relative;
    left: 81%;
    margin-bottom: 10px;
`;const vy={[Vr.text]:yt.TEXT_INPUT,[Vr.numeric]:yt.TEXT_INPUT,[Vr.date]:yt.DATE,[Vr.boolean]:yt.CHECKBOX,[Vr.date_range]:yt.DATE,[Vr.encrypted]:yt.TEXT_INPUT,[Vr.extended]:yt.TEXT_INPUT,[Vr.color]:yt.TEXT_INPUT,[Vr.rich_text]:yt.TEXT_INPUT};function my({value:e,attribute:t,onMetadataSubmit:n}){const{lang:i}=O(),o=r=>i=>n(e,t,{[r.id]:i[0].value}),l=r=>i=>n(e,t,{[r.id]:null});return r.jsx(V,{direction:"vertical",style:{width:"100%"},size:"small",children:t.metadata_fields.map((t=>{var n,a;const s={id:t.id,attribute:t,containerId:"__root",type:Br.field,uiElementType:vy[t.format],valueError:null,values:[null==(a=null==(n=null==e?void 0:e.metadata)?void 0:n.find((({name:e})=>e===t.id)))?void 0:a.value],settings:{label:Et(t.label,i)},uiElement:Xg[vy[t.format]]};return r.jsx(Pu,{element:s,onValueSubmit:o(t),onValueDelete:l(t),onDeleteMultipleValues:null,metadataEdit:!0},`${t.id}_${null==e?void 0:e.id_value}`)}))})}const gy=Yr.div`
    padding: 1rem;

    .attribute-label {
        font-weight: bold;
    }
`,hy=Yr.div`
    color: rgba(0, 0, 0, 0.5);
    padding: 0 1rem;
`,by=Yr(L)`
    cursor: pointer;
    position: absolute;
    right: 1em;
    top: 1em;
`;function yy({attribute:e,value:t,onMetadataSubmit:n}){const{lang:o}=O(),{t:l}=i(),{state:a,dispatch:s}=ua(),u=[];return((null==e?void 0:e.metadata_fields)??[]).filter((e=>e.permissions.access_attribute)).length>0&&null!==t&&u.push({key:"metadata",label:cn(e.type)?l("record_edition.metadata_section"):l("record_edition.metadata_section_link"),children:r.jsx(my,{value:t,attribute:e,onMetadataSubmit:n})}),e.type===Pr.tree&&t&&u.push({key:"path",label:l("record_edition.path_section"),children:r.jsx(uy,{value:t,attribute:e})}),r.jsxs(r.Fragment,{children:[r.jsx(by,{onClick:()=>s({type:oa.SET_ACTIVE_VALUE,value:null})}),r.jsxs(gy,{children:[l("record_edition.attribute.info_title"),":",r.jsx("span",{className:"attribute-label",children:Gt(e.label,o)})]}),r.jsx(hy,{children:Gt(e.description,o)}),r.jsx(ay,{attribute:e}),r.jsx(C,{style:{margin:".5em 0"}}),r.jsx(py,{}),r.jsx(ke,{items:u,bordered:!1,defaultActiveKey:["value","metadata"],style:{background:"none"},destroyInactivePanel:!0})]})}const xy=g`
    query GET_VERSIONABLE_ATTRIBUTES_BY_LIBRARY($libraryId: String!) {
        attributes(filters: {libraries: [$libraryId], versionable: true}) {
            list {
                id
                versions_conf {
                    versionable
                    profile {
                        id
                        trees {
                            id
                            label
                        }
                    }
                }
            }
        }
    }
`,wy=e=>{var t,n;const{loading:r,error:i,data:o}=y(xy,{variables:{libraryId:e}});let l=[];if(((null==(t=null==o?void 0:o.attributes)?void 0:t.list)??[]).length){const e=((null==(n=null==o?void 0:o.attributes)?void 0:n.list)??[]).reduce(((e,t)=>{var n;const r=null==(n=t.versions_conf)?void 0:n.profile;for(const i of(null==r?void 0:r.trees)??[])e[i.id]=i;return e}),{});l=Object.values(e)}return{loading:r,error:i,trees:l}};function Ey({tree:e,selectedNodeKey:n,onSubmit:o,visible:l,onClose:a,canSelectRoot:s=!1}){const{t:u}=i(),[c,d]=t.useState({id:n,key:n,title:"",children:[]}),f=()=>{a()};return r.jsx(G,{open:l,onCancel:f,title:u("tree-node-selection.title"),width:"70rem",bodyStyle:{maxHeight:"80vh",overflowY:"auto"},centered:!0,footer:[r.jsx(Mr,{onClick:f,children:u("global.cancel")},"cancel"),r.jsx(Mr,{type:"primary",onClick:()=>{o(c),a()},children:u("global.apply")},"add")],destroyOnClose:!0,children:r.jsx(ss,{tree:e,onSelect:(e,t)=>{d(t?e:void 0)},selectedNode:null==c?void 0:c.key,canSelectRoot:s})})}const Sy=Yr.div`
    background: ${I.lightBg};
    padding: 1rem;
    border-radius: 3px;
    margin-bottom: 8px;
    border: 2px solid transparent;
`,_y=Yr(V)`
    font-weight: bold;
    font-size: 1em;
`,jy=Yr(Mr)`
    && {
        width: 100%;
        margin-top: 0.5rem;
        padding: 0.5rem;
        background: ${I.defaultBg};
        border: 1px solid ${I.borderColor};
        border-radius: ${e=>e.$themeToken.borderRadius}px;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        color: ${e=>e.$hasSelection?I.defaultTextColor:I.secondaryTextColor};
        align-items: center;
    }
`,ky=Yr(Ce)`
    && {
        cursor: pointer;
        color: ${I.secondaryTextColor};
        font-size: 0.8em;
        display: none;

        ${jy}:hover & {
            display: block;
        }
    }
`;function Cy({tree:t,selectedNode:n,readOnly:o,onNodeChange:l}){const{lang:a}=O(),{t:s}=i(),{token:u}=F.useToken(),[c,d]=e.useState(!1),f=Et(t.label,a),p=!!n;return r.jsxs(r.Fragment,{children:[r.jsxs(Sy,{children:[r.jsxs(_y,{children:[r.jsx(Ln,{}),f]}),r.jsxs(jy,{disabled:o,onClick:()=>{d(!0)},$hasSelection:p,$themeToken:u,children:[(null==n?void 0:n.title)||s("values_version.select_version")+"...",p&&r.jsx(ky,{onClick:e=>{e.stopPropagation(),l(null)}})]})]}),c&&r.jsx(Ey,{tree:t,onClose:()=>{d(!1)},visible:c,onSubmit:e=>{l(e)},selectedNodeKey:null==n?void 0:n.id})]})}const Ry=Yr.div`
    width: 100%;
    padding: 0.5rem;
    display: flex;
    flex-flow: column nowrap;
    border-right: ${I.borderLightColor} 1px solid;
    overflow-y: auto;
`;function Ty({libraryId:e,selectedVersion:t,readOnly:n=!1,onVersionChange:i}){const{loading:o,error:l,trees:a}=wy(e);if(o)return r.jsx(Y,{});if(l)return r.jsx(M,{message:l.message});return r.jsx(Ry,{children:a.map((e=>{var o,l,a,s;return r.jsx(Cy,{tree:e,selectedNode:{id:null==(o=null==t?void 0:t[e.id])?void 0:o.id,title:null==(l=null==t?void 0:t[e.id])?void 0:l.label,key:null==(a=null==t?void 0:t[e.id])?void 0:a.id,children:[]},onNodeChange:(s=e.id,e=>{i({...t,[s]:e?{id:e.id??null,label:String(e.title)}:null})}),readOnly:n},e.id)}))})}function Iy(e){return Qa({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M15,16 L21,22 L15,16 Z M10,18 C13.8659932,18 17,14.8659932 17,11 C17,7.13400675 13.8659932,4 10,4 C6.13400675,4 3,7.13400675 3,11 C3,14.8659932 6.13400675,18 10,18 Z M20,1 L20,7 M17,4 L23,4"}}]})(e)}function Oy(e){return Qa({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7.18,4,8.6,5.44,6.06,8h9.71a6,6,0,0,1,0,12h-2V18h2a4,4,0,0,0,0-8H6.06L8.6,12.51,7.18,13.92,2.23,9Z"}}]})(e)}const Ay=Yr.div`
    display: grid;
    grid-template-rows: 3em 1fr 3em;
    height: 100%;
`,Vy=Yr.div`
    background-color: ${I.headerBg};
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.3rem 0.3rem 0.3rem 1rem;
    font-weight: 700;
    border-bottom: 1px solid ${I.borderLightColor};
`,Py=Yr(L)`
    cursor: pointer;
    background: none;
    box-shadow: none;
    margin: 0.5rem;
`;function Ly(){const{t:e}=i(),{state:t,dispatch:n}=ua(),o=!(null==t?void 0:t.record);return r.jsxs(Ay,{children:[r.jsxs(Vy,{children:[r.jsx("span",{children:e("values_version.title")}),r.jsxs("span",{children:[!o&&r.jsx($,{title:e("values_version.reset"),shape:"circle",centered:!0,icon:r.jsx(Oy,{}),onClick:()=>{n({type:oa.SET_VALUES_VERSION,valuesVersion:t.originValuesVersion})}}),r.jsx(Py,{onClick:()=>{n({type:oa.SET_SIDEBAR_CONTENT,content:"summary"})}})]})]}),r.jsx(Ty,{libraryId:t.libraryId,selectedVersion:t.valuesVersion,onVersionChange:e=>{n({type:oa.SET_VALUES_VERSION,valuesVersion:e})},readOnly:o})]})}function $y({onMetadataSubmit:e}){const{state:t}=ua();switch(t.sidebarContent){case"valueDetails":return r.jsx(yy,{value:t.activeValue.value,attribute:t.activeValue.attribute,onMetadataSubmit:e});case"valuesVersions":return r.jsx(Ly,{});default:return r.jsx(oy,{record:t.record})}}const Dy=Yr.div`
    margin-right: 60px;
    font-size: 1.5em;
    display: flex;
    align-items: center;

    > * {
        cursor: pointer;
    }
`;function Ny(){const{state:e,dispatch:t}=ua(),{t:n}=i(),{record:o}=e,l=!!Object.keys(e.externalUpdate.updatedValues).length,a=o?r.jsx(hn,{record:o,size:Re.small}):n("record_edition.new_record"),s=()=>{t({type:oa.REQUEST_REFRESH})},u=()=>{t({type:oa.CLEAR_EXTERNAL_UPDATE})},c=e.externalUpdate.modifiers.map((e=>e.label)).join(", ");return r.jsxs(r.Fragment,{children:[a,l&&r.jsx(X,{message:n("record_edition.external_update_warning",{modifiers:c}),type:"warning",showIcon:!0,closable:!0,onClose:u,action:r.jsx(Mr,{style:{marginLeft:"1rem"},icon:r.jsx(jo,{}),onClick:()=>{s(),u()},size:"small",children:n("global.refresh")})}),r.jsxs(Dy,{children:[r.jsx(vt,{title:n("values_version.title"),children:r.jsx(Ja,{onClick:()=>{t({type:oa.SET_SIDEBAR_CONTENT,content:"valuesVersions"===e.sidebarContent?"summary":"valuesVersions"})}})}),r.jsx(vt,{title:n("global.refresh"),children:r.jsx(jo,{onClick:s})})]})]})}const Fy=Yr(Te)`
    cursor: pointer;
`;function zy({libraryId:e,version:t,onVersionClick:n}){const{t:o}=i(),{lang:l}=O(),{loading:a,error:s,trees:u}=wy(e),c=()=>{n()};return a?r.jsx(Y,{}):s?r.jsx(M,{message:"error.message"}):r.jsxs(V,{size:"small",children:[r.jsxs("span",{children:[o("values_version.version"),":"]}),r.jsx("div",{children:u.filter((e=>!!(null==t?void 0:t[e.id]))).map((e=>{var n;return r.jsx(vt,{title:Et(e.label,l),children:r.jsx(Fy,{onClick:c,children:null==(n=null==t?void 0:t[e.id])?void 0:n.label})},e.id)}))})]})}const By=1200,My=Yr.div`
    height: calc(100vh - 12rem);
    display: grid;
    grid-template-columns: minmax(0, ${By-300}px) ${300}px;
    grid-template-rows: calc(3.5rem + 1px) auto; // +1px for border
    grid-template-areas:
        'title title'
        'content sidebar';
    overflow: hidden;
    grid-gutter: 0;
`,Hy=Yr.div`
    grid-area: title;
    align-self: center;
    font-size: 1rem;
    padding: 0.5rem;
    border-bottom: 1px solid ${I.borderColor};
    display: flex;
    justify-content: space-between;
    align-items: center;
`,Uy=Yr.div`
    grid-area: content;
    padding: 1em;
    overflow-x: hidden;
    overflow-y: scroll;
    padding-right: 1rem;
`,Gy=Yr.div`
    overflow-x: hidden;
    overflow-y: scroll;
    position: relative;
    grid-area: sidebar;
    background: ${I.secondaryBg};
    border-top-right-radius: 3px;
    z-index: 1;
`,Wy=Yr.div`
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 1rem;
`,qy=Yr(G)`
    && .ant-modal-content {
        padding: 0;
    }
`;function Yy({open:e,record:n,library:o,onClose:l,afterCreate:a,valuesVersion:s}){const{t:u}=i(),c=!n,[d,f]=t.useReducer(aa,{...la,record:n,libraryId:o,valuesVersion:s,originValuesVersion:s}),{loading:p,canEdit:v,isReadOnly:m}=ea({...null==n?void 0:n.library,id:o},null==n?void 0:n.id),{saveValues:g,loading:h}=function(){x();const[e,{loading:t}]=j(oh),n=Uo(),{t:r}=i();return{saveValues:async(t,i,o,l=!1)=>{var a,s;try{const r=await e({variables:{library:t.library.id,recordId:t.id,values:i.map((e=>({attribute:e.attribute,id_value:e.idValue,value:null!==e.value?String(e.value):null,metadata:e.metadata?ct(e.metadata).map((({name:e,value:t})=>({name:e,value:String(t)}))):null}))),version:o?ct(o).map((e=>({treeId:e.name,treeNodeId:e.value.id}))):null,deleteEmpty:l}}),{values:a,errors:s}=r.data.saveValueBatch;return n(t,a),{status:(null==s?void 0:s.length)&&a.length?Ca.PARTIAL:(null==s?void 0:s.length)&&!a.length?Ca.ERROR:Ca.SUCCESS,...r.data.saveValueBatch}}catch(u){const e=null==(a=u.graphQLErrors)?void 0:a[0],t=(null==(s=null==e?void 0:e.extensions)?void 0:s.code)?e.extensions.code===bt.VALIDATION_ERROR?Object.values(e.extensions.fields).join("\n"):r(`error.${e.extensions.code}`):u.message;return{status:Ca.ERROR,error:t}}},loading:t}}(),{deleteValue:b}=function(e){const t=Uo(),[n]=j(ih,{update:(n,{data:{deleteValue:r}})=>{t(e,[r])}}),{t:r}=i();return{deleteValue:async(t,i)=>{var o;try{return await n({variables:{library:e.library.id,attribute:i,recordId:e.id,value:t}}),{status:Ca.SUCCESS}}catch(l){const e=l.graphQLErrors[0],t=(null==(o=null==e?void 0:e.extensions)?void 0:o.code)?e.extensions.code===bt.VALIDATION_ERROR?e.extensions.fields[i]:r(`error.${e.extensions.code}`):l.message;return{status:Ca.ERROR,error:t}}}}}(n),[y]=j(Zl),[w,E]=t.useState({}),[S,_]=t.useState({}),k=!!Object.keys(S).length;t.useEffect((()=>{n&&!Wl(n,d.record)&&f({type:oa.SET_RECORD,record:n})}),[n]);const C=async(e,t)=>{var r,i;if(!c)return g(n,e.map((e=>{const t={...e,attribute:e.attribute.id,metadata:e.metadata};switch(e.attribute.type){case Pr.advanced_link:case Pr.simple_link:case Pr.tree:t.value=e.value.id;break;default:t.value=e.value}return t})),t);const o={...S},l=[];for(const n of e){const e=n.attribute.id;o[e]||(o[e]={});let t=n.idValue;t||n.attribute.type===Pr.simple||n.attribute.type===Pr.simple_link||(t=`pending_${Object.keys(o[e]).length+1}`);const a={id_value:t,modified_at:null,modified_by:null,created_at:null,created_by:null,version:null,attribute:n.attribute,metadata:n.metadata?Object.keys(n.metadata).reduce(((e,t)=>{const r={id_value:null,modified_at:null,modified_by:null,created_at:null,created_by:null,version:null,value:n.metadata[t],raw_value:n.metadata[t]},i=e.findIndex((e=>e.name===t));return-1!==i?e[i].value=r:e.push({name:t,value:r}),e}),(null==(i=null==(r=null==o?void 0:o[e])?void 0:r[t])?void 0:i.metadata)??[]):null};switch(n.attribute.type){case Pr.advanced_link:case Pr.simple_link:a.linkValue=n.value;break;case Pr.tree:const e=n.value,t=e.record;a.treeValue={id:e.id,record:t,ancestors:[{record:t}]};break;default:a.value=n.value,a.raw_value=n.value}o[e][a.id_value]={...a},l.push(a)}return _(o),{status:Ca.SUCCESS,values:l}},R=async()=>{var e;if(!k)return;let t=d.record??null;if(!t){const n=Object.values(S).reduce(((e,t)=>[...e,...Object.values(t).map((e=>{let t;switch(e.attribute.type){case Pr.advanced_link:case Pr.simple_link:t=e.linkValue.id;break;case Pr.tree:t=e.treeValue.id;break;default:t=e.raw_value}return{value:t,id_value:e.id_value??null,attribute:e.attribute.id,metadata:e.metadata?e.metadata.map((e=>({name:e.name,value:e.value.raw_value}))):null}}))]),[]),r=await y({variables:{library:o,data:{values:n}}});if(null==(e=r.data.createRecord.valuesErrors)?void 0:e.length){const e=r.data.createRecord.valuesErrors.reduce(((e,t)=>(e[t.attributeId]||(e[t.attributeId]=[]),e[t.attributeId].push(t),e)),{});return void E(e)}t=r.data.createRecord.record.whoAmI,a&&await a(t)}l()};n?bn.small:u("record_edition.new_record");const T=[r.jsx(Mr,{"aria-label":u("global.close"),onClick:l,children:u("global.close")},"close")];c&&T.push(r.jsx(Mr,{type:"primary","aria-label":u("global.submit"),onClick:R,disabled:!k||p,loading:h,children:u("global.submit")},"submit"));const I=r.jsxs(Wy,{children:[Object.values(d.valuesVersion??{}).filter((e=>!!e)).length?r.jsx(zy,{libraryId:o,version:d.valuesVersion,onVersionClick:()=>{f({type:oa.SET_SIDEBAR_CONTENT,content:"valuesVersions"===d.sidebarContent?"summary":"valuesVersions"})}}):r.jsx("div",{}),r.jsx(V,{children:T})]});return e?r.jsx("div",{onClick:e=>e.stopPropagation(),onDoubleClick:e=>e.stopPropagation(),children:r.jsx(qy,{open:e,onCancel:l,destroyOnClose:!0,cancelText:u("global.cancel"),width:"90vw",centered:!0,style:{maxWidth:`${By}px`},bodyStyle:{height:"calc(100vh - 12rem)",overflowY:"auto"},footer:I,children:r.jsx($n,{showRecoveryButtons:!1,children:p?r.jsx(Y,{}):r.jsx(sa.Provider,{value:{state:d,dispatch:f},children:r.jsx(va.Provider,{value:w,children:r.jsxs(My,{children:[r.jsx(Hy,{children:r.jsx(Ny,{})}),r.jsx(Uy,{className:"content",children:v?r.jsx(rh,{record:n,library:o,onValueSubmit:C,onValueDelete:async(e,t)=>{if(!c)return b(e,t);const n={...S};return delete n[t][e.id_value],_(n),{status:Ca.SUCCESS}},onDeleteMultipleValues:async(e,t,r)=>{if(!c){const i=t.map((t=>({idValue:t.id_value,attribute:e,value:null})));return g(n,i,r,!0)}const i={...S};return i[e]={},_(i),{status:Ca.SUCCESS}},readonly:m}):r.jsx(M,{type:q.PERMISSION_ERROR,showActionButton:!1})}),r.jsx(Gy,{className:"sidebar",children:r.jsx($y,{onMetadataSubmit:(e,t,n)=>{let r;switch(t.type){case Pr.simple:case Pr.advanced:r=e.raw_value;break;case Pr.advanced_link:case Pr.simple_link:r=e.linkValue;break;case Pr.tree:r=e.treeValue}return C([{idValue:e.id_value,attribute:t,value:r,metadata:n}],null)}})})]})})})})})}):r.jsx(r.Fragment,{})}const Xy=Yr.span`
    padding: 0 0.75em;
    height: 1.75em;
    line-height: 1.75em;
    margin: 0 1em;
    border-radius: 2em;
    background: ${I.activeColor};
    color: ${I.secondaryTextColor};
    font-weight: bold;
    font-size: 0.9em;
    cursor: pointer;
`;function Qy({values:e,attributeType:t}){const{t:n}=i(),[o,l]=G.useModal(),a=t=>{Dn(t),o.info({icon:null,content:r.jsx(eu,{dataSource:e.map((e=>(null==e?void 0:e.whoAmI)?r.jsx(hn,{record:null==e?void 0:e.whoAmI,size:bn.small}):e)),size:"small",maxHeight:"50vh"}),okText:n("global.close")})},s=e.slice(0,5).map((e=>{var n;const r=t===Pr.tree?null==(n=null==e?void 0:e.record)?void 0:n.whoAmI:null==e?void 0:e.whoAmI;return r?r.label??r.id:null})).filter((e=>!!e)),u=r.jsx(eu,{dataSource:s,size:"small",maxHeight:"50vh",footer:e.length>5&&r.jsx("a",{onClick:a,children:n("items_list.show_more_links")})});return r.jsxs(r.Fragment,{children:[r.jsx(vt,{overlay:u,color:"white",children:r.jsx(Xy,{onClick:a,onDoubleClick:Dn,children:e.length})}),l]})}var Ky={},Zy={},Jy={},ex={},tx=E.default,nx=w.default;Object.defineProperty(ex,"__esModule",{value:!0}),ex.default=void 0;var rx=nx(Ie),ix=tx(t),ox=nx(Oe),lx=Ae;function ax(e){return!(!e||!e.then)}var sx=e=>{const{type:t,children:n,prefixCls:r,buttonProps:i,close:o,autoFocus:l,emitEvent:a,isSilent:s,quitOnNullishReturnValue:u,actionFn:c}=e,d=ix.useRef(!1),f=ix.useRef(null),[p,v]=(0,rx.default)(!1),m=function(){null==o||o.apply(void 0,arguments)};ix.useEffect((()=>{let e=null;return l&&(e=setTimeout((()=>{var e;null===(e=f.current)||void 0===e||e.focus()}))),()=>{e&&clearTimeout(e)}}),[]);return ix.createElement(ox.default,Object.assign({},(0,lx.convertLegacyProps)(t),{onClick:e=>{if(d.current)return;if(d.current=!0,!c)return void m();let t;if(a){if(t=c(e),u&&!ax(t))return d.current=!1,void m(e)}else if(c.length)t=c(o),d.current=!1;else if(t=c(),!t)return void m();(e=>{ax(e)&&(v(!0),e.then((function(){v(!1,!0),m.apply(void 0,arguments),d.current=!1}),(e=>{if(v(!1,!0),d.current=!1,!(null==s?void 0:s()))return Promise.reject(e)})))})(t)},loading:p,prefixCls:r},i,{ref:f}),n)};ex.default=sx;var ux={},cx=w.default;Object.defineProperty(ux,"__esModule",{value:!0}),ux.ModalContextProvider=ux.ModalContext=void 0;const dx=cx(t).default.createContext({});ux.ModalContext=dx;const{Provider:fx}=dx;ux.ModalContextProvider=fx;var px=w.default,vx=E.default;Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.default=void 0;var mx=vx(t),gx=px(ex),hx=ux;var bx=()=>{const{autoFocusButton:e,cancelButtonProps:t,cancelTextLocale:n,isSilent:r,mergedOkCancel:i,rootPrefixCls:o,close:l,onCancel:a,onConfirm:s}=(0,mx.useContext)(hx.ModalContext);return i?mx.default.createElement(gx.default,{isSilent:r,actionFn:a,close:function(){null==l||l.apply(void 0,arguments),null==s||s(!1)},autoFocus:"cancel"===e,buttonProps:t,prefixCls:`${o}-btn`},n):null};Jy.default=bx;var yx={},xx=w.default,wx=E.default;Object.defineProperty(yx,"__esModule",{value:!0}),yx.default=void 0;var Ex=wx(t),Sx=xx(ex),_x=ux;var jx=()=>{const{autoFocusButton:e,close:t,isSilent:n,okButtonProps:r,rootPrefixCls:i,okTextLocale:o,okType:l,onConfirm:a,onOk:s}=(0,Ex.useContext)(_x.ModalContext);return Ex.default.createElement(Sx.default,{isSilent:n,type:l||"primary",actionFn:s,close:function(){null==t||t.apply(void 0,arguments),null==a||a(!0)},autoFocus:"ok"===e,buttonProps:r,prefixCls:`${i}-btn`},o)};yx.default=jx;var kx={};const Cx=o(Kr);var Rx={},Tx=w.default;Object.defineProperty(Rx,"__esModule",{value:!0}),Rx.default=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ox.default.createElement(Ix.default,null);if(!function(e,t,n){if("boolean"==typeof e)return e;if(void 0===t)return!!n;return!1!==t&&null!==t}(e,t,arguments.length>4&&void 0!==arguments[4]&&arguments[4]))return[!1,null];const i="boolean"==typeof t||null==t?r:t;return[!0,n?n(i):i]};var Ix=Tx(ye),Ox=Tx(t);var Ax={},Vx=E.default;Object.defineProperty(Ax,"__esModule",{value:!0}),Ax.default=void 0,Ax.usePanelRef=function(e){const t=Lx.useContext(Dx),n=Lx.useRef();return(0,Px.useEvent)((r=>{if(r){const i=e?r.querySelector(e):r;t.add(i),n.current=i}else t.remove(n.current)}))};var Px=Ve,Lx=Vx(t);function $x(){}const Dx=Lx.createContext({add:$x,remove:$x});var Nx=Dx;Ax.default=Nx;var Fx={},zx={},Bx=w.default,Mx=E.default;Object.defineProperty(zx,"__esModule",{value:!0}),zx.default=void 0;var Hx=Mx(t),Ux=Bx(Oe),Gx=ux;var Wx=()=>{const{cancelButtonProps:e,cancelTextLocale:t,onCancel:n}=(0,Hx.useContext)(Gx.ModalContext);return Hx.default.createElement(Ux.default,Object.assign({onClick:n},e),t)};zx.default=Wx;var qx={},Yx=w.default,Xx=E.default;Object.defineProperty(qx,"__esModule",{value:!0}),qx.default=void 0;var Qx=Xx(t),Kx=Yx(Oe),Zx=Ae,Jx=ux;var ew=()=>{const{confirmLoading:e,okButtonProps:t,okType:n,okTextLocale:r,onOk:i}=(0,Qx.useContext)(Jx.ModalContext);return Qx.default.createElement(Kx.default,Object.assign({},(0,Zx.convertLegacyProps)(n),{loading:e,onClick:i},t),r)};qx.default=ew;var tw=w.default;Object.defineProperty(Fx,"__esModule",{value:!0}),Fx.Footer=void 0,Fx.renderCloseIcon=function(e,t){return rw.default.createElement("span",{className:`${e}-close-x`},t||rw.default.createElement(iw.default,{className:`${e}-close-icon`}))};var nw=tw(Pe),rw=tw(t),iw=tw(ye),ow=ee,lw=Le,aw=tw(zx),sw=tw(qx),uw=ux,cw=$e;Fx.Footer=e=>{const{okText:t,okType:n="primary",cancelText:r,confirmLoading:i,onOk:o,onCancel:l,okButtonProps:a,cancelButtonProps:s,footer:u}=e,[c]=(0,lw.useLocale)("Modal",(0,cw.getConfirmLocale)()),d={confirmLoading:i,okButtonProps:a,cancelButtonProps:s,okTextLocale:t||(null==c?void 0:c.okText),cancelTextLocale:r||(null==c?void 0:c.cancelText),okType:n,onOk:o,onCancel:l},f=rw.default.useMemo((()=>d),(0,nw.default)(Object.values(d)));let p;return"function"==typeof u||void 0===u?(p=rw.default.createElement(uw.ModalContextProvider,{value:f},rw.default.createElement(aw.default,null),rw.default.createElement(sw.default,null)),"function"==typeof u&&(p=u(p,{OkBtn:sw.default,CancelBtn:aw.default}))):p=u,rw.default.createElement(ow.DisabledContextProvider,{disabled:!1},p)};var dw=w.default,fw=E.default;Object.defineProperty(kx,"__esModule",{value:!0}),kx.default=void 0;var pw=fw(t),vw=dw(ye),mw=dw(Gr),gw=dw(Cx),hw=dw(Rx),bw=xe,yw=De,xw=re,ww=ie,Ew=Ne,Sw=Ax,_w=Fx,jw=dw(Xh);let kw;const Cw=e=>{kw={x:e.pageX,y:e.pageY},setTimeout((()=>{kw=null}),100)};(0,yw.canUseDocElement)()&&document.documentElement.addEventListener("click",Cw,!0);var Rw=e=>{var t;const{getPopupContainer:n,getPrefixCls:r,direction:i,modal:o}=pw.useContext(xw.ConfigContext),l=t=>{const{onCancel:n}=e;null==n||n(t)},{prefixCls:a,className:s,rootClassName:u,open:c,wrapClassName:d,centered:f,getContainer:p,closeIcon:v,closable:m,focusTriggerAfterClose:g=!0,style:h,visible:b,width:y=520,footer:x}=e,w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","closable","focusTriggerAfterClose","style","visible","width","footer"]),E=r("modal",a),S=r(),[_,j]=(0,jw.default)(E),k=(0,mw.default)(d,{[`${E}-centered`]:!!f,[`${E}-wrap-rtl`]:"rtl"===i}),C=null!==x&&pw.createElement(_w.Footer,Object.assign({},e,{onOk:t=>{const{onOk:n}=e;null==n||n(t)},onCancel:l})),[R,T]=(0,hw.default)(m,v,(e=>(0,_w.renderCloseIcon)(E,e)),pw.createElement(vw.default,{className:`${E}-close-icon`}),!0),I=(0,Sw.usePanelRef)(`.${E}-content`);return _(pw.createElement(Ew.NoCompactStyle,null,pw.createElement(ww.NoFormStyle,{status:!0,override:!0},pw.createElement(gw.default,Object.assign({width:y},w,{getContainer:void 0===p?n:p,prefixCls:E,rootClassName:(0,mw.default)(j,u),wrapClassName:k,footer:C,visible:null!=c?c:b,mousePosition:null!==(t=w.mousePosition)&&void 0!==t?t:kw,onClose:l,closable:R,closeIcon:T,focusTriggerAfterClose:g,transitionName:(0,bw.getTransitionName)(S,"zoom",e.transitionName),maskTransitionName:(0,bw.getTransitionName)(S,"fade",e.maskTransitionName),className:(0,mw.default)(j,s,null==o?void 0:o.className),style:Object.assign(Object.assign({},null==o?void 0:o.style),h),panelRef:I})))))};kx.default=Rw;var Tw={};Object.defineProperty(Tw,"__esModule",{value:!0}),Tw.default=void 0;var Iw=Xh,Ow=he;const Aw=e=>{const{componentCls:t,titleFontSize:n,titleLineHeight:r,modalConfirmIconSize:i,fontSize:o,lineHeight:l}=e,a=`${t}-confirm`,s=Math.round(n*r),u=Math.round(o*l);return{[a]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${a}-body-wrapper`]:Object.assign({},(0,Ow.clearFix)()),[`${a}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:i,marginInlineEnd:e.marginSM,marginTop:(u-i)/2},[`&-has-title > ${e.iconCls}`]:{marginTop:(s-i)/2}},[`${a}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS},[`${a}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:n,lineHeight:r},[`${a}-content`]:{color:e.colorText,fontSize:o,lineHeight:l},[`${a}-btns`]:{textAlign:"end",marginTop:e.marginSM,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${a}-error ${a}-body > ${e.iconCls}`]:{color:e.colorError},[`${a}-warning ${a}-body > ${e.iconCls},\n        ${a}-confirm ${a}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${a}-info ${a}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${a}-success ${a}-body > ${e.iconCls}`]:{color:e.colorSuccess}}};var Vw=(0,ge.genSubStyleComponent)(["Modal","confirm"],(e=>{const t=(0,Iw.prepareToken)(e);return[Aw(t)]}),Iw.prepareComponentToken,{order:-1e3});Tw.default=Vw;var Pw=E.default,Lw=w.default;Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.ConfirmContent=Zw,Zy.default=void 0;var $w=Lw(Pe),Dw=Pw(t),Nw=Lw(Fe),Fw=Lw(ze),zw=Lw(Be),Bw=Lw(Me),Mw=Lw(Gr),Hw=xe,Uw=Lw(re),Gw=Le,Ww=Lw(Jy),qw=Lw(yx),Yw=ux,Xw=Lw(kx),Qw=Lw(Tw),Kw=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Zw(e){const{prefixCls:t,icon:n,okText:r,cancelText:i,confirmPrefixCls:o,type:l,okCancel:a,footer:s,locale:u}=e,c=Kw(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let d=n;if(!n&&null!==n)switch(l){case"info":d=Dw.createElement(Bw.default,null);break;case"success":d=Dw.createElement(Nw.default,null);break;case"error":d=Dw.createElement(Fw.default,null);break;default:d=Dw.createElement(zw.default,null)}const f=null!=a?a:"confirm"===l,p=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),[v]=(0,Gw.useLocale)("Modal"),m=u||v,g=r||(f?null==m?void 0:m.okText:null==m?void 0:m.justOkText),h=i||(null==m?void 0:m.cancelText),b=Object.assign({autoFocusButton:p,cancelTextLocale:h,okTextLocale:g,mergedOkCancel:f},c),y=Dw.useMemo((()=>b),(0,$w.default)(Object.values(b))),x=Dw.createElement(Dw.Fragment,null,Dw.createElement(Ww.default,null),Dw.createElement(qw.default,null)),w=void 0!==e.title&&null!==e.title,E=`${o}-body`;return Dw.createElement("div",{className:`${o}-body-wrapper`},Dw.createElement("div",{className:(0,Mw.default)(E,{[`${E}-has-title`]:w})},d,Dw.createElement("div",{className:`${o}-paragraph`},w&&Dw.createElement("span",{className:`${o}-title`},e.title),Dw.createElement("div",{className:`${o}-content`},e.content))),void 0===s||"function"==typeof s?Dw.createElement(Yw.ModalContextProvider,{value:y},Dw.createElement("div",{className:`${o}-btns`},"function"==typeof s?s(x,{OkBtn:qw.default,CancelBtn:Ww.default}):x)):s,Dw.createElement(Qw.default,{prefixCls:t}))}var Jw=e=>{const{close:t,zIndex:n,afterClose:r,visible:i,open:o,keyboard:l,centered:a,getContainer:s,maskStyle:u,direction:c,prefixCls:d,wrapClassName:f,rootPrefixCls:p,iconPrefixCls:v,theme:m,bodyStyle:g,closable:h=!1,closeIcon:b,modalRender:y,focusTriggerAfterClose:x,onConfirm:w}=e,E=`${d}-confirm`,S=e.width||416,_=e.style||{},j=void 0===e.mask||e.mask,k=void 0!==e.maskClosable&&e.maskClosable,C=(0,Mw.default)(E,`${E}-${e.type}`,{[`${E}-rtl`]:"rtl"===c},e.className);return Dw.createElement(Uw.default,{prefixCls:p,iconPrefixCls:v,direction:c,theme:m},Dw.createElement(Xw.default,{prefixCls:d,className:C,wrapClassName:(0,Mw.default)({[`${E}-centered`]:!!e.centered},f),onCancel:()=>{null==t||t({triggerCancel:!0}),null==w||w(!1)},open:o,title:"",footer:null,transitionName:(0,Hw.getTransitionName)(p||"","zoom",e.transitionName),maskTransitionName:(0,Hw.getTransitionName)(p||"","fade",e.maskTransitionName),mask:j,maskClosable:k,maskStyle:u,style:_,bodyStyle:g,width:S,zIndex:n,afterClose:r,keyboard:l,centered:a,getContainer:s,closable:h,closeIcon:b,modalRender:y,focusTriggerAfterClose:x},Dw.createElement(Zw,Object.assign({},e,{confirmPrefixCls:E}))))};Zy.default=Jw;var eE={};Object.defineProperty(eE,"__esModule",{value:!0}),eE.default=void 0;var tE=[];eE.default=tE;var nE=E.default,rE=w.default;Object.defineProperty(Ky,"__esModule",{value:!0});var iE=Ky.default=function(e){const t=document.createDocumentFragment();let n,r=Object.assign(Object.assign({},e),{close:l,open:!0});function i(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const o=r.some((e=>e&&e.triggerCancel));e.onCancel&&o&&e.onCancel.apply(e,[()=>{}].concat((0,oE.default)(r.slice(1))));for(let e=0;e<cE.default.length;e++){if(cE.default[e]===l){cE.default.splice(e,1);break}}(0,lE.unmount)(t)}function o(e){var{okText:r,cancelText:i,prefixCls:o,getContainer:l}=e,a=fE(e,["okText","cancelText","prefixCls","getContainer"]);clearTimeout(n),n=setTimeout((()=>{const e=(0,dE.getConfirmLocale)(),{getPrefixCls:n,getIconPrefixCls:s,getTheme:u}=(0,sE.globalConfig)(),c=n(void 0,pE),d=o||`${c}-modal`,f=s(),p=u();let v=l;!1===v&&(v=void 0),(0,lE.render)(aE.createElement(uE.default,Object.assign({},a,{getContainer:v,prefixCls:d,rootPrefixCls:c,iconPrefixCls:f,okText:r,locale:e,theme:p,cancelText:i||e.cancelText})),t)}))}function l(){for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];r=Object.assign(Object.assign({},r),{open:!1,afterClose:()=>{"function"==typeof e.afterClose&&e.afterClose(),i.apply(this,n)}}),r.visible&&delete r.visible,o(r)}return o(r),cE.default.push(l),{destroy:l,update:function(e){r="function"==typeof e?e(r):Object.assign(Object.assign({},r),e);o(r)}}};Ky.modalGlobalConfig=function(e){let{rootPrefixCls:t}=e;pE=t},Ky.withConfirm=function(e){return Object.assign(Object.assign({},e),{type:"confirm"})},Ky.withError=function(e){return Object.assign(Object.assign({},e),{type:"error"})},Ky.withInfo=function(e){return Object.assign(Object.assign({},e),{type:"info"})},Ky.withSuccess=function(e){return Object.assign(Object.assign({},e),{type:"success"})},Ky.withWarn=function(e){return Object.assign(Object.assign({},e),{type:"warning"})};var oE=rE(Pe),lE=Ue,aE=nE(t);rE(He);var sE=re,uE=rE(Zy),cE=rE(eE),dE=$e,fE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};let pE="";const vE=g`
    mutation DEACTIVATE_RECORDS($libraryId: String!, $recordsIds: [String!], $filters: [RecordFilterInput!]) {
        deactivateRecords(recordsIds: $recordsIds, filters: $filters, libraryId: $libraryId) {
            id
        }
    }
`;function mE({record:e,...t}){const{t:n}=i(),{dispatch:o}=Jo(),[l]=j(vE,{variables:{libraryId:e.library.id,recordsIds:[e.id]}}),a=async()=>{await l(),o({type:Yo.SET_LOADING,loading:!0})};return r.jsx(Mr,{name:"deactivate",icon:r.jsx(ln,{}),shape:"circle",...t,onClick:async e=>{e.preventDefault(),e.stopPropagation(),iE({content:n("records_deactivation.confirm_one"),okText:n("global.submit"),cancelText:n("global.cancel"),onOk:a})}})}var gE=(e=>(e.ONLY="ONLY",e.ALL="ALL",e))(gE||{});function hE({selectionType:e,record:t,size:n,text:i,...o}){const l=jn();return r.jsx(Mr,{...o,"aria-label":"select-records",size:n,onClick:n=>{n.stopPropagation();const r={id:t.id,library:t.library.id,label:t.label};"ONLY"===e?(l(Nn()),l(Fn({selectionType:zn.search,elementSelected:r}))):"ALL"===e&&l(Bn({type:zn.search,selected:[],allSelected:!0}))},children:i})}const bE=Yr.div`
    min-width: 150px;
`;function yE({record:e,previewSize:t,lang:n}){const{t:o}=i(),[l]=Mn(),a=l.permissions.delete_record,{state:s}=Jo(),{selectionState:u}=pn((e=>({selectionState:e.selection,display:e.display}))),c="middle",d=[{title:o("global.details"),button:r.jsx(is,{shape:"circle",record:e,size:c,valuesVersion:s.valuesVersions})}];a&&d.push({title:o("records_deactivation.title_one"),button:r.jsx(mE,{record:e})});const f=[{title:o("items-list-row.select-only"),button:r.jsx(hE,{selectionType:gE.ONLY,text:o("items-list-row.select-only"),record:e,size:c})},{title:o("items-list-row.select-all"),button:r.jsx(hE,{selectionType:gE.ALL,text:o("items-list-row.select-all"),record:e,size:c})}],p=u.selection.selected.length||u.selection.allSelected;return r.jsxs(r.Fragment,{children:[r.jsx(bE,{children:r.jsx(hn,{record:e,size:t,lang:n})}),r.jsx(B,{actions:p?f:d,size:c})]})}const xE=e.lazy((()=>En((()=>import("./RichTextDisplay-205a2170.js")),["assets/RichTextDisplay-205a2170.js","assets/useTranslation-6a88ac92.js","assets/recordIdentityFragment-3ccdcea1.js","assets/styled-components.browser.esm-2d72260f.js","assets/ImportReducerContext-19d27c8c.js","assets/utils-c614281c.js","assets/index-8160faf7.js"]))),wE={[Vr.text]:"left",[Vr.numeric]:"right",[Vr.boolean]:"center",[Vr.date]:"left",[Vr.date_range]:"left",[Vr.extended]:"left",[Vr.encrypted]:"left",[Vr.color]:"left",[Vr.rich_text]:"center"},EE=Yr.div`
    padding: 5px;
    width: 100%;
    text-align: ${e=>wE[e.$format]};
`;function SE({cellData:e,values:t}){const{t:n}=i(),o=t.map((t=>(t=>{if(e.format===Vr.date_range)return wn(t,n);return t})(t))).join(", ");return r.jsx(EE,{$format:e.format,children:e.format===Vr.extended?r.jsx(vt,{overlay:o,children:r.jsx(eo,{size:256,style:{fontSize:"2em"}})}):r.jsx(Ge.Paragraph,{ellipsis:{rows:1,tooltip:o},style:{margin:0},children:(()=>{switch(e.format){case Vr.boolean:return r.jsx(le,{disabled:!0,checked:!!t[0],checkedChildren:r.jsx(We,{}),unCheckedChildren:r.jsx(L,{})});case Vr.color:return St(t)?o:r.jsx(r.Fragment,{children:t.map((e=>{return r.jsx(Te,{bordered:!0,color:"#"+e,style:(t="#"+e,{color:An("#"+t)}),children:"#"+e});var t}))});case Vr.rich_text:return St(o)?o:r.jsx(xE,{displayedValue:o});default:return o}})()})})}const _E=Yr.div`
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
`,jE=({columnName:e,data:t})=>{var n;const{value:i,type:o}=t,{lang:l}=O(),{state:a}=Jo(),s=Hn(a.display.size),u=Array.isArray(i)?i:[i];if(!u.length)return r.jsx(r.Fragment,{});switch(o){case Pr.simple:case Pr.advanced:return r.jsx(SE,{cellData:t,values:u});case Pr.simple_link:case Pr.advanced_link:case Pr.tree:const[a,...c]=u,d=o===Pr.tree?null==(n=null==a?void 0:a.record)?void 0:n.whoAmI:null==a?void 0:a.whoAmI;return d?r.jsxs(_E,{children:[r.jsx(hn,{record:d,size:bn.small,lang:l,withPreview:!0,withLibrary:!1,simplistic:!0},d.id),c.length?r.jsx(Qy,{values:u,attributeType:o}):r.jsx(r.Fragment,{})]}):null;default:return e===Un?r.jsx(yE,{record:i,previewSize:s,lang:l}):r.jsx(r.Fragment,{})}},kE=Yr.div`
    display: grid;
    place-items: center;
    position: relative;
    height: 100%;
    width: 100%;
`,CE=Yr.span`
    && {
        display: ${e=>e.checked?"block":"none"};
        color: ${e=>e.checked?I.primaryColor:I.defaultTextColor};
        font-size: 1.5em;

        .ant-checkbox-checked::after {
            border: none;
        }
    }

    [role='row']:hover & {
        display: block;
    }
`;function RE({selected:e}){return r.jsx(kE,{children:r.jsx(CE,{checked:e,role:"checkbox",children:e?r.jsx(qe,{}):r.jsx(Ye,{})})})}const TE=Yr.div`
    // Inherit background from row. If background is transparent, the sticky column won't behave properly
    background-color: inherit;
    padding: 4px 0;

    &:not(:first-child) {
        border-left: 1px solid ${e=>e.selected?I.activeColor:I.borderLightColor};
    }

    max-width: ${e=>e.id===Gn?"35px":"auto"};

    display: flex;
    align-items: center;
`;function IE({cell:e,selected:t}){var n,i,o,l,a,s,u;const c=e.getCellProps();e.column.id===Un&&(c.style={...c.style,flex:"1 0 auto",maxWidth:oS,minWidth:oS,zIndex:3});const d={id:null==(n=null==e?void 0:e.value)?void 0:n.id,key:null==(i=null==e?void 0:e.value)?void 0:i.id,library:null==(o=null==e?void 0:e.value)?void 0:o.library,label:null==(l=null==e?void 0:e.value)?void 0:l.label,value:null==(a=null==e?void 0:e.value)?void 0:a.value,type:null==(s=null==e?void 0:e.value)?void 0:s.type,format:null==(u=null==e?void 0:e.value)?void 0:u.format};return e.value?r.jsx(TE,{...c,id:e.column.id,selected:t,className:"body-cell",children:e.column.id===Gn?r.jsx(RE,{selected:t}):r.jsx(jE,{columnName:e.column.id,data:d})}):r.jsx(TE,{selected:t,...c})}const OE=Yr.div`
    position: relative;
    border-bottom: 1px solid ${e=>e.selected?I.activeColor:I.borderLightColor};
    border-collapse: collapse;

    // Must set background on row for the case where we just have the infos column (part of the row is empty)
    background-color: ${e=>e.selected?I.activeColor:I.defaultBg};

    &:not(:hover) .floating-menu {
        display: none;
    }

    &:hover {
        background-color: ${e=>e.selected?I.activeColor:`${I.activeColor}`};
    }
`;function AE({row:e}){var n,i,o;const l=e.getRowProps(),a=t.useContext(No),{state:s}=Jo(),{selectionState:u}=pn((e=>({selectionState:e.selection,display:e.display}))),[c,d]=t.useState(!1),f=jn(),p=null==(o=null==(i=null==(n=e.cells[0])?void 0:n.row)?void 0:i.original)?void 0:o.record;if(!e.cells.length||void 0===p)return r.jsx(r.Fragment,{});const v=function(e,t,n,r){const i=t?e.searchSelection:e.selection;return i.type===zn.search&&!!i.selected.find((e=>e.id===n&&e.library===r))}(u,a,p.id,p.library.id),m=function(e,t){return t?e.searchSelection.type===zn.search&&e.searchSelection.allSelected:e.selection.type===zn.search&&e.selection.allSelected}(u,a),g=m||v;return r.jsxs(OE,{...l,onClick:()=>{const e={id:p.id,library:p.library.id,label:p.label};f(a?Wn(e):Fn({selectionType:zn.search,elementSelected:e}))},onDoubleClick:()=>{d(!0)},selected:g,children:[c&&r.jsx(Yy,{open:c,library:p.library.id,record:p,onClose:()=>{d(!1)},valuesVersion:s.valuesVersions}),e.cells.map((e=>r.jsx(IE,{selected:g,cell:e},e.column.id)))]})}var VE=(e=>(e.SET_ATTRIBUTES="SET_ATTRIBUTES",e.TOGGLE_ATTRIBUTE_SELECTION="TOGGLE_ATTRIBUTE_SELECTION",e.TOGGLE_ATTRIBUTE_EXPAND="TOGGLE_ATTRIBUTE_EXPAND",e.MOVE_SELECTED_ATTRIBUTE="MOVE_SELECTED_ATTRIBUTE",e))(VE||{});const PE={library:"",multiple:!0,canExpandExtendedAttributes:!0,selectedAttributes:[],expandedAttributePath:"",attributes:[]},LE=(e,t)=>{switch(t.type){case"SET_ATTRIBUTES":return{...e,attributes:t.attributes};case"TOGGLE_ATTRIBUTE_EXPAND":{const n={...e};return 0===e.expandedAttributePath.indexOf(t.attributePath)?n.expandedAttributePath=t.attributePath.split(".").slice(0,-1).join("."):n.expandedAttributePath=t.attributePath,n}case"TOGGLE_ATTRIBUTE_SELECTION":{let n=[...e.selectedAttributes];const r=e.selectedAttributes.findIndex((e=>e.path===t.attribute.path));return n=e.multiple?-1===r?[...n,t.attribute]:[...n.slice(0,r),...n.slice(r+1)]:-1===r?[t.attribute]:[],{...e,selectedAttributes:n}}case"MOVE_SELECTED_ATTRIBUTE":{let n=[...e.selectedAttributes],{from:r,to:i}=t;return n[r]?(i>n.length-1&&(i=n.length-1),r<0&&(r=0),n=qn(n,r,i),{...e,selectedAttributes:n}):e}}},$E=e.createContext({state:PE,dispatch:()=>PE}),DE=()=>t.useContext($E),NE=Yr.span`
    color: hsl(0, 0%, 13%);
    font-weight: 700;
`,FE=Yr.span`
    color: hsl(0, 0%, 45%);
    font-weight: 400;
`,zE=Yr.form`
    width: 100%;
`,BE=Yr.div`
    padding: 0.5em;
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    cursor: pointer;
    border: 2px solid transparent;

    &:hover {
        border-color: ${I.primaryColor};
        background-color: ${I.activeColor};
    }
`,ME=Yr.div`
    margin-left: 1em;
`;function HE({attribute:e,depth:t,path:n,library:i,parentAttribute:o}){const l=[n,e.id].filter((e=>!!e)).join("."),{lang:a}=O(),{state:s,dispatch:u}=DE(),c=Gt(e.label,a),d=Yn(l,s.selectedAttributes);return r.jsxs(BE,{onClick:()=>{u({type:VE.TOGGLE_ATTRIBUTE_SELECTION,attribute:Xn(e,{path:l,library:i,parentAttributeData:o})})},"data-testid":"attribute-in-list",children:[r.jsxs(V,{children:[r.jsx(NE,{children:c??e.id}),c&&r.jsx(FE,{children:e.id})]}),r.jsx(ME,{children:s.multiple?r.jsx(K,{checked:d}):r.jsx(Xe,{checked:d})})]})}const UE=Yr.div`
    border-right: 1px solid #f0f0f0;
    padding: 0.5em;
    display: flex;
    align-items: center;
`,GE=Yr(V)`
    padding: 0.5em;
    flex-grow: 1;
`,WE=Yr.div`
    padding: 8px;
`,qE=({selectedAttribute:e,handleProps:t})=>{const{lang:n}=O(),{dispatch:i}=DE(),o=Gt(e.label,n);return r.jsxs(r.Fragment,{children:[r.jsx(UE,{...t,children:r.jsx(Qn,{})}),r.jsxs(GE,{direction:"vertical",children:[r.jsx(NE,{children:o??e.id}),o&&r.jsx("div",{children:r.jsx(FE,{children:e.id})})]}),r.jsx(WE,{children:r.jsx(Mr,{icon:r.jsx(L,{}),size:"small",onClick:()=>{i({type:VE.TOGGLE_ATTRIBUTE_SELECTION,attribute:e})}})})]})},YE=Yr.div`
    overflow-y: auto;
    height: calc(100vh - 15rem);

    &&& > *:first-child {
        margin-top: 0;
    }

    &&& > *:last-child {
        margin-bottom: 0;
    }
`,XE=Yr.div`
    &&& {
        padding: 0;
        margin: 0 10px 10px 10px;
        display: flex;
        justify-content: space-between;
        border: 1px solid #f0f0f0;
        border-radius: 2px;
        min-height: 3rem;
        box-shadow: 0 2px 0 rgba(0, 0, 0, 0.015);
        background: #fff;
    }
`;function QE(){const{state:e,dispatch:t}=DE(),n=e.selectedAttributes;return r.jsx(YE,{children:r.jsx(Kn,{onDragEnd:e=>{e.destination&&e.destination.index!==e.source.index&&t({type:VE.MOVE_SELECTED_ATTRIBUTE,from:e.source.index,to:e.destination.index})},children:r.jsx(Zn,{droppableId:"list-attributes-selected",children:e=>r.jsxs("div",{ref:e.innerRef,...e.droppableProps,children:[n.map(((e,t)=>e.path!==Un&&r.jsx(Jn,{index:t,draggableId:e.path,children:t=>r.jsx(XE,{ref:t.innerRef,...t.draggableProps,children:r.jsx(qE,{selectedAttribute:e,handleProps:t.dragHandleProps})})},e.path))),e.placeholder]})})})})}const KE=Yr.div`
    padding: 0.3rem 1rem 0 1rem;
    overflow-y: scroll;
    height: calc(100vh - 15rem);
`,ZE=Yr.div`
    display: Grid;
    grid-template-columns: repeat(${e=>e.$multiple?2:1}, 1fr);
    grid-column-gap: 0.3rem;
`;function JE({library:e,multiple:n=!0,selectedAttributes:o=[],canExpandExtendedAttributes:l=!0,onSelectionChange:a}){const{t:s}=i(),u=t.useRef(null),{lang:c}=O(),[d,f]=t.useState(""),[p,v]=t.useReducer(LE,{...PE,library:e,multiple:n,selectedAttributes:o,canExpandExtendedAttributes:l}),{loading:m,error:g}=y(er,{variables:{library:e},onCompleted:e=>{var t;v({type:VE.SET_ATTRIBUTES,attributes:(null==(t=e.attributes)?void 0:t.list)||[]})}});if(t.useEffect((()=>{a(p.selectedAttributes)}),[a,p.selectedAttributes]),m)return r.jsx(mt,{});const h=p.attributes.filter((e=>{if(!d)return!0;return-1!==Gt(e.label,c).toLowerCase().indexOf(d)||-1!==e.id.indexOf(d)}));return r.jsx($E.Provider,{value:{state:p,dispatch:v},children:r.jsxs(ZE,{$multiple:p.multiple,children:[r.jsxs(KE,{"data-testid":"attributes-list",children:[r.jsx(zE,{children:r.jsx(U.Search,{placeholder:s("attributes-list.search"),"aria-label":"search",ref:u,onChange:e=>{return t=e.target.value??"",void f(t);var t}})}),g?r.jsx(M,{message:g.message}):r.jsx(oe,{children:h.map((t=>r.jsx(HE,{attribute:t,depth:0,library:e,path:""},t.id)))})]}),n&&r.jsx(QE,{"data-testid":"selected-attributes-list"})]})})}function eS({visible:e,onClose:n}){const{t:o}=i(),{lang:l}=O(),{state:a,dispatch:s}=Jo(),[u,c]=t.useState(((null==a?void 0:a.fields)??[]).map((e=>{const t=a.attributes.find((t=>t.id===e.id&&t.library===e.library));return{...e,path:e.key,label:(null==t?void 0:t.label)??null,multiple_values:!!e.multipleValues}}))),d=()=>{n()},f=document.getElementsByClassName("ant-modal-wrap");return f.length&&(f[0].style.overflow="initial"),r.jsx(G,{open:e,onCancel:d,title:o("table-columns-selection.header"),width:"70rem",centered:!0,footer:[r.jsx(Mr,{onClick:d,children:o("table-columns-selection.cancel")},"Cancel"),r.jsx(Mr,{type:"primary",onClick:()=>{const e=u.filter((e=>!a.attributes.some((t=>t.id===e.id&&t.library===e.library)))).map((e=>({...e,isLink:e.type===Pr.tree,isMultiple:e.multiple_values,format:e.format??void 0}))),t=[...(null==a?void 0:a.attributes)??[],...e];s({type:Yo.SET_ATTRIBUTES,attributes:t});const r=u.reduce(((e,n)=>{var r,i;const o=t.find((e=>e.id===n.id&&e.library===n.library));if(!o)return e;const a=tr(n),s="string"==typeof o.label?o.label:Gt(o.label,l),u=n.embeddedFieldData&&{format:(null==(r=n.embeddedFieldData)?void 0:r.format)??Vr.text,path:n.path},c={id:n.id,library:n.library,label:s,key:a,type:n.type,format:o.format,parentAttributeData:null==n?void 0:n.parentAttributeData,treeData:n.treeData,embeddedData:u,recordLibrary:(null==(i=null==n?void 0:n.parentAttributeData)?void 0:i.type)===Pr.tree?n.path.split(".")[1]:null};return[...e,c]}),[]);s({type:Yo.SET_FIELDS,fields:r}),n()},children:o("table-columns-selection.submit")},"Submit")],children:r.jsx(JE,{library:a.library.id,selectedAttributes:u,onSelectionChange:c})})}const tS=Yr.div`
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;

    &:hover {
        border-left: ${I.primaryColor} 3px solid;
        border-right: ${I.primaryColor} 3px solid;
        box-shadow: 0px 3px 6px #00000029;

        .wrapper-arrow {
            background: ${I.defaultBg};
            box-shadow: 0px 3px 6px #00000029;
            border: 1px solid ${I.borderLightColor};
        }
    }
`,nS=Yr.div`
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.3rem 0.3rem;

    word-break: 'keep-all';
    user-select: 'none';
`,rS=Yr.div`
    border-radius: 50%;
    cursor: pointer;
    border: 1px solid transparent;
    height: 2rem;
    width: 2rem;
    display: grid;
    grid-template-rows: 8px 8px;
    place-items: center;
    align-content: center;
    margin: 0 8px;
    flex-shrink: 0;

    & > * {
        transform: scale(0.7);
    }

    & > span:first-child {
        opacity: ${({$filterDirection:e,$filterActive:t})=>t&&e===qr.asc?1:.5};
    }

    & > span:last-child {
        opacity: ${({$filterDirection:e,$filterActive:t})=>t&&e===qr.desc?1:.5};
    }
`;rS.displayName="WrapperArrow";const iS=({id:e,children:n,type:o})=>{var l,a,s;const{t:u}=i(),{state:c,dispatch:d}=Jo(),[f,p]=t.useState(!1),[v,m]=t.useState(!1),g=(e,t,n)=>{const r=nr(e,n);d({type:Yo.SET_SORT,sort:{field:r,order:t}}),d({type:Yo.SET_LOADING,loading:!0})};return r.jsxs(tS,{$isHover:v,$isInfoColumn:Un===e,id:e,children:[n,r.jsx(z,{placement:"bottom",trigger:["click"],menu:{style:{transform:"translateY(-8px)"},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),items:[{key:"sort-ascend",onClick:()=>{return t=o,void g(e,qr.asc,t);var t},label:u("items_list.table.header-cell-menu.sort-ascend")},{key:"sort-descend",onClick:()=>{return t=o,void g(e,qr.desc,t);var t},label:u("items_list.table.header-cell-menu.sort-descend")},{key:"cancel-sort",onClick:()=>{d({type:Yo.CANCEL_SORT})},label:u("items_list.table.header-cell-menu.cancel-sort")},e!==Un?{key:"hide-column",onClick:()=>{return t=e,void d({type:Yo.SET_FIELDS,fields:c.fields.filter((e=>e.id!==t))});var t},label:u("items_list.table.header-cell-menu.hide-column")}:null,{key:"choose-columns",onClick:()=>p(!0),label:u("items_list.table.header-cell-menu.choose-columns")}]},children:r.jsx(nS,{children:r.jsxs(rS,{className:"wrapper-arrow","data-testid":`wrapper-arrow-${null==(l=c.sort)?void 0:l.order}`,$filterDirection:null==(a=c.sort)?void 0:a.order,$filterActive:(null==(s=c.sort)?void 0:s.field)===e,style:{fontSize:"130%"},children:[r.jsx(Pi,{}),r.jsx(Ai,{})]})})}),f&&r.jsx(eS,{visible:f,onClose:()=>p(!1)})]})},oS="350px",lS=Yr.div`
    grid-area: data;
    height: 100%;
    min-width: 0px;
    width: 100%;
    border: 1px solid ${I.borderLightColor};
    overflow-y: scroll;

    &.sticky {
        overflow: scroll;

        .header {
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .body {
            position: relative;
            z-index: 0;
        }

        [data-sticky-td] {
            position: sticky;
        }
    }
`;lS.displayName="CustomTable";const aS=Yr.div`
    background: ${I.headerBg};
    width: fit-content;
    min-width: 100%;
`,sS=Yr.div`
    margin-left: 1px; // For better alignment with rows
`,uS=Yr.div`
    background: ${I.headerBg};
    border-right: 1px solid ${I.borderLightColor};
    min-width: 35px;
    max-width: ${e=>e.id===Gn?"35px":"auto"};

    &:last-child {
        border-right: none;
    }
`,cS=Yr.div`
    width: fit-content;
    min-width: 100%;
`,dS=Yr.div`
    align-self: start;
    grid-area: pagination;
    display: flex;
    justify-content: center;
    align-items: center;
    border-top: 1px solid ${I.borderLightColor};
    padding-top: 8px;
`,fS=e=>{if(!cn(e.type)||e.multipleValues)return 300;switch(e.format){case Vr.boolean:return 125;case Vr.numeric:case Vr.date:return 150;case Vr.date_range:return 300;default:return 250}},pS=()=>{const{t:e}=i(),{lang:n}=O(),{state:o}=Jo(),[l,a]=t.useState([]),[s,u]=t.useState([]),[c,d]=t.useState(!1);t.useEffect((()=>{const t=[{Header:"",accessor:Gn,key:Gn,sticky:"left",width:35,maxWidth:35,minWidth:30},{Header:e("items_list.table.infos"),accessor:Un,key:Un,sticky:"left"}];let n=[];o.attributes.length&&o.fields.length&&(n=o.fields.map((e=>{var t,n;const i=e.key.replaceAll(".","");return{Header:r.jsx(rl,{ellipsis:{rows:2,tooltip:e.label},style:{marginBottom:0,textAlign:"center"},children:e.label}),accessor:i,key:e.key,type:e.type,format:(null==(t=e.embeddedData)?void 0:t.format)||e.format,embeddedPath:null==(n=e.embeddedData)?void 0:n.path,width:fS(e)}})));const i=[...t,...n];a((e=>Wl(e,i)?e:i))}),[o.fields,o.attributes,e]),t.useEffect((()=>{if(!l.length)return;const e=o.records.reduce(((e,t,n)=>{if(n<o.pagination){const n=l.reduce(((e,n)=>{if(!n.type&&n.accessor===Un){const r={value:t.whoAmI,type:n.type};return e[n.accessor]=r,e}const r=n.key;let i=t.fields[r];if(n.embeddedPath&&n.embeddedPath.length){const e=n.embeddedPath.split(".").slice(1).join(".");try{const n=JSON.parse(t.fields[r]);i=sl(n,e)}catch(o){i="error"}}return e[n.accessor]={value:i,type:n.type,format:n.format},e}),{[Gn]:null,record:t.whoAmI});return[...e,n]}return e}),[]);e&&u([...e])}),[o.records,o.pagination,l,n]);const f=ql.useTable({columns:l,data:s},ql.useFlexLayout,Ql.useSticky),{getTableProps:p,getTableBodyProps:v,headerGroups:m,prepareRow:g,rows:h,data:b}=f;return o.records.length&&!b.length?r.jsx(Y,{}):r.jsxs(r.Fragment,{children:[r.jsxs(lS,{...p(),className:"table sticky","data-testid":"table",onScroll:e=>{const t=e.target.scrollLeft;d(t>0)},$scrollHorizontalActive:c,children:[r.jsx(aS,{className:"header sticky",children:m.map((e=>r.jsx(sS,{...e.getHeaderGroupProps(),children:e.headers.map((e=>{const t=e.getHeaderProps();return e.id===Un&&(t.style={...t.style,minWidth:oS,maxWidth:oS}),r.jsx(uS,{...t,id:e.id,children:e.key!==Gn&&r.jsx(iS,{id:e.key,type:Pr.simple,children:e.render("Header")})})}))})))}),r.jsx(cS,{...v(),className:"body sticky",children:h.map((e=>(g(e),r.jsx(AE,{row:e},e.id))))})]}),r.jsx(dS,{children:r.jsx(Kl,{})})]})},vS={[bn.small]:"100px",[bn.medium]:"200px",[bn.big]:"300px"},mS=e=>vS[e],gS="#333333",hS=`${I.activeColor}AA`,bS=`${I.activeColor}DF`,yS=Yr(Qe)`
    && {
        width: ${e=>e.$previewSize};
        margin: 0.5em;
        outline: 2px solid transparent;

        & .ant-card-cover {
            width: ${e=>e.$previewSize};
            height: ${e=>e.$previewSize};
        }

        &:hover {
            outline-color: ${I.primaryColor};
        }
    }
`,xS=Yr.div`
    position: relative;
    border-bottom: 1px solid ${I.borderLightColor};
`,wS=Yr.div`
    display: flex;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;

    justify-content: center;

    &:hover {
        .actions {
            animation: show-actions 300ms ease;
            opacity: 1;
            background: ${hS};
        }
    }

    @keyframes show-actions {
        from {
            opacity: 0;
            background: none;
        }
        to {
            opacity: 1;
            background: ${hS};
        }
    }
`,ES=Yr.div`
    position: absolute;
    width: 100%;
    height: 100%;
    cursor: pointer;

    display: flex;
    align-items: center;
    justify-content: center;
    background: ${e=>e.checked?bS:"none"};

    &:hover {
        background: ${e=>e.checked?bS:hS};
    }
`,SS=Yr(V)`
    && {
        display: none;
        position: absolute;
        top: 1em;
    }
    ${ES}:hover & {
        display: inherit;
    }
    button {
        color: ${gS};
        border-color: ${gS};
    }
`,_S=Yr.div`
    position: absolute;
    display: grid;
    grid-template-columns: 1fr 1fr;
    opacity: 0;
    width: 100%;
    height: 100%;
    grid-gap: 1rem;

    justify-items: center;
    align-items: center;
    justify-content: center;

    border-radius: 0.25rem 0.25rem 0 0;

    button {
        color: ${gS};
        border-color: ${gS}66;

        // Arrange buttons, depending on their position on the grid
        &:nth-child(1) {
            justify-self: end;
            align-self: end;
        }
        &:nth-child(2) {
            justify-self: start;
            align-self: end;
        }
        &:nth-child(3) {
            justify-self: end;
            align-self: start;
        }
        &:nth-child(4) {
            justify-self: start;
            align-self: start;
        }
    }
`,jS=Yr.div`
    font-size: 3em;
    color: ${I.primaryColor};
`;function kS({item:e}){var n;const{t:o}=i(),[l]=Mn(),a=l.permissions.delete_record,{state:s}=Jo(),u=t.useContext(No),[c,d]=t.useState(!1),f=Hn(s.display.size),{selectionState:p}=pn((e=>({selectionState:e.selection}))),v=jn(),{lang:m}=O(),[g,h]=t.useState(!!p.selection.selected.some((t=>t.id===e.whoAmI.id&&t.library===e.whoAmI.library.id))),b=Fb(),y=u?p.searchSelection.type===zn.search&&p.searchSelection.allSelected:p.selection.type===zn.search&&p.selection.allSelected,x=t=>{Dn(t),h(!g);const n={id:e.whoAmI.id,library:e.whoAmI.library.id,label:Gt(e.whoAmI.label,m)};v(u?Wn(n):Fn({selectionType:zn.search,elementSelected:n}))};t.useEffect((()=>{h(p[u?"searchSelection":"selection"].selected.some((t=>t.id===e.whoAmI.id&&t.library===e.whoAmI.library.id)))}),[p.selection,p.searchSelection,e,p,u]);const w=g||y,E=p.selection.selected.length||p.selection.allSelected,S=mS(f);return r.jsxs(r.Fragment,{children:[c&&r.jsx(Yy,{open:c,record:e.whoAmI,library:e.whoAmI.library.id,onClose:()=>{d(!1)}}),r.jsx(yS,{$previewSize:S,size:"small",onClick:x,onDoubleClick:()=>d(!0),cover:r.jsxs(xS,{children:[r.jsx(_e,{label:e.whoAmI.label||e.whoAmI.id,image:(null==(n=e.whoAmI.preview)?void 0:n[f])?Pn(e.whoAmI.preview[f]):"",tile:!0,style:{width:S,height:S},placeholderStyle:{width:S,height:S},imageStyle:{background:b?I.checkerBoard:"transparent"}}),r.jsx(wS,{children:w||E?r.jsxs(ES,{checked:w,children:[r.jsxs(SS,{children:[r.jsx(hE,{selectionType:gE.ONLY,text:o("items-list-row.select-only"),record:e.whoAmI,size:"small"}),r.jsx(hE,{selectionType:gE.ALL,text:o("items-list-row.select-all"),record:e.whoAmI,size:"small"})]}),w&&r.jsx(jS,{className:"checked-icon",children:r.jsx(qe,{})})]}):r.jsxs(_S,{className:"actions",children:[r.jsx(vt,{title:o("global.select"),children:r.jsx(Mr,{shape:"circle",icon:r.jsx(We,{}),onClick:e=>{Dn(e),x(e)}})},"select"),r.jsx(vt,{title:o("global.edit"),children:r.jsx(is,{shape:"circle",record:e.whoAmI,valuesVersion:s.valuesVersions})},"edit"),a?r.jsx(vt,{title:o("global.delete"),children:r.jsx(mE,{record:e.whoAmI})},"delete"):r.jsx("div",{})]})})]}),children:r.jsx(Qe.Meta,{title:r.jsx(rl,{ellipsis:{rows:1,tooltip:!0},style:{marginBottom:0,fontSize:f===bn.small?".8em":"1em"},children:e.whoAmI.label||e.whoAmI.id})})})]})}const CS=Yr.div`
    height: 30rem;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
`,RS=Yr.div`
    grid-area: data;
    height: 100%;
    overflow-y: scroll;
    border-radius: 0.25rem 0.25rem 0 0;
    border-bottom: none;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(calc(${({$size:e})=>e} + 1rem), 1fr));
    align-content: flex-start;
`,TS=Yr.div`
    grid-area: pagination;
    display: flex;
    justify-content: space-around;
    border: 1px solid ${I.borderLightColor};
    padding: 0.5rem;
`;function IS(){const{state:e}=Jo(),n=mS(Hn(e.display.size)),i=jn(),o=t.useContext(No);return r.jsxs(r.Fragment,{children:[r.jsx(RS,{$size:n,onClick:()=>{i(o?mn():Nn())},children:e.loading?r.jsx(CS,{children:r.jsx(mt,{size:"large"})}):r.jsx(r.Fragment,{children:e.records.map((e=>r.jsx(kS,{item:e},e.whoAmI.id)))})}),r.jsx(TS,{children:r.jsx(Kl,{})})]})}function OS(){const{state:e}=Jo();switch(e.display.type){case Lr.list:return r.jsx(pS,{});case Lr.timeline:return r.jsx("div",{children:"Not supported yet"});case Lr.cards:default:return r.jsx(IS,{})}}const AS=()=>{const{t:e}=i(),{state:n}=Jo(),[o,l]=t.useState(!1),[a,s]=t.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx(Ke,{image:Ke.PRESENTED_IMAGE_SIMPLE,imageStyle:{height:60},description:r.jsxs("span",{children:[e("items_list.no_data"),"."]}),children:r.jsxs(R,{children:[r.jsx(T,{span:11,children:r.jsx(R,{justify:"end",children:r.jsx(T,{children:r.jsx(Mr,{type:"primary",block:!0,style:{width:"fit-content"},icon:r.jsx(D,{}),className:"primary-btn",onClick:()=>{l(!0)},children:e("items_list.new_record")})})})}),r.jsx(T,{span:2,children:r.jsx("span",{children:e("global.or")})}),r.jsx(T,{span:11,children:r.jsx(R,{justify:"start",children:r.jsx(T,{children:r.jsx(Mr,{type:"primary",style:{width:"fit-content"},block:!0,icon:r.jsx(gn,{}),className:"primary-btn",onClick:()=>{s(!0)},children:e("items_list.import_data")})})})})]})}),o&&r.jsx(Yy,{record:null,library:n.library.id,open:o,onClose:()=>{l(!1)},valuesVersion:n.valuesVersions}),a&&r.jsx(rr,{open:a,library:n.library.id,onClose:()=>{s(!1)}})]})};var VS={};({get exports(){return VS},set exports(e){VS=e}}).exports=function(){var e=Object.prototype.toString;function t(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function n(e){if(!e)return!0;if(o(e)&&0===e.length)return!0;if("string"!=typeof e){for(var n in e)if(t(e,n))return!1;return!0}return!1}function r(t){return e.call(t)}function i(e){return"object"==typeof e&&"[object Object]"===r(e)}var o=Array.isArray||function(t){return"[object Array]"===e.call(t)};function l(e){return"boolean"==typeof e||"[object Boolean]"===r(e)}function a(e){var t=parseInt(e);return t.toString()===e?t:e}function s(e){var r,s,u=function(e){return Object.keys(u).reduce((function(t,n){return"create"===n||"function"==typeof u[n]&&(t[n]=u[n].bind(u,e)),t}),{})};function c(e,t){if(r(e,t))return e[t]}function d(e,t,n,r){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return d(e,t.split(".").map(a),n,r);var i=t[0],o=s(e,i);return 1===t.length?(void 0!==o&&r||(e[i]=n),o):(void 0===o&&("number"==typeof t[1]?e[i]=[]:e[i]={}),d(e[i],t.slice(1),n,r))}return r=(e=e||{}).includeInheritedProps?function(){return!0}:function(e,n){return"number"==typeof n&&Array.isArray(e)||t(e,n)},s=e.includeInheritedProps?function(e,t){"string"!=typeof t&&"number"!=typeof t&&(t=String(t));var n=c(e,t);if("__proto__"===t||"prototype"===t||"constructor"===t&&"function"==typeof n)throw new Error("For security reasons, object's magic properties cannot be set");return n}:function(e,t){return c(e,t)},u.has=function(n,r){if("number"==typeof r?r=[r]:"string"==typeof r&&(r=r.split(".")),!r||0===r.length)return!!n;for(var i=0;i<r.length;i++){var l=a(r[i]);if(!("number"==typeof l&&o(n)&&l<n.length||(e.includeInheritedProps?l in Object(n):t(n,l))))return!1;n=n[l]}return!0},u.ensureExists=function(e,t,n){return d(e,t,n,!0)},u.set=function(e,t,n,r){return d(e,t,n,r)},u.insert=function(e,t,n,r){var i=u.get(e,t);r=~~r,o(i)||(i=[],u.set(e,t,i)),i.splice(r,0,n)},u.empty=function(e,t){var a,s;if(!n(t)&&null!=e&&(a=u.get(e,t))){if("string"==typeof a)return u.set(e,t,"");if(l(a))return u.set(e,t,!1);if("number"==typeof a)return u.set(e,t,0);if(o(a))a.length=0;else{if(!i(a))return u.set(e,t,null);for(s in a)r(a,s)&&delete a[s]}}},u.push=function(e,t){var n=u.get(e,t);o(n)||(n=[],u.set(e,t,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},u.coalesce=function(e,t,n){for(var r,i=0,o=t.length;i<o;i++)if(void 0!==(r=u.get(e,t[i])))return r;return n},u.get=function(e,t,n){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return n;if("string"==typeof t)return u.get(e,t.split("."),n);var r=a(t[0]),i=s(e,r);return void 0===i?n:1===t.length?i:u.get(e[r],t.slice(1),n)},u.del=function(e,t){if("number"==typeof t&&(t=[t]),null==e)return e;if(n(t))return e;if("string"==typeof t)return u.del(e,t.split("."));var i=a(t[0]);return s(e,i),r(e,i)?1!==t.length?u.del(e[i],t.slice(1)):(o(e)?e.splice(i,1):delete e[i],e):e},u}var u=s();return u.create=s,u.withInheritedProps=s({includeInheritedProps:!0}),u}();const PS=VS,LS=(e,t)=>(e.parentAttributeData.type===Pr.tree?t.record:t)[e.id],$S=({items:e,fields:t})=>{const n=e.map(((e,n)=>{const r=((e,t)=>e.reduce(((e,n)=>{const r=n.key;if(n.format===Vr.extended){const[n,...o]=r.split(".");try{if(!o.length)return e[r]=t[n],e;const i=JSON.parse(t[n]);if(i)return e[r]=PS.get(i,o),e}catch(i){return console.error(i),e[r]="error",e}}switch(n.type){case Pr.simple_link:case Pr.advanced_link:if((null==n?void 0:n.parentAttributeData)&&t[n.parentAttributeData.id]){let i=t[n.parentAttributeData.id][n.id];st(t[n.parentAttributeData.id])&&(i=t[n.parentAttributeData.id].map((e=>e.record[n.id]))),Array.isArray(i)&&(i=i.shift()),e[r]=i}else e[r]=t[n.id];return e;case Pr.tree:return(null==n?void 0:n.parentAttributeData)&&t[n.parentAttributeData.id]?e[r]=t[n.parentAttributeData.id][n.id]:e[r]=t[n.id],e;case Pr.simple:case Pr.advanced:default:if(!(null==n?void 0:n.parentAttributeData))return e[r]=t[n.id],e;if(!t[n.parentAttributeData.id])return e[r]=null,e;if(st(t[n.parentAttributeData.id]))return e[r]=t[n.parentAttributeData.id].map((e=>LS(n,e))),e;const i=t[n.parentAttributeData.id];return e[r]=LS(n,i),e}}),{}))(t,e);return{index:n+1,whoAmI:{...e.whoAmI},fields:r}}));return n},DS=({type:e,style:t})=>{switch(e){case Lr.list:return r.jsx(yo,{style:t});case Lr.cards:return r.jsx(yi,{style:t});case Lr.timeline:return r.jsx(Ii,{style:t})}},NS=Yr.div`
    display: flex;
    justify-content: space-between;

    &&& {
        background: none;
    }
`;function FS(){const{t:e}=i(),{state:n,dispatch:o}=Jo(),[l,a]=t.useState(!1),s={[$r.SMALL]:e("items_list.display.small"),[$r.MEDIUM]:e("items_list.display.medium"),[$r.BIG]:e("items_list.display.big")};let u;var c;(c=u||(u={})).LESS="LESS",c.MORE="MORE";const d=e=>{o({type:Yo.SET_DISPLAY,display:{type:e,size:n.display.size}})},f=e=>{let t=Object.keys(s).indexOf(n.display.size);t="LESS"===e?t-1:t+1,t=t<0?0:t>2?2:t,o({type:Yo.SET_DISPLAY,display:{type:n.display.type,size:$r[Object.keys(s)[t]]}})},p={style:{minWidth:"11em"},items:[{key:"display_size",label:r.jsxs(NS,{children:[r.jsx(Mr,{shape:"circle",disabled:n.display.size===$r.SMALL,onClick:()=>f("LESS"),size:"small",children:"-"}),` ${s[n.display.size]} `,r.jsx(Mr,{shape:"circle",disabled:n.display.size===$r.BIG,onClick:()=>f("MORE"),size:"small",children:"+"})]})},{type:"divider",key:"divider"},{key:"display_list",label:e("view.type-list"),onClick:()=>d(Lr.list),icon:r.jsx(yo,{})},{key:"display_cards",label:e("view.type-cards"),onClick:()=>d(Lr.cards),icon:r.jsx(yi,{})}]};return r.jsx(z,{open:l,onOpenChange:()=>a(!l),trigger:["click"],placement:"bottomRight",menu:p,children:r.jsxs(Mr,{children:[r.jsx(DS,{type:n.display.type}),r.jsx(dn,{})]})})}function zS(){const{t:e}=i(),[n,o]=t.useState(!1),l={items:[{key:"sort-advanced",disabled:!0,icon:r.jsx(Vo,{}),label:r.jsxs(r.Fragment,{children:[e("items_list.table.header-cell-menu.sort-advance")," ",r.jsx(ir,{})]})},{key:"regroup",disabled:!0,icon:r.jsx(po,{}),label:r.jsxs(r.Fragment,{children:[e("items_list.table.header-cell-menu.regroup")," ",r.jsx(ir,{})]})}]};return r.jsx(r.Fragment,{children:r.jsx(z,{open:n,onOpenChange:()=>o(!n),trigger:["click"],menu:l,placement:"bottomRight",children:r.jsx(Mr,{children:r.jsx(or,{})})})})}function BS(){const{t:e}=i(),n=t.useContext(No),{state:o}=Jo(),{selectionState:l}=pn((e=>({selectionState:e.selection,display:e.display}))),a=jn(),{lang:s}=O();return r.jsx("span",{"data-testid":"dropdown-menu-selection",children:r.jsx(z,{menu:{items:[n?null:{key:"select_all",onClick:()=>{n||a(Bn({type:zn.search,selected:[],allSelected:!0}))},label:e("items-menu-dropdown.select-all",{nb:o.totalCount})},{key:"select",onClick:()=>{let e=[...l.selection.selected];if(o.records)for(const t of o.records)e=[...e,{id:t.whoAmI.id,library:t.whoAmI.library.id,label:Gt(t.whoAmI.label,s)}];a(n?lr({type:zn.search,selected:e,allSelected:!1}):Bn({type:zn.search,selected:e,allSelected:!1}))},label:e("items-menu-dropdown.select-visible",{nb:o.records.length})}]},children:r.jsx(Mr,{icon:r.jsx(dn,{}),children:e("items-list-row.nb-elements",{nbItems:o.totalCount})})})})}const MS=h`
    ${Lo}
    mutation ADD_VIEW($view: ViewInput!) {
        saveView(view: $view) {
            ...ViewDetails
        }
    }
`,HS=h`
    ${Lo}
    query GET_VIEWS_LIST($libraryId: String!) {
        views(library: $libraryId) {
            totalCount
            list {
                ...ViewDetails
            }
        }
    }
`;function US(e){const[t]=j(MS);return{addView:e=>t({variables:e,update:(e,t,n)=>{if(n.variables.view.id)return;const r={query:HS,variables:{libraryId:n.variables.view.library}},i=e.readQuery(r);i&&e.writeQuery({...r,data:{views:{list:[...i.views.list,t.data.saveView],totalCount:i.views.totalCount+1}}})}})}}const GS=Yr.img`
    transform: translate(0px, -1px);
`,WS=()=>r.jsx("div",{children:r.jsx(GS,{src: window.__dynamic_base__+"/assets/svgIconClosePanel-91f6e351.svg",alt:"icon column choice"})});function qS({visible:e,onClose:n,view:o,libraryId:l}){const{t:a}=i(),{state:s,dispatch:u}=Jo(),{availableLangs:c,defaultLang:d}=O(),[f]=ce.useForm(),[p,v]=t.useState(!1),[m]=j(MS),{updateViewsOrder:g}=f_(l);return r.jsx(G,{forceRender:!0,title:a("view.edit-view.title"),open:e,onCancel:()=>{f.resetFields(),n()},onOk:async()=>{f.submit()},confirmLoading:p,children:r.jsxs(ce,{labelCol:{span:8},wrapperCol:{span:16},form:f,onFinish:async e=>{v(!0);const t={id:o.id,library:l,display:{type:e.type,size:o.display.size},shared:e.shared,label:e.label,description:Object.values(e.description).every((e=>""===e))?null:e.description,settings:o.settings,filters:Zo(o.filters),sort:o.sort};try{await m({variables:{view:t}})}catch(r){console.error(r)}if(o.shared!==e.shared){const t=e.shared?s.userViewsOrder.filter((e=>e!==o.id)):[...s.userViewsOrder,o.id];await g({key:u_+s.library.id,value:t,global:!1});const n=e.shared?[...s.sharedViewsOrder,o.id]:s.sharedViewsOrder.filter((e=>e!==o.id));await g({key:c_+s.library.id,value:n,global:!1})}o.id===s.view.current.id&&u({type:Yo.CHANGE_VIEW,view:{...s.view.current,label:e.label,description:Object.values(e.description).every((e=>""===e))?null:e.description,display:{type:e.type,size:o.display.size},shared:e.shared}}),v(!1),n()},children:[c.map((e=>r.jsxs("div",{children:[r.jsx("h2",{children:a(`language.${e}`)}),r.jsx(ce.Item,{label:a("view.edit-view.label"),name:["label",e],initialValue:o.label[e],rules:d===e?[{required:!0}]:[],"data-testid":`viewName-input-${e}`,children:r.jsx(U,{})}),r.jsx(ce.Item,{label:a("view.edit-view.description"),initialValue:o.description&&o.description[e]||"",name:["description",e],"data-testid":`description-input-${e}`,children:r.jsx(U,{})}),r.jsx(C,{})]},e))),r.jsx(ce.Item,{label:a("view.edit-view.type"),name:"type","data-testid":"input-type",initialValue:o.display.type,children:r.jsxs(Ze,{children:[r.jsx(Ze.Option,{value:Lr.list,children:a("view.type-list")}),r.jsx(Ze.Option,{value:Lr.cards,children:a("view.type-cards")})]})}),r.jsx(ce.Item,{name:"shared",initialValue:o.shared,valuePropName:"checked","data-testid":"input-shared",wrapperCol:{offset:8,span:16},children:r.jsx(K,{children:a("view.edit-view.shared")})})]})})}const YS=h`
    mutation DELETE_VIEW($viewId: String!) {
        deleteView(viewId: $viewId) {
            id
            library
        }
    }
`;function XS(e){return Qa({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M14 14.252v2.09A6 6 0 0 0 6 22l-2-.001a8 8 0 0 1 10-7.748zM12 13c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6zm0-2c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm7.418 6h3.586v2h-3.586l1.829 1.828-1.414 1.415L15.59 18l4.243-4.243 1.414 1.415L19.418 17z"}}]}]})(e)}const QS=Yr.div`
    width: 100%;
`,KS=Yr.div`
    background: ${({selected:e})=>e?`${I.activeColor} `:"none"};
    padding: 0.5rem;
    display: flex;
    align-items: center;
`,ZS=Yr.div`
    content: '....';
    width: 20px;
    height: 30px;
    display: inline-block;
    line-height: 5px;
    padding: 3px 4px;
    vertical-align: middle;
    font-size: 12px;
    font-family: sans-serif;
    letter-spacing: 2px;
    color: ${I.borderLightColor};
    text-shadow: 1px 0 1px black;

    &::after {
        content: '.. .. .. ..';
    }
`,JS=Yr.div`
    display: flex;
    align-items: center;
    margin-left: 10px;
`,e_=Yr.div`
    opacity: 0.8;
    margin-left: 10px;
    overflow: hidden;
`;function t_({view:e,onEdit:n,handleProps:o}){var l;const{t:a}=i(),{lang:s,defaultLang:u}=O(),{state:c,dispatch:d}=Jo(),[f,p]=t.useState({expand:!1,key:0}),{addView:v}=US(c.library.id),{deleteView:m}=function(){const[e]=j(YS);return{deleteView:t=>e({variables:{viewId:t},update:(e,{data:t})=>{const n=e.identify(t.deleteView);e.evict({id:n}),e.gc()}})}}(),{updateViewsOrder:g}=f_(c.library.id),h=e.id===(null==(l=c.view.current)?void 0:l.id),[b,y]=t.useState(!1),x=Gt(e.label,s);return r.jsxs(KS,{selected:h,onClick:()=>{d({type:Yo.CHANGE_VIEW,view:e})},color:e.color,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[r.jsx(ZS,{className:"view-handle",...o}),r.jsxs(QS,{children:[r.jsxs(JS,{"data-testid":"view-title",children:[r.jsx(DS,{type:e.display.type}),r.jsx(Ge.Text,{ellipsis:{tooltip:!0},style:{padding:"0 .5em",width:"calc(100% - 1em)"},children:x})]}),e.description&&r.jsxs(e_,{children:[r.jsx(Ge.Paragraph,{ellipsis:{rows:3,expandable:!0,onExpand:()=>{p({expand:!0,key:f.key})},symbol:a("view.see-more")},style:{marginBottom:0},children:Gt(e.description,s)},f.key),f.expand&&r.jsx("a",{href:"!#",onClick:e=>{e.preventDefault(),p({expand:!1,key:f.key+1})},children:a("global.close")})]})]}),!e.owner&&!b&&r.jsx(XS,{size:"1.3em"}),b&&r.jsxs(r.Fragment,{children:[r.jsx(vt,{title:a("global.edit"),children:r.jsx(Mr,{onClick:t=>{t.stopPropagation(),n(e.id)},disabled:!e.owner,type:"text",size:"small",shape:"circle",icon:r.jsx(Hi,{})},"edit")}),r.jsx(vt,{title:a("global.duplicate"),children:r.jsx(Mr,{onClick:async t=>{t.stopPropagation();try{const t={...Nt(e,["id","owner"]),library:c.library.id,label:{[u]:`${Gt(e.label,s)} (${a("global.copy")})`},filters:Zo(e.filters),valuesVersions:ct(e.valuesVersions).map((e=>({treeId:e.name,treeNode:e.value.id}))),shared:!1},n=await v({view:t});await g({key:u_+t.library,value:[...c.userViewsOrder,n.data.saveView.id],global:!1})}catch(n){console.error(n)}},type:"text",size:"small",shape:"circle",icon:r.jsx(Bi,{})},"duplicate")}),r.jsx(vt,{title:a("global.delete"),children:r.jsx(Mr,{onClick:async t=>{t.stopPropagation(),await m(e.id);const n=(e.shared?c.sharedViewsOrder:c.userViewsOrder).filter((t=>t!==e.id));await g({key:(e.shared?c_:u_)+c.library.id,value:n,global:!1}),e.id===c.view.current.id&&d({type:Yo.CHANGE_VIEW,view:Lt})},disabled:!e.owner,type:"text",size:"small",shape:"circle",icon:r.jsx(ln,{})},"delete")})]})]},e.id)}const n_=Yr.div`
    width: 100%;
    display: flex;
    flex-flow: column nowrap;
    border-right: ${I.borderLightColor} 1px solid;
    overflow-y: auto;
`,r_=Yr.div`
    width: 100%;
    background-color: ${I.headerBg};
    display: grid;
    grid-template-columns: repeat(2, auto);
    justify-content: space-between;
    padding: 0.3rem 0.3rem 0.3rem 1rem;
    font-weight: 700;
    border-bottom: 1px solid ${I.borderLightColor};

    & > * {
        :first-of-type {
            display: grid;
            column-gap: 8px;
            grid-template-columns: repeat(3, auto);
            align-items: center;
            justify-items: center;
        }

        :last-of-type {
            display: grid;
            align-items: center;
            justify-content: flex-end;
            column-gap: 8px;
            grid-template-columns: repeat(2, auto);
        }
    }
`,i_=Yr.div`
    width: 100%;
    border-top: ${I.activeColor} 1px solid;
    border-bottom: ${I.activeColor} 1px solid;
    padding: 0.3rem;
    padding-left: 1rem;
    font-weight: 700;
    font-size: 14px;
`,o_=Yr.div`
    width: 100%;
`,l_=Yr.div`
    margin: 1rem;
`,a_=Yr(Je)`
    margin-left: 8px;
    && > * {
        background-color: ${I.borderLightColor};
        color: ${I.defaultTextColor};
    }
`,s_=e=>(t,n)=>{const r=e.indexOf(t.id),i=e.indexOf(n.id),o=-1!==r,l=-1!==i;return o&&l?r-i:o&&!l?-1:!o&&l?1:Number(t.id)-Number(n.id)},u_="user_views_order_",c_="shared_views_order_";function d_(){var e,n;const{t:o}=i(),[l]=Pt(),{lang:a}=O(),[s,u]=t.useState(""),{state:c,dispatch:d}=Jo(),[f,p]=t.useState(!1),v=jn(),{updateViewsOrder:m}=f_(c.library.id),g=y(HS,{variables:{libraryId:(null==(e=null==c?void 0:c.library)?void 0:e.id)||""}}),h=y(Dt,{variables:{keys:[u_+c.library.id,c_+c.library.id]},onCompleted:e=>{var t,n;d({type:Yo.SET_USER_VIEWS_ORDER,userViewsOrder:(null==(t=e.userData)?void 0:t.data[u_+c.library.id])||[]}),d({type:Yo.SET_SHARED_VIEWS_ORDER,sharedViewsOrder:(null==(n=e.userData)?void 0:n.data[c_+c.library.id])||[]})}});if(g.loading)return r.jsx(Y,{});const{sharedViews:b,userViews:x}=(null==(n=g.data)?void 0:n.views.list.reduce(((e,t)=>{const n=zt(t,c.attributes,c.library.id,null==l?void 0:l.userId);return s&&!Gt(n.label,a).toUpperCase().includes(s.toUpperCase())?e:n.shared?{...e,sharedViews:[...e.sharedViews,n]}:{...e,userViews:[...e.userViews,n]}}),{sharedViews:[],userViews:[]}))??{sharedViews:[],userViews:[]};if(g.error||h.error)return r.jsx(M,{message:(g.error||h.error).message});if(!b||!x)return r.jsx(M,{message:o("error.error_occurred")});const w=e=>{p(e)},E=async(e,t)=>{if(!e.destination)return;const n="user"===e.source.droppableId,r=(n?x:b).map((e=>e.id)),i=r[e.source.index];r.splice(e.source.index,1),r.splice(e.destination.index,0,i);const o=n?u_+c.library.id:c_+c.library.id;await m({key:o,value:r,global:!1})};x.sort(s_(c.userViewsOrder)),b.sort(s_(c.sharedViewsOrder));return r.jsxs(n_,{children:[f&&r.jsx(qS,{view:f,visible:!!f,onClose:()=>{p(!1)},libraryId:c.library.id}),r.jsxs(r_,{children:[r.jsx("span",{children:o("view.views")}),r.jsx(Mr,{onClick:()=>{v(ar({visible:!1,type:sr.view}))},icon:r.jsx(WS,{})})]}),r.jsx(l_,{children:r.jsx(U.Search,{placeholder:o("view.search"),onSearch:e=>{u(e)}})}),r.jsx(i_,{children:o("view.shared-views")}),r.jsx(Kn,{onDragEnd:E,children:r.jsx(Zn,{droppableId:"shared",children:e=>r.jsxs(o_,{...e.droppableProps,ref:e.innerRef,children:[b.map(((e,t)=>r.jsx(Jn,{draggableId:t.toString(),index:t,children:t=>r.jsx("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:r.jsx(t_,{view:e,onEdit:()=>w(e),handleProps:t.dragHandleProps},e.id)})},t))),e.placeholder]})})}),r.jsxs(i_,{children:[o("view.my-views"),r.jsx(a_,{count:x.length})]}),r.jsx(Kn,{onDragEnd:E,children:r.jsx(Zn,{droppableId:"user",children:e=>r.jsxs(o_,{...e.droppableProps,ref:e.innerRef,children:[x.map(((e,t)=>r.jsx(Jn,{draggableId:t.toString(),index:t,children:t=>r.jsx("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:r.jsx(t_,{view:e,onEdit:()=>w(e),handleProps:t.dragHandleProps},e.id)})},t))),e.placeholder]})})})]})}function f_(e){const[t]=j(on);return{updateViewsOrder:n=>t({variables:n,update:(t,n,r)=>{const i={query:Dt,variables:{keys:[u_+e,c_+e]}},o=t.readQuery(i);o&&t.writeQuery({...i,data:{userData:{global:o.userData.global,data:{...o.userData.data,[r.variables.key]:n.data.saveUserData.data[r.variables.key]}}}})}})}}const p_=({filter:e,updateFilterValue:t})=>{var n,i,o,l;const a=(null==(i=null==(n=null==e?void 0:e.value)?void 0:n.value)?void 0:i.from)&&(null==(l=null==(o=null==e?void 0:e.value)?void 0:o.value)?void 0:l.to)?e.value.value:null,s=a?[yn(1e3*Number(a.from)),yn(1e3*Number(a.to))]:null;return r.jsx(xn.RangePicker,{popupStyle:{background:I.defaultBg},disabled:!e.active,onChange:n=>{if(!n)return void t(null);const[r,i]=n;r.startOf("day"),i.startOf("day"),t({...e.value,value:{from:String(r.unix()),to:String(i.unix())}})},value:s})};function v_({children:e,secondary:t=!1,...n}){return r.jsx(Mr,{icon:r.jsx(dn,{}),type:"text",style:{minWidth:"50%",padding:"0 .5em"},...n,children:r.jsx(Ge.Text,{ellipsis:{tooltip:!0},type:t?"secondary":null,style:{width:"calc(100% - 1em)"},children:e})})}const m_={[Vr.text]:[Yt.CONTAINS,Yt.NOT_CONTAINS,Yt.EQUAL,Yt.NOT_EQUAL,Yt.BEGIN_WITH,Yt.END_WITH,Yt.IS_EMPTY,Yt.IS_NOT_EMPTY],[Vr.extended]:[Yt.CONTAINS,Yt.NOT_CONTAINS,Yt.EQUAL,Yt.NOT_EQUAL,Yt.BEGIN_WITH,Yt.END_WITH,Yt.IS_EMPTY,Yt.IS_NOT_EMPTY],[Vr.encrypted]:[Yt.IS_EMPTY,Yt.IS_NOT_EMPTY],[Vr.numeric]:[Yt.EQUAL,Yt.NOT_EQUAL,Yt.GREATER_THAN,Yt.LESS_THAN,Yt.IS_EMPTY,Yt.IS_NOT_EMPTY],[Vr.boolean]:[Yt.EQUAL,Yt.NOT_EQUAL],[Vr.date]:[Yt.EQUAL,Yt.NOT_EQUAL,Yt.GREATER_THAN,Yt.LESS_THAN,Yt.IS_EMPTY,Yt.IS_NOT_EMPTY,Yt.TODAY,Yt.TOMORROW,Yt.YESTERDAY,Yt.LAST_MONTH,Yt.NEXT_MONTH,Yt.BETWEEN],[Vr.date_range]:[Yt.CONTAINS,Yt.START_ON,Yt.START_AFTER,Yt.START_BEFORE,Yt.END_ON,Yt.END_AFTER,Yt.END_BEFORE,Yt.IS_EMPTY,Yt.IS_NOT_EMPTY],[Vr.color]:[Yt.CONTAINS,Yt.NOT_CONTAINS,Yt.EQUAL,Yt.NOT_EQUAL,Yt.IS_EMPTY,Yt.IS_NOT_EMPTY],[Vr.rich_text]:[Yt.CONTAINS,Yt.NOT_CONTAINS,Yt.IS_EMPTY,Yt.IS_NOT_EMPTY]};const g_=(e,t,n)=>{const r=function(e){return[{text:e("filters.contains"),value:Yt.CONTAINS},{text:e("filters.not-contains"),value:Yt.NOT_CONTAINS},{text:e("filters.equal"),value:Yt.EQUAL},{text:e("filters.not-equal"),value:Yt.NOT_EQUAL},{text:e("filters.begin-with"),value:Yt.BEGIN_WITH},{text:e("filters.end-with"),value:Yt.END_WITH},{text:e("filters.less-than"),textByFormat:{[Vr.date]:e("filters.before")},value:Yt.LESS_THAN},{text:e("filters.greater-than"),textByFormat:{[Vr.date]:e("filters.after")},value:Yt.GREATER_THAN},{text:e("filters.today"),value:Yt.TODAY},{text:e("filters.tomorrow"),value:Yt.TOMORROW},{text:e("filters.yesterday"),value:Yt.YESTERDAY},{text:e("filters.last-month"),value:Yt.LAST_MONTH},{text:e("filters.next-month"),value:Yt.NEXT_MONTH},{text:e("filters.between"),value:Yt.BETWEEN},{text:e("filters.start-on"),value:Yt.START_ON},{text:e("filters.start-after"),value:Yt.START_AFTER},{text:e("filters.start-before"),value:Yt.START_BEFORE},{text:e("filters.end-on"),value:Yt.END_ON},{text:e("filters.end-after"),value:Yt.END_AFTER},{text:e("filters.end-before"),value:Yt.END_BEFORE},{text:e("filters.is-empty"),value:Yt.IS_EMPTY},{text:e("filters.is-not-empty"),value:Yt.IS_NOT_EMPTY},{text:e("filters.values-count-equal"),value:Yt.VALUES_COUNT_EQUAL},{text:e("filters.values-count-greater-than"),value:Yt.VALUES_COUNT_GREATER_THAN},{text:e("filters.values-count-lower-than"),value:Yt.VALUES_COUNT_LOWER_THAN},{text:e("filters.through"),value:Yt.THROUGH}]}(n);return r.filter((n=>{var r,i,o;if(n.value===Yt.THROUGH&&t)return!0;if(e.type===cr.LIBRARY&&m_[Vr.text].includes(n.value))return!0;if(e.type===cr.ATTRIBUTE){const t=e;if((null==(r=e.attribute)?void 0:r.format)&&(null==(i=m_[t.attribute.format])?void 0:i.includes(n.value))||t.attribute.isMultiple&&(o=n.value,[Yt.VALUES_COUNT_EQUAL,Yt.VALUES_COUNT_GREATER_THAN,Yt.VALUES_COUNT_LOWER_THAN].includes(o)))return!0}return!1}))},h_=({filter:e})=>{const{t:t}=i(),{state:n,dispatch:o}=Jo(),l=function(e){return[{text:e("filters.classified-in"),value:ur.CLASSIFIED_IN},{text:e("filters.not-classified-in"),value:ur.NOT_CLASSIFIED_IN}]}(t),a={items:l.map((t=>({key:t.value,onClick:()=>(t=>{const r=n.filters.map((n=>n.index===e.index?{...e,condition:ur[t]}:n));o({type:Yo.SET_FILTERS,filters:r})})(t.value),label:t.text})))};return r.jsx(z,{disabled:!e.active,menu:a,trigger:["click"],children:r.jsx(v_,{"data-testid":"filter-condition-dropdown",children:l.filter((t=>t.value===e.condition))[0].text})})},b_=e=>[Yt.IS_EMPTY,Yt.IS_NOT_EMPTY,Yt.TODAY,Yt.TOMORROW,Yt.YESTERDAY,Yt.LAST_MONTH,Yt.NEXT_MONTH].includes(e);function y_({filter:e,updateFilterValue:t}){return r.jsx(le,{disabled:!e.active,"data-test-id":"filter-input-boolean",checked:!!e.value.value,onChange:n=>{t({...e.value,value:n})}})}const x_=Yr.span`
    padding: 0 1rem;
    height: 100%;
    display: grid;
    place-items: center;
`,w_=({filter:e,updateFilterValue:t})=>{var n,o,l,a,s,u;const{t:c}=i(),{state:d,dispatch:f}=Jo(),p=((null==(n=e.attribute)?void 0:n.format)===Vr.extended||e.type===cr.LIBRARY||At(null==(o=e.attribute)?void 0:o.type)||(null==(l=e.attribute)?void 0:l.type)===Pr.tree)&&void 0===(null==(a=e.attribute)?void 0:a.parentAttribute)&&void 0===e.parentTreeLibrary&&e.condition!==Yt.THROUGH,v=g_(e,p,c),m=!dr.find((t=>e.type===cr.LIBRARY&&t===Vr.text||e.type===cr.ATTRIBUTE&&t===e.attribute.format)),g=v.filter((e=>e.value!==Yt.THROUGH||p)).reduce(((t,n)=>{var r,i;return n.value===Yt.THROUGH&&t.push({key:"through-divider",type:"divider"}),t.push({key:n.value,label:(null==(i=n.textByFormat)?void 0:i[null==(r=null==e?void 0:e.attribute)?void 0:r.format])??(null==n?void 0:n.text),onClick:()=>(t=>{const n=d.filters.map((n=>{if(n.index===e.index){let n={...e.value};return b_(t)?n=null:(null===n||"object"==typeof(null==n?void 0:n.value)&&t!==Yt.BETWEEN)&&(n.value=L_(e.attribute.format)),{...e,value:n,condition:Yt[t]}}return n}));f({type:Yo.SET_FILTERS,filters:n})})(n.value)}),t}),[]);if(m){const t=v.filter((t=>t.value===e.condition))[0];return r.jsx(z,{disabled:!e.active||e.condition===Yt.THROUGH,menu:{items:g},trigger:["click"],children:r.jsx(v_,{"aria-label":"filter-condition",children:(null==(u=null==t?void 0:t.textByFormat)?void 0:u[null==(s=null==e?void 0:e.attribute)?void 0:s.format])??(null==t?void 0:t.text)})})}return e.attribute.format===Vr.boolean?r.jsx(x_,{children:r.jsx(y_,{filter:e,updateFilterValue:t})}):r.jsx(r.Fragment,{})},E_=({filter:e,updateFilterValue:t})=>{var n;const i=n=>{n?(n.startOf("day"),t({...e.value,value:n.unix()})):t(null)},o=(null==(n=null==e?void 0:e.value)?void 0:n.value)?yn(1e3*Number(e.value.value)):null;return r.jsx(xn,{popupStyle:{background:I.defaultBg},disabled:!e.active,onOk:i,onChange:i,"aria-label":"date-filter",value:o})},S_=Yr(U)`
    // Remove arrows on number input
    && {
        -moz-appearance: textfield;
        ::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
    }
`,__=({filter:e,updateFilterValue:t,onPressEnter:n})=>{const i=isNaN(Number(e.value.value))?"":e.value.value;return r.jsx(S_,{type:"number",disabled:!e.active,value:i,onChange:n=>{const r=n.target.value||0;t({...e.value,value:r})},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),n())}})},j_=Yr(U.TextArea)`
    background: ${I.defaultBg} 0% 0% no-repeat padding-box;
    border: 1px solid ${I.borderColor};
    border-radius: 3px;
`,k_=({filter:e,updateFilterValue:t,onPressEnter:n})=>{const i=e.value.value?String(e.value.value):null,o=i?i.split("\n").length:1,l=o<=5?o:5;return r.jsx(j_,{disabled:!e.active,rows:l,value:i,onChange:n=>{const r=(n.target.value??"").toString();t({...e.value,value:r})},onPressEnter:e=>{e.shiftKey||(e.preventDefault(),e.stopPropagation(),n())},"data-testid":"filter-textarea"})},C_=Yr.div`
    background: ${I.lightBg};
    padding: 8px 8px 8px 0px;
    border-radius: 3px;
    display: grid;
    grid-template-columns: 1.375rem 1fr;
    margin-bottom: 8px;
    border: 2px solid transparent;

    ${({active:e})=>e?`\n        &:hover,\n        &:active {\n            border: 2px solid ${I.primaryColor};\n\n            &&& .filter-handle {\n                color: ${I.primaryColor};\n            }\n        }\n    `:"opacity: .5;"}
`,R_=Yr.div`
    content: '....';
    width: 20px;
    height: 30px;
    display: inline-block;
    overflow: hidden;
    line-height: 5px;
    padding: 3px 4px;
    vertical-align: middle;
    margin: auto;
    font-size: 12px;
    font-family: sans-serif;
    letter-spacing: 2px;
    color: ${I.borderLightColor};
    text-shadow: 1px 0 1px black;

    &::after {
        content: '.. .. .. ..';
    }
`,T_=Yr.div`
    display: grid;
    grid-template-rows: ${e=>e.$hasParent?"auto auto 1fr":"auto 1fr"};
    row-gap: 8px;
`,I_=Yr.div`
    display: grid;
    grid-template-columns: 1fr 1.5rem;
    align-items: center;
    column-gap: 8px;
    min-width: 0;
`,O_=Yr.div`
    display: grid;
    grid-template-columns: 1fr 1fr;
    justify-items: space-around;
    align-items: center;
    justify-content: center;

    background: ${I.defaultBg} 0% 0% no-repeat padding-box;
    border: 1px solid ${I.borderColor};
    border-radius: 3px;

    min-width: 0;
`,A_=Yr.div`
    display: grid;
    place-items: center;
    height: 32px;

    background: ${I.defaultBg} 0% 0% no-repeat padding-box;
    border: 1px solid ${I.borderColor};
    border-radius: 3px;
`,V_=Yr.div`
    display: flex;
    align-content: flex-start;
`,P_=Yr(Mr)`
    && {
        border: none;
        color: ${I.secondaryTextColor};

        :hover {
            border: none;
            color: ${I.secondaryTextColor};
        }
    }
`,L_=e=>{switch(e){case Vr.boolean:return!0;case Vr.date:return Sn().utcOffset(0).startOf("day").unix();default:return""}};function $_({filter:e,handleProps:n}){var o;const{t:l}=i(),{lang:a}=O(),{state:s,dispatch:u}=Jo(),[c,d]=t.useState(!1),[f]=Mn(),p=t=>{const n=s.filters.map((n=>n.index===e.index?{...n,value:t}:n));u({type:Yo.SET_FILTERS,filters:n})},v={items:[{key:"deactivate",label:e.active?l("filters.deactivate"):l("filters.activate"),onClick:()=>{const t=s.filters.map((t=>t.index===e.index?{...t,active:!t.active}:t));u({type:Yo.SET_FILTERS,filters:t})}},{key:"delete",label:l("global.delete"),onClick:()=>{u({type:Yo.SET_FILTERS,filters:s.filters.filter((t=>t.index!==e.index))})}}]},m=t.useCallback((e=>{var t;const n=e.filter.condition in Yt&&!(e.filter.condition in ur)&&!dr.find((t=>{var n;return t===(null==(n=e.filter.attribute)?void 0:n.format)})),i=e.filter.condition in ur;if(n){if(b_(e.filter.condition))return r.jsx(r.Fragment,{});switch(null==(t=e.filter.attribute)?void 0:t.format){case Vr.date:return e.filter.condition===Yt.BETWEEN?r.jsx(p_,{...e}):r.jsx(E_,{...e});case Vr.date_range:return r.jsx(E_,{...e});case Vr.numeric:return r.jsx(__,{...e});case Vr.text:default:return r.jsx(k_,{...e})}}else if(i)return r.jsx(Mr,{disabled:!e.filter.active,onClick:()=>d(!0),children:e.filter.value.label||l("global.select")});return r.jsx(r.Fragment,{})}),[l]),g=e=>e?e.map((e=>({...e,type:Pr.simple,multiple_values:void 0,linked_tree:void 0,system:!1}))):[],h=!(e.condition!==qt.THROUGH&&!(null==(o=e.attribute)?void 0:o.parentAttribute)&&!e.parentTreeLibrary&&e.type!==cr.LIBRARY);return r.jsxs(r.Fragment,{children:[c&&r.jsx(Ey,{selectedNodeKey:e.value.value||e.tree.id,tree:e.tree,onSubmit:t=>p((t=>void 0===t||t.id===e.tree.id?{value:null}:{value:t.id,label:String(t.title)})(t)),onClose:()=>d(!1),visible:c,canSelectRoot:!0}),r.jsxs(C_,{"data-testid":"filter",active:e.active,children:[r.jsx(R_,{className:"filter-handle",...n}),r.jsxs(T_,{$hasParent:h,children:[h&&r.jsxs(V_,{children:[r.jsxs("span",{children:[l("filters.through"),": "]}),r.jsx("span",{children:Gt(e.condition===qt.THROUGH?null==(b=e.attribute)?void 0:b.label:(null==(x=null==(y=e.attribute)?void 0:y.parentAttribute)?void 0:x.label)||(null==(w=e.parentAttribute)?void 0:w.label),a)||`${Gt(e.condition===qt.THROUGH?null==(E=e.parentAttribute)?void 0:E.label:null==(_=null==(S=e.parentTreeLibrary)?void 0:S.parentAttribute)?void 0:_.label,a)} > ${Gt(e.condition===qt.THROUGH?null==e?void 0:e.library.label:null==(j=e.parentTreeLibrary)?void 0:j.library.label,a)} `}),r.jsx(P_,{disabled:!e.active,size:"small",onClick:()=>{const t=[...s.filters],n=e.type===cr.ATTRIBUTE&&void 0!==e.parentTreeLibrary?e.parentTreeLibrary.parentAttribute:e.type===cr.ATTRIBUTE?e.attribute.parentAttribute??e.attribute:e.parentAttribute,r={type:cr.ATTRIBUTE,index:e.index,key:null==n?void 0:n.id,value:{value:L_(n.format)},active:!0,condition:Dr[fr(n.format)],attribute:n},i=s.filters.findIndex((t=>t.index===e.index));t.splice(i,1,r),u({type:Yo.SET_FILTERS,filters:t})},shape:"circle",icon:r.jsx(Ce,{})})]}),r.jsxs(I_,{children:[r.jsxs(O_,{children:[r.jsx(D_,{libraryId:f.id,button:r.jsx(v_,{secondary:e.condition===qt.THROUGH,children:(()=>{var t,n;return e.condition===qt.THROUGH?`${l("global.select")}...`:e.type===cr.ATTRIBUTE?Gt(null==(t=e.attribute)?void 0:t.label,a)||(null==(n=e.attribute)?void 0:n.id):e.type===cr.TREE?Gt(e.tree.label,a)||e.tree.id:Gt(e.library.label,a)||e.library.id})()}),filter:e,attributes:(()=>{var t,n,r,i,o,l;if(e.type===cr.ATTRIBUTE){if(e.condition===qt.THROUGH&&(null==(t=e.attribute)?void 0:t.format)===Vr.extended)return g(e.attribute.embedded_fields);if(e.condition===qt.THROUGH&&void 0===e.attribute.linkedTree)return null==(n=e.attribute.linkedLibrary)?void 0:n.attributes;if(void 0!==e.attribute.parentAttribute)return(null==(i=null==(r=e.attribute.parentAttribute)?void 0:r.linkedLibrary)?void 0:i.attributes)||g(null==(o=e.attribute.parentAttribute)?void 0:o.embedded_fields);if(void 0!==e.parentTreeLibrary){return e.parentTreeLibrary.parentAttribute.linkedTree.libraries.find((t=>t.library.id===e.parentTreeLibrary.library.id)).library.attributes}if(void 0!==e.attribute.linkedTree&&e.condition===qt.THROUGH)return[]}if(e.type===cr.LIBRARY){if(e.condition!==qt.THROUGH)return[];if(e.condition===qt.THROUGH){return(null==(l=e.parentAttribute.linkedTree)?void 0:l.libraries.find((t=>t.library.id===e.library.id))).library.attributes}}return f.attributes})(),libraries:(()=>{var t,n;return e.type===cr.LIBRARY?null==(t=e.parentAttribute.linkedTree)?void 0:t.libraries:e.type===cr.ATTRIBUTE&&void 0!==e.attribute.linkedTree&&e.condition===qt.THROUGH?null==(n=e.attribute.linkedTree)?void 0:n.libraries:[]})(),trees:e.type===cr.TREE||e.condition!==qt.THROUGH&&e.type===cr.ATTRIBUTE&&!e.parentTreeLibrary&&!e.attribute.parentAttribute?f.trees:[]}),(e.type===cr.ATTRIBUTE||e.type===cr.LIBRARY)&&r.jsx(w_,{filter:e,updateFilterValue:p}),e.type===cr.TREE&&r.jsx(h_,{filter:e})]}),r.jsx(z,{menu:v,placement:"bottomRight",children:r.jsx(A_,{children:r.jsx(et,{})})})]}),r.jsx(m,{filter:e,updateFilterValue:p,onPressEnter:()=>{u({type:Yo.APPLY_FILTERS})}})]})]})]});var b,y,x,w,E,S,_,j}function D_({libraryId:e,button:n,attributes:o,libraries:l,trees:a,filter:s}){const{t:u}=i(),{state:c,dispatch:d}=Jo(),{lang:f}=O(),[p,v]=t.useState(!1),[m,g]=t.useState(),h=jn(),b=e=>{const t=[...c.filters];if(void 0!==s){const n=c.filters.findIndex((e=>e.index===s.index));t.splice(n,1,{...e,index:s.index}),v(!1)}else t.push(e);d({type:Yo.SET_FILTERS,filters:t}),h(ar({visible:!0,type:sr.filters}))},y=function(e){return{...e,localizedLabel:Gt(e.label,f)||e.id}},x=function(e){const t=new RegExp(`${m}`,"i");return!m||!!e.id.match(t)||!!e.localizedLabel.match(t)},w=a.map(y).filter(x),E=o.map(y).filter(x),S=l.map((e=>({...e,library:y(e.library)}))).filter((e=>x(e.library))),_=e=>c.filters.some((t=>{var n,r,i,o,l;return(null==t?void 0:t.key)===e||(null==(r=null==(n=t.attribute)?void 0:n.parentAttribute)?void 0:r.id)===e||(null==(i=t.parentAttribute)?void 0:i.id)===e||(null==(l=null==(o=t.parentTreeLibrary)?void 0:o.parentAttribute)?void 0:l.id)===e})),j=[{key:"search",label:r.jsx(U.Search,{placeholder:u("global.search"),onChange:e=>{g(e.target.value)}})},{key:"divider",type:"divider"}];let k=[];w.length>0&&(k=[...k,{key:"trees-group",type:"group",label:u("filters.trees-group"),children:w.map((e=>({key:e.id,icon:r.jsx(ji,{}),onClick:()=>b((e=>({type:cr.TREE,index:Date.now(),active:!0,key:e.id,condition:ur[ur.CLASSIFIED_IN],tree:e,value:{value:null}}))(e)),label:_(e.id)?r.jsx(Je,{color:"blue",text:e.localizedLabel}):e.localizedLabel})))}]),E.length>0&&(k=[...k,{key:"attributes-group",type:"group",label:u("filters.attributes-group"),children:E.map((t=>({key:t.id,icon:r.jsx(Eo,{}),onClick:()=>b((t=>{var n,r,i,o,l,a;let u=t.id;void 0!==(null==s?void 0:s.parentTreeLibrary)?u=`${null==s?void 0:s.parentTreeLibrary.key}.${t.id}`:(null==s?void 0:s.condition)===qt.THROUGH&&s.type===cr.LIBRARY?u=`${s.key}.${t.id}`:(null==s?void 0:s.condition)===qt.THROUGH?u=`${null==(n=null==s?void 0:s.attribute)?void 0:n.id}.${t.id}`:(null==(r=null==s?void 0:s.attribute)?void 0:r.parentAttribute)&&(u=`${null==(i=null==s?void 0:s.attribute)?void 0:i.parentAttribute.id}.${t.id}`);const c={type:cr.ATTRIBUTE,index:Date.now(),active:!0,key:u,condition:Yt[fr(t.format)],attribute:{id:t.id,type:t.type,format:At(t.type)||t.type===Pr.tree?pr:t.format,label:t.label,isLink:At(t.type),isMultiple:t.multiple_values,linkedLibrary:t.linked_library,linkedTree:t.linked_tree,library:(null==(o=t.linked_library)?void 0:o.id)||e,embedded_fields:t.embedded_fields},value:{value:L_(t.format)}};return(null==s?void 0:s.condition)===qt.THROUGH?c.attribute.parentAttribute=null==s?void 0:s.attribute:(null==(l=null==s?void 0:s.attribute)?void 0:l.parentAttribute)&&(c.attribute.parentAttribute=null==(a=null==s?void 0:s.attribute)?void 0:a.parentAttribute),(null==s?void 0:s.type)===cr.LIBRARY?c.parentTreeLibrary=s:void 0!==(null==s?void 0:s.parentTreeLibrary)&&(c.parentTreeLibrary=null==s?void 0:s.parentTreeLibrary),c})(t)),label:_(t.id)?r.jsx(Je,{color:"blue",text:t.localizedLabel}):t.localizedLabel})))}]),S.length>0&&(k=[...k,{key:"libraries-group",type:"group",label:u("filters.libraries-group"),children:S.map((({library:e})=>({key:e.id,icon:r.jsx(Eo,{}),onClick:()=>b((e=>{var t,n;const r=(null==s?void 0:s.type)!==cr.LIBRARY?`${null==(t=s.attribute)?void 0:t.id}.${e.id}`:`${null==(n=s.parentAttribute)?void 0:n.id}.${e.id}`;return{type:cr.LIBRARY,index:Date.now(),active:!0,key:r,condition:Yt[fr(pr)],library:{id:e.id,label:e.label},value:{value:L_(pr)},parentAttribute:(null==s?void 0:s.condition)===qt.THROUGH?s.attribute??s.parentAttribute:s.parentAttribute}})(e)),label:_(e.id)?r.jsx(Je,{color:"blue",text:e.localizedLabel}):e.localizedLabel})))}]),j.push({key:"elements-wrapper",type:"group",children:k,label:null,className:"elements-wrapper",style:{maxHeight:"75vh",overflowY:"auto"}});const C={items:j};return r.jsx(z,{disabled:!!s&&!s.active,open:p,onOpenChange:()=>v(!p),menu:C,trigger:["click"],children:n})}Yr(tt)`
    & .elements-wrapper {
        max-height: 75vh;
        overflow-y: auto;

        > .ant-dropdown-menu-item-group-title {
            display: none;
        }
    }
`;const N_=Yr(Mr)`
    && {
        display: flex;
        align-items: center;
    }
`,F_=Yr.span`
    width: 180px;
    overflow: hidden;
    text-overflow: ellipsis;
    whitespace: nowrap;
`;function z_({library:e}){var t,n,o,l;const{t:a}=i(),{lang:s,defaultLang:u}=O(),c=jn(),{display:d}=pn((e=>e)),{state:f,dispatch:p}=Jo(),[v]=Pt(),{addView:m}=US(e.id),{updateViewsOrder:g}=f_(e.id),h=()=>({library:e.id,label:{[u]:a("view.add-view.title",{lng:u})},display:f.display,shared:!1,sort:f.sort,filters:Zo(f.filters),valuesVersions:f.valuesVersions?ct(f.valuesVersions).map((e=>{var t;return{treeId:(null==e?void 0:e.name)??null,treeNode:(null==(t=null==e?void 0:e.value)?void 0:t.id)??null}})).filter((e=>null!==e.treeId&&null!==e.treeNode)):null,settings:[{name:Wt,value:f.display.type===Lr.list?f.fields.map((e=>e.key)):[]}]}),b=async e=>{const t={...h(),display:{...f.display,type:e}},n=await m({view:t});await g({key:u_+t.library,value:[...f.userViewsOrder,n.data.saveView.id],global:!1}),p({type:Yo.CHANGE_VIEW,view:zt(n.data.saveView,f.attributes,f.library.id,null==v?void 0:v.userId)})},y={items:[{key:"add-group",type:"group",label:a("view.add-view.title"),children:[{key:"list",onClick:()=>b(Lr.list),icon:r.jsx(yo,{}),label:a("view.type-list")},{key:"cards",onClick:()=>b(Lr.cards),icon:r.jsx(yi,{}),label:a("view.type-cards")}]}]};return r.jsxs(V,{size:"large",children:[r.jsxs(Mr.Group,{children:[r.jsx(vt,{title:Gt(null==(t=f.view.current)?void 0:t.label,s)||a("select-view.default-view"),children:r.jsx(N_,{icon:r.jsx(DS,{style:{marginRight:"8px"},type:f.view.current.display.type}),"data-testid":"dropdown-view-options",onClick:()=>{const e=!d.side.visible||d.side.type!==sr.view;c(ar({visible:e,type:sr.view}))},color:null==(n=f.view.current)?void 0:n.color,children:r.jsx(F_,{children:Gt(null==(o=f.view.current)?void 0:o.label,s)||a("select-view.default-view")})})}),r.jsx(Mr,{disabled:f.view.sync,icon:r.jsx(Oy,{}),onClick:()=>{p({type:Yo.CHANGE_VIEW,view:f.view.current})},style:{paddingTop:"6px"}}),r.jsx(Mr,{icon:r.jsx(Ro,{}),onClick:async()=>{if(f.view.current.id!==Lt.id)try{await m({view:{...h(),id:f.view.current.id,label:f.view.current.label,description:f.view.current.description,shared:f.view.current.shared,color:f.view.current.color,sort:f.sort??null}}),p({type:Yo.SET_VIEW_SYNC,sync:!0})}catch(e){c(Cn({type:Rn.error,content:`${e.message}`,channel:Tn.trigger})),console.error(e)}},disabled:f.view.sync||(null==(l=f.view.current)?void 0:l.id)===Lt.id||!f.view.current.owner}),r.jsx(z,{menu:y,trigger:["click"],children:r.jsx(Mr,{icon:r.jsx(D,{})})})]}),r.jsx(Je,{dot:!!f.filters.length,children:r.jsxs(Mr.Group,{children:[r.jsx(Mr,{onClick:()=>{c(ar({visible:!d.side.visible||d.side.type!==sr.filters,type:sr.filters}))},icon:r.jsx(ro,{}),children:a("filters.filters")}),r.jsx(D_,{libraryId:e.id,button:r.jsx(Mr,{icon:r.jsx(D,{}),type:"default"}),attributes:e.attributes,trees:e.linkedTrees,libraries:[]})]})}),r.jsx(Mr,{onClick:()=>{c(ar({visible:!d.side.visible||d.side.type!==sr.versions,type:sr.versions}))},icon:r.jsx(Ja,{}),style:{paddingTop:"5px"}})]})}function B_(){const{state:e,dispatch:t}=Jo(),{t:n}=i(),o=e=>{t({type:Yo.APPLY_FILTERS})};return r.jsx(U.Search,{style:{maxWidth:500,minWidth:250},placeholder:n("search.placeholder"),value:e.fullText,onChange:e=>{t({type:Yo.SET_FULLTEXT,fullText:e.target.value})},onPressEnter:o,onSearch:o,loading:e.loading,allowClear:!0})}const M_=Yr(V)`
    width: 100%;
`;function H_({refetch:e,library:n}){const{t:o}=i(),{state:l}=Jo(),[a,s]=t.useState(!1),[u,c]=t.useState(!1),[d,f]=t.useState(!1),p=n.permissions.create_record,v=t.useContext(No);return r.jsxs(M_,{children:[(null==n?void 0:n.id)&&r.jsx(z_,{library:n}),r.jsxs(V,{size:"large",children:[r.jsx(BS,{}),r.jsx(B_,{})]}),r.jsxs(V,{size:"large",children:[!v&&p&&r.jsx(Mr,{type:"primary",icon:r.jsx(D,{}),className:"primary-btn",onClick:()=>{n.behavior===Ur.standard?s(!0):n.behavior===Ur.files?c(!0):n.behavior===Ur.directories&&f(!0)},children:o("items_list.new")}),r.jsxs(V,{size:"small",children:[r.jsx(zS,{}),r.jsx(FS,{}),r.jsx(Mr,{icon:r.jsx(jo,{}),onClick:()=>e&&e()})]})]}),a&&r.jsx(Yy,{record:null,library:n.id,open:a,onClose:()=>{s(!1)},valuesVersion:l.valuesVersions}),u&&r.jsx(Is,{libraryId:n.id,multiple:!0,onClose:()=>{c(!1)}}),d&&r.jsx(ps,{libraryId:n.id,onClose:()=>{f(!1)}})]})}var U_=en,G_=Ul;var W_=_t;var q_=function(e){return e==e&&!W_(e)},Y_=q_,X_=vr;var Q_=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},K_=function(e,t,n,r){var i=n.length,o=i,l=!r;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(l&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var s=(a=n[i])[0],u=e[s],c=a[1];if(l&&a[2]){if(void 0===u&&!(s in e))return!1}else{var d=new U_;if(r)var f=r(u,c,s,e,t,d);if(!(void 0===f?G_(c,u,3,r,d):f))return!1}}return!0},Z_=function(e){for(var t=X_(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Y_(i)]}return t},J_=Q_;var ej=Ul,tj=sl,nj=mr,rj=gr,ij=q_,oj=Q_,lj=hr;var aj=Xt;var sj=function(e){return function(t){return null==t?void 0:t[e]}},uj=function(e){return function(t){return aj(t,e)}},cj=gr,dj=hr;var fj=function(e){var t=Z_(e);return 1==t.length&&t[0][2]?J_(t[0][0],t[0][1]):function(n){return n===e||K_(n,e,t)}},pj=function(e,t){return rj(e)&&ij(t)?oj(lj(e),t):function(n){var r=tj(n,e);return void 0===r&&r===t?nj(n,e):ej(t,r,3)}},vj=jt,mj=st,gj=function(e){return cj(e)?sj(dj(e)):uj(e)};var hj=function(e){return"function"==typeof e?e:null==e?vj:"object"==typeof e?mj(e)?pj(e[0],e[1]):fj(e):gj(e)};var bj=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1},yj=kt,xj=Ct,wj=yj&&1/yl(new yj([,-0]))[1]==1/0?function(e){return new yj(e)}:xj,Ej=pl,Sj=Rt,_j=bj,jj=vl,kj=wj,Cj=yl;var Rj=hj,Tj=function(e,t,n){var r=-1,i=Sj,o=e.length,l=!0,a=[],s=a;if(n)l=!1,i=_j;else if(o>=200){var u=t?null:kj(e);if(u)return Cj(u);l=!1,i=jj,s=new Ej}else s=t?[]:a;e:for(;++r<o;){var c=e[r],d=t?t(c):c;if(c=n||0!==c?c:0,l&&d==d){for(var f=s.length;f--;)if(s[f]===d)continue e;t&&s.push(d),a.push(c)}else i(s,d,n)||(s!==a&&s.push(d),a.push(c))}return a};var Ij=function(e,t){return e&&e.length?Tj(e,Rj(t)):[]};function Oj({onClose:e,open:t}){const{t:n}=i(),{selectionState:o}=pn((e=>({selectionState:e.selection}))),l=jn(),{state:a,dispatch:s}=Jo(),u=!!o.selection.allSelected,c=u?a.totalCount:o.selection.selected.length,[d,{loading:f,error:p,called:v}]=j(vE,{variables:{libraryId:a.library.id,recordsIds:u?null:o.selection.selected.map((e=>e.id)),filters:u?Zo(a.filters):null}});return r.jsxs(G,{title:n("records_deactivation.title"),okText:n("global.submit"),cancelText:n("global.cancel"),onOk:async()=>{try{await d(),l(Nn()),s({type:Yo.SET_LOADING,loading:!0}),e()}catch(t){}},onCancel:e,confirmLoading:f,open:t,closable:!0,centered:!0,okButtonProps:{className:"submit-btn"},destroyOnClose:!0,children:[f&&r.jsx(Y,{"data-testid":"loading"}),!f&&p&&r.jsx(M,{message:p.message}),!v&&n("records_deactivation.confirm",{count:c})]})}const Aj=g`
    query EXPORT($library: ID!, $attributes: [ID!], $filters: [RecordFilterInput!]) {
        export(library: $library, attributes: $attributes, filters: $filters)
    }
`,Vj=Yr.div`
    margin-top: 2em;
`,Pj=Yr.div`
    text-align: center;
`,Lj=2.5;function $j({onClose:e,open:n}){const{t:o}=i(),l=jn(),{selectionState:a}=pn((e=>({selectionState:e.selection}))),s=wr(),{state:u}=Jo(),[c]=Mn(),[d,f]=t.useState([]),[p,v]=t.useState(0),[m,g]=t.useState(""),[h,{error:y}]=b(Aj,{fetchPolicy:"no-cache",onCompleted:e=>{v(2),s.triggerNotification({message:o("export.export_notification_title"),icon:r.jsx(br,{style:{color:"#108ee9"}}),onClick:w,duration:Lj}),g(null==e?void 0:e.export)},onError:e=>{const t={type:Rn.error,priority:yr.high,channel:Tn.passive,content:`${e.message}`};l(Cn(t)),v(2)}}),x=o(2===p?"global.close":"export.start"),w=()=>{l(xr(!0)),e()},E=[{title:o("export.attributes_selection")},{title:o("export.export_generation"),icon:1===p?r.jsx(Q,{}):null},{title:o("export.export_done"),status:y?"error":null}];return r.jsxs(G,{title:o("export.title"),okText:x,okType:"primary",cancelText:o("global.cancel"),onOk:()=>{2!==p?(()=>{let e;if(v(1),a.selection.type===zn.search&&a.selection.allSelected)e=Zo(u.filters);else{const t=a.selection.selected.map((e=>e.id));e=t.length?[{operator:Nr.OPEN_BRACKET},...t.reduce(((e,n,r)=>(e.push({field:"id",condition:Dr.EQUAL,value:n}),r<t.length-1&&e.push({operator:Nr.OR}),e)),[]),{operator:Nr.CLOSE_BRACKET}]:[]}const t=d.length?d.map((e=>{var t;return(null==(t=null==e?void 0:e.parentAttributeData)?void 0:t.type)===Pr.tree?`${null==e?void 0:e.parentAttributeData.id}.${e.id}`:e.path})):["id"];h({variables:{library:(null==c?void 0:c.id)||"",attributes:t,filters:e}})})():e()},onCancel:e,open:n,closable:!0,width:"90vw",centered:!0,confirmLoading:1===p,bodyStyle:{height:"calc(100vh - 10rem)"},cancelButtonProps:{disabled:2===p},destroyOnClose:!0,children:[r.jsx(W,{current:p,style:{marginBottom:"2em"},items:E}),r.jsxs(Vj,{children:[0===p&&r.jsx(JE,{library:c.id,multiple:!0,onSelectionChange:f,selectedAttributes:d,canExpandExtendedAttributes:!1}),1===p&&r.jsx(Pj,{"data-test-id":"processing",children:o("global.processing")+"..."}),2===p&&r.jsx(Pj,{"data-test-id":"done",children:y?r.jsx(M,{message:y.message}):r.jsx(Qr,{status:"success",title:o("export.export_done"),subTitle:o("export.export_done_description"),extra:[r.jsx(Mr,{type:"primary",onClick:w,children:o("export.export_done_open_notifications")})]})})]})]})}function Dj(){const{t:e}=i(),[n,o]=t.useState(),[l]=Mn(),{state:a}=Jo(),{selection:s}=pn((e=>e.selection)),u=s.selected.map((e=>e.id)),c=a.filters,d=[{key:"export",icon:r.jsx(Xi,{rotate:270}),title:e("export.title"),modalComp:$j,display:!0},{key:"deactivate",icon:r.jsx(ln,{}),title:e("records_deactivation.title"),modalComp:Oj,display:!0},{key:"generate_previews",icon:r.jsx(pe,{}),title:e("files.generate_previews"),modalComp:ph,display:l.behavior===Ur.files,modalProps:{libraryId:l.id,recordIds:u,filters:c}}].filter((e=>e.display)),f=()=>o("");return r.jsxs(r.Fragment,{children:[r.jsx(z,{menu:{items:d.map((e=>{return{icon:e.icon,key:e.key,title:e.title,label:e.title,onClick:(t=e.key,()=>{o(t)})};var t}))},children:r.jsxs(Mr,{children:[e("menu-selection.actions")," ",r.jsx(dn,{})]})}),d.filter((e=>n===e.key)).map((e=>r.jsx(e.modalComp,{open:n===e.key,onClose:f,...e.modalProps},e.key)))]})}const Nj=Yr.div`
    display: ${({active:e})=>e?"grid":"none"};
    place-items: center;

    position: absolute;
    top: 0;

    width: 100%;
    background: ${I.defaultBg};
    height: 4rem;
    z-index: 11;

    animation: ${({active:e})=>e?"moveToBottom .3s ease":"none"};

    & > div {
        display: grid;
        place-items: center;
        grid-template-columns: repeat(4, auto);
        column-gap: 1rem;
    }

    @keyframes moveToBottom {
        from {
            top: -100px;
        }
        to {
            top: 0;
        }
    }
`,Fj=Yr.div`
    && {
        display: flex;
        padding: 0;
    }
`,zj=Yr(Mr)`
    && {
        padding: 0 1em;
        display: flex;
        align-items: center;
        border-right-color: transparent;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
    }
`,Bj=Yr(Mr)`
    && {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        display: flex;
        padding: 0 1em;
        align-items: center;
    }
`;function Mj({active:e}){const{t:n}=i(),o=t.useContext(No),{selectionState:l}=pn((e=>({selectionState:e.selection,display:e.display}))),a=jn(),{state:s}=Jo(),{lang:u}=O(),[c,d]=t.useState(0);t.useEffect((()=>{d(o?l.searchSelection.selected.length:l.selection.selected.length)}),[l.selection,l.searchSelection,o,d]);const f=o?l.searchSelection.type===zn.search&&l.searchSelection.allSelected:l.selection.type===zn.search&&l.selection.allSelected;return r.jsx(Nj,{active:e,children:r.jsxs("div",{children:[r.jsx(z,{menu:{items:[{key:"select-visible",onClick:()=>{let e=[...l.selection.selected];if(s.records)for(const t of s.records)e=[...e,{id:t.whoAmI.id,library:t.whoAmI.library.id,label:Gt(t.whoAmI.label,u)}];e=Ij(e,(e=>`${e.id}_${e.library}`)),a(o?lr({type:zn.search,selected:e,allSelected:!1}):Bn({type:zn.search,selected:e,allSelected:!1}))},label:n("items-menu-dropdown.select-visible",{nb:s.records.length})},o?null:{key:"select-all",onClick:()=>{o||a(Bn({type:zn.search,selected:[],allSelected:!0}))},label:n("items-menu-dropdown.select-all",{nb:s.totalCount})},{key:"unselect-all",onClick:()=>{a(o?mn():Nn())},label:n("menu-selection.unselect-all")}]},children:r.jsxs(Fj,{children:[r.jsxs(zj,{children:[n("menu-selection.nb-selected",{nbSelected:f?s.totalCount:c,total:s.totalCount}),r.jsx(dn,{style:{paddingLeft:12}})]}),r.jsx(Bj,{onClick:()=>{a(o?mn():Nn())},children:r.jsx(L,{})})]})}),!o&&r.jsxs(r.Fragment,{children:[r.jsx(Dj,{}),r.jsx("div",{children:r.jsx(Mr,{icon:r.jsx(ln,{}),onClick:()=>{Tt.warning(n("global.feature_not_available"))},children:n("global.delete")})})]})]})})}const Hj=Yr.div`
    width: 100%;
    display: flex;
    flex-flow: column nowrap;
    border-right: ${I.borderLightColor} 1px solid;
    overflow-y: auto;
    width: 1000px;
`,Uj=Yr.div`
    width: 100%;
    background-color: ${I.headerBg};
    display: grid;
    grid-template-columns: repeat(2, auto);
    justify-content: space-between;
    padding: 0.3rem 0.3rem 0.3rem 1rem;
    font-weight: 700;
    border-bottom: 1px solid ${I.borderLightColor};

    & > * {
        :first-of-type {
            display: grid;
            column-gap: 8px;
            grid-template-columns: repeat(3, auto);
            align-items: center;
            justify-items: center;
        }

        :last-of-type {
            display: flex;
            align-items: center;
            justify-content: center;
            column-gap: 8px;
            grid-template-columns: repeat(2, auto);
        }
    }
`,Gj=Yr.div`
    height: calc(100% - 7rem);
    overflow: auto;
`,Wj=Yr.div`
    display: grid;
`;function qj(){const{t:e}=i(),{state:t,dispatch:n}=Jo(),o=jn(),l=t.filters.sort(((e,t)=>e.index-t.index)),a=t.filters.every((e=>!1===e.active)),s=t.filters.every((e=>!0===e.active));return r.jsxs(Hj,{children:[r.jsxs(Uj,{children:[r.jsx(z,{menu:{items:[{key:"disable",disabled:a,onClick:()=>{n({type:Yo.DISABLE_FILTERS})},label:e("filters.disable-filters")},{key:"enable",disabled:s,onClick:()=>{n({type:Yo.ENABLE_FILTERS})},label:e("filters.enable-filters")},{key:"remove",disabled:!t.filters.length,onClick:()=>{n({type:Yo.RESET_FILTERS})},label:e("filters.remove-filters")},{key:"add",disabled:!0,label:r.jsxs(r.Fragment,{children:[e("filters.add-condition")," ",r.jsx(ir,{})]})}]},children:r.jsxs(Mr,{type:"text",style:{display:"inline-flex"},children:[e("filters.filters"),r.jsx(dn,{style:{marginTop:"5px",marginLeft:"-3px"}})]})}),r.jsxs(V,{size:"small",children:[r.jsx(Mr,{disabled:!t.filters.length,onClick:()=>{n({type:Yo.APPLY_FILTERS})},children:e("filters.apply")}),r.jsx(Mr,{onClick:()=>{o(ar({visible:!1,type:sr.filters}))},icon:r.jsx(WS,{})})]})]}),r.jsx(Gj,{children:r.jsx(Kn,{onDragEnd:(e,r)=>{if(!e.destination)return;const i=t.filters.map((t=>({...t,index:e.source.index===t.index?e.destination.index:e.destination.index===t.index?e.source.index:t.index}))).sort(((e,t)=>e.index-t.index));n({type:Yo.SET_FILTERS,filters:i})},children:r.jsx(Zn,{droppableId:"droppable",children:e=>r.jsxs(Wj,{...e.droppableProps,ref:e.innerRef,children:[l.map((e=>r.jsx(Jn,{draggableId:e.index.toString(),index:e.index,children:t=>r.jsx("div",{ref:t.innerRef,...t.draggableProps,children:r.jsx($_,{filter:e,handleProps:t.dragHandleProps},e.index)})},e.index))),e.placeholder]})})})})]})}const Yj=Yr.div`
    width: 100%;
    display: flex;
    flex-flow: column nowrap;
    border-right: ${I.borderLightColor} 1px solid;
    overflow-y: auto;
`,Xj=Yr.div`
    width: 100%;
    background-color: ${I.headerBg};
    display: grid;
    grid-template-columns: repeat(2, auto);
    justify-content: space-between;
    padding: 0.3rem 0.3rem 0.3rem 1rem;
    font-weight: 700;
    border-bottom: 1px solid ${I.borderLightColor};

    & > * {
        :first-of-type {
            display: grid;
            column-gap: 8px;
            grid-template-columns: repeat(3, auto);
            align-items: center;
            justify-items: center;
        }

        :last-of-type {
            display: grid;
            align-items: center;
            justify-content: flex-end;
            column-gap: 8px;
            grid-template-columns: repeat(2, auto);
        }
    }
`;function Qj(){const{t:e}=i(),[t]=Mn(),n=jn(),{state:o,dispatch:l}=Jo();return r.jsxs(Yj,{children:[r.jsxs(Xj,{children:[r.jsx("span",{children:e("values_version.title")}),r.jsx(Mr,{onClick:()=>{n(ar({visible:!1,type:sr.versions}))},icon:r.jsx(WS,{})})]}),r.jsx(Ty,{libraryId:t.id,selectedVersion:o.valuesVersions,onVersionChange:e=>{l({type:Yo.SET_VALUES_VERSIONS,valuesVersions:e})}})]})}const Kj=Yr.div`
    grid-area: side;
    display: ${({$visible:e})=>e?"flex":"none"};
    position: relative;
    height: calc(100vh - 7rem);
    overflow: hidden;

    &.wrapped-filter-open {
        animation-name: filter-animation-open;
        animation-duration: 1s;
        animation-timing-function: ease;
    }

    @keyframes filter-animation-open {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    &.wrapped-filter-close {
        animation-name: filter-animation-close;
        animation-duration: 1s;
        animation-timing-function: ease-out;
    }

    @keyframes filter-animation-close {
        from {
            /* transform: translate(0); */
            opacity: 1;
        }

        to {
            /* transform: translate(-50rem); */
            opacity: 0;
        }
    }
`;function Zj(){const{visible:e,type:t}=pn((e=>e.display.side));return r.jsxs(Kj,{$visible:e,className:e?"wrapped-filter-open":"wrapped-filter-close",children:[e&&t===sr.filters&&r.jsx(qj,{}),e&&t===sr.view&&r.jsx(d_,{}),e&&t===sr.versions&&r.jsx(Qj,{})]})}const Jj=Yr.div`
    border-bottom: 1px solid rgb(235, 237, 240);
    padding: 0 1rem;
    height: 4rem;

    display: flex;
    align-content: center;
    justify-content: space-around;
`,ek=Yr.div`
    display: grid;

    ${({$showSide:e})=>e?`\n            grid-template-columns: ${Er} calc(100% - ${Er});\n            grid-template-rows: 92% auto;\n            grid-template-areas:\n                'side data'\n                'side pagination';`:"\n            grid-template-columns: auto;\n            grid-template-rows: 92% auto;\n            grid-template-areas:\n                'data'\n                'pagination';"}

    height: calc(100vh - 7rem);
    position: relative;
    overflow: auto;
`;function tk({selectionMode:e,library:n,defaultView:i,style:o}){const{lang:l}=O(),{display:a,selection:s}=pn((e=>e)),u=Po(n),[c,d]=t.useReducer(Qo,{...Xo,library:n,loading:!0,attributes:u,fields:(f=i,(null==(p=f.settings)?void 0:p.find((e=>e.name===Wt)))?f.settings.find((e=>e.name===Wt)).value.reduce(((e,t)=>{const r=Wo(t,n,u,l);return r?[...e,r]:e}),[]):[]),filters:i.filters,sort:i.sort,display:i.display,view:{current:i,reload:!1,sync:!0},lang:l,valuesVersions:i.valuesVersions});var f,p;Go({libraries:[n.id]});const[v]=j(on),m=$t(n.id),g=e=>{var t;const r=e?e[n.gqlNames.query||""].list:[],i=$S({items:r,fields:c.fields});d({type:Yo.UPDATE_RESULT,records:i,totalCount:(null==(t=null==e?void 0:e[n.gqlNames.query])?void 0:t.totalCount)??c.totalCount})},h=()=>c.valuesVersions?Sr(c.valuesVersions).filter((e=>!!e.treeNodeId)):[],b=t.useMemo((()=>({limit:c.pagination,offset:c.offset,filters:Zo(c.filters),sort:c.sort,fullText:c.fullText,version:h()})),[]),{loading:x,data:w,fetchMore:E}=y(zo(n.gqlNames.query,c.fields,!c.offset),{fetchPolicy:"network-only",variables:b,onError:e=>{d({type:Yo.UPDATE_RESULT,error:e})}}),S=async()=>{try{const e=Zo(c.filters),t={limit:c.pagination,offset:c.offset,filters:e,sort:c.sort,fullText:c.fullText,version:h()},r=(await E({query:zo(n.gqlNames.query,c.fields,!c.offset),variables:t})).data;g(r)}catch(e){d({type:Yo.SET_LOADING,loading:!1})}},_=x||c.view.reload||c.loading;t.useEffect((()=>{w&&g(w)}),[w]),t.useEffect((()=>{c.loading&&S()}),[c.loading]),t.useEffect((()=>{c.view.reload&&(S(),v({variables:{key:m,value:c.view.current.id,global:!1}}),d({type:Yo.SET_VIEW_RELOAD,reload:!1}))}),[m,v,c.view,c.fields,d,n]);const k=e?!!s.searchSelection.selected.length||s.searchSelection.type===zn.search&&s.searchSelection.allSelected:!!s.selection.selected.length||s.selection.type===zn.search&&s.selection.allSelected;return r.jsx(Ko.Provider,{value:{state:c,dispatch:d},children:r.jsxs(No.Provider,{value:e,children:[r.jsxs(Jj,{children:[r.jsx(H_,{refetch:()=>{d({type:Yo.SET_LOADING,loading:!0})},library:n}),r.jsx(Mj,{active:k})]}),r.jsxs(ek,{$showSide:a.side.visible,className:a.side.visible?"wrapper-open":"wrapper-close",style:o,children:[r.jsx(Zj,{}),_&&r.jsx(Y,{}),!_&&c.error&&r.jsx(M,{message:c.error.message}),!_&&!c.error&&(c.records.length?r.jsx(OS,{}):r.jsx(AS,{}))]})]})})}function nk({selectionMode:e,library:t,style:n}){const{loading:i,view:o}=Do(t);return t.permissions.access_library?i?r.jsx(Y,{}):r.jsx(tk,{library:t,selectionMode:e,defaultView:o,style:n}):r.jsx(M,{type:q.PERMISSION_ERROR})}export{ps as C,Yy as E,lo as F,Iy as G,nk as L,ry as R,ys as S,ph as T,Is as U,Io as a,is as b,Ns as c,rl as d,Go as e,us as g,ls as t,hs as u};
