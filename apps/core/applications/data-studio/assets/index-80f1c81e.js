import{u as e,r as s,j as i}from"./useTranslation-6a88ac92.js";import{ao as r,aD as t,aE as a,bm as l}from"./recordIdentityFragment-3ccdcea1.js";import"./utils-c614281c.js";import{u as o,L as n}from"./LibraryItemsList-70530d6e.js";import{a as d,u as b,b as c,c as m,i as p,W as u,l as f,I as j,s as y,d as v}from"./index-135e49ab.js";import"./styled-components.browser.esm-2d72260f.js";import"./ImportReducerContext-19d27c8c.js";import"./index-8160faf7.js";import"./InboxOutlined-82488bac.js";function g({library:g}){var x,I,h;const{lang:R}=r(),{t:_}=e(),E=d(),L=b(),[q,A]=c(),{activePanel:F,selection:O}=m((e=>e)),{loading:M,data:N,error:P}=o({library:g}),S=null==(I=null==(x=null==N?void 0:N.libraries)?void 0:x.list[0])?void 0:I.permissions.access_library,T=p(E.currentApp,g);return s.useEffect((()=>{var e;if(M||P||!(null==(e=null==N?void 0:N.libraries)?void 0:e.list.length)||F!==u.LIBRARY||!S)return;const s=N.libraries.list[0],i=f(s.label,R);if(g!==(null==q?void 0:q.id)){const{query:e,type:r,filter:t,searchableFields:a}=s.gqlNames,{attributes:l}=s;A({id:g,name:i,filter:t,behavior:s.behavior,attributes:l,gql:{searchableFields:a,query:e,type:r},trees:s.linkedTrees,permissions:s.permissions})}const r={content:_("info.active-lib",{lib:i,appLabel:f(E.currentApp.label,R),interpolation:{escapeValue:!1}}),type:j.basic};L(y(r))}),[q,N,L,P,R,g,M,_,A,F,S]),s.useEffect((()=>{L(v({...O.selection,selected:O.selection.selected.filter((e=>e.library===g))}))}),[]),M?i.jsx(t,{}):P?i.jsx(a,{message:P.message}):(null==(h=null==N?void 0:N.libraries)?void 0:h.list.length)?S?T?i.jsx(n,{selectionMode:!1,library:N.libraries.list[0]},g):i.jsx(a,{message:_("items_list.not_in_app")}):i.jsx(a,{type:l.PERMISSION_ERROR}):i.jsx(a,{message:_("lib_detail.not_found",{libraryId:g})})}export{g as default};
